var gT=Object.defineProperty;var vT=(t,e,r)=>e in t?gT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var zp=(t,e,r)=>vT(t,typeof e!="symbol"?e+"":e,r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();/**
* @vue/shared v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function vg(t){const e=Object.create(null);for(const r of t.split(","))e[r]=1;return r=>r in e}const zt={},Ds=[],Mi=()=>{},yT=()=>!1,Fd=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),yg=t=>t.startsWith("onUpdate:"),Ar=Object.assign,bg=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},bT=Object.prototype.hasOwnProperty,_t=(t,e)=>bT.call(t,e),je=Array.isArray,Es=t=>Cl(t)==="[object Map]",Bd=t=>Cl(t)==="[object Set]",f0=t=>Cl(t)==="[object Date]",ct=t=>typeof t=="function",tr=t=>typeof t=="string",_i=t=>typeof t=="symbol",Ht=t=>t!==null&&typeof t=="object",IA=t=>(Ht(t)||ct(t))&&ct(t.then)&&ct(t.catch),RA=Object.prototype.toString,Cl=t=>RA.call(t),xT=t=>Cl(t).slice(8,-1),PA=t=>Cl(t)==="[object Object]",xg=t=>tr(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Iu=vg(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),kd=t=>{const e=Object.create(null);return r=>e[r]||(e[r]=t(r))},wT=/-(\w)/g,Gn=kd(t=>t.replace(wT,(e,r)=>r?r.toUpperCase():"")),NT=/\B([A-Z])/g,Go=kd(t=>t.replace(NT,"-$1").toLowerCase()),Id=kd(t=>t.charAt(0).toUpperCase()+t.slice(1)),qp=kd(t=>t?`on${Id(t)}`:""),za=(t,e)=>!Object.is(t,e),Uc=(t,...e)=>{for(let r=0;r<t.length;r++)t[r](...e)},$A=(t,e,r,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:r})},Jh=t=>{const e=parseFloat(t);return isNaN(e)?t:e},AT=t=>{const e=tr(t)?Number(t):NaN;return isNaN(e)?t:e};let d0;const Rd=()=>d0||(d0=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ia(t){if(je(t)){const e={};for(let r=0;r<t.length;r++){const n=t[r],i=tr(n)?CT(n):ia(n);if(i)for(const a in i)e[a]=i[a]}return e}else if(tr(t)||Ht(t))return t}const ST=/;(?![^(]*\))/g,DT=/:([^]+)/,ET=/\/\*[^]*?\*\//g;function CT(t){const e={};return t.replace(ET,"").split(ST).forEach(r=>{if(r){const n=r.split(DT);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function lt(t){let e="";if(tr(t))e=t;else if(je(t))for(let r=0;r<t.length;r++){const n=lt(t[r]);n&&(e+=n+" ")}else if(Ht(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}const MT="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",TT=vg(MT);function LA(t){return!!t||t===""}function _T(t,e){if(t.length!==e.length)return!1;let r=!0;for(let n=0;r&&n<t.length;n++)r=Pd(t[n],e[n]);return r}function Pd(t,e){if(t===e)return!0;let r=f0(t),n=f0(e);if(r||n)return r&&n?t.getTime()===e.getTime():!1;if(r=_i(t),n=_i(e),r||n)return t===e;if(r=je(t),n=je(e),r||n)return r&&n?_T(t,e):!1;if(r=Ht(t),n=Ht(e),r||n){if(!r||!n)return!1;const i=Object.keys(t).length,a=Object.keys(e).length;if(i!==a)return!1;for(const o in t){const s=t.hasOwnProperty(o),u=e.hasOwnProperty(o);if(s&&!u||!s&&u||!Pd(t[o],e[o]))return!1}}return String(t)===String(e)}function zA(t,e){return t.findIndex(r=>Pd(r,e))}const qA=t=>!!(t&&t.__v_isRef===!0),ar=t=>tr(t)?t:t==null?"":je(t)||Ht(t)&&(t.toString===RA||!ct(t.toString))?qA(t)?ar(t.value):JSON.stringify(t,UA,2):String(t),UA=(t,e)=>qA(e)?UA(t,e.value):Es(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((r,[n,i],a)=>(r[Up(n,a)+" =>"]=i,r),{})}:Bd(e)?{[`Set(${e.size})`]:[...e.values()].map(r=>Up(r))}:_i(e)?Up(e):Ht(e)&&!je(e)&&!PA(e)?String(e):e,Up=(t,e="")=>{var r;return _i(t)?`Symbol(${(r=t.description)!=null?r:e})`:t};/**
* @vue/reactivity v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let vn;class OT{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=vn,!e&&vn&&(this.index=(vn.scopes||(vn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].pause();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].resume();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].resume()}}run(e){if(this._active){const r=vn;try{return vn=this,e()}finally{vn=r}}}on(){++this._on===1&&(this.prevScope=vn,vn=this)}off(){this._on>0&&--this._on===0&&(vn=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(this.effects.length=0,r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.cleanups.length=0,this.scopes){for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function FT(){return vn}let Wt;const Hp=new WeakSet;class HA{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,vn&&vn.active&&vn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Hp.has(this)&&(Hp.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||WA(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,p0(this),jA(this);const e=Wt,r=ai;Wt=this,ai=!0;try{return this.fn()}finally{GA(this),Wt=e,ai=r,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Ag(e);this.deps=this.depsTail=void 0,p0(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Hp.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Yh(this)&&this.run()}get dirty(){return Yh(this)}}let VA=0,Ru,Pu;function WA(t,e=!1){if(t.flags|=8,e){t.next=Pu,Pu=t;return}t.next=Ru,Ru=t}function wg(){VA++}function Ng(){if(--VA>0)return;if(Pu){let e=Pu;for(Pu=void 0;e;){const r=e.next;e.next=void 0,e.flags&=-9,e=r}}let t;for(;Ru;){let e=Ru;for(Ru=void 0;e;){const r=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=r}}if(t)throw t}function jA(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function GA(t){let e,r=t.depsTail,n=r;for(;n;){const i=n.prevDep;n.version===-1?(n===r&&(r=i),Ag(n),BT(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=i}t.deps=e,t.depsTail=r}function Yh(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(KA(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function KA(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===el)||(t.globalVersion=el,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Yh(t))))return;t.flags|=2;const e=t.dep,r=Wt,n=ai;Wt=t,ai=!0;try{jA(t);const i=t.fn(t._value);(e.version===0||za(i,t._value))&&(t.flags|=128,t._value=i,e.version++)}catch(i){throw e.version++,i}finally{Wt=r,ai=n,GA(t),t.flags&=-3}}function Ag(t,e=!1){const{dep:r,prevSub:n,nextSub:i}=t;if(n&&(n.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=n,t.nextSub=void 0),r.subs===t&&(r.subs=n,!n&&r.computed)){r.computed.flags&=-5;for(let a=r.computed.deps;a;a=a.nextDep)Ag(a,!0)}!e&&!--r.sc&&r.map&&r.map.delete(r.key)}function BT(t){const{prevDep:e,nextDep:r}=t;e&&(e.nextDep=r,t.prevDep=void 0),r&&(r.prevDep=e,t.nextDep=void 0)}let ai=!0;const JA=[];function ca(){JA.push(ai),ai=!1}function fa(){const t=JA.pop();ai=t===void 0?!0:t}function p0(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const r=Wt;Wt=void 0;try{e()}finally{Wt=r}}}let el=0,kT=class{constructor(e,r){this.sub=e,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}};class $d{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!Wt||!ai||Wt===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==Wt)r=this.activeLink=new kT(Wt,this),Wt.deps?(r.prevDep=Wt.depsTail,Wt.depsTail.nextDep=r,Wt.depsTail=r):Wt.deps=Wt.depsTail=r,YA(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const n=r.nextDep;n.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=n),r.prevDep=Wt.depsTail,r.nextDep=void 0,Wt.depsTail.nextDep=r,Wt.depsTail=r,Wt.deps===r&&(Wt.deps=n)}return r}trigger(e){this.version++,el++,this.notify(e)}notify(e){wg();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{Ng()}}}function YA(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)YA(n)}const r=t.dep.subs;r!==t&&(t.prevSub=r,r&&(r.nextSub=t)),t.dep.subs=t}}const Zh=new WeakMap,Fo=Symbol(""),Xh=Symbol(""),tl=Symbol("");function Hr(t,e,r){if(ai&&Wt){let n=Zh.get(t);n||Zh.set(t,n=new Map);let i=n.get(r);i||(n.set(r,i=new $d),i.map=n,i.key=r),i.track()}}function Qi(t,e,r,n,i,a){const o=Zh.get(t);if(!o){el++;return}const s=u=>{u&&u.trigger()};if(wg(),e==="clear")o.forEach(s);else{const u=je(t),l=u&&xg(r);if(u&&r==="length"){const c=Number(n);o.forEach((f,d)=>{(d==="length"||d===tl||!_i(d)&&d>=c)&&s(f)})}else switch((r!==void 0||o.has(void 0))&&s(o.get(r)),l&&s(o.get(tl)),e){case"add":u?l&&s(o.get("length")):(s(o.get(Fo)),Es(t)&&s(o.get(Xh)));break;case"delete":u||(s(o.get(Fo)),Es(t)&&s(o.get(Xh)));break;case"set":Es(t)&&s(o.get(Fo));break}}Ng()}function us(t){const e=Ct(t);return e===t?e:(Hr(e,"iterate",tl),Vn(t)?e:e.map(_r))}function Ld(t){return Hr(t=Ct(t),"iterate",tl),t}const IT={__proto__:null,[Symbol.iterator](){return Vp(this,Symbol.iterator,_r)},concat(...t){return us(this).concat(...t.map(e=>je(e)?us(e):e))},entries(){return Vp(this,"entries",t=>(t[1]=_r(t[1]),t))},every(t,e){return qi(this,"every",t,e,void 0,arguments)},filter(t,e){return qi(this,"filter",t,e,r=>r.map(_r),arguments)},find(t,e){return qi(this,"find",t,e,_r,arguments)},findIndex(t,e){return qi(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return qi(this,"findLast",t,e,_r,arguments)},findLastIndex(t,e){return qi(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return qi(this,"forEach",t,e,void 0,arguments)},includes(...t){return Wp(this,"includes",t)},indexOf(...t){return Wp(this,"indexOf",t)},join(t){return us(this).join(t)},lastIndexOf(...t){return Wp(this,"lastIndexOf",t)},map(t,e){return qi(this,"map",t,e,void 0,arguments)},pop(){return mu(this,"pop")},push(...t){return mu(this,"push",t)},reduce(t,...e){return h0(this,"reduce",t,e)},reduceRight(t,...e){return h0(this,"reduceRight",t,e)},shift(){return mu(this,"shift")},some(t,e){return qi(this,"some",t,e,void 0,arguments)},splice(...t){return mu(this,"splice",t)},toReversed(){return us(this).toReversed()},toSorted(t){return us(this).toSorted(t)},toSpliced(...t){return us(this).toSpliced(...t)},unshift(...t){return mu(this,"unshift",t)},values(){return Vp(this,"values",_r)}};function Vp(t,e,r){const n=Ld(t),i=n[e]();return n!==t&&!Vn(t)&&(i._next=i.next,i.next=()=>{const a=i._next();return a.value&&(a.value=r(a.value)),a}),i}const RT=Array.prototype;function qi(t,e,r,n,i,a){const o=Ld(t),s=o!==t&&!Vn(t),u=o[e];if(u!==RT[e]){const f=u.apply(t,a);return s?_r(f):f}let l=r;o!==t&&(s?l=function(f,d){return r.call(this,_r(f),d,t)}:r.length>2&&(l=function(f,d){return r.call(this,f,d,t)}));const c=u.call(o,l,n);return s&&i?i(c):c}function h0(t,e,r,n){const i=Ld(t);let a=r;return i!==t&&(Vn(t)?r.length>3&&(a=function(o,s,u){return r.call(this,o,s,u,t)}):a=function(o,s,u){return r.call(this,o,_r(s),u,t)}),i[e](a,...n)}function Wp(t,e,r){const n=Ct(t);Hr(n,"iterate",tl);const i=n[e](...r);return(i===-1||i===!1)&&Eg(r[0])?(r[0]=Ct(r[0]),n[e](...r)):i}function mu(t,e,r=[]){ca(),wg();const n=Ct(t)[e].apply(t,r);return Ng(),fa(),n}const PT=vg("__proto__,__v_isRef,__isVue"),ZA=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(_i));function $T(t){_i(t)||(t=String(t));const e=Ct(this);return Hr(e,"has",t),e.hasOwnProperty(t)}class XA{constructor(e=!1,r=!1){this._isReadonly=e,this._isShallow=r}get(e,r,n){if(r==="__v_skip")return e.__v_skip;const i=this._isReadonly,a=this._isShallow;if(r==="__v_isReactive")return!i;if(r==="__v_isReadonly")return i;if(r==="__v_isShallow")return a;if(r==="__v_raw")return n===(i?a?KT:rS:a?tS:eS).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const o=je(e);if(!i){let u;if(o&&(u=IT[r]))return u;if(r==="hasOwnProperty")return $T}const s=Reflect.get(e,r,Gr(e)?e:n);return(_i(r)?ZA.has(r):PT(r))||(i||Hr(e,"get",r),a)?s:Gr(s)?o&&xg(r)?s:s.value:Ht(s)?i?iS(s):Ml(s):s}}class QA extends XA{constructor(e=!1){super(!1,e)}set(e,r,n,i){let a=e[r];if(!this._isShallow){const u=Ka(a);if(!Vn(n)&&!Ka(n)&&(a=Ct(a),n=Ct(n)),!je(e)&&Gr(a)&&!Gr(n))return u?!1:(a.value=n,!0)}const o=je(e)&&xg(r)?Number(r)<e.length:_t(e,r),s=Reflect.set(e,r,n,Gr(e)?e:i);return e===Ct(i)&&(o?za(n,a)&&Qi(e,"set",r,n):Qi(e,"add",r,n)),s}deleteProperty(e,r){const n=_t(e,r);e[r];const i=Reflect.deleteProperty(e,r);return i&&n&&Qi(e,"delete",r,void 0),i}has(e,r){const n=Reflect.has(e,r);return(!_i(r)||!ZA.has(r))&&Hr(e,"has",r),n}ownKeys(e){return Hr(e,"iterate",je(e)?"length":Fo),Reflect.ownKeys(e)}}class LT extends XA{constructor(e=!1){super(!0,e)}set(e,r){return!0}deleteProperty(e,r){return!0}}const zT=new QA,qT=new LT,UT=new QA(!0);const Qh=t=>t,nc=t=>Reflect.getPrototypeOf(t);function HT(t,e,r){return function(...n){const i=this.__v_raw,a=Ct(i),o=Es(a),s=t==="entries"||t===Symbol.iterator&&o,u=t==="keys"&&o,l=i[t](...n),c=r?Qh:e?df:_r;return!e&&Hr(a,"iterate",u?Xh:Fo),{next(){const{value:f,done:d}=l.next();return d?{value:f,done:d}:{value:s?[c(f[0]),c(f[1])]:c(f),done:d}},[Symbol.iterator](){return this}}}}function ic(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function VT(t,e){const r={get(i){const a=this.__v_raw,o=Ct(a),s=Ct(i);t||(za(i,s)&&Hr(o,"get",i),Hr(o,"get",s));const{has:u}=nc(o),l=e?Qh:t?df:_r;if(u.call(o,i))return l(a.get(i));if(u.call(o,s))return l(a.get(s));a!==o&&a.get(i)},get size(){const i=this.__v_raw;return!t&&Hr(Ct(i),"iterate",Fo),Reflect.get(i,"size",i)},has(i){const a=this.__v_raw,o=Ct(a),s=Ct(i);return t||(za(i,s)&&Hr(o,"has",i),Hr(o,"has",s)),i===s?a.has(i):a.has(i)||a.has(s)},forEach(i,a){const o=this,s=o.__v_raw,u=Ct(s),l=e?Qh:t?df:_r;return!t&&Hr(u,"iterate",Fo),s.forEach((c,f)=>i.call(a,l(c),l(f),o))}};return Ar(r,t?{add:ic("add"),set:ic("set"),delete:ic("delete"),clear:ic("clear")}:{add(i){!e&&!Vn(i)&&!Ka(i)&&(i=Ct(i));const a=Ct(this);return nc(a).has.call(a,i)||(a.add(i),Qi(a,"add",i,i)),this},set(i,a){!e&&!Vn(a)&&!Ka(a)&&(a=Ct(a));const o=Ct(this),{has:s,get:u}=nc(o);let l=s.call(o,i);l||(i=Ct(i),l=s.call(o,i));const c=u.call(o,i);return o.set(i,a),l?za(a,c)&&Qi(o,"set",i,a):Qi(o,"add",i,a),this},delete(i){const a=Ct(this),{has:o,get:s}=nc(a);let u=o.call(a,i);u||(i=Ct(i),u=o.call(a,i)),s&&s.call(a,i);const l=a.delete(i);return u&&Qi(a,"delete",i,void 0),l},clear(){const i=Ct(this),a=i.size!==0,o=i.clear();return a&&Qi(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{r[i]=HT(i,t,e)}),r}function Sg(t,e){const r=VT(t,e);return(n,i,a)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?n:Reflect.get(_t(r,i)&&i in n?r:n,i,a)}const WT={get:Sg(!1,!1)},jT={get:Sg(!1,!0)},GT={get:Sg(!0,!1)};const eS=new WeakMap,tS=new WeakMap,rS=new WeakMap,KT=new WeakMap;function JT(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function YT(t){return t.__v_skip||!Object.isExtensible(t)?0:JT(xT(t))}function Ml(t){return Ka(t)?t:Dg(t,!1,zT,WT,eS)}function nS(t){return Dg(t,!1,UT,jT,tS)}function iS(t){return Dg(t,!0,qT,GT,rS)}function Dg(t,e,r,n,i){if(!Ht(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const a=YT(t);if(a===0)return t;const o=i.get(t);if(o)return o;const s=new Proxy(t,a===2?n:r);return i.set(t,s),s}function Cs(t){return Ka(t)?Cs(t.__v_raw):!!(t&&t.__v_isReactive)}function Ka(t){return!!(t&&t.__v_isReadonly)}function Vn(t){return!!(t&&t.__v_isShallow)}function Eg(t){return t?!!t.__v_raw:!1}function Ct(t){const e=t&&t.__v_raw;return e?Ct(e):t}function aS(t){return!_t(t,"__v_skip")&&Object.isExtensible(t)&&$A(t,"__v_skip",!0),t}const _r=t=>Ht(t)?Ml(t):t,df=t=>Ht(t)?iS(t):t;function Gr(t){return t?t.__v_isRef===!0:!1}function ut(t){return oS(t,!1)}function ZT(t){return oS(t,!0)}function oS(t,e){return Gr(t)?t:new XT(t,e)}class XT{constructor(e,r){this.dep=new $d,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?e:Ct(e),this._value=r?e:_r(e),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(e){const r=this._rawValue,n=this.__v_isShallow||Vn(e)||Ka(e);e=n?e:Ct(e),za(e,r)&&(this._rawValue=e,this._value=n?e:_r(e),this.dep.trigger())}}function Oe(t){return Gr(t)?t.value:t}const QT={get:(t,e,r)=>e==="__v_raw"?t:Oe(Reflect.get(t,e,r)),set:(t,e,r,n)=>{const i=t[e];return Gr(i)&&!Gr(r)?(i.value=r,!0):Reflect.set(t,e,r,n)}};function sS(t){return Cs(t)?t:new Proxy(t,QT)}class e_{constructor(e){this.__v_isRef=!0,this._value=void 0;const r=this.dep=new $d,{get:n,set:i}=e(r.track.bind(r),r.trigger.bind(r));this._get=n,this._set=i}get value(){return this._value=this._get()}set value(e){this._set(e)}}function t_(t){return new e_(t)}class r_{constructor(e,r,n){this.fn=e,this.setter=r,this._value=void 0,this.dep=new $d(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=el-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&Wt!==this)return WA(this,!0),!0}get value(){const e=this.dep.track();return KA(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function n_(t,e,r=!1){let n,i;return ct(t)?n=t:(n=t.get,i=t.set),new r_(n,i,r)}const ac={},pf=new WeakMap;let bo;function i_(t,e=!1,r=bo){if(r){let n=pf.get(r);n||pf.set(r,n=[]),n.push(t)}}function a_(t,e,r=zt){const{immediate:n,deep:i,once:a,scheduler:o,augmentJob:s,call:u}=r,l=w=>i?w:Vn(w)||i===!1||i===0?ea(w,1):ea(w);let c,f,d,p,h=!1,m=!1;if(Gr(t)?(f=()=>t.value,h=Vn(t)):Cs(t)?(f=()=>l(t),h=!0):je(t)?(m=!0,h=t.some(w=>Cs(w)||Vn(w)),f=()=>t.map(w=>{if(Gr(w))return w.value;if(Cs(w))return l(w);if(ct(w))return u?u(w,2):w()})):ct(t)?e?f=u?()=>u(t,2):t:f=()=>{if(d){ca();try{d()}finally{fa()}}const w=bo;bo=c;try{return u?u(t,3,[p]):t(p)}finally{bo=w}}:f=Mi,e&&i){const w=f,x=i===!0?1/0:i;f=()=>ea(w(),x)}const g=FT(),y=()=>{c.stop(),g&&g.active&&bg(g.effects,c)};if(a&&e){const w=e;e=(...x)=>{w(...x),y()}}let N=m?new Array(t.length).fill(ac):ac;const v=w=>{if(!(!(c.flags&1)||!c.dirty&&!w))if(e){const x=c.run();if(i||h||(m?x.some((b,S)=>za(b,N[S])):za(x,N))){d&&d();const b=bo;bo=c;try{const S=[x,N===ac?void 0:m&&N[0]===ac?[]:N,p];u?u(e,3,S):e(...S),N=x}finally{bo=b}}}else c.run()};return s&&s(v),c=new HA(f),c.scheduler=o?()=>o(v,!1):v,p=w=>i_(w,!1,c),d=c.onStop=()=>{const w=pf.get(c);if(w){if(u)u(w,4);else for(const x of w)x();pf.delete(c)}},e?n?v(!0):N=c.run():o?o(v.bind(null,!0),!0):c.run(),y.pause=c.pause.bind(c),y.resume=c.resume.bind(c),y.stop=y,y}function ea(t,e=1/0,r){if(e<=0||!Ht(t)||t.__v_skip||(r=r||new Set,r.has(t)))return t;if(r.add(t),e--,Gr(t))ea(t.value,e,r);else if(je(t))for(let n=0;n<t.length;n++)ea(t[n],e,r);else if(Bd(t)||Es(t))t.forEach(n=>{ea(n,e,r)});else if(PA(t)){for(const n in t)ea(t[n],e,r);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&ea(t[n],e,r)}return t}/**
* @vue/runtime-core v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Tl(t,e,r,n){try{return n?t(...n):t()}catch(i){zd(i,e,r)}}function ui(t,e,r,n){if(ct(t)){const i=Tl(t,e,r,n);return i&&IA(i)&&i.catch(a=>{zd(a,e,r)}),i}if(je(t)){const i=[];for(let a=0;a<t.length;a++)i.push(ui(t[a],e,r,n));return i}}function zd(t,e,r,n=!0){const i=e?e.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||zt;if(e){let s=e.parent;const u=e.proxy,l=`https://vuejs.org/error-reference/#runtime-${r}`;for(;s;){const c=s.ec;if(c){for(let f=0;f<c.length;f++)if(c[f](t,u,l)===!1)return}s=s.parent}if(a){ca(),Tl(a,null,10,[t,u,l]),fa();return}}o_(t,r,i,n,o)}function o_(t,e,r,n=!0,i=!1){if(i)throw t;console.error(t)}const rn=[];let wi=-1;const Ms=[];let Sa=null,vs=0;const uS=Promise.resolve();let hf=null;function Cg(t){const e=hf||uS;return t?e.then(this?t.bind(this):t):e}function s_(t){let e=wi+1,r=rn.length;for(;e<r;){const n=e+r>>>1,i=rn[n],a=rl(i);a<t||a===t&&i.flags&2?e=n+1:r=n}return e}function Mg(t){if(!(t.flags&1)){const e=rl(t),r=rn[rn.length-1];!r||!(t.flags&2)&&e>=rl(r)?rn.push(t):rn.splice(s_(e),0,t),t.flags|=1,lS()}}function lS(){hf||(hf=uS.then(fS))}function u_(t){je(t)?Ms.push(...t):Sa&&t.id===-1?Sa.splice(vs+1,0,t):t.flags&1||(Ms.push(t),t.flags|=1),lS()}function m0(t,e,r=wi+1){for(;r<rn.length;r++){const n=rn[r];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;rn.splice(r,1),r--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function cS(t){if(Ms.length){const e=[...new Set(Ms)].sort((r,n)=>rl(r)-rl(n));if(Ms.length=0,Sa){Sa.push(...e);return}for(Sa=e,vs=0;vs<Sa.length;vs++){const r=Sa[vs];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}Sa=null,vs=0}}const rl=t=>t.id==null?t.flags&2?-1:1/0:t.id;function fS(t){try{for(wi=0;wi<rn.length;wi++){const e=rn[wi];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Tl(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;wi<rn.length;wi++){const e=rn[wi];e&&(e.flags&=-2)}wi=-1,rn.length=0,cS(),hf=null,(rn.length||Ms.length)&&fS()}}let xn=null,dS=null;function mf(t){const e=xn;return xn=t,dS=t&&t.type.__scopeId||null,e}function qd(t,e=xn,r){if(!e||t._n)return t;const n=(...i)=>{n._d&&T0(-1);const a=mf(e);let o;try{o=t(...i)}finally{mf(a),n._d&&T0(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function Rs(t,e){if(xn===null)return t;const r=Gd(xn),n=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[a,o,s,u=zt]=e[i];a&&(ct(a)&&(a={mounted:a,updated:a}),a.deep&&ea(o),n.push({dir:a,instance:r,value:o,oldValue:void 0,arg:s,modifiers:u}))}return t}function ho(t,e,r,n){const i=t.dirs,a=e&&e.dirs;for(let o=0;o<i.length;o++){const s=i[o];a&&(s.oldValue=a[o].value);let u=s.dir[n];u&&(ca(),ui(u,r,8,[t.el,s,t,e]),fa())}}const pS=Symbol("_vte"),hS=t=>t.__isTeleport,$u=t=>t&&(t.disabled||t.disabled===""),g0=t=>t&&(t.defer||t.defer===""),v0=t=>typeof SVGElement<"u"&&t instanceof SVGElement,y0=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,em=(t,e)=>{const r=t&&t.to;return tr(r)?e?e(r):null:r},mS={name:"Teleport",__isTeleport:!0,process(t,e,r,n,i,a,o,s,u,l){const{mc:c,pc:f,pbc:d,o:{insert:p,querySelector:h,createText:m,createComment:g}}=l,y=$u(e.props);let{shapeFlag:N,children:v,dynamicChildren:w}=e;if(t==null){const x=e.el=m(""),b=e.anchor=m("");p(x,r,n),p(b,r,n);const S=(A,E)=>{N&16&&(i&&i.isCE&&(i.ce._teleportTarget=A),c(v,A,E,i,a,o,s,u))},C=()=>{const A=e.target=em(e.props,h),E=gS(A,e,m,p);A&&(o!=="svg"&&v0(A)?o="svg":o!=="mathml"&&y0(A)&&(o="mathml"),y||(S(A,E),Hc(e,!1)))};y&&(S(r,b),Hc(e,!0)),g0(e.props)?tn(()=>{C(),e.el.__isMounted=!0},a):C()}else{if(g0(e.props)&&!t.el.__isMounted){tn(()=>{mS.process(t,e,r,n,i,a,o,s,u,l),delete t.el.__isMounted},a);return}e.el=t.el,e.targetStart=t.targetStart;const x=e.anchor=t.anchor,b=e.target=t.target,S=e.targetAnchor=t.targetAnchor,C=$u(t.props),A=C?r:b,E=C?x:S;if(o==="svg"||v0(b)?o="svg":(o==="mathml"||y0(b))&&(o="mathml"),w?(d(t.dynamicChildren,w,A,i,a,o,s),Fg(t,e,!0)):u||f(t,e,A,E,i,a,o,s,!1),y)C?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):oc(e,r,x,l,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const D=e.target=em(e.props,h);D&&oc(e,D,null,l,0)}else C&&oc(e,b,S,l,1);Hc(e,y)}},remove(t,e,r,{um:n,o:{remove:i}},a){const{shapeFlag:o,children:s,anchor:u,targetStart:l,targetAnchor:c,target:f,props:d}=t;if(f&&(i(l),i(c)),a&&i(u),o&16){const p=a||!$u(d);for(let h=0;h<s.length;h++){const m=s[h];n(m,e,r,p,!!m.dynamicChildren)}}},move:oc,hydrate:l_};function oc(t,e,r,{o:{insert:n},m:i},a=2){a===0&&n(t.targetAnchor,e,r);const{el:o,anchor:s,shapeFlag:u,children:l,props:c}=t,f=a===2;if(f&&n(o,e,r),(!f||$u(c))&&u&16)for(let d=0;d<l.length;d++)i(l[d],e,r,2);f&&n(s,e,r)}function l_(t,e,r,n,i,a,{o:{nextSibling:o,parentNode:s,querySelector:u,insert:l,createText:c}},f){const d=e.target=em(e.props,u);if(d){const p=$u(e.props),h=d._lpa||d.firstChild;if(e.shapeFlag&16)if(p)e.anchor=f(o(t),e,s(t),r,n,i,a),e.targetStart=h,e.targetAnchor=h&&o(h);else{e.anchor=o(t);let m=h;for(;m;){if(m&&m.nodeType===8){if(m.data==="teleport start anchor")e.targetStart=m;else if(m.data==="teleport anchor"){e.targetAnchor=m,d._lpa=e.targetAnchor&&o(e.targetAnchor);break}}m=o(m)}e.targetAnchor||gS(d,e,c,l),f(h&&o(h),e,d,r,n,i,a)}Hc(e,p)}return e.anchor&&o(e.anchor)}const Tg=mS;function Hc(t,e){const r=t.ctx;if(r&&r.ut){let n,i;for(e?(n=t.el,i=t.anchor):(n=t.targetStart,i=t.targetAnchor);n&&n!==i;)n.nodeType===1&&n.setAttribute("data-v-owner",r.uid),n=n.nextSibling;r.ut()}}function gS(t,e,r,n){const i=e.targetStart=r(""),a=e.targetAnchor=r("");return i[pS]=a,t&&(n(i,t),n(a,t)),a}const Da=Symbol("_leaveCb"),sc=Symbol("_enterCb");function c_(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return er(()=>{t.isMounted=!0}),Vd(()=>{t.isUnmounting=!0}),t}const Bn=[Function,Array],vS={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Bn,onEnter:Bn,onAfterEnter:Bn,onEnterCancelled:Bn,onBeforeLeave:Bn,onLeave:Bn,onAfterLeave:Bn,onLeaveCancelled:Bn,onBeforeAppear:Bn,onAppear:Bn,onAfterAppear:Bn,onAppearCancelled:Bn},yS=t=>{const e=t.subTree;return e.component?yS(e.component):e},f_={name:"BaseTransition",props:vS,setup(t,{slots:e}){const r=HS(),n=c_();return()=>{const i=e.default&&wS(e.default(),!0);if(!i||!i.length)return;const a=bS(i),o=Ct(t),{mode:s}=o;if(n.isLeaving)return jp(a);const u=b0(a);if(!u)return jp(a);let l=tm(u,o,n,r,f=>l=f);u.type!==nn&&nl(u,l);let c=r.subTree&&b0(r.subTree);if(c&&c.type!==nn&&!wo(u,c)&&yS(r).type!==nn){let f=tm(c,o,n,r);if(nl(c,f),s==="out-in"&&u.type!==nn)return n.isLeaving=!0,f.afterLeave=()=>{n.isLeaving=!1,r.job.flags&8||r.update(),delete f.afterLeave,c=void 0},jp(a);s==="in-out"&&u.type!==nn?f.delayLeave=(d,p,h)=>{const m=xS(n,c);m[String(c.key)]=c,d[Da]=()=>{p(),d[Da]=void 0,delete l.delayedLeave,c=void 0},l.delayedLeave=()=>{h(),delete l.delayedLeave,c=void 0}}:c=void 0}else c&&(c=void 0);return a}}};function bS(t){let e=t[0];if(t.length>1){for(const r of t)if(r.type!==nn){e=r;break}}return e}const d_=f_;function xS(t,e){const{leavingVNodes:r}=t;let n=r.get(e.type);return n||(n=Object.create(null),r.set(e.type,n)),n}function tm(t,e,r,n,i){const{appear:a,mode:o,persisted:s=!1,onBeforeEnter:u,onEnter:l,onAfterEnter:c,onEnterCancelled:f,onBeforeLeave:d,onLeave:p,onAfterLeave:h,onLeaveCancelled:m,onBeforeAppear:g,onAppear:y,onAfterAppear:N,onAppearCancelled:v}=e,w=String(t.key),x=xS(r,t),b=(A,E)=>{A&&ui(A,n,9,E)},S=(A,E)=>{const D=E[1];b(A,E),je(A)?A.every(M=>M.length<=1)&&D():A.length<=1&&D()},C={mode:o,persisted:s,beforeEnter(A){let E=u;if(!r.isMounted)if(a)E=g||u;else return;A[Da]&&A[Da](!0);const D=x[w];D&&wo(t,D)&&D.el[Da]&&D.el[Da](),b(E,[A])},enter(A){let E=l,D=c,M=f;if(!r.isMounted)if(a)E=y||l,D=N||c,M=v||f;else return;let F=!1;const I=A[sc]=P=>{F||(F=!0,P?b(M,[A]):b(D,[A]),C.delayedLeave&&C.delayedLeave(),A[sc]=void 0)};E?S(E,[A,I]):I()},leave(A,E){const D=String(t.key);if(A[sc]&&A[sc](!0),r.isUnmounting)return E();b(d,[A]);let M=!1;const F=A[Da]=I=>{M||(M=!0,E(),I?b(m,[A]):b(h,[A]),A[Da]=void 0,x[D]===t&&delete x[D])};x[D]=t,p?S(p,[A,F]):F()},clone(A){const E=tm(A,e,r,n,i);return i&&i(E),E}};return C}function jp(t){if(Ud(t))return t=Ja(t),t.children=null,t}function b0(t){if(!Ud(t))return hS(t.type)&&t.children?bS(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:r}=t;if(r){if(e&16)return r[0];if(e&32&&ct(r.default))return r.default()}}function nl(t,e){t.shapeFlag&6&&t.component?(t.transition=e,nl(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function wS(t,e=!1,r){let n=[],i=0;for(let a=0;a<t.length;a++){let o=t[a];const s=r==null?o.key:String(r)+String(o.key!=null?o.key:a);o.type===jt?(o.patchFlag&128&&i++,n=n.concat(wS(o.children,e,s))):(e||o.type!==nn)&&n.push(s!=null?Ja(o,{key:s}):o)}if(i>1)for(let a=0;a<n.length;a++)n[a].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function Er(t,e){return ct(t)?Ar({name:t.name},e,{setup:t}):t}function NS(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function gf(t,e,r,n,i=!1){if(je(t)){t.forEach((h,m)=>gf(h,e&&(je(e)?e[m]:e),r,n,i));return}if(Lu(n)&&!i){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&gf(t,e,r,n.component.subTree);return}const a=n.shapeFlag&4?Gd(n.component):n.el,o=i?null:a,{i:s,r:u}=t,l=e&&e.r,c=s.refs===zt?s.refs={}:s.refs,f=s.setupState,d=Ct(f),p=f===zt?()=>!1:h=>_t(d,h);if(l!=null&&l!==u&&(tr(l)?(c[l]=null,p(l)&&(f[l]=null)):Gr(l)&&(l.value=null)),ct(u))Tl(u,s,12,[o,c]);else{const h=tr(u),m=Gr(u);if(h||m){const g=()=>{if(t.f){const y=h?p(u)?f[u]:c[u]:u.value;i?je(y)&&bg(y,a):je(y)?y.includes(a)||y.push(a):h?(c[u]=[a],p(u)&&(f[u]=c[u])):(u.value=[a],t.k&&(c[t.k]=u.value))}else h?(c[u]=o,p(u)&&(f[u]=o)):m&&(u.value=o,t.k&&(c[t.k]=o))};o?(g.id=-1,tn(g,r)):g()}}}Rd().requestIdleCallback;Rd().cancelIdleCallback;const Lu=t=>!!t.type.__asyncLoader,Ud=t=>t.type.__isKeepAlive;function p_(t,e){AS(t,"a",e)}function h_(t,e){AS(t,"da",e)}function AS(t,e,r=Br){const n=t.__wdc||(t.__wdc=()=>{let i=r;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(Hd(e,n,r),r){let i=r.parent;for(;i&&i.parent;)Ud(i.parent.vnode)&&m_(n,e,r,i),i=i.parent}}function m_(t,e,r,n){const i=Hd(e,t,n,!0);_l(()=>{bg(n[e],i)},r)}function Hd(t,e,r=Br,n=!1){if(r){const i=r[t]||(r[t]=[]),a=e.__weh||(e.__weh=(...o)=>{ca();const s=Ol(r),u=ui(e,r,t,o);return s(),fa(),u});return n?i.unshift(a):i.push(a),a}}const ha=t=>(e,r=Br)=>{(!al||t==="sp")&&Hd(t,(...n)=>e(...n),r)},g_=ha("bm"),er=ha("m"),v_=ha("bu"),y_=ha("u"),Vd=ha("bum"),_l=ha("um"),b_=ha("sp"),x_=ha("rtg"),w_=ha("rtc");function N_(t,e=Br){Hd("ec",t,e)}const A_="components";function S_(t,e){return E_(A_,t,!0,e)||t}const D_=Symbol.for("v-ndc");function E_(t,e,r=!0,n=!1){const i=xn||Br;if(i){const a=i.type;{const s=dO(a,!1);if(s&&(s===e||s===Gn(e)||s===Id(Gn(e))))return a}const o=x0(i[t]||a[t],e)||x0(i.appContext[t],e);return!o&&n?a:o}}function x0(t,e){return t&&(t[e]||t[Gn(e)]||t[Id(Gn(e))])}function aa(t,e,r,n){let i;const a=r,o=je(t);if(o||tr(t)){const s=o&&Cs(t);let u=!1,l=!1;s&&(u=!Vn(t),l=Ka(t),t=Ld(t)),i=new Array(t.length);for(let c=0,f=t.length;c<f;c++)i[c]=e(u?l?df(_r(t[c])):_r(t[c]):t[c],c,void 0,a)}else if(typeof t=="number"){i=new Array(t);for(let s=0;s<t;s++)i[s]=e(s+1,s,void 0,a)}else if(Ht(t))if(t[Symbol.iterator])i=Array.from(t,(s,u)=>e(s,u,void 0,a));else{const s=Object.keys(t);i=new Array(s.length);for(let u=0,l=s.length;u<l;u++){const c=s[u];i[u]=e(t[c],c,u,a)}}else i=[];return i}const rm=t=>t?VS(t)?Gd(t):rm(t.parent):null,zu=Ar(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>rm(t.parent),$root:t=>rm(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>DS(t),$forceUpdate:t=>t.f||(t.f=()=>{Mg(t.update)}),$nextTick:t=>t.n||(t.n=Cg.bind(t.proxy)),$watch:t=>K_.bind(t)}),Gp=(t,e)=>t!==zt&&!t.__isScriptSetup&&_t(t,e),C_={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:r,setupState:n,data:i,props:a,accessCache:o,type:s,appContext:u}=t;let l;if(e[0]!=="$"){const p=o[e];if(p!==void 0)switch(p){case 1:return n[e];case 2:return i[e];case 4:return r[e];case 3:return a[e]}else{if(Gp(n,e))return o[e]=1,n[e];if(i!==zt&&_t(i,e))return o[e]=2,i[e];if((l=t.propsOptions[0])&&_t(l,e))return o[e]=3,a[e];if(r!==zt&&_t(r,e))return o[e]=4,r[e];nm&&(o[e]=0)}}const c=zu[e];let f,d;if(c)return e==="$attrs"&&Hr(t.attrs,"get",""),c(t);if((f=s.__cssModules)&&(f=f[e]))return f;if(r!==zt&&_t(r,e))return o[e]=4,r[e];if(d=u.config.globalProperties,_t(d,e))return d[e]},set({_:t},e,r){const{data:n,setupState:i,ctx:a}=t;return Gp(i,e)?(i[e]=r,!0):n!==zt&&_t(n,e)?(n[e]=r,!0):_t(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(a[e]=r,!0)},has({_:{data:t,setupState:e,accessCache:r,ctx:n,appContext:i,propsOptions:a}},o){let s;return!!r[o]||t!==zt&&_t(t,o)||Gp(e,o)||(s=a[0])&&_t(s,o)||_t(n,o)||_t(zu,o)||_t(i.config.globalProperties,o)},defineProperty(t,e,r){return r.get!=null?t._.accessCache[e]=0:_t(r,"value")&&this.set(t,e,r.value,null),Reflect.defineProperty(t,e,r)}};function w0(t){return je(t)?t.reduce((e,r)=>(e[r]=null,e),{}):t}let nm=!0;function M_(t){const e=DS(t),r=t.proxy,n=t.ctx;nm=!1,e.beforeCreate&&N0(e.beforeCreate,t,"bc");const{data:i,computed:a,methods:o,watch:s,provide:u,inject:l,created:c,beforeMount:f,mounted:d,beforeUpdate:p,updated:h,activated:m,deactivated:g,beforeDestroy:y,beforeUnmount:N,destroyed:v,unmounted:w,render:x,renderTracked:b,renderTriggered:S,errorCaptured:C,serverPrefetch:A,expose:E,inheritAttrs:D,components:M,directives:F,filters:I}=e;if(l&&T_(l,n,null),o)for(const $ in o){const O=o[$];ct(O)&&(n[$]=O.bind(r))}if(i){const $=i.call(r,r);Ht($)&&(t.data=Ml($))}if(nm=!0,a)for(const $ in a){const O=a[$],W=ct(O)?O.bind(r,r):ct(O.get)?O.get.bind(r,r):Mi,R=!ct(O)&&ct(O.set)?O.set.bind(r):Mi,ie=Wr({get:W,set:R});Object.defineProperty(n,$,{enumerable:!0,configurable:!0,get:()=>ie.value,set:te=>ie.value=te})}if(s)for(const $ in s)SS(s[$],n,r,$);if(u){const $=ct(u)?u.call(r):u;Reflect.ownKeys($).forEach(O=>{Vc(O,$[O])})}c&&N0(c,t,"c");function T($,O){je(O)?O.forEach(W=>$(W.bind(r))):O&&$(O.bind(r))}if(T(g_,f),T(er,d),T(v_,p),T(y_,h),T(p_,m),T(h_,g),T(N_,C),T(w_,b),T(x_,S),T(Vd,N),T(_l,w),T(b_,A),je(E))if(E.length){const $=t.exposed||(t.exposed={});E.forEach(O=>{Object.defineProperty($,O,{get:()=>r[O],set:W=>r[O]=W})})}else t.exposed||(t.exposed={});x&&t.render===Mi&&(t.render=x),D!=null&&(t.inheritAttrs=D),M&&(t.components=M),F&&(t.directives=F),A&&NS(t)}function T_(t,e,r=Mi){je(t)&&(t=im(t));for(const n in t){const i=t[n];let a;Ht(i)?"default"in i?a=oi(i.from||n,i.default,!0):a=oi(i.from||n):a=oi(i),Gr(a)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>a.value,set:o=>a.value=o}):e[n]=a}}function N0(t,e,r){ui(je(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,r)}function SS(t,e,r,n){let i=n.includes(".")?RS(r,n):()=>r[n];if(tr(t)){const a=e[t];ct(a)&&Ti(i,a)}else if(ct(t))Ti(i,t.bind(r));else if(Ht(t))if(je(t))t.forEach(a=>SS(a,e,r,n));else{const a=ct(t.handler)?t.handler.bind(r):e[t.handler];ct(a)&&Ti(i,a,t)}}function DS(t){const e=t.type,{mixins:r,extends:n}=e,{mixins:i,optionsCache:a,config:{optionMergeStrategies:o}}=t.appContext,s=a.get(e);let u;return s?u=s:!i.length&&!r&&!n?u=e:(u={},i.length&&i.forEach(l=>vf(u,l,o,!0)),vf(u,e,o)),Ht(e)&&a.set(e,u),u}function vf(t,e,r,n=!1){const{mixins:i,extends:a}=e;a&&vf(t,a,r,!0),i&&i.forEach(o=>vf(t,o,r,!0));for(const o in e)if(!(n&&o==="expose")){const s=__[o]||r&&r[o];t[o]=s?s(t[o],e[o]):e[o]}return t}const __={data:A0,props:S0,emits:S0,methods:Cu,computed:Cu,beforeCreate:en,created:en,beforeMount:en,mounted:en,beforeUpdate:en,updated:en,beforeDestroy:en,beforeUnmount:en,destroyed:en,unmounted:en,activated:en,deactivated:en,errorCaptured:en,serverPrefetch:en,components:Cu,directives:Cu,watch:F_,provide:A0,inject:O_};function A0(t,e){return e?t?function(){return Ar(ct(t)?t.call(this,this):t,ct(e)?e.call(this,this):e)}:e:t}function O_(t,e){return Cu(im(t),im(e))}function im(t){if(je(t)){const e={};for(let r=0;r<t.length;r++)e[t[r]]=t[r];return e}return t}function en(t,e){return t?[...new Set([].concat(t,e))]:e}function Cu(t,e){return t?Ar(Object.create(null),t,e):e}function S0(t,e){return t?je(t)&&je(e)?[...new Set([...t,...e])]:Ar(Object.create(null),w0(t),w0(e??{})):e}function F_(t,e){if(!t)return e;if(!e)return t;const r=Ar(Object.create(null),t);for(const n in e)r[n]=en(t[n],e[n]);return r}function ES(){return{app:null,config:{isNativeTag:yT,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let B_=0;function k_(t,e){return function(n,i=null){ct(n)||(n=Ar({},n)),i!=null&&!Ht(i)&&(i=null);const a=ES(),o=new WeakSet,s=[];let u=!1;const l=a.app={_uid:B_++,_component:n,_props:i,_container:null,_context:a,_instance:null,version:hO,get config(){return a.config},set config(c){},use(c,...f){return o.has(c)||(c&&ct(c.install)?(o.add(c),c.install(l,...f)):ct(c)&&(o.add(c),c(l,...f))),l},mixin(c){return a.mixins.includes(c)||a.mixins.push(c),l},component(c,f){return f?(a.components[c]=f,l):a.components[c]},directive(c,f){return f?(a.directives[c]=f,l):a.directives[c]},mount(c,f,d){if(!u){const p=l._ceVNode||Nt(n,i);return p.appContext=a,d===!0?d="svg":d===!1&&(d=void 0),t(p,c,d),u=!0,l._container=c,c.__vue_app__=l,Gd(p.component)}},onUnmount(c){s.push(c)},unmount(){u&&(ui(s,l._instance,16),t(null,l._container),delete l._container.__vue_app__)},provide(c,f){return a.provides[c]=f,l},runWithContext(c){const f=Ts;Ts=l;try{return c()}finally{Ts=f}}};return l}}let Ts=null;function Vc(t,e){if(Br){let r=Br.provides;const n=Br.parent&&Br.parent.provides;n===r&&(r=Br.provides=Object.create(n)),r[t]=e}}function oi(t,e,r=!1){const n=Br||xn;if(n||Ts){const i=Ts?Ts._context.provides:n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return r&&ct(e)?e.call(n&&n.proxy):e}}const CS={},MS=()=>Object.create(CS),TS=t=>Object.getPrototypeOf(t)===CS;function I_(t,e,r,n=!1){const i={},a=MS();t.propsDefaults=Object.create(null),_S(t,e,i,a);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);r?t.props=n?i:nS(i):t.type.props?t.props=i:t.props=a,t.attrs=a}function R_(t,e,r,n){const{props:i,attrs:a,vnode:{patchFlag:o}}=t,s=Ct(i),[u]=t.propsOptions;let l=!1;if((n||o>0)&&!(o&16)){if(o&8){const c=t.vnode.dynamicProps;for(let f=0;f<c.length;f++){let d=c[f];if(Wd(t.emitsOptions,d))continue;const p=e[d];if(u)if(_t(a,d))p!==a[d]&&(a[d]=p,l=!0);else{const h=Gn(d);i[h]=am(u,s,h,p,t,!1)}else p!==a[d]&&(a[d]=p,l=!0)}}}else{_S(t,e,i,a)&&(l=!0);let c;for(const f in s)(!e||!_t(e,f)&&((c=Go(f))===f||!_t(e,c)))&&(u?r&&(r[f]!==void 0||r[c]!==void 0)&&(i[f]=am(u,s,f,void 0,t,!0)):delete i[f]);if(a!==s)for(const f in a)(!e||!_t(e,f))&&(delete a[f],l=!0)}l&&Qi(t.attrs,"set","")}function _S(t,e,r,n){const[i,a]=t.propsOptions;let o=!1,s;if(e)for(let u in e){if(Iu(u))continue;const l=e[u];let c;i&&_t(i,c=Gn(u))?!a||!a.includes(c)?r[c]=l:(s||(s={}))[c]=l:Wd(t.emitsOptions,u)||(!(u in n)||l!==n[u])&&(n[u]=l,o=!0)}if(a){const u=Ct(r),l=s||zt;for(let c=0;c<a.length;c++){const f=a[c];r[f]=am(i,u,f,l[f],t,!_t(l,f))}}return o}function am(t,e,r,n,i,a){const o=t[r];if(o!=null){const s=_t(o,"default");if(s&&n===void 0){const u=o.default;if(o.type!==Function&&!o.skipFactory&&ct(u)){const{propsDefaults:l}=i;if(r in l)n=l[r];else{const c=Ol(i);n=l[r]=u.call(null,e),c()}}else n=u;i.ce&&i.ce._setProp(r,n)}o[0]&&(a&&!s?n=!1:o[1]&&(n===""||n===Go(r))&&(n=!0))}return n}const P_=new WeakMap;function OS(t,e,r=!1){const n=r?P_:e.propsCache,i=n.get(t);if(i)return i;const a=t.props,o={},s=[];let u=!1;if(!ct(t)){const c=f=>{u=!0;const[d,p]=OS(f,e,!0);Ar(o,d),p&&s.push(...p)};!r&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!a&&!u)return Ht(t)&&n.set(t,Ds),Ds;if(je(a))for(let c=0;c<a.length;c++){const f=Gn(a[c]);D0(f)&&(o[f]=zt)}else if(a)for(const c in a){const f=Gn(c);if(D0(f)){const d=a[c],p=o[f]=je(d)||ct(d)?{type:d}:Ar({},d),h=p.type;let m=!1,g=!0;if(je(h))for(let y=0;y<h.length;++y){const N=h[y],v=ct(N)&&N.name;if(v==="Boolean"){m=!0;break}else v==="String"&&(g=!1)}else m=ct(h)&&h.name==="Boolean";p[0]=m,p[1]=g,(m||_t(p,"default"))&&s.push(f)}}const l=[o,s];return Ht(t)&&n.set(t,l),l}function D0(t){return t[0]!=="$"&&!Iu(t)}const _g=t=>t[0]==="_"||t==="$stable",Og=t=>je(t)?t.map(Di):[Di(t)],$_=(t,e,r)=>{if(e._n)return e;const n=qd((...i)=>Og(e(...i)),r);return n._c=!1,n},FS=(t,e,r)=>{const n=t._ctx;for(const i in t){if(_g(i))continue;const a=t[i];if(ct(a))e[i]=$_(i,a,n);else if(a!=null){const o=Og(a);e[i]=()=>o}}},BS=(t,e)=>{const r=Og(e);t.slots.default=()=>r},kS=(t,e,r)=>{for(const n in e)(r||!_g(n))&&(t[n]=e[n])},L_=(t,e,r)=>{const n=t.slots=MS();if(t.vnode.shapeFlag&32){const i=e._;i?(kS(n,e,r),r&&$A(n,"_",i,!0)):FS(e,n)}else e&&BS(t,e)},z_=(t,e,r)=>{const{vnode:n,slots:i}=t;let a=!0,o=zt;if(n.shapeFlag&32){const s=e._;s?r&&s===1?a=!1:kS(i,e,r):(a=!e.$stable,FS(e,i)),o=e}else e&&(BS(t,e),o={default:1});if(a)for(const s in i)!_g(s)&&o[s]==null&&delete i[s]},tn=tO;function q_(t){return U_(t)}function U_(t,e){const r=Rd();r.__VUE__=!0;const{insert:n,remove:i,patchProp:a,createElement:o,createText:s,createComment:u,setText:l,setElementText:c,parentNode:f,nextSibling:d,setScopeId:p=Mi,insertStaticContent:h}=t,m=(B,q,j,oe=null,k=null,z=null,Y=void 0,ne=null,se=!!q.dynamicChildren)=>{if(B===q)return;B&&!wo(B,q)&&(oe=G(B),te(B,k,z,!0),B=null),q.patchFlag===-2&&(se=!1,q.dynamicChildren=null);const{type:ue,ref:ve,shapeFlag:L}=q;switch(ue){case jd:g(B,q,j,oe);break;case nn:y(B,q,j,oe);break;case Wc:B==null&&N(q,j,oe,Y);break;case jt:M(B,q,j,oe,k,z,Y,ne,se);break;default:L&1?x(B,q,j,oe,k,z,Y,ne,se):L&6?F(B,q,j,oe,k,z,Y,ne,se):(L&64||L&128)&&ue.process(B,q,j,oe,k,z,Y,ne,se,K)}ve!=null&&k&&gf(ve,B&&B.ref,z,q||B,!q)},g=(B,q,j,oe)=>{if(B==null)n(q.el=s(q.children),j,oe);else{const k=q.el=B.el;q.children!==B.children&&l(k,q.children)}},y=(B,q,j,oe)=>{B==null?n(q.el=u(q.children||""),j,oe):q.el=B.el},N=(B,q,j,oe)=>{[B.el,B.anchor]=h(B.children,q,j,oe,B.el,B.anchor)},v=({el:B,anchor:q},j,oe)=>{let k;for(;B&&B!==q;)k=d(B),n(B,j,oe),B=k;n(q,j,oe)},w=({el:B,anchor:q})=>{let j;for(;B&&B!==q;)j=d(B),i(B),B=j;i(q)},x=(B,q,j,oe,k,z,Y,ne,se)=>{q.type==="svg"?Y="svg":q.type==="math"&&(Y="mathml"),B==null?b(q,j,oe,k,z,Y,ne,se):A(B,q,k,z,Y,ne,se)},b=(B,q,j,oe,k,z,Y,ne)=>{let se,ue;const{props:ve,shapeFlag:L,transition:J,dirs:re}=B;if(se=B.el=o(B.type,z,ve&&ve.is,ve),L&8?c(se,B.children):L&16&&C(B.children,se,null,oe,k,Kp(B,z),Y,ne),re&&ho(B,null,oe,"created"),S(se,B,B.scopeId,Y,oe),ve){for(const he in ve)he!=="value"&&!Iu(he)&&a(se,he,null,ve[he],z,oe);"value"in ve&&a(se,"value",null,ve.value,z),(ue=ve.onVnodeBeforeMount)&&xi(ue,oe,B)}re&&ho(B,null,oe,"beforeMount");const fe=H_(k,J);fe&&J.beforeEnter(se),n(se,q,j),((ue=ve&&ve.onVnodeMounted)||fe||re)&&tn(()=>{ue&&xi(ue,oe,B),fe&&J.enter(se),re&&ho(B,null,oe,"mounted")},k)},S=(B,q,j,oe,k)=>{if(j&&p(B,j),oe)for(let z=0;z<oe.length;z++)p(B,oe[z]);if(k){let z=k.subTree;if(q===z||$S(z.type)&&(z.ssContent===q||z.ssFallback===q)){const Y=k.vnode;S(B,Y,Y.scopeId,Y.slotScopeIds,k.parent)}}},C=(B,q,j,oe,k,z,Y,ne,se=0)=>{for(let ue=se;ue<B.length;ue++){const ve=B[ue]=ne?Ea(B[ue]):Di(B[ue]);m(null,ve,q,j,oe,k,z,Y,ne)}},A=(B,q,j,oe,k,z,Y)=>{const ne=q.el=B.el;let{patchFlag:se,dynamicChildren:ue,dirs:ve}=q;se|=B.patchFlag&16;const L=B.props||zt,J=q.props||zt;let re;if(j&&mo(j,!1),(re=J.onVnodeBeforeUpdate)&&xi(re,j,q,B),ve&&ho(q,B,j,"beforeUpdate"),j&&mo(j,!0),(L.innerHTML&&J.innerHTML==null||L.textContent&&J.textContent==null)&&c(ne,""),ue?E(B.dynamicChildren,ue,ne,j,oe,Kp(q,k),z):Y||O(B,q,ne,null,j,oe,Kp(q,k),z,!1),se>0){if(se&16)D(ne,L,J,j,k);else if(se&2&&L.class!==J.class&&a(ne,"class",null,J.class,k),se&4&&a(ne,"style",L.style,J.style,k),se&8){const fe=q.dynamicProps;for(let he=0;he<fe.length;he++){const me=fe[he],Se=L[me],xe=J[me];(xe!==Se||me==="value")&&a(ne,me,Se,xe,k,j)}}se&1&&B.children!==q.children&&c(ne,q.children)}else!Y&&ue==null&&D(ne,L,J,j,k);((re=J.onVnodeUpdated)||ve)&&tn(()=>{re&&xi(re,j,q,B),ve&&ho(q,B,j,"updated")},oe)},E=(B,q,j,oe,k,z,Y)=>{for(let ne=0;ne<q.length;ne++){const se=B[ne],ue=q[ne],ve=se.el&&(se.type===jt||!wo(se,ue)||se.shapeFlag&70)?f(se.el):j;m(se,ue,ve,null,oe,k,z,Y,!0)}},D=(B,q,j,oe,k)=>{if(q!==j){if(q!==zt)for(const z in q)!Iu(z)&&!(z in j)&&a(B,z,q[z],null,k,oe);for(const z in j){if(Iu(z))continue;const Y=j[z],ne=q[z];Y!==ne&&z!=="value"&&a(B,z,ne,Y,k,oe)}"value"in j&&a(B,"value",q.value,j.value,k)}},M=(B,q,j,oe,k,z,Y,ne,se)=>{const ue=q.el=B?B.el:s(""),ve=q.anchor=B?B.anchor:s("");let{patchFlag:L,dynamicChildren:J,slotScopeIds:re}=q;re&&(ne=ne?ne.concat(re):re),B==null?(n(ue,j,oe),n(ve,j,oe),C(q.children||[],j,ve,k,z,Y,ne,se)):L>0&&L&64&&J&&B.dynamicChildren?(E(B.dynamicChildren,J,j,k,z,Y,ne),(q.key!=null||k&&q===k.subTree)&&Fg(B,q,!0)):O(B,q,j,ve,k,z,Y,ne,se)},F=(B,q,j,oe,k,z,Y,ne,se)=>{q.slotScopeIds=ne,B==null?q.shapeFlag&512?k.ctx.activate(q,j,oe,Y,se):I(q,j,oe,k,z,Y,se):P(B,q,se)},I=(B,q,j,oe,k,z,Y)=>{const ne=B.component=sO(B,oe,k);if(Ud(B)&&(ne.ctx.renderer=K),uO(ne,!1,Y),ne.asyncDep){if(k&&k.registerDep(ne,T,Y),!B.el){const se=ne.subTree=Nt(nn);y(null,se,q,j)}}else T(ne,B,q,j,k,z,Y)},P=(B,q,j)=>{const oe=q.component=B.component;if(Q_(B,q,j))if(oe.asyncDep&&!oe.asyncResolved){$(oe,q,j);return}else oe.next=q,oe.update();else q.el=B.el,oe.vnode=q},T=(B,q,j,oe,k,z,Y)=>{const ne=()=>{if(B.isMounted){let{next:L,bu:J,u:re,parent:fe,vnode:he}=B;{const we=IS(B);if(we){L&&(L.el=he.el,$(B,L,Y)),we.asyncDep.then(()=>{B.isUnmounted||ne()});return}}let me=L,Se;mo(B,!1),L?(L.el=he.el,$(B,L,Y)):L=he,J&&Uc(J),(Se=L.props&&L.props.onVnodeBeforeUpdate)&&xi(Se,fe,L,he),mo(B,!0);const xe=C0(B),Ee=B.subTree;B.subTree=xe,m(Ee,xe,f(Ee.el),G(Ee),B,k,z),L.el=xe.el,me===null&&eO(B,xe.el),re&&tn(re,k),(Se=L.props&&L.props.onVnodeUpdated)&&tn(()=>xi(Se,fe,L,he),k)}else{let L;const{el:J,props:re}=q,{bm:fe,m:he,parent:me,root:Se,type:xe}=B,Ee=Lu(q);mo(B,!1),fe&&Uc(fe),!Ee&&(L=re&&re.onVnodeBeforeMount)&&xi(L,me,q),mo(B,!0);{Se.ce&&Se.ce._injectChildStyle(xe);const we=B.subTree=C0(B);m(null,we,j,oe,B,k,z),q.el=we.el}if(he&&tn(he,k),!Ee&&(L=re&&re.onVnodeMounted)){const we=q;tn(()=>xi(L,me,we),k)}(q.shapeFlag&256||me&&Lu(me.vnode)&&me.vnode.shapeFlag&256)&&B.a&&tn(B.a,k),B.isMounted=!0,q=j=oe=null}};B.scope.on();const se=B.effect=new HA(ne);B.scope.off();const ue=B.update=se.run.bind(se),ve=B.job=se.runIfDirty.bind(se);ve.i=B,ve.id=B.uid,se.scheduler=()=>Mg(ve),mo(B,!0),ue()},$=(B,q,j)=>{q.component=B;const oe=B.vnode.props;B.vnode=q,B.next=null,R_(B,q.props,oe,j),z_(B,q.children,j),ca(),m0(B),fa()},O=(B,q,j,oe,k,z,Y,ne,se=!1)=>{const ue=B&&B.children,ve=B?B.shapeFlag:0,L=q.children,{patchFlag:J,shapeFlag:re}=q;if(J>0){if(J&128){R(ue,L,j,oe,k,z,Y,ne,se);return}else if(J&256){W(ue,L,j,oe,k,z,Y,ne,se);return}}re&8?(ve&16&&de(ue,k,z),L!==ue&&c(j,L)):ve&16?re&16?R(ue,L,j,oe,k,z,Y,ne,se):de(ue,k,z,!0):(ve&8&&c(j,""),re&16&&C(L,j,oe,k,z,Y,ne,se))},W=(B,q,j,oe,k,z,Y,ne,se)=>{B=B||Ds,q=q||Ds;const ue=B.length,ve=q.length,L=Math.min(ue,ve);let J;for(J=0;J<L;J++){const re=q[J]=se?Ea(q[J]):Di(q[J]);m(B[J],re,j,null,k,z,Y,ne,se)}ue>ve?de(B,k,z,!0,!1,L):C(q,j,oe,k,z,Y,ne,se,L)},R=(B,q,j,oe,k,z,Y,ne,se)=>{let ue=0;const ve=q.length;let L=B.length-1,J=ve-1;for(;ue<=L&&ue<=J;){const re=B[ue],fe=q[ue]=se?Ea(q[ue]):Di(q[ue]);if(wo(re,fe))m(re,fe,j,null,k,z,Y,ne,se);else break;ue++}for(;ue<=L&&ue<=J;){const re=B[L],fe=q[J]=se?Ea(q[J]):Di(q[J]);if(wo(re,fe))m(re,fe,j,null,k,z,Y,ne,se);else break;L--,J--}if(ue>L){if(ue<=J){const re=J+1,fe=re<ve?q[re].el:oe;for(;ue<=J;)m(null,q[ue]=se?Ea(q[ue]):Di(q[ue]),j,fe,k,z,Y,ne,se),ue++}}else if(ue>J)for(;ue<=L;)te(B[ue],k,z,!0),ue++;else{const re=ue,fe=ue,he=new Map;for(ue=fe;ue<=J;ue++){const Xe=q[ue]=se?Ea(q[ue]):Di(q[ue]);Xe.key!=null&&he.set(Xe.key,ue)}let me,Se=0;const xe=J-fe+1;let Ee=!1,we=0;const nt=new Array(xe);for(ue=0;ue<xe;ue++)nt[ue]=0;for(ue=re;ue<=L;ue++){const Xe=B[ue];if(Se>=xe){te(Xe,k,z,!0);continue}let _;if(Xe.key!=null)_=he.get(Xe.key);else for(me=fe;me<=J;me++)if(nt[me-fe]===0&&wo(Xe,q[me])){_=me;break}_===void 0?te(Xe,k,z,!0):(nt[_-fe]=ue+1,_>=we?we=_:Ee=!0,m(Xe,q[_],j,null,k,z,Y,ne,se),Se++)}const ke=Ee?V_(nt):Ds;for(me=ke.length-1,ue=xe-1;ue>=0;ue--){const Xe=fe+ue,_=q[Xe],ee=Xe+1<ve?q[Xe+1].el:oe;nt[ue]===0?m(null,_,j,ee,k,z,Y,ne,se):Ee&&(me<0||ue!==ke[me]?ie(_,j,ee,2):me--)}}},ie=(B,q,j,oe,k=null)=>{const{el:z,type:Y,transition:ne,children:se,shapeFlag:ue}=B;if(ue&6){ie(B.component.subTree,q,j,oe);return}if(ue&128){B.suspense.move(q,j,oe);return}if(ue&64){Y.move(B,q,j,K);return}if(Y===jt){n(z,q,j);for(let L=0;L<se.length;L++)ie(se[L],q,j,oe);n(B.anchor,q,j);return}if(Y===Wc){v(B,q,j);return}if(oe!==2&&ue&1&&ne)if(oe===0)ne.beforeEnter(z),n(z,q,j),tn(()=>ne.enter(z),k);else{const{leave:L,delayLeave:J,afterLeave:re}=ne,fe=()=>{B.ctx.isUnmounted?i(z):n(z,q,j)},he=()=>{L(z,()=>{fe(),re&&re()})};J?J(z,fe,he):he()}else n(z,q,j)},te=(B,q,j,oe=!1,k=!1)=>{const{type:z,props:Y,ref:ne,children:se,dynamicChildren:ue,shapeFlag:ve,patchFlag:L,dirs:J,cacheIndex:re}=B;if(L===-2&&(k=!1),ne!=null&&(ca(),gf(ne,null,j,B,!0),fa()),re!=null&&(q.renderCache[re]=void 0),ve&256){q.ctx.deactivate(B);return}const fe=ve&1&&J,he=!Lu(B);let me;if(he&&(me=Y&&Y.onVnodeBeforeUnmount)&&xi(me,q,B),ve&6)pe(B.component,j,oe);else{if(ve&128){B.suspense.unmount(j,oe);return}fe&&ho(B,null,q,"beforeUnmount"),ve&64?B.type.remove(B,q,j,K,oe):ue&&!ue.hasOnce&&(z!==jt||L>0&&L&64)?de(ue,q,j,!1,!0):(z===jt&&L&384||!k&&ve&16)&&de(se,q,j),oe&&Z(B)}(he&&(me=Y&&Y.onVnodeUnmounted)||fe)&&tn(()=>{me&&xi(me,q,B),fe&&ho(B,null,q,"unmounted")},j)},Z=B=>{const{type:q,el:j,anchor:oe,transition:k}=B;if(q===jt){X(j,oe);return}if(q===Wc){w(B);return}const z=()=>{i(j),k&&!k.persisted&&k.afterLeave&&k.afterLeave()};if(B.shapeFlag&1&&k&&!k.persisted){const{leave:Y,delayLeave:ne}=k,se=()=>Y(j,z);ne?ne(B.el,z,se):se()}else z()},X=(B,q)=>{let j;for(;B!==q;)j=d(B),i(B),B=j;i(q)},pe=(B,q,j)=>{const{bum:oe,scope:k,job:z,subTree:Y,um:ne,m:se,a:ue,parent:ve,slots:{__:L}}=B;E0(se),E0(ue),oe&&Uc(oe),ve&&je(L)&&L.forEach(J=>{ve.renderCache[J]=void 0}),k.stop(),z&&(z.flags|=8,te(Y,B,q,j)),ne&&tn(ne,q),tn(()=>{B.isUnmounted=!0},q),q&&q.pendingBranch&&!q.isUnmounted&&B.asyncDep&&!B.asyncResolved&&B.suspenseId===q.pendingId&&(q.deps--,q.deps===0&&q.resolve())},de=(B,q,j,oe=!1,k=!1,z=0)=>{for(let Y=z;Y<B.length;Y++)te(B[Y],q,j,oe,k)},G=B=>{if(B.shapeFlag&6)return G(B.component.subTree);if(B.shapeFlag&128)return B.suspense.next();const q=d(B.anchor||B.el),j=q&&q[pS];return j?d(j):q};let V=!1;const U=(B,q,j)=>{B==null?q._vnode&&te(q._vnode,null,null,!0):m(q._vnode||null,B,q,null,null,null,j),q._vnode=B,V||(V=!0,m0(),cS(),V=!1)},K={p:m,um:te,m:ie,r:Z,mt:I,mc:C,pc:O,pbc:E,n:G,o:t};return{render:U,hydrate:void 0,createApp:k_(U)}}function Kp({type:t,props:e},r){return r==="svg"&&t==="foreignObject"||r==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:r}function mo({effect:t,job:e},r){r?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function H_(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Fg(t,e,r=!1){const n=t.children,i=e.children;if(je(n)&&je(i))for(let a=0;a<n.length;a++){const o=n[a];let s=i[a];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=i[a]=Ea(i[a]),s.el=o.el),!r&&s.patchFlag!==-2&&Fg(o,s)),s.type===jd&&(s.el=o.el),s.type===nn&&!s.el&&(s.el=o.el)}}function V_(t){const e=t.slice(),r=[0];let n,i,a,o,s;const u=t.length;for(n=0;n<u;n++){const l=t[n];if(l!==0){if(i=r[r.length-1],t[i]<l){e[n]=i,r.push(n);continue}for(a=0,o=r.length-1;a<o;)s=a+o>>1,t[r[s]]<l?a=s+1:o=s;l<t[r[a]]&&(a>0&&(e[n]=r[a-1]),r[a]=n)}}for(a=r.length,o=r[a-1];a-- >0;)r[a]=o,o=e[o];return r}function IS(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:IS(e)}function E0(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const W_=Symbol.for("v-scx"),j_=()=>oi(W_);function G_(t,e){return Bg(t,null,e)}function Ti(t,e,r){return Bg(t,e,r)}function Bg(t,e,r=zt){const{immediate:n,deep:i,flush:a,once:o}=r,s=Ar({},r),u=e&&n||!e&&a!=="post";let l;if(al){if(a==="sync"){const p=j_();l=p.__watcherHandles||(p.__watcherHandles=[])}else if(!u){const p=()=>{};return p.stop=Mi,p.resume=Mi,p.pause=Mi,p}}const c=Br;s.call=(p,h,m)=>ui(p,c,h,m);let f=!1;a==="post"?s.scheduler=p=>{tn(p,c&&c.suspense)}:a!=="sync"&&(f=!0,s.scheduler=(p,h)=>{h?p():Mg(p)}),s.augmentJob=p=>{e&&(p.flags|=4),f&&(p.flags|=2,c&&(p.id=c.uid,p.i=c))};const d=a_(t,e,s);return al&&(l?l.push(d):u&&d()),d}function K_(t,e,r){const n=this.proxy,i=tr(t)?t.includes(".")?RS(n,t):()=>n[t]:t.bind(n,n);let a;ct(e)?a=e:(a=e.handler,r=e);const o=Ol(this),s=Bg(i,a.bind(n),r);return o(),s}function RS(t,e){const r=e.split(".");return()=>{let n=t;for(let i=0;i<r.length&&n;i++)n=n[r[i]];return n}}const J_=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Gn(e)}Modifiers`]||t[`${Go(e)}Modifiers`];function Y_(t,e,...r){if(t.isUnmounted)return;const n=t.vnode.props||zt;let i=r;const a=e.startsWith("update:"),o=a&&J_(n,e.slice(7));o&&(o.trim&&(i=r.map(c=>tr(c)?c.trim():c)),o.number&&(i=r.map(Jh)));let s,u=n[s=qp(e)]||n[s=qp(Gn(e))];!u&&a&&(u=n[s=qp(Go(e))]),u&&ui(u,t,6,i);const l=n[s+"Once"];if(l){if(!t.emitted)t.emitted={};else if(t.emitted[s])return;t.emitted[s]=!0,ui(l,t,6,i)}}function PS(t,e,r=!1){const n=e.emitsCache,i=n.get(t);if(i!==void 0)return i;const a=t.emits;let o={},s=!1;if(!ct(t)){const u=l=>{const c=PS(l,e,!0);c&&(s=!0,Ar(o,c))};!r&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}return!a&&!s?(Ht(t)&&n.set(t,null),null):(je(a)?a.forEach(u=>o[u]=null):Ar(o,a),Ht(t)&&n.set(t,o),o)}function Wd(t,e){return!t||!Fd(e)?!1:(e=e.slice(2).replace(/Once$/,""),_t(t,e[0].toLowerCase()+e.slice(1))||_t(t,Go(e))||_t(t,e))}function C0(t){const{type:e,vnode:r,proxy:n,withProxy:i,propsOptions:[a],slots:o,attrs:s,emit:u,render:l,renderCache:c,props:f,data:d,setupState:p,ctx:h,inheritAttrs:m}=t,g=mf(t);let y,N;try{if(r.shapeFlag&4){const w=i||n,x=w;y=Di(l.call(x,w,c,f,p,d,h)),N=s}else{const w=e;y=Di(w.length>1?w(f,{attrs:s,slots:o,emit:u}):w(f,null)),N=e.props?s:Z_(s)}}catch(w){qu.length=0,zd(w,t,1),y=Nt(nn)}let v=y;if(N&&m!==!1){const w=Object.keys(N),{shapeFlag:x}=v;w.length&&x&7&&(a&&w.some(yg)&&(N=X_(N,a)),v=Ja(v,N,!1,!0))}return r.dirs&&(v=Ja(v,null,!1,!0),v.dirs=v.dirs?v.dirs.concat(r.dirs):r.dirs),r.transition&&nl(v,r.transition),y=v,mf(g),y}const Z_=t=>{let e;for(const r in t)(r==="class"||r==="style"||Fd(r))&&((e||(e={}))[r]=t[r]);return e},X_=(t,e)=>{const r={};for(const n in t)(!yg(n)||!(n.slice(9)in e))&&(r[n]=t[n]);return r};function Q_(t,e,r){const{props:n,children:i,component:a}=t,{props:o,children:s,patchFlag:u}=e,l=a.emitsOptions;if(e.dirs||e.transition)return!0;if(r&&u>=0){if(u&1024)return!0;if(u&16)return n?M0(n,o,l):!!o;if(u&8){const c=e.dynamicProps;for(let f=0;f<c.length;f++){const d=c[f];if(o[d]!==n[d]&&!Wd(l,d))return!0}}}else return(i||s)&&(!s||!s.$stable)?!0:n===o?!1:n?o?M0(n,o,l):!0:!!o;return!1}function M0(t,e,r){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let i=0;i<n.length;i++){const a=n[i];if(e[a]!==t[a]&&!Wd(r,a))return!0}return!1}function eO({vnode:t,parent:e},r){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=r,e=e.parent;else break}}const $S=t=>t.__isSuspense;function tO(t,e){e&&e.pendingBranch?je(t)?e.effects.push(...t):e.effects.push(t):u_(t)}const jt=Symbol.for("v-fgt"),jd=Symbol.for("v-txt"),nn=Symbol.for("v-cmt"),Wc=Symbol.for("v-stc"),qu=[];let Cn=null;function Pe(t=!1){qu.push(Cn=t?null:[])}function rO(){qu.pop(),Cn=qu[qu.length-1]||null}let il=1;function T0(t,e=!1){il+=t,t<0&&Cn&&e&&(Cn.hasOnce=!0)}function LS(t){return t.dynamicChildren=il>0?Cn||Ds:null,rO(),il>0&&Cn&&Cn.push(t),t}function Ve(t,e,r,n,i,a){return LS(ce(t,e,r,n,i,a,!0))}function qa(t,e,r,n,i){return LS(Nt(t,e,r,n,i,!0))}function yf(t){return t?t.__v_isVNode===!0:!1}function wo(t,e){return t.type===e.type&&t.key===e.key}const zS=({key:t})=>t??null,jc=({ref:t,ref_key:e,ref_for:r})=>(typeof t=="number"&&(t=""+t),t!=null?tr(t)||Gr(t)||ct(t)?{i:xn,r:t,k:e,f:!!r}:t:null);function ce(t,e=null,r=null,n=0,i=null,a=t===jt?0:1,o=!1,s=!1){const u={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&zS(e),ref:e&&jc(e),scopeId:dS,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:xn};return s?(kg(u,r),a&128&&t.normalize(u)):r&&(u.shapeFlag|=tr(r)?8:16),il>0&&!o&&Cn&&(u.patchFlag>0||a&6)&&u.patchFlag!==32&&Cn.push(u),u}const Nt=nO;function nO(t,e=null,r=null,n=0,i=null,a=!1){if((!t||t===D_)&&(t=nn),yf(t)){const s=Ja(t,e,!0);return r&&kg(s,r),il>0&&!a&&Cn&&(s.shapeFlag&6?Cn[Cn.indexOf(t)]=s:Cn.push(s)),s.patchFlag=-2,s}if(pO(t)&&(t=t.__vccOpts),e){e=iO(e);let{class:s,style:u}=e;s&&!tr(s)&&(e.class=lt(s)),Ht(u)&&(Eg(u)&&!je(u)&&(u=Ar({},u)),e.style=ia(u))}const o=tr(t)?1:$S(t)?128:hS(t)?64:Ht(t)?4:ct(t)?2:0;return ce(t,e,r,n,i,o,a,!0)}function iO(t){return t?Eg(t)||TS(t)?Ar({},t):t:null}function Ja(t,e,r=!1,n=!1){const{props:i,ref:a,patchFlag:o,children:s,transition:u}=t,l=e?US(i||{},e):i,c={__v_isVNode:!0,__v_skip:!0,type:t.type,props:l,key:l&&zS(l),ref:e&&e.ref?r&&a?je(a)?a.concat(jc(e)):[a,jc(e)]:jc(e):a,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:s,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==jt?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:u,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ja(t.ssContent),ssFallback:t.ssFallback&&Ja(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return u&&n&&nl(c,u.clone(c)),c}function Mu(t=" ",e=0){return Nt(jd,null,t,e)}function qS(t,e){const r=Nt(Wc,null,t);return r.staticCount=e,r}function Qt(t="",e=!1){return e?(Pe(),qa(nn,null,t)):Nt(nn,null,t)}function Di(t){return t==null||typeof t=="boolean"?Nt(nn):je(t)?Nt(jt,null,t.slice()):yf(t)?Ea(t):Nt(jd,null,String(t))}function Ea(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Ja(t)}function kg(t,e){let r=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(je(e))r=16;else if(typeof e=="object")if(n&65){const i=e.default;i&&(i._c&&(i._d=!1),kg(t,i()),i._c&&(i._d=!0));return}else{r=32;const i=e._;!i&&!TS(e)?e._ctx=xn:i===3&&xn&&(xn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ct(e)?(e={default:e,_ctx:xn},r=32):(e=String(e),n&64?(r=16,e=[Mu(e)]):r=8);t.children=e,t.shapeFlag|=r}function US(...t){const e={};for(let r=0;r<t.length;r++){const n=t[r];for(const i in n)if(i==="class")e.class!==n.class&&(e.class=lt([e.class,n.class]));else if(i==="style")e.style=ia([e.style,n.style]);else if(Fd(i)){const a=e[i],o=n[i];o&&a!==o&&!(je(a)&&a.includes(o))&&(e[i]=a?[].concat(a,o):o)}else i!==""&&(e[i]=n[i])}return e}function xi(t,e,r,n=null){ui(t,e,7,[r,n])}const aO=ES();let oO=0;function sO(t,e,r){const n=t.type,i=(e?e.appContext:t.appContext)||aO,a={uid:oO++,vnode:t,type:n,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new OT(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:OS(n,i),emitsOptions:PS(n,i),emit:null,emitted:null,propsDefaults:zt,inheritAttrs:n.inheritAttrs,ctx:zt,data:zt,props:zt,attrs:zt,slots:zt,refs:zt,setupState:zt,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=Y_.bind(null,a),t.ce&&t.ce(a),a}let Br=null;const HS=()=>Br||xn;let bf,om;{const t=Rd(),e=(r,n)=>{let i;return(i=t[r])||(i=t[r]=[]),i.push(n),a=>{i.length>1?i.forEach(o=>o(a)):i[0](a)}};bf=e("__VUE_INSTANCE_SETTERS__",r=>Br=r),om=e("__VUE_SSR_SETTERS__",r=>al=r)}const Ol=t=>{const e=Br;return bf(t),t.scope.on(),()=>{t.scope.off(),bf(e)}},_0=()=>{Br&&Br.scope.off(),bf(null)};function VS(t){return t.vnode.shapeFlag&4}let al=!1;function uO(t,e=!1,r=!1){e&&om(e);const{props:n,children:i}=t.vnode,a=VS(t);I_(t,n,a,e),L_(t,i,r||e);const o=a?lO(t,e):void 0;return e&&om(!1),o}function lO(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,C_);const{setup:n}=r;if(n){ca();const i=t.setupContext=n.length>1?fO(t):null,a=Ol(t),o=Tl(n,t,0,[t.props,i]),s=IA(o);if(fa(),a(),(s||t.sp)&&!Lu(t)&&NS(t),s){if(o.then(_0,_0),e)return o.then(u=>{O0(t,u)}).catch(u=>{zd(u,t,0)});t.asyncDep=o}else O0(t,o)}else WS(t)}function O0(t,e,r){ct(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ht(e)&&(t.setupState=sS(e)),WS(t)}function WS(t,e,r){const n=t.type;t.render||(t.render=n.render||Mi);{const i=Ol(t);ca();try{M_(t)}finally{fa(),i()}}}const cO={get(t,e){return Hr(t,"get",""),t[e]}};function fO(t){const e=r=>{t.exposed=r||{}};return{attrs:new Proxy(t.attrs,cO),slots:t.slots,emit:t.emit,expose:e}}function Gd(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(sS(aS(t.exposed)),{get(e,r){if(r in e)return e[r];if(r in zu)return zu[r](t)},has(e,r){return r in e||r in zu}})):t.proxy}function dO(t,e=!0){return ct(t)?t.displayName||t.name:t.name||e&&t.__name}function pO(t){return ct(t)&&"__vccOpts"in t}const Wr=(t,e)=>n_(t,e,al);function Kd(t,e,r){const n=arguments.length;return n===2?Ht(e)&&!je(e)?yf(e)?Nt(t,null,[e]):Nt(t,e):Nt(t,null,e):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&yf(r)&&(r=[r]),Nt(t,e,r))}const hO="3.5.14";/**
* @vue/runtime-dom v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let sm;const F0=typeof window<"u"&&window.trustedTypes;if(F0)try{sm=F0.createPolicy("vue",{createHTML:t=>t})}catch{}const jS=sm?t=>sm.createHTML(t):t=>t,mO="http://www.w3.org/2000/svg",gO="http://www.w3.org/1998/Math/MathML",Zi=typeof document<"u"?document:null,B0=Zi&&Zi.createElement("template"),vO={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r,n)=>{const i=e==="svg"?Zi.createElementNS(mO,t):e==="mathml"?Zi.createElementNS(gO,t):r?Zi.createElement(t,{is:r}):Zi.createElement(t);return t==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:t=>Zi.createTextNode(t),createComment:t=>Zi.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Zi.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,r,n,i,a){const o=r?r.previousSibling:e.lastChild;if(i&&(i===a||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),r),!(i===a||!(i=i.nextSibling)););else{B0.innerHTML=jS(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const s=B0.content;if(n==="svg"||n==="mathml"){const u=s.firstChild;for(;u.firstChild;)s.appendChild(u.firstChild);s.removeChild(u)}e.insertBefore(s,r)}return[o?o.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}},ba="transition",gu="animation",ol=Symbol("_vtc"),GS={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},yO=Ar({},vS,GS),bO=t=>(t.displayName="Transition",t.props=yO,t),Ig=bO((t,{slots:e})=>Kd(d_,xO(t),e)),go=(t,e=[])=>{je(t)?t.forEach(r=>r(...e)):t&&t(...e)},k0=t=>t?je(t)?t.some(e=>e.length>1):t.length>1:!1;function xO(t){const e={};for(const M in t)M in GS||(e[M]=t[M]);if(t.css===!1)return e;const{name:r="v",type:n,duration:i,enterFromClass:a=`${r}-enter-from`,enterActiveClass:o=`${r}-enter-active`,enterToClass:s=`${r}-enter-to`,appearFromClass:u=a,appearActiveClass:l=o,appearToClass:c=s,leaveFromClass:f=`${r}-leave-from`,leaveActiveClass:d=`${r}-leave-active`,leaveToClass:p=`${r}-leave-to`}=t,h=wO(i),m=h&&h[0],g=h&&h[1],{onBeforeEnter:y,onEnter:N,onEnterCancelled:v,onLeave:w,onLeaveCancelled:x,onBeforeAppear:b=y,onAppear:S=N,onAppearCancelled:C=v}=e,A=(M,F,I,P)=>{M._enterCancelled=P,vo(M,F?c:s),vo(M,F?l:o),I&&I()},E=(M,F)=>{M._isLeaving=!1,vo(M,f),vo(M,p),vo(M,d),F&&F()},D=M=>(F,I)=>{const P=M?S:N,T=()=>A(F,M,I);go(P,[F,T]),I0(()=>{vo(F,M?u:a),Ui(F,M?c:s),k0(P)||R0(F,n,m,T)})};return Ar(e,{onBeforeEnter(M){go(y,[M]),Ui(M,a),Ui(M,o)},onBeforeAppear(M){go(b,[M]),Ui(M,u),Ui(M,l)},onEnter:D(!1),onAppear:D(!0),onLeave(M,F){M._isLeaving=!0;const I=()=>E(M,F);Ui(M,f),M._enterCancelled?(Ui(M,d),L0()):(L0(),Ui(M,d)),I0(()=>{M._isLeaving&&(vo(M,f),Ui(M,p),k0(w)||R0(M,n,g,I))}),go(w,[M,I])},onEnterCancelled(M){A(M,!1,void 0,!0),go(v,[M])},onAppearCancelled(M){A(M,!0,void 0,!0),go(C,[M])},onLeaveCancelled(M){E(M),go(x,[M])}})}function wO(t){if(t==null)return null;if(Ht(t))return[Jp(t.enter),Jp(t.leave)];{const e=Jp(t);return[e,e]}}function Jp(t){return AT(t)}function Ui(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.add(r)),(t[ol]||(t[ol]=new Set)).add(e)}function vo(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.remove(n));const r=t[ol];r&&(r.delete(e),r.size||(t[ol]=void 0))}function I0(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let NO=0;function R0(t,e,r,n){const i=t._endId=++NO,a=()=>{i===t._endId&&n()};if(r!=null)return setTimeout(a,r);const{type:o,timeout:s,propCount:u}=AO(t,e);if(!o)return n();const l=o+"end";let c=0;const f=()=>{t.removeEventListener(l,d),a()},d=p=>{p.target===t&&++c>=u&&f()};setTimeout(()=>{c<u&&f()},s+1),t.addEventListener(l,d)}function AO(t,e){const r=window.getComputedStyle(t),n=h=>(r[h]||"").split(", "),i=n(`${ba}Delay`),a=n(`${ba}Duration`),o=P0(i,a),s=n(`${gu}Delay`),u=n(`${gu}Duration`),l=P0(s,u);let c=null,f=0,d=0;e===ba?o>0&&(c=ba,f=o,d=a.length):e===gu?l>0&&(c=gu,f=l,d=u.length):(f=Math.max(o,l),c=f>0?o>l?ba:gu:null,d=c?c===ba?a.length:u.length:0);const p=c===ba&&/\b(transform|all)(,|$)/.test(n(`${ba}Property`).toString());return{type:c,timeout:f,propCount:d,hasTransform:p}}function P0(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((r,n)=>$0(r)+$0(t[n])))}function $0(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function L0(){return document.body.offsetHeight}function SO(t,e,r){const n=t[ol];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):r?t.setAttribute("class",e):t.className=e}const z0=Symbol("_vod"),DO=Symbol("_vsh"),EO=Symbol(""),CO=/(^|;)\s*display\s*:/;function MO(t,e,r){const n=t.style,i=tr(r);let a=!1;if(r&&!i){if(e)if(tr(e))for(const o of e.split(";")){const s=o.slice(0,o.indexOf(":")).trim();r[s]==null&&Gc(n,s,"")}else for(const o in e)r[o]==null&&Gc(n,o,"");for(const o in r)o==="display"&&(a=!0),Gc(n,o,r[o])}else if(i){if(e!==r){const o=n[EO];o&&(r+=";"+o),n.cssText=r,a=CO.test(r)}}else e&&t.removeAttribute("style");z0 in t&&(t[z0]=a?n.display:"",t[DO]&&(n.display="none"))}const q0=/\s*!important$/;function Gc(t,e,r){if(je(r))r.forEach(n=>Gc(t,e,n));else if(r==null&&(r=""),e.startsWith("--"))t.setProperty(e,r);else{const n=TO(t,e);q0.test(r)?t.setProperty(Go(n),r.replace(q0,""),"important"):t[n]=r}}const U0=["Webkit","Moz","ms"],Yp={};function TO(t,e){const r=Yp[e];if(r)return r;let n=Gn(e);if(n!=="filter"&&n in t)return Yp[e]=n;n=Id(n);for(let i=0;i<U0.length;i++){const a=U0[i]+n;if(a in t)return Yp[e]=a}return e}const H0="http://www.w3.org/1999/xlink";function V0(t,e,r,n,i,a=TT(e)){n&&e.startsWith("xlink:")?r==null?t.removeAttributeNS(H0,e.slice(6,e.length)):t.setAttributeNS(H0,e,r):r==null||a&&!LA(r)?t.removeAttribute(e):t.setAttribute(e,a?"":_i(r)?String(r):r)}function W0(t,e,r,n,i){if(e==="innerHTML"||e==="textContent"){r!=null&&(t[e]=e==="innerHTML"?jS(r):r);return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){const s=a==="OPTION"?t.getAttribute("value")||"":t.value,u=r==null?t.type==="checkbox"?"on":"":String(r);(s!==u||!("_value"in t))&&(t.value=u),r==null&&t.removeAttribute(e),t._value=r;return}let o=!1;if(r===""||r==null){const s=typeof t[e];s==="boolean"?r=LA(r):r==null&&s==="string"?(r="",o=!0):s==="number"&&(r=0,o=!0)}try{t[e]=r}catch{}o&&t.removeAttribute(i||e)}function No(t,e,r,n){t.addEventListener(e,r,n)}function _O(t,e,r,n){t.removeEventListener(e,r,n)}const j0=Symbol("_vei");function OO(t,e,r,n,i=null){const a=t[j0]||(t[j0]={}),o=a[e];if(n&&o)o.value=n;else{const[s,u]=FO(e);if(n){const l=a[e]=IO(n,i);No(t,s,l,u)}else o&&(_O(t,s,o,u),a[e]=void 0)}}const G0=/(?:Once|Passive|Capture)$/;function FO(t){let e;if(G0.test(t)){e={};let n;for(;n=t.match(G0);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Go(t.slice(2)),e]}let Zp=0;const BO=Promise.resolve(),kO=()=>Zp||(BO.then(()=>Zp=0),Zp=Date.now());function IO(t,e){const r=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=r.attached)return;ui(RO(n,r.value),e,5,[n])};return r.value=t,r.attached=kO(),r}function RO(t,e){if(je(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map(n=>i=>!i._stopped&&n&&n(i))}else return e}const K0=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,PO=(t,e,r,n,i,a)=>{const o=i==="svg";e==="class"?SO(t,n,o):e==="style"?MO(t,r,n):Fd(e)?yg(e)||OO(t,e,r,n,a):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):$O(t,e,n,o))?(W0(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&V0(t,e,n,o,a,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!tr(n))?W0(t,Gn(e),n,a,e):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),V0(t,e,n,o))};function $O(t,e,r,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&K0(e)&&ct(r));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return K0(e)&&tr(r)?!1:e in t}const xf=t=>{const e=t.props["onUpdate:modelValue"]||!1;return je(e)?r=>Uc(e,r):e};function LO(t){t.target.composing=!0}function J0(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const _s=Symbol("_assign"),sl={created(t,{modifiers:{lazy:e,trim:r,number:n}},i){t[_s]=xf(i);const a=n||i.props&&i.props.type==="number";No(t,e?"change":"input",o=>{if(o.target.composing)return;let s=t.value;r&&(s=s.trim()),a&&(s=Jh(s)),t[_s](s)}),r&&No(t,"change",()=>{t.value=t.value.trim()}),e||(No(t,"compositionstart",LO),No(t,"compositionend",J0),No(t,"change",J0))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:r,modifiers:{lazy:n,trim:i,number:a}},o){if(t[_s]=xf(o),t.composing)return;const s=(a||t.type==="number")&&!/^0\d/.test(t.value)?Jh(t.value):t.value,u=e??"";s!==u&&(document.activeElement===t&&t.type!=="range"&&(n&&e===r||i&&t.value.trim()===u)||(t.value=u))}},zO={deep:!0,created(t,e,r){t[_s]=xf(r),No(t,"change",()=>{const n=t._modelValue,i=qO(t),a=t.checked,o=t[_s];if(je(n)){const s=zA(n,i),u=s!==-1;if(a&&!u)o(n.concat(i));else if(!a&&u){const l=[...n];l.splice(s,1),o(l)}}else if(Bd(n)){const s=new Set(n);a?s.add(i):s.delete(i),o(s)}else o(KS(t,a))})},mounted:Y0,beforeUpdate(t,e,r){t[_s]=xf(r),Y0(t,e,r)}};function Y0(t,{value:e,oldValue:r},n){t._modelValue=e;let i;if(je(e))i=zA(e,n.props.value)>-1;else if(Bd(e))i=e.has(n.props.value);else{if(e===r)return;i=Pd(e,KS(t,!0))}t.checked!==i&&(t.checked=i)}function qO(t){return"_value"in t?t._value:t.value}function KS(t,e){const r=e?"_trueValue":"_falseValue";return r in t?t[r]:e}const UO=["ctrl","shift","alt","meta"],HO={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>UO.some(r=>t[`${r}Key`]&&!e.includes(r))},Tr=(t,e)=>{const r=t._withMods||(t._withMods={}),n=e.join(".");return r[n]||(r[n]=(i,...a)=>{for(let o=0;o<e.length;o++){const s=HO[e[o]];if(s&&s(i,e))return}return t(i,...a)})},VO=Ar({patchProp:PO},vO);let Z0;function WO(){return Z0||(Z0=q_(VO))}const jO=(...t)=>{const e=WO().createApp(...t),{mount:r}=e;return e.mount=n=>{const i=KO(n);if(!i)return;const a=e._component;!ct(a)&&!a.render&&!a.template&&(a.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=r(i,!1,GO(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function GO(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function KO(t){return tr(t)?document.querySelector(t):t}const Ii=(t,e)=>{const r=t.__vccOpts||t;for(const[n,i]of e)r[n]=i;return r},JO={};function YO(t,e){const r=S_("router-view");return Pe(),qa(r)}const ZO=Ii(JO,[["render",YO]]);/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const ys=typeof document<"u";function JS(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function XO(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&JS(t.default)}const Tt=Object.assign;function Xp(t,e){const r={};for(const n in e){const i=e[n];r[n]=li(i)?i.map(t):t(i)}return r}const Uu=()=>{},li=Array.isArray,YS=/#/g,QO=/&/g,e3=/\//g,t3=/=/g,r3=/\?/g,ZS=/\+/g,n3=/%5B/g,i3=/%5D/g,XS=/%5E/g,a3=/%60/g,QS=/%7B/g,o3=/%7C/g,eD=/%7D/g,s3=/%20/g;function Rg(t){return encodeURI(""+t).replace(o3,"|").replace(n3,"[").replace(i3,"]")}function u3(t){return Rg(t).replace(QS,"{").replace(eD,"}").replace(XS,"^")}function um(t){return Rg(t).replace(ZS,"%2B").replace(s3,"+").replace(YS,"%23").replace(QO,"%26").replace(a3,"`").replace(QS,"{").replace(eD,"}").replace(XS,"^")}function l3(t){return um(t).replace(t3,"%3D")}function c3(t){return Rg(t).replace(YS,"%23").replace(r3,"%3F")}function f3(t){return t==null?"":c3(t).replace(e3,"%2F")}function ul(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const d3=/\/$/,p3=t=>t.replace(d3,"");function Qp(t,e,r="/"){let n,i={},a="",o="";const s=e.indexOf("#");let u=e.indexOf("?");return s<u&&s>=0&&(u=-1),u>-1&&(n=e.slice(0,u),a=e.slice(u+1,s>-1?s:e.length),i=t(a)),s>-1&&(n=n||e.slice(0,s),o=e.slice(s,e.length)),n=v3(n??e,r),{fullPath:n+(a&&"?")+a+o,path:n,query:i,hash:ul(o)}}function h3(t,e){const r=e.query?t(e.query):"";return e.path+(r&&"?")+r+(e.hash||"")}function X0(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function m3(t,e,r){const n=e.matched.length-1,i=r.matched.length-1;return n>-1&&n===i&&Ps(e.matched[n],r.matched[i])&&tD(e.params,r.params)&&t(e.query)===t(r.query)&&e.hash===r.hash}function Ps(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function tD(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(!g3(t[r],e[r]))return!1;return!0}function g3(t,e){return li(t)?Q0(t,e):li(e)?Q0(e,t):t===e}function Q0(t,e){return li(e)?t.length===e.length&&t.every((r,n)=>r===e[n]):t.length===1&&t[0]===e}function v3(t,e){if(t.startsWith("/"))return t;if(!t)return e;const r=e.split("/"),n=t.split("/"),i=n[n.length-1];(i===".."||i===".")&&n.push("");let a=r.length-1,o,s;for(o=0;o<n.length;o++)if(s=n[o],s!==".")if(s==="..")a>1&&a--;else break;return r.slice(0,a).join("/")+"/"+n.slice(o).join("/")}const xa={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var ll;(function(t){t.pop="pop",t.push="push"})(ll||(ll={}));var Hu;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Hu||(Hu={}));function y3(t){if(!t)if(ys){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),p3(t)}const b3=/^[^#]+#/;function x3(t,e){return t.replace(b3,"#")+e}function w3(t,e){const r=document.documentElement.getBoundingClientRect(),n=t.getBoundingClientRect();return{behavior:e.behavior,left:n.left-r.left-(e.left||0),top:n.top-r.top-(e.top||0)}}const Jd=()=>({left:window.scrollX,top:window.scrollY});function N3(t){let e;if("el"in t){const r=t.el,n=typeof r=="string"&&r.startsWith("#"),i=typeof r=="string"?n?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!i)return;e=w3(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function ey(t,e){return(history.state?history.state.position-e:-1)+t}const lm=new Map;function A3(t,e){lm.set(t,e)}function S3(t){const e=lm.get(t);return lm.delete(t),e}let D3=()=>location.protocol+"//"+location.host;function rD(t,e){const{pathname:r,search:n,hash:i}=e,a=t.indexOf("#");if(a>-1){let s=i.includes(t.slice(a))?t.slice(a).length:1,u=i.slice(s);return u[0]!=="/"&&(u="/"+u),X0(u,"")}return X0(r,t)+n+i}function E3(t,e,r,n){let i=[],a=[],o=null;const s=({state:d})=>{const p=rD(t,location),h=r.value,m=e.value;let g=0;if(d){if(r.value=p,e.value=d,o&&o===h){o=null;return}g=m?d.position-m.position:0}else n(p);i.forEach(y=>{y(r.value,h,{delta:g,type:ll.pop,direction:g?g>0?Hu.forward:Hu.back:Hu.unknown})})};function u(){o=r.value}function l(d){i.push(d);const p=()=>{const h=i.indexOf(d);h>-1&&i.splice(h,1)};return a.push(p),p}function c(){const{history:d}=window;d.state&&d.replaceState(Tt({},d.state,{scroll:Jd()}),"")}function f(){for(const d of a)d();a=[],window.removeEventListener("popstate",s),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",s),window.addEventListener("beforeunload",c,{passive:!0}),{pauseListeners:u,listen:l,destroy:f}}function ty(t,e,r,n=!1,i=!1){return{back:t,current:e,forward:r,replaced:n,position:window.history.length,scroll:i?Jd():null}}function C3(t){const{history:e,location:r}=window,n={value:rD(t,r)},i={value:e.state};i.value||a(n.value,{back:null,current:n.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function a(u,l,c){const f=t.indexOf("#"),d=f>-1?(r.host&&document.querySelector("base")?t:t.slice(f))+u:D3()+t+u;try{e[c?"replaceState":"pushState"](l,"",d),i.value=l}catch(p){console.error(p),r[c?"replace":"assign"](d)}}function o(u,l){const c=Tt({},e.state,ty(i.value.back,u,i.value.forward,!0),l,{position:i.value.position});a(u,c,!0),n.value=u}function s(u,l){const c=Tt({},i.value,e.state,{forward:u,scroll:Jd()});a(c.current,c,!0);const f=Tt({},ty(n.value,u,null),{position:c.position+1},l);a(u,f,!1),n.value=u}return{location:n,state:i,push:s,replace:o}}function nD(t){t=y3(t);const e=C3(t),r=E3(t,e.state,e.location,e.replace);function n(a,o=!0){o||r.pauseListeners(),history.go(a)}const i=Tt({location:"",base:t,go:n,createHref:x3.bind(null,t)},e,r);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function M3(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),nD(t)}function T3(t){return typeof t=="string"||t&&typeof t=="object"}function iD(t){return typeof t=="string"||typeof t=="symbol"}const aD=Symbol("");var ry;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(ry||(ry={}));function $s(t,e){return Tt(new Error,{type:t,[aD]:!0},e)}function Hi(t,e){return t instanceof Error&&aD in t&&(e==null||!!(t.type&e))}const ny="[^/]+?",_3={sensitive:!1,strict:!1,start:!0,end:!0},O3=/[.+*?^${}()[\]/\\]/g;function F3(t,e){const r=Tt({},_3,e),n=[];let i=r.start?"^":"";const a=[];for(const l of t){const c=l.length?[]:[90];r.strict&&!l.length&&(i+="/");for(let f=0;f<l.length;f++){const d=l[f];let p=40+(r.sensitive?.25:0);if(d.type===0)f||(i+="/"),i+=d.value.replace(O3,"\\$&"),p+=40;else if(d.type===1){const{value:h,repeatable:m,optional:g,regexp:y}=d;a.push({name:h,repeatable:m,optional:g});const N=y||ny;if(N!==ny){p+=10;try{new RegExp(`(${N})`)}catch(w){throw new Error(`Invalid custom RegExp for param "${h}" (${N}): `+w.message)}}let v=m?`((?:${N})(?:/(?:${N}))*)`:`(${N})`;f||(v=g&&l.length<2?`(?:/${v})`:"/"+v),g&&(v+="?"),i+=v,p+=20,g&&(p+=-8),m&&(p+=-20),N===".*"&&(p+=-50)}c.push(p)}n.push(c)}if(r.strict&&r.end){const l=n.length-1;n[l][n[l].length-1]+=.7000000000000001}r.strict||(i+="/?"),r.end?i+="$":r.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,r.sensitive?"":"i");function s(l){const c=l.match(o),f={};if(!c)return null;for(let d=1;d<c.length;d++){const p=c[d]||"",h=a[d-1];f[h.name]=p&&h.repeatable?p.split("/"):p}return f}function u(l){let c="",f=!1;for(const d of t){(!f||!c.endsWith("/"))&&(c+="/"),f=!1;for(const p of d)if(p.type===0)c+=p.value;else if(p.type===1){const{value:h,repeatable:m,optional:g}=p,y=h in l?l[h]:"";if(li(y)&&!m)throw new Error(`Provided param "${h}" is an array but it is not repeatable (* or + modifiers)`);const N=li(y)?y.join("/"):y;if(!N)if(g)d.length<2&&(c.endsWith("/")?c=c.slice(0,-1):f=!0);else throw new Error(`Missing required param "${h}"`);c+=N}}return c||"/"}return{re:o,score:n,keys:a,parse:s,stringify:u}}function B3(t,e){let r=0;for(;r<t.length&&r<e.length;){const n=e[r]-t[r];if(n)return n;r++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function oD(t,e){let r=0;const n=t.score,i=e.score;for(;r<n.length&&r<i.length;){const a=B3(n[r],i[r]);if(a)return a;r++}if(Math.abs(i.length-n.length)===1){if(iy(n))return 1;if(iy(i))return-1}return i.length-n.length}function iy(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const k3={type:0,value:""},I3=/[a-zA-Z0-9_]/;function R3(t){if(!t)return[[]];if(t==="/")return[[k3]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(p){throw new Error(`ERR (${r})/"${l}": ${p}`)}let r=0,n=r;const i=[];let a;function o(){a&&i.push(a),a=[]}let s=0,u,l="",c="";function f(){l&&(r===0?a.push({type:0,value:l}):r===1||r===2||r===3?(a.length>1&&(u==="*"||u==="+")&&e(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),a.push({type:1,value:l,regexp:c,repeatable:u==="*"||u==="+",optional:u==="*"||u==="?"})):e("Invalid state to consume buffer"),l="")}function d(){l+=u}for(;s<t.length;){if(u=t[s++],u==="\\"&&r!==2){n=r,r=4;continue}switch(r){case 0:u==="/"?(l&&f(),o()):u===":"?(f(),r=1):d();break;case 4:d(),r=n;break;case 1:u==="("?r=2:I3.test(u)?d():(f(),r=0,u!=="*"&&u!=="?"&&u!=="+"&&s--);break;case 2:u===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+u:r=3:c+=u;break;case 3:f(),r=0,u!=="*"&&u!=="?"&&u!=="+"&&s--,c="";break;default:e("Unknown state");break}}return r===2&&e(`Unfinished custom RegExp for param "${l}"`),f(),o(),i}function P3(t,e,r){const n=F3(R3(t.path),r),i=Tt(n,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function $3(t,e){const r=[],n=new Map;e=uy({strict:!1,end:!0,sensitive:!1},e);function i(f){return n.get(f)}function a(f,d,p){const h=!p,m=oy(f);m.aliasOf=p&&p.record;const g=uy(e,f),y=[m];if("alias"in f){const w=typeof f.alias=="string"?[f.alias]:f.alias;for(const x of w)y.push(oy(Tt({},m,{components:p?p.record.components:m.components,path:x,aliasOf:p?p.record:m})))}let N,v;for(const w of y){const{path:x}=w;if(d&&x[0]!=="/"){const b=d.record.path,S=b[b.length-1]==="/"?"":"/";w.path=d.record.path+(x&&S+x)}if(N=P3(w,d,g),p?p.alias.push(N):(v=v||N,v!==N&&v.alias.push(N),h&&f.name&&!sy(N)&&o(f.name)),sD(N)&&u(N),m.children){const b=m.children;for(let S=0;S<b.length;S++)a(b[S],N,p&&p.children[S])}p=p||N}return v?()=>{o(v)}:Uu}function o(f){if(iD(f)){const d=n.get(f);d&&(n.delete(f),r.splice(r.indexOf(d),1),d.children.forEach(o),d.alias.forEach(o))}else{const d=r.indexOf(f);d>-1&&(r.splice(d,1),f.record.name&&n.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function s(){return r}function u(f){const d=q3(f,r);r.splice(d,0,f),f.record.name&&!sy(f)&&n.set(f.record.name,f)}function l(f,d){let p,h={},m,g;if("name"in f&&f.name){if(p=n.get(f.name),!p)throw $s(1,{location:f});g=p.record.name,h=Tt(ay(d.params,p.keys.filter(v=>!v.optional).concat(p.parent?p.parent.keys.filter(v=>v.optional):[]).map(v=>v.name)),f.params&&ay(f.params,p.keys.map(v=>v.name))),m=p.stringify(h)}else if(f.path!=null)m=f.path,p=r.find(v=>v.re.test(m)),p&&(h=p.parse(m),g=p.record.name);else{if(p=d.name?n.get(d.name):r.find(v=>v.re.test(d.path)),!p)throw $s(1,{location:f,currentLocation:d});g=p.record.name,h=Tt({},d.params,f.params),m=p.stringify(h)}const y=[];let N=p;for(;N;)y.unshift(N.record),N=N.parent;return{name:g,path:m,params:h,matched:y,meta:z3(y)}}t.forEach(f=>a(f));function c(){r.length=0,n.clear()}return{addRoute:a,resolve:l,removeRoute:o,clearRoutes:c,getRoutes:s,getRecordMatcher:i}}function ay(t,e){const r={};for(const n of e)n in t&&(r[n]=t[n]);return r}function oy(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:L3(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function L3(t){const e={},r=t.props||!1;if("component"in t)e.default=r;else for(const n in t.components)e[n]=typeof r=="object"?r[n]:r;return e}function sy(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function z3(t){return t.reduce((e,r)=>Tt(e,r.meta),{})}function uy(t,e){const r={};for(const n in t)r[n]=n in e?e[n]:t[n];return r}function q3(t,e){let r=0,n=e.length;for(;r!==n;){const a=r+n>>1;oD(t,e[a])<0?n=a:r=a+1}const i=U3(t);return i&&(n=e.lastIndexOf(i,n-1)),n}function U3(t){let e=t;for(;e=e.parent;)if(sD(e)&&oD(t,e)===0)return e}function sD({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function H3(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<n.length;++i){const a=n[i].replace(ZS," "),o=a.indexOf("="),s=ul(o<0?a:a.slice(0,o)),u=o<0?null:ul(a.slice(o+1));if(s in e){let l=e[s];li(l)||(l=e[s]=[l]),l.push(u)}else e[s]=u}return e}function ly(t){let e="";for(let r in t){const n=t[r];if(r=l3(r),n==null){n!==void 0&&(e+=(e.length?"&":"")+r);continue}(li(n)?n.map(a=>a&&um(a)):[n&&um(n)]).forEach(a=>{a!==void 0&&(e+=(e.length?"&":"")+r,a!=null&&(e+="="+a))})}return e}function V3(t){const e={};for(const r in t){const n=t[r];n!==void 0&&(e[r]=li(n)?n.map(i=>i==null?null:""+i):n==null?n:""+n)}return e}const W3=Symbol(""),cy=Symbol(""),Yd=Symbol(""),Pg=Symbol(""),cm=Symbol("");function vu(){let t=[];function e(n){return t.push(n),()=>{const i=t.indexOf(n);i>-1&&t.splice(i,1)}}function r(){t=[]}return{add:e,list:()=>t.slice(),reset:r}}function Ca(t,e,r,n,i,a=o=>o()){const o=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise((s,u)=>{const l=d=>{d===!1?u($s(4,{from:r,to:e})):d instanceof Error?u(d):T3(d)?u($s(2,{from:e,to:d})):(o&&n.enterCallbacks[i]===o&&typeof d=="function"&&o.push(d),s())},c=a(()=>t.call(n&&n.instances[i],e,r,l));let f=Promise.resolve(c);t.length<3&&(f=f.then(l)),f.catch(d=>u(d))})}function eh(t,e,r,n,i=a=>a()){const a=[];for(const o of t)for(const s in o.components){let u=o.components[s];if(!(e!=="beforeRouteEnter"&&!o.instances[s]))if(JS(u)){const c=(u.__vccOpts||u)[e];c&&a.push(Ca(c,r,n,o,s,i))}else{let l=u();a.push(()=>l.then(c=>{if(!c)throw new Error(`Couldn't resolve component "${s}" at "${o.path}"`);const f=XO(c)?c.default:c;o.mods[s]=c,o.components[s]=f;const p=(f.__vccOpts||f)[e];return p&&Ca(p,r,n,o,s,i)()}))}}return a}function fy(t){const e=oi(Yd),r=oi(Pg),n=Wr(()=>{const u=Oe(t.to);return e.resolve(u)}),i=Wr(()=>{const{matched:u}=n.value,{length:l}=u,c=u[l-1],f=r.matched;if(!c||!f.length)return-1;const d=f.findIndex(Ps.bind(null,c));if(d>-1)return d;const p=dy(u[l-2]);return l>1&&dy(c)===p&&f[f.length-1].path!==p?f.findIndex(Ps.bind(null,u[l-2])):d}),a=Wr(()=>i.value>-1&&Y3(r.params,n.value.params)),o=Wr(()=>i.value>-1&&i.value===r.matched.length-1&&tD(r.params,n.value.params));function s(u={}){if(J3(u)){const l=e[Oe(t.replace)?"replace":"push"](Oe(t.to)).catch(Uu);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>l),l}return Promise.resolve()}return{route:n,href:Wr(()=>n.value.href),isActive:a,isExactActive:o,navigate:s}}function j3(t){return t.length===1?t[0]:t}const G3=Er({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:fy,setup(t,{slots:e}){const r=Ml(fy(t)),{options:n}=oi(Yd),i=Wr(()=>({[py(t.activeClass,n.linkActiveClass,"router-link-active")]:r.isActive,[py(t.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const a=e.default&&j3(e.default(r));return t.custom?a:Kd("a",{"aria-current":r.isExactActive?t.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:i.value},a)}}}),K3=G3;function J3(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Y3(t,e){for(const r in e){const n=e[r],i=t[r];if(typeof n=="string"){if(n!==i)return!1}else if(!li(i)||i.length!==n.length||n.some((a,o)=>a!==i[o]))return!1}return!0}function dy(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const py=(t,e,r)=>t??e??r,Z3=Er({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:r}){const n=oi(cm),i=Wr(()=>t.route||n.value),a=oi(cy,0),o=Wr(()=>{let l=Oe(a);const{matched:c}=i.value;let f;for(;(f=c[l])&&!f.components;)l++;return l}),s=Wr(()=>i.value.matched[o.value]);Vc(cy,Wr(()=>o.value+1)),Vc(W3,s),Vc(cm,i);const u=ut();return Ti(()=>[u.value,s.value,t.name],([l,c,f],[d,p,h])=>{c&&(c.instances[f]=l,p&&p!==c&&l&&l===d&&(c.leaveGuards.size||(c.leaveGuards=p.leaveGuards),c.updateGuards.size||(c.updateGuards=p.updateGuards))),l&&c&&(!p||!Ps(c,p)||!d)&&(c.enterCallbacks[f]||[]).forEach(m=>m(l))},{flush:"post"}),()=>{const l=i.value,c=t.name,f=s.value,d=f&&f.components[c];if(!d)return hy(r.default,{Component:d,route:l});const p=f.props[c],h=p?p===!0?l.params:typeof p=="function"?p(l):p:null,g=Kd(d,Tt({},h,e,{onVnodeUnmounted:y=>{y.component.isUnmounted&&(f.instances[c]=null)},ref:u}));return hy(r.default,{Component:g,route:l})||g}}});function hy(t,e){if(!t)return null;const r=t(e);return r.length===1?r[0]:r}const X3=Z3;function Q3(t){const e=$3(t.routes,t),r=t.parseQuery||H3,n=t.stringifyQuery||ly,i=t.history,a=vu(),o=vu(),s=vu(),u=ZT(xa);let l=xa;ys&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=Xp.bind(null,G=>""+G),f=Xp.bind(null,f3),d=Xp.bind(null,ul);function p(G,V){let U,K;return iD(G)?(U=e.getRecordMatcher(G),K=V):K=G,e.addRoute(K,U)}function h(G){const V=e.getRecordMatcher(G);V&&e.removeRoute(V)}function m(){return e.getRoutes().map(G=>G.record)}function g(G){return!!e.getRecordMatcher(G)}function y(G,V){if(V=Tt({},V||u.value),typeof G=="string"){const j=Qp(r,G,V.path),oe=e.resolve({path:j.path},V),k=i.createHref(j.fullPath);return Tt(j,oe,{params:d(oe.params),hash:ul(j.hash),redirectedFrom:void 0,href:k})}let U;if(G.path!=null)U=Tt({},G,{path:Qp(r,G.path,V.path).path});else{const j=Tt({},G.params);for(const oe in j)j[oe]==null&&delete j[oe];U=Tt({},G,{params:f(j)}),V.params=f(V.params)}const K=e.resolve(U,V),ae=G.hash||"";K.params=c(d(K.params));const B=h3(n,Tt({},G,{hash:u3(ae),path:K.path})),q=i.createHref(B);return Tt({fullPath:B,hash:ae,query:n===ly?V3(G.query):G.query||{}},K,{redirectedFrom:void 0,href:q})}function N(G){return typeof G=="string"?Qp(r,G,u.value.path):Tt({},G)}function v(G,V){if(l!==G)return $s(8,{from:V,to:G})}function w(G){return S(G)}function x(G){return w(Tt(N(G),{replace:!0}))}function b(G){const V=G.matched[G.matched.length-1];if(V&&V.redirect){const{redirect:U}=V;let K=typeof U=="function"?U(G):U;return typeof K=="string"&&(K=K.includes("?")||K.includes("#")?K=N(K):{path:K},K.params={}),Tt({query:G.query,hash:G.hash,params:K.path!=null?{}:G.params},K)}}function S(G,V){const U=l=y(G),K=u.value,ae=G.state,B=G.force,q=G.replace===!0,j=b(U);if(j)return S(Tt(N(j),{state:typeof j=="object"?Tt({},ae,j.state):ae,force:B,replace:q}),V||U);const oe=U;oe.redirectedFrom=V;let k;return!B&&m3(n,K,U)&&(k=$s(16,{to:oe,from:K}),ie(K,K,!0,!1)),(k?Promise.resolve(k):E(oe,K)).catch(z=>Hi(z)?Hi(z,2)?z:R(z):O(z,oe,K)).then(z=>{if(z){if(Hi(z,2))return S(Tt({replace:q},N(z.to),{state:typeof z.to=="object"?Tt({},ae,z.to.state):ae,force:B}),V||oe)}else z=M(oe,K,!0,q,ae);return D(oe,K,z),z})}function C(G,V){const U=v(G,V);return U?Promise.reject(U):Promise.resolve()}function A(G){const V=X.values().next().value;return V&&typeof V.runWithContext=="function"?V.runWithContext(G):G()}function E(G,V){let U;const[K,ae,B]=eF(G,V);U=eh(K.reverse(),"beforeRouteLeave",G,V);for(const j of K)j.leaveGuards.forEach(oe=>{U.push(Ca(oe,G,V))});const q=C.bind(null,G,V);return U.push(q),de(U).then(()=>{U=[];for(const j of a.list())U.push(Ca(j,G,V));return U.push(q),de(U)}).then(()=>{U=eh(ae,"beforeRouteUpdate",G,V);for(const j of ae)j.updateGuards.forEach(oe=>{U.push(Ca(oe,G,V))});return U.push(q),de(U)}).then(()=>{U=[];for(const j of B)if(j.beforeEnter)if(li(j.beforeEnter))for(const oe of j.beforeEnter)U.push(Ca(oe,G,V));else U.push(Ca(j.beforeEnter,G,V));return U.push(q),de(U)}).then(()=>(G.matched.forEach(j=>j.enterCallbacks={}),U=eh(B,"beforeRouteEnter",G,V,A),U.push(q),de(U))).then(()=>{U=[];for(const j of o.list())U.push(Ca(j,G,V));return U.push(q),de(U)}).catch(j=>Hi(j,8)?j:Promise.reject(j))}function D(G,V,U){s.list().forEach(K=>A(()=>K(G,V,U)))}function M(G,V,U,K,ae){const B=v(G,V);if(B)return B;const q=V===xa,j=ys?history.state:{};U&&(K||q?i.replace(G.fullPath,Tt({scroll:q&&j&&j.scroll},ae)):i.push(G.fullPath,ae)),u.value=G,ie(G,V,U,q),R()}let F;function I(){F||(F=i.listen((G,V,U)=>{if(!pe.listening)return;const K=y(G),ae=b(K);if(ae){S(Tt(ae,{replace:!0,force:!0}),K).catch(Uu);return}l=K;const B=u.value;ys&&A3(ey(B.fullPath,U.delta),Jd()),E(K,B).catch(q=>Hi(q,12)?q:Hi(q,2)?(S(Tt(N(q.to),{force:!0}),K).then(j=>{Hi(j,20)&&!U.delta&&U.type===ll.pop&&i.go(-1,!1)}).catch(Uu),Promise.reject()):(U.delta&&i.go(-U.delta,!1),O(q,K,B))).then(q=>{q=q||M(K,B,!1),q&&(U.delta&&!Hi(q,8)?i.go(-U.delta,!1):U.type===ll.pop&&Hi(q,20)&&i.go(-1,!1)),D(K,B,q)}).catch(Uu)}))}let P=vu(),T=vu(),$;function O(G,V,U){R(G);const K=T.list();return K.length?K.forEach(ae=>ae(G,V,U)):console.error(G),Promise.reject(G)}function W(){return $&&u.value!==xa?Promise.resolve():new Promise((G,V)=>{P.add([G,V])})}function R(G){return $||($=!G,I(),P.list().forEach(([V,U])=>G?U(G):V()),P.reset()),G}function ie(G,V,U,K){const{scrollBehavior:ae}=t;if(!ys||!ae)return Promise.resolve();const B=!U&&S3(ey(G.fullPath,0))||(K||!U)&&history.state&&history.state.scroll||null;return Cg().then(()=>ae(G,V,B)).then(q=>q&&N3(q)).catch(q=>O(q,G,V))}const te=G=>i.go(G);let Z;const X=new Set,pe={currentRoute:u,listening:!0,addRoute:p,removeRoute:h,clearRoutes:e.clearRoutes,hasRoute:g,getRoutes:m,resolve:y,options:t,push:w,replace:x,go:te,back:()=>te(-1),forward:()=>te(1),beforeEach:a.add,beforeResolve:o.add,afterEach:s.add,onError:T.add,isReady:W,install(G){const V=this;G.component("RouterLink",K3),G.component("RouterView",X3),G.config.globalProperties.$router=V,Object.defineProperty(G.config.globalProperties,"$route",{enumerable:!0,get:()=>Oe(u)}),ys&&!Z&&u.value===xa&&(Z=!0,w(i.location).catch(ae=>{}));const U={};for(const ae in xa)Object.defineProperty(U,ae,{get:()=>u.value[ae],enumerable:!0});G.provide(Yd,V),G.provide(Pg,nS(U)),G.provide(cm,u);const K=G.unmount;X.add(G),G.unmount=function(){X.delete(G),X.size<1&&(l=xa,F&&F(),F=null,u.value=xa,Z=!1,$=!1),K()}}};function de(G){return G.reduce((V,U)=>V.then(()=>A(U)),Promise.resolve())}return pe}function eF(t,e){const r=[],n=[],i=[],a=Math.max(e.matched.length,t.matched.length);for(let o=0;o<a;o++){const s=e.matched[o];s&&(t.matched.find(l=>Ps(l,s))?n.push(s):r.push(s));const u=t.matched[o];u&&(e.matched.find(l=>Ps(l,u))||i.push(u))}return[r,n,i]}function Ko(){return oi(Yd)}function tF(t){return oi(Pg)}const rF=""+new URL("../favicon.svg",import.meta.url).href,fm=(t,e)=>e.some(r=>t instanceof r);let my,gy;function nF(){return my||(my=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function iF(){return gy||(gy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dm=new WeakMap,th=new WeakMap,Zd=new WeakMap;function aF(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{r(Bo(t.result)),i()},o=()=>{n(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",o)});return Zd.set(e,t),e}function oF(t){if(dm.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{r(),i()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});dm.set(t,e)}let pm={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return dm.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Bo(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function uD(t){pm=t(pm)}function sF(t){return iF().includes(t)?function(...e){return t.apply(hm(this),e),Bo(this.request)}:function(...e){return Bo(t.apply(hm(this),e))}}function uF(t){return typeof t=="function"?sF(t):(t instanceof IDBTransaction&&oF(t),fm(t,nF())?new Proxy(t,pm):t)}function Bo(t){if(t instanceof IDBRequest)return aF(t);if(th.has(t))return th.get(t);const e=uF(t);return e!==t&&(th.set(t,e),Zd.set(e,t)),e}const hm=t=>Zd.get(t);function lD(t,e,{blocked:r,upgrade:n,blocking:i,terminated:a}={}){const o=indexedDB.open(t,e),s=Bo(o);return n&&o.addEventListener("upgradeneeded",u=>{n(Bo(o.result),u.oldVersion,u.newVersion,Bo(o.transaction),u)}),r&&o.addEventListener("blocked",u=>r(u.oldVersion,u.newVersion,u)),s.then(u=>{a&&u.addEventListener("close",()=>a()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),s}const lF=["get","getKey","getAll","getAllKeys","count"],cF=["put","add","delete","clear"],rh=new Map;function vy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(rh.get(e))return rh.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=cF.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||lF.includes(r)))return;const a=async function(o,...s){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return n&&(l=l.index(s.shift())),(await Promise.all([l[r](...s),i&&u.done]))[0]};return rh.set(e,a),a}uD(t=>({...t,get:(e,r,n)=>vy(e,r)||t.get(e,r,n),has:(e,r)=>!!vy(e,r)||t.has(e,r)}));const fF=["continue","continuePrimaryKey","advance"],yy={},mm=new WeakMap,cD=new WeakMap,dF={get(t,e){if(!fF.includes(e))return t[e];let r=yy[e];return r||(r=yy[e]=function(...n){mm.set(this,cD.get(this)[e](...n))}),r}};async function*pF(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;e=e;const r=new Proxy(e,dF);for(cD.set(r,e),Zd.set(r,hm(e));e;)yield r,e=await(mm.get(r)||e.continue()),mm.delete(r)}function by(t,e){return e===Symbol.asyncIterator&&fm(t,[IDBIndex,IDBObjectStore,IDBCursor])||e==="iterate"&&fm(t,[IDBIndex,IDBObjectStore])}uD(t=>({...t,get(e,r,n){return by(e,r)?pF:t.get(e,r,n)},has(e,r){return by(e,r)||t.has(e,r)}}));class hF{constructor(e,r){zp(this,"dbPromise");this.dbPromise=lD("notes-db",2,{upgrade(n){if(!n.objectStoreNames.contains("notes")){const i=n.createObjectStore("notes",{keyPath:"id"});if(e)for(const a of e)i.add(a)}if(!n.objectStoreNames.contains("tags")){const i=n.createObjectStore("tags",{keyPath:"id"});if(r)for(const a of r)i.add(a)}}})}async getAll(e){return(await this.dbPromise).getAll(e)}async save(e){await(await this.dbPromise).put("notes",e)}async saveTags(e,r){const n=await this.dbPromise,i=await n.get("notes",r);i&&(i.tags=e,await n.put("notes",i))}async saveContent(e,r){const n=await this.dbPromise,i=await n.get("notes",r);i&&(i.content=e,await n.put("notes",i))}async saveTitle(e,r){const n=await this.dbPromise,i=await n.get("notes",r);i&&(i.title=e,await n.put("notes",i))}async togle_pinned(e){const r=await this.dbPromise,n=await r.get("notes",e);n&&(n.pinned=!n.pinned,await r.put("notes",n))}async delete(e){await(await this.dbPromise).delete("notes",e)}async delete_tag(e){await(await this.dbPromise).delete("tags",e)}async create(e){const r=await this.dbPromise,n=await r.getAll("notes");return e.id=n.length+1,await r.add("notes",e),{id:e.id}}async create_tag(e){const r=await this.dbPromise,n=await r.getAll("tags");e.id=n.length+1,await r.add("tags",e)}async getNote(e){return(await this.dbPromise).get("notes",e)}async add_notes(e){if(e.length)for(const r of e)await this.create(r)}async add_tags(e){if(e.length)for(const r of e)await this.create_tag(r)}async save_tag_color(e,r){if(!r)return;const n=await this.dbPromise,i=await n.get("tags",e);i&&(i.color=r,await n.put("tags",i))}async reset(){const e=await this.getAll("notes"),r=await this.getAll("tags");for(const n of r)await this.delete_tag(n.id);for(const n of e)await this.delete(n.id)}}const Dt=new hF(void 0,void 0),mF={notes:[{id:1,pinned:!1,simply_edit:!1,title:"Buy groceries",content:"<p>Buy milk, eggs, and bread.</p>",date:"20 juin 2025",tags:[9,6]},{id:2,pinned:!1,simply_edit:!1,title:"Meeting with the team",content:"<p>Discuss the new project timeline.</p>",date:"21 juin 2025",tags:[8,5]},{id:3,pinned:!1,simply_edit:!1,title:"Urgent: Fix bug in the app",content:"<p>Critical bug needs to be fixed before release.</p>",date:"22 juin 2025",tags:[1,3]},{id:4,pinned:!1,simply_edit:!1,title:"Write a new blog post",content:"<p>Write about the importance of time management.</p>",date:"23 juin 2025",tags:[7,5]},{id:5,pinned:!1,simply_edit:!1,title:"Doctor appointment",content:"<p>Check-up appointment at 2:30 PM.</p>",date:"24 juin 2025",tags:[10,4]},{id:6,pinned:!1,simply_edit:!1,title:"Plan weekend trip",content:"<p>Plan a trip to the beach with friends.</p>",date:"25 juin 2025",tags:[4,7]},{id:7,pinned:!1,simply_edit:!1,title:"Call Mom",content:"<p>Check in with mom and see how she's doing.</p>",date:"26 juin 2025",tags:[4,6]},{id:8,pinned:!1,simply_edit:!1,title:"Send email to client",content:"<p>Follow up on the proposal sent last week.</p>",date:"27 juin 2025",tags:[5,8]},{id:9,pinned:!1,simply_edit:!1,title:"Finish project report",content:"<p>Complete the final draft of the report for the project.</p>",date:"28 juin 2025",tags:[3,5]},{id:10,pinned:!1,simply_edit:!1,title:"Check car maintenance",content:"<p>Ensure that the car's oil and tires are checked.</p>",date:"29 juin 2025",tags:[9,10]}],tags:[{id:1,name:"Urgent",active:!1,color:"#FF5733"},{id:2,name:"To Do",active:!1,color:"#33FF57"},{id:3,name:"Important",active:!1,color:"#3357FF"},{id:4,name:"Personal",active:!1,color:"#F0E68C"},{id:5,name:"Work",active:!1,color:"#8A2BE2"},{id:6,name:"Reminder",active:!1,color:"#FFD700"},{id:7,name:"Ideas",active:!1,color:"#C71585"},{id:8,name:"Meeting",active:!1,color:"#20B2AA"},{id:9,name:"Shopping",active:!1,color:"#D2691E"},{id:10,name:"Health",active:!1,color:"#008080"}]},gF=()=>{},vF=async(t,e)=>{(await fetch("https://api.silvernote.fr/api/...",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Notes:t,Tags:e})})).ok},nh={db:mF,info_message:gF,saving_all:vF};/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:fD,setPrototypeOf:xy,isFrozen:yF,getPrototypeOf:bF,getOwnPropertyDescriptor:xF}=Object;let{freeze:un,seal:Kn,create:dD}=Object,{apply:gm,construct:vm}=typeof Reflect<"u"&&Reflect;un||(un=function(e){return e});Kn||(Kn=function(e){return e});gm||(gm=function(e,r,n){return e.apply(r,n)});vm||(vm=function(e,r){return new e(...r)});const uc=ln(Array.prototype.forEach),wF=ln(Array.prototype.lastIndexOf),wy=ln(Array.prototype.pop),yu=ln(Array.prototype.push),NF=ln(Array.prototype.splice),Kc=ln(String.prototype.toLowerCase),ih=ln(String.prototype.toString),Ny=ln(String.prototype.match),bu=ln(String.prototype.replace),AF=ln(String.prototype.indexOf),SF=ln(String.prototype.trim),ri=ln(Object.prototype.hasOwnProperty),Qr=ln(RegExp.prototype.test),xu=DF(TypeError);function ln(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return gm(t,e,n)}}function DF(t){return function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return vm(t,r)}}function xt(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Kc;xy&&xy(t,null);let n=e.length;for(;n--;){let i=e[n];if(typeof i=="string"){const a=r(i);a!==i&&(yF(e)||(e[n]=a),i=a)}t[i]=!0}return t}function EF(t){for(let e=0;e<t.length;e++)ri(t,e)||(t[e]=null);return t}function Ji(t){const e=dD(null);for(const[r,n]of fD(t))ri(t,r)&&(Array.isArray(n)?e[r]=EF(n):n&&typeof n=="object"&&n.constructor===Object?e[r]=Ji(n):e[r]=n);return e}function wu(t,e){for(;t!==null;){const n=xF(t,e);if(n){if(n.get)return ln(n.get);if(typeof n.value=="function")return ln(n.value)}t=bF(t)}function r(){return null}return r}const Ay=un(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),ah=un(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),oh=un(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),CF=un(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),sh=un(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),MF=un(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Sy=un(["#text"]),Dy=un(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),uh=un(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Ey=un(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),lc=un(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),TF=Kn(/\{\{[\w\W]*|[\w\W]*\}\}/gm),_F=Kn(/<%[\w\W]*|[\w\W]*%>/gm),OF=Kn(/\$\{[\w\W]*/gm),FF=Kn(/^data-[\-\w.\u00B7-\uFFFF]+$/),BF=Kn(/^aria-[\-\w]+$/),pD=Kn(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),kF=Kn(/^(?:\w+script|data):/i),IF=Kn(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),hD=Kn(/^html$/i),RF=Kn(/^[a-z][.\w]*(-[.\w]+)+$/i);var Cy=Object.freeze({__proto__:null,ARIA_ATTR:BF,ATTR_WHITESPACE:IF,CUSTOM_ELEMENT:RF,DATA_ATTR:FF,DOCTYPE_NAME:hD,ERB_EXPR:_F,IS_ALLOWED_URI:pD,IS_SCRIPT_OR_DATA:kF,MUSTACHE_EXPR:TF,TMPLIT_EXPR:OF});const Nu={element:1,text:3,progressingInstruction:7,comment:8,document:9},PF=function(){return typeof window>"u"?null:window},$F=function(e,r){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let n=null;const i="data-tt-policy-suffix";r&&r.hasAttribute(i)&&(n=r.getAttribute(i));const a="dompurify"+(n?"#"+n:"");try{return e.createPolicy(a,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+a+" could not be created."),null}},My=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function mD(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:PF();const e=ze=>mD(ze);if(e.version="3.2.6",e.removed=[],!t||!t.document||t.document.nodeType!==Nu.document||!t.Element)return e.isSupported=!1,e;let{document:r}=t;const n=r,i=n.currentScript,{DocumentFragment:a,HTMLTemplateElement:o,Node:s,Element:u,NodeFilter:l,NamedNodeMap:c=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:f,DOMParser:d,trustedTypes:p}=t,h=u.prototype,m=wu(h,"cloneNode"),g=wu(h,"remove"),y=wu(h,"nextSibling"),N=wu(h,"childNodes"),v=wu(h,"parentNode");if(typeof o=="function"){const ze=r.createElement("template");ze.content&&ze.content.ownerDocument&&(r=ze.content.ownerDocument)}let w,x="";const{implementation:b,createNodeIterator:S,createDocumentFragment:C,getElementsByTagName:A}=r,{importNode:E}=n;let D=My();e.isSupported=typeof fD=="function"&&typeof v=="function"&&b&&b.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:M,ERB_EXPR:F,TMPLIT_EXPR:I,DATA_ATTR:P,ARIA_ATTR:T,IS_SCRIPT_OR_DATA:$,ATTR_WHITESPACE:O,CUSTOM_ELEMENT:W}=Cy;let{IS_ALLOWED_URI:R}=Cy,ie=null;const te=xt({},[...Ay,...ah,...oh,...sh,...Sy]);let Z=null;const X=xt({},[...Dy,...uh,...Ey,...lc]);let pe=Object.seal(dD(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),de=null,G=null,V=!0,U=!0,K=!1,ae=!0,B=!1,q=!0,j=!1,oe=!1,k=!1,z=!1,Y=!1,ne=!1,se=!0,ue=!1;const ve="user-content-";let L=!0,J=!1,re={},fe=null;const he=xt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let me=null;const Se=xt({},["audio","video","img","source","image","track"]);let xe=null;const Ee=xt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),we="http://www.w3.org/1998/Math/MathML",nt="http://www.w3.org/2000/svg",ke="http://www.w3.org/1999/xhtml";let Xe=ke,_=!1,ee=null;const ge=xt({},[we,nt,ke],ih);let Ne=xt({},["mi","mo","mn","ms","mtext"]),qe=xt({},["annotation-xml"]);const Qe=xt({},["title","style","font","a","script"]);let nr=null;const du=["application/xhtml+xml","text/html"],Rp="text/html";let sr=null,va=null;const Pp=r.createElement("form"),Gl=function(le){return le instanceof RegExp||le instanceof Function},pu=function(){let le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(va&&va===le)){if((!le||typeof le!="object")&&(le={}),le=Ji(le),nr=du.indexOf(le.PARSER_MEDIA_TYPE)===-1?Rp:le.PARSER_MEDIA_TYPE,sr=nr==="application/xhtml+xml"?ih:Kc,ie=ri(le,"ALLOWED_TAGS")?xt({},le.ALLOWED_TAGS,sr):te,Z=ri(le,"ALLOWED_ATTR")?xt({},le.ALLOWED_ATTR,sr):X,ee=ri(le,"ALLOWED_NAMESPACES")?xt({},le.ALLOWED_NAMESPACES,ih):ge,xe=ri(le,"ADD_URI_SAFE_ATTR")?xt(Ji(Ee),le.ADD_URI_SAFE_ATTR,sr):Ee,me=ri(le,"ADD_DATA_URI_TAGS")?xt(Ji(Se),le.ADD_DATA_URI_TAGS,sr):Se,fe=ri(le,"FORBID_CONTENTS")?xt({},le.FORBID_CONTENTS,sr):he,de=ri(le,"FORBID_TAGS")?xt({},le.FORBID_TAGS,sr):Ji({}),G=ri(le,"FORBID_ATTR")?xt({},le.FORBID_ATTR,sr):Ji({}),re=ri(le,"USE_PROFILES")?le.USE_PROFILES:!1,V=le.ALLOW_ARIA_ATTR!==!1,U=le.ALLOW_DATA_ATTR!==!1,K=le.ALLOW_UNKNOWN_PROTOCOLS||!1,ae=le.ALLOW_SELF_CLOSE_IN_ATTR!==!1,B=le.SAFE_FOR_TEMPLATES||!1,q=le.SAFE_FOR_XML!==!1,j=le.WHOLE_DOCUMENT||!1,z=le.RETURN_DOM||!1,Y=le.RETURN_DOM_FRAGMENT||!1,ne=le.RETURN_TRUSTED_TYPE||!1,k=le.FORCE_BODY||!1,se=le.SANITIZE_DOM!==!1,ue=le.SANITIZE_NAMED_PROPS||!1,L=le.KEEP_CONTENT!==!1,J=le.IN_PLACE||!1,R=le.ALLOWED_URI_REGEXP||pD,Xe=le.NAMESPACE||ke,Ne=le.MATHML_TEXT_INTEGRATION_POINTS||Ne,qe=le.HTML_INTEGRATION_POINTS||qe,pe=le.CUSTOM_ELEMENT_HANDLING||{},le.CUSTOM_ELEMENT_HANDLING&&Gl(le.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(pe.tagNameCheck=le.CUSTOM_ELEMENT_HANDLING.tagNameCheck),le.CUSTOM_ELEMENT_HANDLING&&Gl(le.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(pe.attributeNameCheck=le.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),le.CUSTOM_ELEMENT_HANDLING&&typeof le.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(pe.allowCustomizedBuiltInElements=le.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),B&&(U=!1),Y&&(z=!0),re&&(ie=xt({},Sy),Z=[],re.html===!0&&(xt(ie,Ay),xt(Z,Dy)),re.svg===!0&&(xt(ie,ah),xt(Z,uh),xt(Z,lc)),re.svgFilters===!0&&(xt(ie,oh),xt(Z,uh),xt(Z,lc)),re.mathMl===!0&&(xt(ie,sh),xt(Z,Ey),xt(Z,lc))),le.ADD_TAGS&&(ie===te&&(ie=Ji(ie)),xt(ie,le.ADD_TAGS,sr)),le.ADD_ATTR&&(Z===X&&(Z=Ji(Z)),xt(Z,le.ADD_ATTR,sr)),le.ADD_URI_SAFE_ATTR&&xt(xe,le.ADD_URI_SAFE_ATTR,sr),le.FORBID_CONTENTS&&(fe===he&&(fe=Ji(fe)),xt(fe,le.FORBID_CONTENTS,sr)),L&&(ie["#text"]=!0),j&&xt(ie,["html","head","body"]),ie.table&&(xt(ie,["tbody"]),delete de.tbody),le.TRUSTED_TYPES_POLICY){if(typeof le.TRUSTED_TYPES_POLICY.createHTML!="function")throw xu('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof le.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw xu('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');w=le.TRUSTED_TYPES_POLICY,x=w.createHTML("")}else w===void 0&&(w=$F(p,i)),w!==null&&typeof x=="string"&&(x=w.createHTML(""));un&&un(le),va=le}},Kl=xt({},[...ah,...oh,...CF]),Jl=xt({},[...sh,...MF]),$p=function(le){let _e=v(le);(!_e||!_e.tagName)&&(_e={namespaceURI:Xe,tagName:"template"});const Le=Kc(le.tagName),Vt=Kc(_e.tagName);return ee[le.namespaceURI]?le.namespaceURI===nt?_e.namespaceURI===ke?Le==="svg":_e.namespaceURI===we?Le==="svg"&&(Vt==="annotation-xml"||Ne[Vt]):!!Kl[Le]:le.namespaceURI===we?_e.namespaceURI===ke?Le==="math":_e.namespaceURI===nt?Le==="math"&&qe[Vt]:!!Jl[Le]:le.namespaceURI===ke?_e.namespaceURI===nt&&!qe[Vt]||_e.namespaceURI===we&&!Ne[Vt]?!1:!Jl[Le]&&(Qe[Le]||!Kl[Le]):!!(nr==="application/xhtml+xml"&&ee[le.namespaceURI]):!1},Fn=function(le){yu(e.removed,{element:le});try{v(le).removeChild(le)}catch{g(le)}},ya=function(le,_e){try{yu(e.removed,{attribute:_e.getAttributeNode(le),from:_e})}catch{yu(e.removed,{attribute:null,from:_e})}if(_e.removeAttribute(le),le==="is")if(z||Y)try{Fn(_e)}catch{}else try{_e.setAttribute(le,"")}catch{}},Yl=function(le){let _e=null,Le=null;if(k)le="<remove></remove>"+le;else{const Ye=Ny(le,/^[\r\n\t ]+/);Le=Ye&&Ye[0]}nr==="application/xhtml+xml"&&Xe===ke&&(le='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+le+"</body></html>");const Vt=w?w.createHTML(le):le;if(Xe===ke)try{_e=new d().parseFromString(Vt,nr)}catch{}if(!_e||!_e.documentElement){_e=b.createDocument(Xe,"template",null);try{_e.documentElement.innerHTML=_?x:Vt}catch{}}const Yt=_e.body||_e.documentElement;return le&&Le&&Yt.insertBefore(r.createTextNode(Le),Yt.childNodes[0]||null),Xe===ke?A.call(_e,j?"html":"body")[0]:j?_e.documentElement:Yt},Zl=function(le){return S.call(le.ownerDocument||le,le,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT|l.SHOW_PROCESSING_INSTRUCTION|l.SHOW_CDATA_SECTION,null)},hu=function(le){return le instanceof f&&(typeof le.nodeName!="string"||typeof le.textContent!="string"||typeof le.removeChild!="function"||!(le.attributes instanceof c)||typeof le.removeAttribute!="function"||typeof le.setAttribute!="function"||typeof le.namespaceURI!="string"||typeof le.insertBefore!="function"||typeof le.hasChildNodes!="function")},Xl=function(le){return typeof s=="function"&&le instanceof s};function Qn(ze,le,_e){uc(ze,Le=>{Le.call(e,le,_e,va)})}const Ql=function(le){let _e=null;if(Qn(D.beforeSanitizeElements,le,null),hu(le))return Fn(le),!0;const Le=sr(le.nodeName);if(Qn(D.uponSanitizeElement,le,{tagName:Le,allowedTags:ie}),q&&le.hasChildNodes()&&!Xl(le.firstElementChild)&&Qr(/<[/\w!]/g,le.innerHTML)&&Qr(/<[/\w!]/g,le.textContent)||le.nodeType===Nu.progressingInstruction||q&&le.nodeType===Nu.comment&&Qr(/<[/\w]/g,le.data))return Fn(le),!0;if(!ie[Le]||de[Le]){if(!de[Le]&&tc(Le)&&(pe.tagNameCheck instanceof RegExp&&Qr(pe.tagNameCheck,Le)||pe.tagNameCheck instanceof Function&&pe.tagNameCheck(Le)))return!1;if(L&&!fe[Le]){const Vt=v(le)||le.parentNode,Yt=N(le)||le.childNodes;if(Yt&&Vt){const Ye=Yt.length;for(let Ft=Ye-1;Ft>=0;--Ft){const ei=m(Yt[Ft],!0);ei.__removalCount=(le.__removalCount||0)+1,Vt.insertBefore(ei,y(le))}}}return Fn(le),!0}return le instanceof u&&!$p(le)||(Le==="noscript"||Le==="noembed"||Le==="noframes")&&Qr(/<\/no(script|embed|frames)/i,le.innerHTML)?(Fn(le),!0):(B&&le.nodeType===Nu.text&&(_e=le.textContent,uc([M,F,I],Vt=>{_e=bu(_e,Vt," ")}),le.textContent!==_e&&(yu(e.removed,{element:le.cloneNode()}),le.textContent=_e)),Qn(D.afterSanitizeElements,le,null),!1)},ec=function(le,_e,Le){if(se&&(_e==="id"||_e==="name")&&(Le in r||Le in Pp))return!1;if(!(U&&!G[_e]&&Qr(P,_e))){if(!(V&&Qr(T,_e))){if(!Z[_e]||G[_e]){if(!(tc(le)&&(pe.tagNameCheck instanceof RegExp&&Qr(pe.tagNameCheck,le)||pe.tagNameCheck instanceof Function&&pe.tagNameCheck(le))&&(pe.attributeNameCheck instanceof RegExp&&Qr(pe.attributeNameCheck,_e)||pe.attributeNameCheck instanceof Function&&pe.attributeNameCheck(_e))||_e==="is"&&pe.allowCustomizedBuiltInElements&&(pe.tagNameCheck instanceof RegExp&&Qr(pe.tagNameCheck,Le)||pe.tagNameCheck instanceof Function&&pe.tagNameCheck(Le))))return!1}else if(!xe[_e]){if(!Qr(R,bu(Le,O,""))){if(!((_e==="src"||_e==="xlink:href"||_e==="href")&&le!=="script"&&AF(Le,"data:")===0&&me[le])){if(!(K&&!Qr($,bu(Le,O,"")))){if(Le)return!1}}}}}}return!0},tc=function(le){return le!=="annotation-xml"&&Ny(le,W)},rc=function(le){Qn(D.beforeSanitizeAttributes,le,null);const{attributes:_e}=le;if(!_e||hu(le))return;const Le={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Z,forceKeepAttr:void 0};let Vt=_e.length;for(;Vt--;){const Yt=_e[Vt],{name:Ye,namespaceURI:Ft,value:ei}=Yt,bi=sr(Ye),zi=ei;let gr=Ye==="value"?zi:SF(zi);if(Le.attrName=bi,Le.attrValue=gr,Le.keepAttr=!0,Le.forceKeepAttr=void 0,Qn(D.uponSanitizeAttribute,le,Le),gr=Le.attrValue,ue&&(bi==="id"||bi==="name")&&(ya(Ye,le),gr=ve+gr),q&&Qr(/((--!?|])>)|<\/(style|title)/i,gr)){ya(Ye,le);continue}if(Le.forceKeepAttr)continue;if(!Le.keepAttr){ya(Ye,le);continue}if(!ae&&Qr(/\/>/i,gr)){ya(Ye,le);continue}B&&uc([M,F,I],c0=>{gr=bu(gr,c0," ")});const l0=sr(le.nodeName);if(!ec(l0,bi,gr)){ya(Ye,le);continue}if(w&&typeof p=="object"&&typeof p.getAttributeType=="function"&&!Ft)switch(p.getAttributeType(l0,bi)){case"TrustedHTML":{gr=w.createHTML(gr);break}case"TrustedScriptURL":{gr=w.createScriptURL(gr);break}}if(gr!==zi)try{Ft?le.setAttributeNS(Ft,Ye,gr):le.setAttribute(Ye,gr),hu(le)?Fn(le):wy(e.removed)}catch{ya(Ye,le)}}Qn(D.afterSanitizeAttributes,le,null)},Lp=function ze(le){let _e=null;const Le=Zl(le);for(Qn(D.beforeSanitizeShadowDOM,le,null);_e=Le.nextNode();)Qn(D.uponSanitizeShadowNode,_e,null),Ql(_e),rc(_e),_e.content instanceof a&&ze(_e.content);Qn(D.afterSanitizeShadowDOM,le,null)};return e.sanitize=function(ze){let le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_e=null,Le=null,Vt=null,Yt=null;if(_=!ze,_&&(ze="<!-->"),typeof ze!="string"&&!Xl(ze))if(typeof ze.toString=="function"){if(ze=ze.toString(),typeof ze!="string")throw xu("dirty is not a string, aborting")}else throw xu("toString is not a function");if(!e.isSupported)return ze;if(oe||pu(le),e.removed=[],typeof ze=="string"&&(J=!1),J){if(ze.nodeName){const ei=sr(ze.nodeName);if(!ie[ei]||de[ei])throw xu("root node is forbidden and cannot be sanitized in-place")}}else if(ze instanceof s)_e=Yl("<!---->"),Le=_e.ownerDocument.importNode(ze,!0),Le.nodeType===Nu.element&&Le.nodeName==="BODY"||Le.nodeName==="HTML"?_e=Le:_e.appendChild(Le);else{if(!z&&!B&&!j&&ze.indexOf("<")===-1)return w&&ne?w.createHTML(ze):ze;if(_e=Yl(ze),!_e)return z?null:ne?x:""}_e&&k&&Fn(_e.firstChild);const Ye=Zl(J?ze:_e);for(;Vt=Ye.nextNode();)Ql(Vt),rc(Vt),Vt.content instanceof a&&Lp(Vt.content);if(J)return ze;if(z){if(Y)for(Yt=C.call(_e.ownerDocument);_e.firstChild;)Yt.appendChild(_e.firstChild);else Yt=_e;return(Z.shadowroot||Z.shadowrootmode)&&(Yt=E.call(n,Yt,!0)),Yt}let Ft=j?_e.outerHTML:_e.innerHTML;return j&&ie["!doctype"]&&_e.ownerDocument&&_e.ownerDocument.doctype&&_e.ownerDocument.doctype.name&&Qr(hD,_e.ownerDocument.doctype.name)&&(Ft="<!DOCTYPE "+_e.ownerDocument.doctype.name+`>
`+Ft),B&&uc([M,F,I],ei=>{Ft=bu(Ft,ei," ")}),w&&ne?w.createHTML(Ft):Ft},e.setConfig=function(){let ze=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};pu(ze),oe=!0},e.clearConfig=function(){va=null,oe=!1},e.isValidAttribute=function(ze,le,_e){va||pu({});const Le=sr(ze),Vt=sr(le);return ec(Le,Vt,_e)},e.addHook=function(ze,le){typeof le=="function"&&yu(D[ze],le)},e.removeHook=function(ze,le){if(le!==void 0){const _e=wF(D[ze],le);return _e===-1?void 0:NF(D[ze],_e,1)[0]}return wy(D[ze])},e.removeHooks=function(ze){D[ze]=[]},e.removeAllHooks=function(){D=My()},e}var LF=mD();class zF{date(){const e=new Date,r=e.getDate().toString().padStart(2,"0"),i=["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"][e.getMonth()],a=e.getFullYear();return`${r} ${i} ${a}`}clean_html(e){return LF.sanitize(e)}htmlToText(e){var n;const r=document.createElement("div");return r.innerHTML=this.clean_html(e),r.querySelectorAll("br").forEach(i=>i.replaceWith(`
`)),r.querySelectorAll("p, div, span, li, ul, ol, h1, h2, h3, h4, h5, h6, header, footer, main, section, article, aside, nav, script, style, img, video, audio, source, picture, figure, figcaption, table, thead, tbody, tfoot, tr, td, th, form, input, button, select, option, textarea, label, iframe, canvas, svg, pre, code, blockquote, cite, address, details, summary, mark, time, abbr, b, i, strong, em, small, sub, sup, br, hr").forEach(i=>{i.insertAdjacentText("afterend",`
`)}),((n=r.textContent)==null?void 0:n.trim())||""}async hash(e){const n=new TextEncoder().encode(e),i=await crypto.subtle.digest("SHA-256",n);return Array.from(new Uint8Array(i)).map(s=>s.toString(16).padStart(2,"0")).join("")}get_text_color(e){if(e=e.replace("#",""),e.length!==6)return"#000";const r=parseInt(e.slice(0,2),16),n=parseInt(e.slice(2,4),16),i=parseInt(e.slice(4,6),16);return .299*r+.587*n+.114*i>186?"#000000":"#FFFFFF"}}const Ty=async t=>{t.value=await Dt.getAll("notes")||null;const e=t.value.sort((r,n)=>r.pinned===n.pinned?n.id-r.id:r.pinned?-1:1);t.value=e},Lt=new zF;class $g{constructor(e){zp(this,"dbPromise");this.dbPromise=lD("settings-db",1,{upgrade(r){if(!r.objectStoreNames.contains("settings")){const n=r.createObjectStore("settings");e&&n.put(e,"settings")}}})}async get(){return(await this.dbPromise).get("settings","settings")}async save(e){await(await this.dbPromise).put("settings",e,"settings")}async clear(){await(await this.dbPromise).clear("settings")}}const qF={gnraux:[{id:"",name:"Activer les notifications",type:"checkbox",active:!1},{id:"",name:"Langue",type:"checkbox",active:!1}],avanc:[{id:"dev_mode",name:"Mode dveloppeur",type:"checkbox",active:!1}],dev_mode:[{id:"hitbox",name:"Activer les hitbox",type:"checkbox",active:!1},{id:"",name:"Afficher la console",type:"checkbox",active:!1}]},Jo=async()=>{var r;const e=await new $g().get();return((r=e==null?void 0:e.dev_mode.find(n=>n.id=="hitbox"))==null?void 0:r.active)??!1},UF=async()=>{var r;const e=await new $g().get();return((r=e==null?void 0:e.avanc.find(n=>n.id=="dev_mode"))==null?void 0:r.active)??!1},HF=window.matchMedia("(prefers-color-scheme: dark)").matches;function Lg(){const t=localStorage.getItem("theme");t=="dark"||t=="light"?Jc(t=="light"):Jc(!HF)}function Jc(t){const e=document.body;t?(e.classList.add("light"),e.classList.remove("dark")):(e.classList.add("dark"),e.classList.remove("light")),localStorage.setItem("theme",t?"light":"dark")}const VF={class:"font-bold text-2xl"},WF={class:"text-lg"},jF=Er({__name:"Danger_card",props:{title:{},content:{},href:{default:""},btn:{type:Boolean,default:!1}},setup(t){const e=t,r=()=>{e.btn&&e.href&&window.open(e.href,"_blank")};return(n,i)=>(Pe(),Ve("div",{class:lt([n.btn?"cursor-pointer":"","bg-[#fff2d0] mr-4 ml-4 text-[#D96E30] p-5 border-[#3B3B3B] border-2 relative"]),style:{"border-radius":"15px","font-family":"'Montserrat'"},onClick:r},[ce("span",VF,ar(n.title),1),ce("p",WF,ar(n.content),1)],2))}}),GF={key:0,class:"fixed inset-0 z-50 flex items-center justify-center",style:{"background-color":"#00000090","backdrop-filter":"blur(5px)"}},KF={class:"bg-[var(--bg)] rounded-md shadow-md p-4 m-3 w-full max-w-sm text-sm"},JF={class:"text-base font-semibold mb-2"},YF={class:"mb-4"},gD=Er({__name:"ConfirmDialog",props:{visible:{type:Boolean},title:{},message:{}},emits:["confirm","cancel"],setup(t,{emit:e}){const r=e,n=()=>r("confirm"),i=()=>r("cancel");return(a,o)=>(Pe(),qa(Tg,{to:"body"},[a.visible?(Pe(),Ve("div",GF,[ce("div",KF,[ce("h2",JF,ar(a.title),1),ce("p",YF,ar(a.message),1),ce("div",{class:"flex justify-end gap-2"},[ce("button",{class:"px-3 py-1 rounded border cursor-pointer",onClick:i}," Annuler "),ce("button",{class:"px-3 py-1 rounded text-[var(--text)] bg-red-600 hover:bg-red-900 cursor-pointer",onClick:n}," Confirmer ")])])])):Qt("",!0)]))}}),ZF={role:"alert",class:"z-50 bg-red-100 dark:bg-red-900 border-l-4 border-red-500 dark:border-red-700 text-red-900 dark:text-red-100 p-2 rounded-lg flex items-center transition duration-300 ease-in-out hover:bg-red-200 dark:hover:bg-red-800 transform hover:scale-105"},XF={class:"text-xs font-semibold"},QF=Er({__name:"error",props:{content:{}},setup(t){return(e,r)=>(Pe(),Ve("div",ZF,[r[0]||(r[0]=ce("svg",{stroke:"currentColor",viewBox:"0 0 24 24",fill:"none",class:"h-5 w-5 flex-shrink-0 mr-2 text-red-600",xmlns:"http://www.w3.org/2000/svg"},[ce("path",{d:"M13 16h-1v-4h1m0-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z","stroke-width":"2","stroke-linejoin":"round","stroke-linecap":"round"})],-1)),ce("p",XF,"Erreur - "+ar(e.content),1)]))}}),eB={role:"alert",class:"bg-green-100 dark:bg-green-900 border-l-4 border-green-500 dark:border-green-700 text-green-900 dark:text-green-100 p-2 rounded-lg flex items-center transition duration-300 ease-in-out hover:bg-green-200 dark:hover:bg-green-800 transform hover:scale-105"},tB={class:"text-xs font-semibold"},rB=Er({__name:"success",props:{content:{}},setup(t){return(e,r)=>(Pe(),Ve("div",eB,[r[0]||(r[0]=ce("svg",{stroke:"currentColor",viewBox:"0 0 24 24",fill:"none",class:"h-5 w-5 flex-shrink-0 mr-2 text-green-600",xmlns:"http://www.w3.org/2000/svg"},[ce("path",{d:"M13 16h-1v-4h1m0-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z","stroke-width":"2","stroke-linejoin":"round","stroke-linecap":"round"})],-1)),ce("p",tB,"Succs - "+ar(e.content),1)]))}}),nB=""+new URL("svgs/social/watsapp.svg",import.meta.url).href,iB=""+new URL("svgs/copy.svg",import.meta.url).href,aB={key:2,class:"fixed right-0 left-0 bottom-0 z-50 flex items-center justify-center px-4"},oB={class:"bg-[#FFF8F0] rounded-md p-4 m-3 mb-25 w-full max-w-sm text-sm flex items-center justify-center",style:{"border-radius":"15px","box-shadow":"0 0 10px #3336"}},sB={class:"flex flex-row items-center gap-5"},uB=["src"],lB=["src"],cB=Er({__name:"share_menu",props:{visible:{type:Boolean},title:{},content:{}},setup(t){const e=t,r=ut(!1);let n="";const i=ut(!1);let a="";const o=(u,l)=>{u=="error"?(n=l,r.value=!0,setTimeout(()=>{r.value=!1},3e3)):u=="success"&&(a=l,i.value=!0,setTimeout(()=>{i.value=!1},3e3))},s=async u=>{if(console.log("Partage d'une note par",u),u==="watsapp"){const c=`https://wa.me/?text=${encodeURIComponent(`Je te partage ma note : ${await Lt.htmlToText(e.title)}


${await Lt.htmlToText(e.content)}


Envoy via www.silvernote.fr`)}`;window.open(c,"_blank")}else if(u==="nav")if(navigator.share)try{await navigator.share({title:e.title,text:e.content,url:window.location.href}),console.log("Partag avec succs")}catch(l){console.error("Erreur de partage",l),o("error","Une erreur est survenue lors du partage.")}else o("error","Le partage n'est pas support sur ce navigateur.");else if(u==="copy")try{await navigator.clipboard.writeText(`${e.title}

${e.content}`),console.log("Contenu copi"),o("success","Note copier.")}catch(l){console.error("Erreur lors de la copie :",l),o("error","Une erreur est survenue lors de la copie.")}};return(u,l)=>(Pe(),qa(Tg,{to:"body"},[r.value?(Pe(),qa(QF,{key:0,class:"z-50 fixed top-14 ml-2",content:Oe(n)},null,8,["content"])):Qt("",!0),i.value?(Pe(),qa(rB,{key:1,class:"z-50 fixed top-14 ml-2",content:Oe(a)},null,8,["content"])):Qt("",!0),u.visible?(Pe(),Ve("div",aB,[ce("div",oB,[ce("ul",sB,[ce("li",{onClick:l[0]||(l[0]=c=>s("nav"))},l[3]||(l[3]=[ce("button",{class:"icon-button"},[ce("svg",{width:"30",height:"30",fill:"currentColor",viewBox:"0 0 24 24"},[ce("path",{d:"M15.75 5.125a3.125 3.125 0 1 1 .754 2.035l-8.397 3.9a3.124 3.124 0 0 1 0 1.88l8.397 3.9a3.125 3.125 0 1 1-.61 1.095l-8.397-3.9a3.125 3.125 0 1 1 0-4.07l8.397-3.9a3.125 3.125 0 0 1-.144-.94Z"})])],-1)])),ce("li",{onClick:l[1]||(l[1]=c=>s("watsapp"))},[ce("img",{class:"icon-button w-10 h-10",src:Oe(nB)},null,8,uB)]),ce("li",{onClick:l[2]||(l[2]=c=>s("copy"))},[ce("img",{class:"icon-button w-10 h-10",style:{filter:"invert(55%) sepia(79%) saturate(558%) hue-rotate(342deg) brightness(93%) contrast(89%)"},src:Oe(iB)},null,8,lB)])])])])):Qt("",!0)]))}}),fB=Ii(cB,[["__scopeId","data-v-072f7954"]]),dB={key:0,class:"fixed inset-0 z-50 flex items-center justify-center",style:{"background-color":"#00000060"}},pB={class:"fixed inset-0 top-10 z-50 flex items-center justify-center px-4"},hB={class:"bg-[var(--bg2)] rounded-md p-4 m-3 mb-25 w-full max-w-sm text-sm flex flex-col items-center justify-center top",style:{"border-radius":"15px"}},mB={class:"flex flex-col items-center gap-5 w-full max-h-[60vh] overflow-auto pr-20 pl-20 mt-10"},gB=["for"],vB={class:"text-lg max-w-[60%]"},yB={class:"switch flex flex-row"},bB=["id","checked","onChange"],xB=Er({__name:"tags_manager",props:{tags:{},active:{type:Boolean}},emits:["update:tags","update:active"],setup(t,{emit:e}){const r=t,n=e,i=ut([]),a=ut([...r.tags]),o=u=>{a.value.includes(u)?a.value=a.value.filter(l=>l!==u):a.value.push(u)},s=()=>{n("update:tags",[...a.value]),n("update:active",!1)};return Ti(()=>r.active,u=>{u&&(a.value=[...r.tags])}),er(async()=>{i.value=await Dt.getAll("tags")}),Ti(i,async()=>{i.value=await Dt.getAll("tags")}),(u,l)=>(Pe(),qa(Tg,{to:"body"},[r.active?(Pe(),Ve("div",dB,[ce("div",pB,[ce("div",hB,[l[1]||(l[1]=ce("h1",{class:"text-2xl font-bold",style:{"font-family":"'Montserrat'","letter-spacing":"2px"}},"Grer les dossiers",-1)),l[2]||(l[2]=ce("span",null,"Slectionnez les dossiers contenant la note",-1)),ce("ul",mB,[(Pe(!0),Ve(jt,null,aa(i.value,(c,f)=>(Pe(),Ve("li",{class:"w-full",key:f},[ce("label",{class:"flex flex-row justify-between items-center",for:`switch-${c.id}`},[ce("span",vB,ar(c.name),1),ce("div",yB,[ce("input",{id:`switch-${c.id}`,type:"checkbox",checked:a.value.includes(c.id),onChange:d=>o(c.id)},null,40,bB),l[0]||(l[0]=ce("span",{class:"slider"},null,-1))])],8,gB)]))),128))]),ce("button",{class:"px-3 py-1 rounded border hover:bg-gray-200 cursor-pointer mt-5",onClick:s}," Fermer ")])])])):Qt("",!0)]))}}),vD=""+new URL("webp/pin_plein.webp",import.meta.url).href,yD=""+new URL("webp/pin_vide.webp",import.meta.url).href,wB={class:"absolute right-0 top-3 h-full flex flex-row-reverse gap-1.5"},NB={key:0,class:"absolute top-8 right-0 bg-[var(--bg2)] border-[var(--text)] border-t-0 border-1 p-2 pr-3 pl-3 z-30",style:{"border-radius":"var(--br-card)","border-top-left-radius":"20px","border-top-right-radius":"0px"}},AB={class:"absolute left-1 bottom-1 w-[60%] whitespace-nowrap overflow-x-auto text-ellipsis scrollbar-none"},SB=Er({__name:"Note_card",props:{title:{},content:{},date:{},pinned:{type:Boolean},tags:{},simply_edit:{type:Boolean},id:{}},emits:["pin"],setup(t,{emit:e}){let r;er(async()=>{r=await Jo()});const n=Ko(),i=e,a=t,o=ut(!1),s=ut(a.pinned),u=ut(!1),l=ut(!1),c=ut([]),f=ut([]),d=ut(!1),p=ut(null),h=async()=>{await Dt.togle_pinned(a.id),s.value=!s.value,i("pin",!0)},m=v=>{Dt.saveTags(v,a.id)},g=async v=>{v==1?o.value=!0:v==2&&(await Dt.delete(a.id),o.value=!1)},y=()=>{n.push(`/edit?id=${a.id}&pinned=${s.value}&simply_edit=${a.simply_edit}`)};er(async()=>{c.value=await Dt.getAll("tags"),f.value=c.value.filter(v=>a.tags.includes(v.id))}),Ti(()=>a.pinned,v=>{s.value=v});const N=v=>{p.value&&!p.value.contains(v.target)&&(d.value=!1),u.value&&(u.value=!1)};return er(()=>{document.addEventListener("click",N)}),_l(()=>{document.removeEventListener("click",N)}),Ti(f,async()=>{c.value=await Dt.getAll("tags"),f.value=c.value.filter(v=>a.tags.includes(v.id))}),(v,w)=>(Pe(),Ve(jt,null,[ce("div",{class:"note-card bg-[var(--bg2)] text-[var(--text)] p-3 border-[var(--text)] mr-4 ml-4 md:mr-2 md:ml-2 border-2 relative cursor-pointer mb-4 md:h-[28vh]",style:{"border-radius":"var(--br-card)"},onClick:y},[ce("p",{class:lt(["font-bold text-xl w-[80%] whitespace-nowrap overflow-hidden text-ellipsis",Oe(r)?"bg-teal-500":""])},ar(Oe(Lt).htmlToText(v.title)),3),ce("div",wB,[ce("div",{ref_key:"dropdown_rootRef",ref:p,class:"relative",onClick:w[3]||(w[3]=Tr(x=>d.value=!d.value,["stop"]))},[ce("div",{class:lt(["ellipsis",Oe(r)?"bg-red-600":""])},null,2),Nt(Ig,{name:"fade-slide"},{default:qd(()=>[d.value?(Pe(),Ve("div",NB,[ce("ul",null,[ce("li",{onClick:w[0]||(w[0]=Tr(()=>{l.value=!0,d.value=!1},["stop"])),class:lt(Oe(r)?"bg-teal-600 border-1 border-black":"")},"dossiers",2),ce("li",{onClick:w[1]||(w[1]=Tr(x=>u.value=!u.value,["stop"])),class:lt(Oe(r)?"bg-teal-600 border-1 border-black":"")},"partager",2),ce("li",{onClick:w[2]||(w[2]=Tr(x=>g(1),["stop"])),class:lt(["text-red-600",Oe(r)?"bg-teal-600 border-1 border-black":""])},"supprimer",2)])])):Qt("",!0)]),_:1})],512),ce("div",{class:lt(["pin",Oe(r)?"bg-red-600":""]),style:ia({backgroundImage:s.value?`url(${Oe(vD)})`:`url(${Oe(yD)})`}),onClick:Tr(h,["stop"])},null,6)]),ce("p",{class:lt(["text-mb mb-5 w-[65%] h-[80%] whitespace-nowrap md:whitespace-normal overflow-hidden text-ellipsis",Oe(r)?"bg-blue-500":""])},ar(Oe(Lt).htmlToText(v.content)),3),ce("div",AB,[(Pe(!0),Ve(jt,null,aa(f.value,(x,b)=>(Pe(),Ve("span",{key:b,class:lt(["ml-2 border-1 border-[var(--text)] pr-1.5 pl-1.5 rounded-[var(--br-tag)]",Oe(r)?"bg-teal-500":""]),style:ia({backgroundColor:x.color,color:Oe(Lt).get_text_color(x.color)})},ar(x.name),7))),128))]),ce("label",{class:lt(["absolute right-2 bottom-1 z-10",Oe(r)?"bg-teal-500":""])},ar(v.date),3)]),Nt(gD,{visible:o.value,title:"Confirmation",message:"Voulez-vous vraiment supprimer cette note ?",onConfirm:w[4]||(w[4]=x=>g(2)),onCancel:w[5]||(w[5]=x=>o.value=!1)},null,8,["visible"]),Nt(fB,{visible:u.value,title:v.title,content:v.content},null,8,["visible","title","content"]),Nt(xB,{active:l.value,tags:v.tags,"onUpdate:tags":m,"onUpdate:active":w[6]||(w[6]=x=>l.value=x)},null,8,["active","tags"])],64))}}),DB=Ii(SB,[["__scopeId","data-v-805e5702"]]),EB={},CB={class:"note-card bg-[var(--bg2)] mr-4 ml-4 text-[#3B3B3B] p-3 border-[#3B3B3B] border-2 relative cursor-pointer",style:{"border-radius":"15px"}};function MB(t,e){return Pe(),Ve("div",CB,e[0]||(e[0]=[qS('<p class="font-bold text-xl mb-1 w-[80%] whitespace-nowrap overflow-hidden text-ellipsis animate-pulse bg-gray-300 h-5 rounded-full" data-v-a38d49b2></p><div class="pin absolute right-3 top-3 animate-pulse bg-gray-300 h-5 rounded-full" data-v-a38d49b2></div><p class="text-mb mb-5 w-[65%] whitespace-nowrap overflow-hidden text-ellipsis animate-pulse bg-gray-300 h-5 rounded-full" data-v-a38d49b2></p><div class="absolute left-3 bottom-1.5 w-[60%] whitespace-nowrap overflow-x-auto text-ellipsis scrollbar-none animate-pulse bg-gray-300 h-5 rounded-full" data-v-a38d49b2></div><label class="absolute right-2 bottom-1.5 animate-pulse bg-gray-300 h-5 rounded-full w-[20%]" data-v-a38d49b2></label>',5)]))}const cc=Ii(EB,[["render",MB],["__scopeId","data-v-a38d49b2"]]),TB={class:"flex flex-row items-center"},_B=["onClick"],OB=["innerHTML"],FB=["innerHTML"],BB={key:1,class:"text-sm mt-4"},kB=["onClick"],IB=["innerHTML"],RB=["innerHTML"],PB={class:"absolute left-1 bottom-1 w-[60%] whitespace-nowrap overflow-x-auto text-ellipsis scrollbar-none"},$B=["innerHTML"],LB=Er({__name:"Search_bar",props:{pt:{},desktop:{type:Boolean}},setup(t){let e;er(async()=>{e=await Jo()});const r=t,n=ut(null),i=Ko(),a=ut(""),o=ut([]),s=ut([]);er(async()=>{s.value=await Dt.getAll("tags")});const u=async()=>{o.value=await Dt.getAll("notes"),o.value.sort((f,d)=>d.id-f.id)},l=Wr(()=>o.value.filter(f=>{const d=s.value.filter(h=>f.tags.includes(h.id)).map(h=>h.name).join(" ");return[f.title,f.content,d,...f.tags||[]].join(" ").toLowerCase().includes(a.value.toLowerCase())})),c=(f,d)=>{if(!d)return f;const p=d.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),h=new RegExp(`(${p})`,"gi");return f.replace(h,'<mark class="bg-yellow-300">$1</mark>')};return er(async()=>{await u()}),(f,d)=>(Pe(),Ve("div",{class:lt(f.desktop&&l.value.length&&a.value!=""?"note-card bg-[var(--bg2)] text-[var(--text)] absolute right-4 left-4  flex flex-col pl-4 pt-2.5 pb-2.5 border border-[var(--text)] z-30":"note-card bg-[var(--bg2)] text-[var(--text)] relative lg:ml-0 ml-4 mr-4 w-full flex flex-col pl-4 pt-2.5 pb-2.5 border border-[var(--text)] z-30"),style:ia([{"box-shadow":"0 0 15px #3636364f","border-radius":"var(--br-btn)"},f.desktop&&l.value.length&&a.value!=""?{top:`calc(4.5rem + ${r.pt})`}:""])},[ce("div",TB,[Rs(ce("input",{ref_key:"search_input",ref:n,"onUpdate:modelValue":d[0]||(d[0]=p=>a.value=p),type:"text",class:"w-[85%] border-none outline-none",placeholder:"Recherche..."},null,512),[[sl,a.value]]),a.value!==""?(Pe(),Ve("button",{key:0,onClick:d[1]||(d[1]=p=>a.value=""),class:lt(["cross-btn absolute end-1",Oe(e)?"bg-red-600":""])},null,2)):Qt("",!0),a.value==""?(Pe(),Ve("button",{key:1,onClick:d[2]||(d[2]=p=>{var h;return(h=n.value)==null?void 0:h.focus()}),class:lt(["search-btn absolute end-4",Oe(e)?"bg-red-600":""])},null,2)):Qt("",!0)]),l.value.length&&a.value!=""&&!f.desktop?(Pe(),Ve("div",{key:0,class:"mt-4 space-y-2 w-[100%] relative overflow-x-auto pr-4",style:ia({maxHeight:`calc(100vh - 3.5rem - ${r.pt} - 5.3rem)`,minHeight:`calc(100vh - 3.5rem - ${r.pt} - 5.3rem)`})},[(Pe(!0),Ve(jt,null,aa(l.value,p=>(Pe(),Ve("div",{key:p.id,onClick:h=>Oe(i).push(`/edit?id=${p.id}&pinned=${p.pinned}`),class:"bg-[var(--bg2)] p-2 rounded shadow cursor-pointer border-1 border-[var(--text)]"},[ce("h3",{class:"font-semibold",innerHTML:c(Oe(Lt).clean_html(p.title),a.value)},null,8,OB),ce("p",{class:"text-sm max-h-20 overflow-hidden",innerHTML:c(Oe(Lt).clean_html(p.content),a.value)},null,8,FB)],8,_B))),128))],4)):Qt("",!0),a.value!==""&&!l.value.length?(Pe(),Ve("div",BB," Aucune note trouve. ")):l.value.length&&a.value!=""&&f.desktop?(Pe(),Ve("ul",{key:2,class:"mt-4 space-y-2 w-full relative overflow-x-auto gap-4 pr-4 grid lg:grid-cols-[23%_23%_23%_23%] xl:grid-cols-[18%_18%_18%_18%_18%]",style:ia({maxHeight:`calc(100vh - 3.5rem - ${r.pt} - 5.3rem)`,minHeight:`calc(80vh - 3.5rem - ${r.pt})`})},[(Pe(!0),Ve(jt,null,aa(l.value,p=>(Pe(),Ve("li",{key:p.id,onClick:h=>Oe(i).push(`/edit?id=${p.id}&pinned=${p.pinned}`),class:"bg-[var(--bg2)] p-3 rounded-[15px] shadow cursor-pointer relative h-fullborder-[var(--text)]"},[ce("h3",{class:lt(["font-semibold",Oe(e)?"bg-blue-200":""]),innerHTML:c(Oe(Lt).clean_html(p.title),a.value)},null,10,IB),ce("p",{class:lt(["text-sm overflow-hidden mb-5",Oe(e)?"bg-blue-500":""]),innerHTML:c(Oe(Lt).clean_html(p.content),a.value)},null,10,RB),ce("div",PB,[(Pe(!0),Ve(jt,null,aa(s.value.filter(h=>p.tags.includes(h.id)),h=>(Pe(),Ve("div",{key:h.id,class:lt(["ml-2 underline",Oe(e)?"bg-teal-500":""]),innerHTML:c(h.name,a.value)},null,10,$B))),128))]),ce("label",{class:lt(["absolute right-2.5 bottom-1.5 z-10",Oe(e)?"bg-teal-500":""])},ar(p.date),3)],8,kB))),128))],4)):Qt("",!0)],6))}}),zB=Ii(LB,[["__scopeId","data-v-e856d5f6"]]),qB={class:"pr-2 pl-2"},UB={key:0,class:"border-l-1 ml-1 pl-1 flex bg-[var(--bg2)]"},HB={class:"flex flex-row"},VB={class:"flex flex-col gap-4 fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-110"},WB=1e3,jB=Er({__name:"Tags_item",props:{name:{},tag:{},active:{type:Boolean},color:{}},setup(t){const e=t,r=ut(!1),n=Lt.get_text_color(e.color),i=ut(null),a=ut(e.color),o=ut(!1),s=async()=>{const p=(await Dt.getAll("tags")).find(h=>h.name==e.name);p&&Dt.delete_tag(p.id),window.location.reload()},u=ut(null);function l(){o.value=!o.value}function c(){f(),u.value=window.setTimeout(()=>{l()},WB)}function f(){u.value!==null&&(clearTimeout(u.value),u.value=null)}return er(()=>{e.name==="create_tag"&&i.value&&i.value.focus()}),(d,p)=>(Pe(),Ve(jt,null,[ce("div",US(d.$attrs,{onContextmenu:Tr(l,["prevent"]),onTouchstart:c,onTouchend:f,onTouchcancel:f,class:[d.active?"p-0.5 lg:p-1.5 text-center border-3 border-[#F28C28] cursor-pointer":"p-1 lg:p-2 text-center border-1 cursor-pointer","rounded-[var(--br-btn)] text-mb lg:rounded-[var(--br-btn)] flex flex-row justify-center items-center select-none"],style:{backgroundColor:a.value,color:Oe(n)}}),[ce("span",qB,ar(d.name),1),o.value?(Pe(),Ve("section",UB,[ce("ul",HB,[ce("li",{onClick:Tr(s,["stop"]),class:"cursor-pointer"},p[6]||(p[6]=[ce("div",{class:"bin-svg w-5 h-5"},null,-1)])),ce("li",{onClick:p[0]||(p[0]=Tr(h=>r.value=!0,["stop"])),class:"cursor-pointer"},p[7]||(p[7]=[ce("div",{class:"color-svg w-4 h-4"},null,-1)]))])])):Qt("",!0)],16),r.value?(Pe(),Ve("div",{key:0,onClick:p[5]||(p[5]=Tr(h=>r.value=!1,["stop"]))},[p[11]||(p[11]=ce("div",{class:"fixed inset-0 bg-black/50 z-100"},null,-1)),ce("section",VB,[ce("div",{onClick:p[2]||(p[2]=Tr(()=>{},["stop"])),class:"flex flex-col justify-center items-center border-2 h-full bg-[var(--bg2)]/80 border-[#F28C28] rounded-[var(--br-btn)] shadow-lg"},[p[8]||(p[8]=ce("span",null,"couleur de mon dossier",-1)),Rs(ce("input",{"onUpdate:modelValue":p[1]||(p[1]=h=>a.value=h),type:"color",class:"outline-none w-full h-10 cursor-pointer rounded-[var(--br-btn)] border-none"},null,512),[[sl,a.value]])]),ce("button",{onClick:p[3]||(p[3]=Tr(h=>{r.value=!1,o.value=!1},["stop"])),class:"p-1 text-center w-full border-2 bg-white/80 font-bold cursor-pointer rounded-[var(--br-btn)] shadow-md hover:bg-[#f28c28]"},p[9]||(p[9]=[ce("span",null,"Sauvegarder",-1)])),ce("button",{class:"p-1 text-center w-full border-2 bg-white/80 font-bold cursor-pointer rounded-[var(--br-btn)] shadow-md hover:bg-[#f25728]",onClick:p[4]||(p[4]=Tr(h=>{r.value=!1,o.value=!1,a.value=d.color},["stop"]))},p[10]||(p[10]=[ce("span",null,"Annuler",-1)]))])])):Qt("",!0)],64))}}),lh=Ii(jB,[["__scopeId","data-v-070a1a68"]]),GB={},KB={class:"p-1 w-[20%] h-7 text-center border rounded-[15px] flex items-center justify-center bg-[var(--bg2)]"};function JB(t,e){return Pe(),Ve("div",KB,e[0]||(e[0]=[ce("span",{class:"animate-pulse bg-gray-300 h-full w-full rounded-[15px]"},null,-1)]))}const fc=Ii(GB,[["render",JB]]),YB={style:{"font-family":"'Montserrat', sans-serif","box-shadow":"0 0 15px #36363681","padding-top":"calc(env(safe-area-inset-top)/2)"},class:"top-0 left-0 w-full text-2xl font-bold bg-[#F28C28] flex items-center justify-center fixed z-50"},ZB={class:"flex flex-row justify-center items-center"},XB={key:0,class:"dropdown absolute right-0 bg-[#F28C28] z-50 min-w-[200px] w-[40%] md:w-[20%] lg:w-[10%] flex flex-col justify-center items-center p-3",style:{top:"calc(3.5rem + env(safe-area-inset-top))"}},QB={class:"text-xl text-white"},ek={class:"Search_bar flex flex-col lg:flex-row items-center mr-4 ml-4"},tk={class:"min-w-[70px]"},rk={key:1,class:"flex flex-row justify-center items-center gap-1.5 pr-1.5 pl-1.5 max-w-[100%] mr-4 ml-4 whitespace-nowrap overflow-x-auto text-ellipsis scrollbar-none"},nk={class:"w-[20%] min-w-[70px]"},ik={key:2,class:"flex flex-row justify-center items-center gap-1.5 pr-1.5 pl-1.5 max-w-[100%] mr-4 ml-4 whitespace-nowrap overflow-x-auto text-ellipsis scrollbar-none"},ak={class:"grid grid-cols-1 md:grid-cols-[33%_33%_33%] lg:grid-cols-[25%_25%_25%_25%] xl:grid-cols-[20%_20%_20%_20%_20%] md:mr-2 md:ml-2"},ok={key:1,class:"flex flex-col"},sk={key:2,class:"flex flex-col"},uk={key:2,class:"bg-transparent w-full z-50 fixed",style:{bottom:"env(safe-area-inset-bottom)"}},lk={class:"flex flex-col gap-4 fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-110"},ck={class:"p-1 text-center w-full border-2 bg-[var(--bg2)]/80 border-[#F28C28] rounded-[var(--br-btn)] shadow-lg"},fk=Er({__name:"Home",setup(t){let e;er(async()=>{e=await Jo()});const r=Ko(),n=async()=>{r.push("/edit?id=new&pinned=false&simply_edit=false")},i=ut(localStorage.getItem("theme")=="light"),a=ut(null),o=ut(""),s=ut(""),u=!!nh.info_message(),l=nh.info_message(),c=ut([]);let f=ut(void 0);const d=ut(!1),p=ut(!1),h=ut(!1),m=ut(null),g=ut(window.innerWidth>=1024),y=()=>{g.value=window.innerWidth>=1024};er(()=>{window.addEventListener("resize",y)}),_l(()=>{window.removeEventListener("resize",y)});const N=()=>{var D;const E=!i.value;Jc(E),i.value=E,(D=a.value)==null||D.animate([{transform:"scale(1)"},{transform:"scale(0.9)"},{transform:"scale(1)"}],{duration:150,easing:"ease-out"})},v=async()=>{const E=await Dt.getAll("notes");c.value=E.sort((D,M)=>D.pinned===M.pinned?M.id-D.id:D.pinned?-1:1)},w=async E=>{var I,P,T;const D=E-1;if((I=f.value)!=null&&I[D].active){f.value[D].active=!1,c.value=await Dt.getAll("notes");return}(P=f.value)!=null&&P[D]&&(f.value[D].active=!f.value[D].active);const M=(T=f.value)==null?void 0:T.filter($=>$.active).map($=>$.id);if((M==null?void 0:M.length)===0)return;const F=await Dt.getAll("notes");c.value=F.filter($=>$.tags.some(O=>M==null?void 0:M.includes(Number(O))))},x=async(E,D)=>{E&&(D||(D="#FFF"),console.log("cration du tag :",E,`
 avec la couleur :`,D),o.value="",s.value="",await Dt.create_tag({id:-1,name:E,active:!1,color:D}),f.value=await Dt.getAll("tags"),h.value=!1)},b=async()=>{A(),await nh.saving_all(await Dt.getAll("notes"),await Dt.getAll("tags"))},S=async()=>{d.value||(d.value=!0,setTimeout(async()=>{c.value=[],await Ty(c),console.log("Rechargement des notes..."),setTimeout(()=>{d.value=!1},300)},400))},C=ut(!1),A=()=>{C.value=!1,requestAnimationFrame(()=>{C.value=!0,setTimeout(()=>{C.value=!1},500)})};return er(async()=>{f.value=await Dt.getAll("tags"),await Ty(c),Lg()}),Ti(f,async(E,D)=>{var T;const M=E==null?void 0:E.some(($,O)=>{const W=D?D[O]:void 0;return W&&$.active!==W.active}),F=await Dt.getAll("tags"),I=(T=f.value)==null?void 0:T.map($=>$.id).sort(),P=F.map($=>$.id).sort();(!M&&JSON.stringify(E)!=JSON.stringify(D)||JSON.stringify(I)!==JSON.stringify(P))&&(console.log("Update all_tags !"),f.value=await Dt.getAll("tags"))}),(E,D)=>{var M,F,I,P,T;return Pe(),Ve(jt,null,[ce("header",YB,[ce("div",ZB,[ce("h1",{class:lt(["absolute left-4 text-white flex flex-row",Oe(e)?"bg-red-600":""])},D[14]||(D[14]=[ce("img",{src:rF,class:"w-6 mr-2",alt:"logo"},null,-1),Mu("SilverNote")]),2),ce("div",{class:lt(["reload-svg absolute right-36 w-[24px] h-[24px]",[i.value?"moon-svg":"sun-svg",Oe(e)?"bg-teal-300":""]]),ref_key:"theme_btn",ref:a,onClick:N},null,2),ce("div",{class:lt(["reload-svg absolute right-25 w-[24px] h-[24px]",[{rotating:d.value},Oe(e)?"bg-teal-300":""]]),onClick:S},null,2),ce("div",{class:lt(["saving-svg absolute right-14 w-[24px] h-[24px]",[{jump:C.value},Oe(e)?"bg-teal-300":""]]),onClick:b},null,2),ce("div",{class:lt([[Oe(e)?"bg-teal-300":""],"ellipsis-svg absolute right-4 w-[30px] h-[30px]"]),onClick:D[0]||(D[0]=$=>p.value=!p.value)},null,2),Nt(Ig,{name:"fade-slide"},{default:qd(()=>[p.value?(Pe(),Ve("div",XB,[ce("ul",QB,[ce("li",{class:"flex flex-row",onClick:D[1]||(D[1]=$=>Oe(r).push("/settings"))},D[15]||(D[15]=[ce("div",{class:"gear-svg"},null,-1),Mu(" Paramtre ")])),ce("li",{class:"flex flex-row",onClick:D[2]||(D[2]=$=>Oe(r).push("/account"))},D[16]||(D[16]=[ce("div",{class:"nav-svg",style:{filter:"invert(0)"}},[ce("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-user",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},[ce("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),ce("path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0"}),ce("path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"})])],-1),Mu(" Compte ")])),D[17]||(D[17]=ce("li",{class:"flex flex-row"},[ce("div",{class:"nav-svg legal-svg"}),Mu(" Lgal ")],-1)),Oe(UF)?(Pe(),Ve("li",{key:0,class:"flex flex-row mt-1 text-sm",onClick:D[3]||(D[3]=$=>Oe(r).push("/dev"))},"Dveloppeurs")):Qt("",!0)])])):Qt("",!0)]),_:1})])]),ce("div",ek,[Nt(zB,{class:"mb-4 lg:mb-0 lg:min-w-[50%]",desktop:g.value,pt:"env(safe-area-inset-top)"},null,8,["desktop"]),Oe(f)&&Oe(f).length?(Pe(),Ve("ul",{key:0,class:lt(["flex flex-row gap-3 pr-1.5 pl-1.5 whitespace-nowrap overflow-x-auto text-ellipsis w-full scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-transparent",[Oe(e)?"bg-amber-400":"","lg:scrollbar-thin","scrollbar-thumb-rounded"]])},[(Pe(!0),Ve(jt,null,aa(Oe(f),($,O)=>(Pe(),Ve("li",{key:O},[Nt(lh,{onClick:Tr(W=>w($.id),["stop"]),id:$.id,name:$.name,tag:$.name,active:$.active,color:$.color,class:"min-w-[70px]"},null,8,["onClick","id","name","tag","active","color"])]))),128)),ce("li",tk,[Nt(lh,{onClick:D[4]||(D[4]=$=>h.value=!0),id:null,name:"+",tag:"",active:!1,color:"#fff5e8"})])],2)):Oe(f)?(Pe(),Ve("ul",rk,[ce("li",nk,[Nt(lh,{onClick:D[5]||(D[5]=$=>{var O;h.value=!0,(O=m.value)==null||O.focus()}),id:null,name:"+",tag:"",active:!1,color:"#fff5e8"})])])):(Pe(),Ve("ul",ik,[Nt(fc),Nt(fc),Nt(fc),Nt(fc)]))]),ce("div",{onClick:D[6]||(D[6]=$=>p.value=!1),class:lt(["overflow-x-hidden mb-30",Oe(e)?"bg-rose-600":""])},[Qt("",!0),Oe(u)?(Pe(),qa(jF,{key:1,style:{"box-shadow":"0 0 15px #3636364f"},class:"mt-4",title:(M=Oe(l))==null?void 0:M.title,btn:(F=Oe(l))==null?void 0:F.btn,href:(I=Oe(l))==null?void 0:I.href,content:(P=Oe(l))==null?void 0:P.message},null,8,["title","btn","href","content"])):Qt("",!0),ce("div",{class:lt(["overflow-y-auto mt-4 min-h-[60vh]",Oe(e)?"bg-purple-600":""])},[ce("ul",ak,[c.value&&c.value.length?(Pe(!0),Ve(jt,{key:0},aa(c.value,($,O)=>(Pe(),Ve("li",{class:"",key:O},[Nt(DB,{onPin:v,id:$.id,pinned:$.pinned,title:$.title,content:$.content,date:$.date,tags:$.tags.map(W=>Number(W)),simply_edit:$.simply_edit},null,8,["id","pinned","title","content","date","tags","simply_edit"])]))),128)):c.value&&c.value.length==0?(Pe(),Ve("li",ok,[ce("div",{class:"note-card bg-[var(--bg2)] mr-4 ml-4 p-3 border-2",style:{"border-radius":"15px"}},[D[19]||(D[19]=ce("p",{class:"font-bold text-xl w-[80%] whitespace-nowrap overflow-hidden text-ellipsis"}," Aucune note trouve ! ",-1)),ce("div",{class:"bg-transparent w-full z-50 relative mt-5"},[ce("button",{style:{"box-shadow":"0 0 15px #3636364f"},onClick:n,class:"add-note-btn cursor-pointer flex items-center justify-center w-full"},D[18]||(D[18]=[ce("div",{class:"add-note-svg"},null,-1)]))])])])):(Pe(),Ve("li",sk,[Nt(cc,{class:"mb-3"}),Nt(cc,{class:"mb-3"}),Nt(cc,{class:"mb-3"}),Nt(cc,{class:"mb-3"})]))])],2),c.value&&((T=c.value)!=null&&T.length)?(Pe(),Ve("div",uk,[ce("button",{style:{"box-shadow":"0 0 15px #3636364f"},onClick:n,class:"add-note-btn cursor-pointer flex items-center justify-center absolute right-4 left-4 bottom-4 md:left-1/4 md:right-1/4 lg:left-1/3.5 lg:right-1/3.5 xl:left-1/3 xl:right-1/3"},D[20]||(D[20]=[ce("div",{class:"add-note-svg"},null,-1)]))])):Qt("",!0)],2),h.value?(Pe(),Ve("div",{key:0,onClick:D[13]||(D[13]=$=>h.value=!1)},[D[24]||(D[24]=ce("div",{class:"fixed inset-0 bg-black/50 z-100"},null,-1)),ce("section",lk,[ce("div",ck,[Rs(ce("input",{"onUpdate:modelValue":D[7]||(D[7]=$=>o.value=$),ref_key:"inputRef",ref:m,type:"text",class:"outline-none pl-1 w-full",placeholder:"Mon dossier",onClick:D[8]||(D[8]=Tr($=>{var O;return(O=m.value)==null?void 0:O.focus()},["stop"]))},null,512),[[sl,o.value]])]),ce("div",{onClick:D[10]||(D[10]=Tr(()=>{},["stop"])),class:"flex flex-col justify-center items-center border-2 h-full bg-[var(--bg2)]/80 border-[#F28C28] rounded-[var(--br-btn)] shadow-lg"},[D[21]||(D[21]=ce("span",null,"couleur de mon dossier",-1)),Rs(ce("input",{"onUpdate:modelValue":D[9]||(D[9]=$=>s.value=$),type:"color",class:"outline-none w-full h-10 cursor-pointer rounded-[var(--br-btn)] border-none"},null,512),[[sl,s.value]])]),ce("button",{class:"p-1 text-center w-full border-2 bg-white/80 font-bold cursor-pointer rounded-[var(--br-btn)] shadow-md hover:bg-[#f28c28]",onClick:D[11]||(D[11]=Tr($=>x(o.value,s.value),["stop"]))},D[22]||(D[22]=[ce("span",null,"Crer mon dossier",-1)])),ce("button",{class:"p-1 text-center w-full border-2 bg-white/80 font-bold cursor-pointer rounded-[var(--br-btn)] shadow-md hover:bg-[#f25728]",onClick:D[12]||(D[12]=Tr($=>h.value=!1,["stop"]))},D[23]||(D[23]=[ce("span",null,"Annuler",-1)]))])])):Qt("",!0)],64)}}}),dk=Ii(fk,[["__scopeId","data-v-db129bb6"]]);function Mr(t){this.content=t}Mr.prototype={constructor:Mr,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,r){var n=r&&r!=t?this.remove(r):this,i=n.find(t),a=n.content.slice();return i==-1?a.push(r||t,e):(a[i+1]=e,r&&(a[i]=r)),new Mr(a)},remove:function(t){var e=this.find(t);if(e==-1)return this;var r=this.content.slice();return r.splice(e,2),new Mr(r)},addToStart:function(t,e){return new Mr([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var r=this.remove(t).content.slice();return r.push(t,e),new Mr(r)},addBefore:function(t,e,r){var n=this.remove(e),i=n.content.slice(),a=n.find(t);return i.splice(a==-1?i.length:a,0,e,r),new Mr(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Mr.from(t),t.size?new Mr(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Mr.from(t),t.size?new Mr(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Mr.from(t);for(var r=0;r<t.content.length;r+=2)e=e.remove(t.content[r]);return e},toObject:function(){var t={};return this.forEach(function(e,r){t[e]=r}),t},get size(){return this.content.length>>1}};Mr.from=function(t){if(t instanceof Mr)return t;var e=[];if(t)for(var r in t)e.push(r,t[r]);return new Mr(e)};function bD(t,e,r){for(let n=0;;n++){if(n==t.childCount||n==e.childCount)return t.childCount==e.childCount?null:r;let i=t.child(n),a=e.child(n);if(i==a){r+=i.nodeSize;continue}if(!i.sameMarkup(a))return r;if(i.isText&&i.text!=a.text){for(let o=0;i.text[o]==a.text[o];o++)r++;return r}if(i.content.size||a.content.size){let o=bD(i.content,a.content,r+1);if(o!=null)return o}r+=i.nodeSize}}function xD(t,e,r,n){for(let i=t.childCount,a=e.childCount;;){if(i==0||a==0)return i==a?null:{a:r,b:n};let o=t.child(--i),s=e.child(--a),u=o.nodeSize;if(o==s){r-=u,n-=u;continue}if(!o.sameMarkup(s))return{a:r,b:n};if(o.isText&&o.text!=s.text){let l=0,c=Math.min(o.text.length,s.text.length);for(;l<c&&o.text[o.text.length-l-1]==s.text[s.text.length-l-1];)l++,r--,n--;return{a:r,b:n}}if(o.content.size||s.content.size){let l=xD(o.content,s.content,r-1,n-1);if(l)return l}r-=u,n-=u}}class De{constructor(e,r){if(this.content=e,this.size=r||0,r==null)for(let n=0;n<e.length;n++)this.size+=e[n].nodeSize}nodesBetween(e,r,n,i=0,a){for(let o=0,s=0;s<r;o++){let u=this.content[o],l=s+u.nodeSize;if(l>e&&n(u,i+s,a||null,o)!==!1&&u.content.size){let c=s+1;u.nodesBetween(Math.max(0,e-c),Math.min(u.content.size,r-c),n,i+c)}s=l}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,r,n,i){let a="",o=!0;return this.nodesBetween(e,r,(s,u)=>{let l=s.isText?s.text.slice(Math.max(e,u)-u,r-u):s.isLeaf?i?typeof i=="function"?i(s):i:s.type.spec.leafText?s.type.spec.leafText(s):"":"";s.isBlock&&(s.isLeaf&&l||s.isTextblock)&&n&&(o?o=!1:a+=n),a+=l},0),a}append(e){if(!e.size)return this;if(!this.size)return e;let r=this.lastChild,n=e.firstChild,i=this.content.slice(),a=0;for(r.isText&&r.sameMarkup(n)&&(i[i.length-1]=r.withText(r.text+n.text),a=1);a<e.content.length;a++)i.push(e.content[a]);return new De(i,this.size+e.size)}cut(e,r=this.size){if(e==0&&r==this.size)return this;let n=[],i=0;if(r>e)for(let a=0,o=0;o<r;a++){let s=this.content[a],u=o+s.nodeSize;u>e&&((o<e||u>r)&&(s.isText?s=s.cut(Math.max(0,e-o),Math.min(s.text.length,r-o)):s=s.cut(Math.max(0,e-o-1),Math.min(s.content.size,r-o-1))),n.push(s),i+=s.nodeSize),o=u}return new De(n,i)}cutByIndex(e,r){return e==r?De.empty:e==0&&r==this.content.length?this:new De(this.content.slice(e,r))}replaceChild(e,r){let n=this.content[e];if(n==r)return this;let i=this.content.slice(),a=this.size+r.nodeSize-n.nodeSize;return i[e]=r,new De(i,a)}addToStart(e){return new De([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new De(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let r=0;r<this.content.length;r++)if(!this.content[r].eq(e.content[r]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let r=this.content[e];if(!r)throw new RangeError("Index "+e+" out of range for "+this);return r}maybeChild(e){return this.content[e]||null}forEach(e){for(let r=0,n=0;r<this.content.length;r++){let i=this.content[r];e(i,n,r),n+=i.nodeSize}}findDiffStart(e,r=0){return bD(this,e,r)}findDiffEnd(e,r=this.size,n=e.size){return xD(this,e,r,n)}findIndex(e,r=-1){if(e==0)return dc(0,e);if(e==this.size)return dc(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,i=0;;n++){let a=this.child(n),o=i+a.nodeSize;if(o>=e)return o==e||r>0?dc(n+1,o):dc(n,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,r){if(!r)return De.empty;if(!Array.isArray(r))throw new RangeError("Invalid input for Fragment.fromJSON");return new De(r.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return De.empty;let r,n=0;for(let i=0;i<e.length;i++){let a=e[i];n+=a.nodeSize,i&&a.isText&&e[i-1].sameMarkup(a)?(r||(r=e.slice(0,i)),r[r.length-1]=a.withText(r[r.length-1].text+a.text)):r&&r.push(a)}return new De(r||e,n)}static from(e){if(!e)return De.empty;if(e instanceof De)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new De([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}De.empty=new De([],0);const ch={index:0,offset:0};function dc(t,e){return ch.index=t,ch.offset=e,ch}function wf(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let r=Array.isArray(t);if(Array.isArray(e)!=r)return!1;if(r){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!wf(t[n],e[n]))return!1}else{for(let n in t)if(!(n in e)||!wf(t[n],e[n]))return!1;for(let n in e)if(!(n in t))return!1}return!0}let qt=class ym{constructor(e,r){this.type=e,this.attrs=r}addToSet(e){let r,n=!1;for(let i=0;i<e.length;i++){let a=e[i];if(this.eq(a))return e;if(this.type.excludes(a.type))r||(r=e.slice(0,i));else{if(a.type.excludes(this.type))return e;!n&&a.type.rank>this.type.rank&&(r||(r=e.slice(0,i)),r.push(this),n=!0),r&&r.push(a)}}return r||(r=e.slice()),n||r.push(this),r}removeFromSet(e){for(let r=0;r<e.length;r++)if(this.eq(e[r]))return e.slice(0,r).concat(e.slice(r+1));return e}isInSet(e){for(let r=0;r<e.length;r++)if(this.eq(e[r]))return!0;return!1}eq(e){return this==e||this.type==e.type&&wf(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let r in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,r){if(!r)throw new RangeError("Invalid input for Mark.fromJSON");let n=e.marks[r.type];if(!n)throw new RangeError(`There is no mark type ${r.type} in this schema`);let i=n.create(r.attrs);return n.checkAttrs(i.attrs),i}static sameSet(e,r){if(e==r)return!0;if(e.length!=r.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(r[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return ym.none;if(e instanceof ym)return[e];let r=e.slice();return r.sort((n,i)=>n.type.rank-i.type.rank),r}};qt.none=[];class Nf extends Error{}class Be{constructor(e,r,n){this.content=e,this.openStart=r,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,r){let n=ND(this.content,e+this.openStart,r);return n&&new Be(n,this.openStart,this.openEnd)}removeBetween(e,r){return new Be(wD(this.content,e+this.openStart,r+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,r){if(!r)return Be.empty;let n=r.openStart||0,i=r.openEnd||0;if(typeof n!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Be(De.fromJSON(e,r.content),n,i)}static maxOpen(e,r=!0){let n=0,i=0;for(let a=e.firstChild;a&&!a.isLeaf&&(r||!a.type.spec.isolating);a=a.firstChild)n++;for(let a=e.lastChild;a&&!a.isLeaf&&(r||!a.type.spec.isolating);a=a.lastChild)i++;return new Be(e,n,i)}}Be.empty=new Be(De.empty,0,0);function wD(t,e,r){let{index:n,offset:i}=t.findIndex(e),a=t.maybeChild(n),{index:o,offset:s}=t.findIndex(r);if(i==e||a.isText){if(s!=r&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(r))}if(n!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(n,a.copy(wD(a.content,e-i-1,r-i-1)))}function ND(t,e,r,n){let{index:i,offset:a}=t.findIndex(e),o=t.maybeChild(i);if(a==e||o.isText)return t.cut(0,e).append(r).append(t.cut(e));let s=ND(o.content,e-a-1,r);return s&&t.replaceChild(i,o.copy(s))}function pk(t,e,r){if(r.openStart>t.depth)throw new Nf("Inserted content deeper than insertion position");if(t.depth-r.openStart!=e.depth-r.openEnd)throw new Nf("Inconsistent open depths");return AD(t,e,r,0)}function AD(t,e,r,n){let i=t.index(n),a=t.node(n);if(i==e.index(n)&&n<t.depth-r.openStart){let o=AD(t,e,r,n+1);return a.copy(a.content.replaceChild(i,o))}else if(r.content.size)if(!r.openStart&&!r.openEnd&&t.depth==n&&e.depth==n){let o=t.parent,s=o.content;return Io(o,s.cut(0,t.parentOffset).append(r.content).append(s.cut(e.parentOffset)))}else{let{start:o,end:s}=hk(r,t);return Io(a,DD(t,o,s,e,n))}else return Io(a,Af(t,e,n))}function SD(t,e){if(!e.type.compatibleContent(t.type))throw new Nf("Cannot join "+e.type.name+" onto "+t.type.name)}function bm(t,e,r){let n=t.node(r);return SD(n,e.node(r)),n}function ko(t,e){let r=e.length-1;r>=0&&t.isText&&t.sameMarkup(e[r])?e[r]=t.withText(e[r].text+t.text):e.push(t)}function Vu(t,e,r,n){let i=(e||t).node(r),a=0,o=e?e.index(r):i.childCount;t&&(a=t.index(r),t.depth>r?a++:t.textOffset&&(ko(t.nodeAfter,n),a++));for(let s=a;s<o;s++)ko(i.child(s),n);e&&e.depth==r&&e.textOffset&&ko(e.nodeBefore,n)}function Io(t,e){return t.type.checkContent(e),t.copy(e)}function DD(t,e,r,n,i){let a=t.depth>i&&bm(t,e,i+1),o=n.depth>i&&bm(r,n,i+1),s=[];return Vu(null,t,i,s),a&&o&&e.index(i)==r.index(i)?(SD(a,o),ko(Io(a,DD(t,e,r,n,i+1)),s)):(a&&ko(Io(a,Af(t,e,i+1)),s),Vu(e,r,i,s),o&&ko(Io(o,Af(r,n,i+1)),s)),Vu(n,null,i,s),new De(s)}function Af(t,e,r){let n=[];if(Vu(null,t,r,n),t.depth>r){let i=bm(t,e,r+1);ko(Io(i,Af(t,e,r+1)),n)}return Vu(e,null,r,n),new De(n)}function hk(t,e){let r=e.depth-t.openStart,i=e.node(r).copy(t.content);for(let a=r-1;a>=0;a--)i=e.node(a).copy(De.from(i));return{start:i.resolveNoCache(t.openStart+r),end:i.resolveNoCache(i.content.size-t.openEnd-r)}}class cl{constructor(e,r,n){this.pos=e,this.path=r,this.parentOffset=n,this.depth=r.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,r=this.index(this.depth);if(r==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],i=e.child(r);return n?e.child(r).cut(n):i}get nodeBefore(){let e=this.index(this.depth),r=this.pos-this.path[this.path.length-1];return r?this.parent.child(e).cut(0,r):e==0?null:this.parent.child(e-1)}posAtIndex(e,r){r=this.resolveDepth(r);let n=this.path[r*3],i=r==0?0:this.path[r*3-1]+1;for(let a=0;a<e;a++)i+=n.child(a).nodeSize;return i}marks(){let e=this.parent,r=this.index();if(e.content.size==0)return qt.none;if(this.textOffset)return e.child(r).marks;let n=e.maybeChild(r-1),i=e.maybeChild(r);if(!n){let s=n;n=i,i=s}let a=n.marks;for(var o=0;o<a.length;o++)a[o].type.spec.inclusive===!1&&(!i||!a[o].isInSet(i.marks))&&(a=a[o--].removeFromSet(a));return a}marksAcross(e){let r=this.parent.maybeChild(this.index());if(!r||!r.isInline)return null;let n=r.marks,i=e.parent.maybeChild(e.index());for(var a=0;a<n.length;a++)n[a].type.spec.inclusive===!1&&(!i||!n[a].isInSet(i.marks))&&(n=n[a--].removeFromSet(n));return n}sharedDepth(e){for(let r=this.depth;r>0;r--)if(this.start(r)<=e&&this.end(r)>=e)return r;return 0}blockRange(e=this,r){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!r||r(this.node(n))))return new Sf(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let r=1;r<=this.depth;r++)e+=(e?"/":"")+this.node(r).type.name+"_"+this.index(r-1);return e+":"+this.parentOffset}static resolve(e,r){if(!(r>=0&&r<=e.content.size))throw new RangeError("Position "+r+" out of range");let n=[],i=0,a=r;for(let o=e;;){let{index:s,offset:u}=o.content.findIndex(a),l=a-u;if(n.push(o,s,i+u),!l||(o=o.child(s),o.isText))break;a=l-1,i+=u+1}return new cl(r,n,a)}static resolveCached(e,r){let n=_y.get(e);if(n)for(let a=0;a<n.elts.length;a++){let o=n.elts[a];if(o.pos==r)return o}else _y.set(e,n=new mk);let i=n.elts[n.i]=cl.resolve(e,r);return n.i=(n.i+1)%gk,i}}class mk{constructor(){this.elts=[],this.i=0}}const gk=12,_y=new WeakMap;class Sf{constructor(e,r,n){this.$from=e,this.$to=r,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const vk=Object.create(null);let Ua=class xm{constructor(e,r,n,i=qt.none){this.type=e,this.attrs=r,this.marks=i,this.content=n||De.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,r,n,i=0){this.content.nodesBetween(e,r,n,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,r,n,i){return this.content.textBetween(e,r,n,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,r,n){return this.type==e&&wf(this.attrs,r||e.defaultAttrs||vk)&&qt.sameSet(this.marks,n||qt.none)}copy(e=null){return e==this.content?this:new xm(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new xm(this.type,this.attrs,this.content,e)}cut(e,r=this.content.size){return e==0&&r==this.content.size?this:this.copy(this.content.cut(e,r))}slice(e,r=this.content.size,n=!1){if(e==r)return Be.empty;let i=this.resolve(e),a=this.resolve(r),o=n?0:i.sharedDepth(r),s=i.start(o),l=i.node(o).content.cut(i.pos-s,a.pos-s);return new Be(l,i.depth-o,a.depth-o)}replace(e,r,n){return pk(this.resolve(e),this.resolve(r),n)}nodeAt(e){for(let r=this;;){let{index:n,offset:i}=r.content.findIndex(e);if(r=r.maybeChild(n),!r)return null;if(i==e||r.isText)return r;e-=i+1}}childAfter(e){let{index:r,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(r),index:r,offset:n}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:r,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(r),index:r,offset:n};let i=this.content.child(r-1);return{node:i,index:r-1,offset:n-i.nodeSize}}resolve(e){return cl.resolveCached(this,e)}resolveNoCache(e){return cl.resolve(this,e)}rangeHasMark(e,r,n){let i=!1;return r>e&&this.nodesBetween(e,r,a=>(n.isInSet(a.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),ED(this.marks,e)}contentMatchAt(e){let r=this.type.contentMatch.matchFragment(this.content,0,e);if(!r)throw new Error("Called contentMatchAt on a node with invalid content");return r}canReplace(e,r,n=De.empty,i=0,a=n.childCount){let o=this.contentMatchAt(e).matchFragment(n,i,a),s=o&&o.matchFragment(this.content,r);if(!s||!s.validEnd)return!1;for(let u=i;u<a;u++)if(!this.type.allowsMarks(n.child(u).marks))return!1;return!0}canReplaceWith(e,r,n,i){if(i&&!this.type.allowsMarks(i))return!1;let a=this.contentMatchAt(e).matchType(n),o=a&&a.matchFragment(this.content,r);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=qt.none;for(let r=0;r<this.marks.length;r++){let n=this.marks[r];n.type.checkAttrs(n.attrs),e=n.addToSet(e)}if(!qt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(r=>r.type.name)}`);this.content.forEach(r=>r.check())}toJSON(){let e={type:this.type.name};for(let r in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(r=>r.toJSON())),e}static fromJSON(e,r){if(!r)throw new RangeError("Invalid input for Node.fromJSON");let n;if(r.marks){if(!Array.isArray(r.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=r.marks.map(e.markFromJSON)}if(r.type=="text"){if(typeof r.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(r.text,n)}let i=De.fromJSON(e,r.content),a=e.nodeType(r.type).create(r.attrs,i,n);return a.type.checkAttrs(a.attrs),a}};Ua.prototype.text=void 0;class Df extends Ua{constructor(e,r,n,i){if(super(e,r,null,i),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):ED(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,r){return this.text.slice(e,r)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Df(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Df(this.type,this.attrs,e,this.marks)}cut(e=0,r=this.text.length){return e==0&&r==this.text.length?this:this.withText(this.text.slice(e,r))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function ED(t,e){for(let r=t.length-1;r>=0;r--)e=t[r].type.name+"("+e+")";return e}class zo{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,r){let n=new yk(e,r);if(n.next==null)return zo.empty;let i=CD(n);n.next&&n.err("Unexpected trailing text");let a=Dk(Sk(i));return Ek(a,n),a}matchType(e){for(let r=0;r<this.next.length;r++)if(this.next[r].type==e)return this.next[r].next;return null}matchFragment(e,r=0,n=e.childCount){let i=this;for(let a=r;i&&a<n;a++)i=i.matchType(e.child(a).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:r}=this.next[e];if(!(r.isText||r.hasRequiredAttrs()))return r}return null}compatible(e){for(let r=0;r<this.next.length;r++)for(let n=0;n<e.next.length;n++)if(this.next[r].type==e.next[n].type)return!0;return!1}fillBefore(e,r=!1,n=0){let i=[this];function a(o,s){let u=o.matchFragment(e,n);if(u&&(!r||u.validEnd))return De.from(s.map(l=>l.createAndFill()));for(let l=0;l<o.next.length;l++){let{type:c,next:f}=o.next[l];if(!(c.isText||c.hasRequiredAttrs())&&i.indexOf(f)==-1){i.push(f);let d=a(f,s.concat(c));if(d)return d}}return null}return a(this,[])}findWrapping(e){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==e)return this.wrapCache[n+1];let r=this.computeWrapping(e);return this.wrapCache.push(e,r),r}computeWrapping(e){let r=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let i=n.shift(),a=i.match;if(a.matchType(e)){let o=[];for(let s=i;s.type;s=s.via)o.push(s.type);return o.reverse()}for(let o=0;o<a.next.length;o++){let{type:s,next:u}=a.next[o];!s.isLeaf&&!s.hasRequiredAttrs()&&!(s.name in r)&&(!i.type||u.validEnd)&&(n.push({match:s.contentMatch,type:s,via:i}),r[s.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function r(n){e.push(n);for(let i=0;i<n.next.length;i++)e.indexOf(n.next[i].next)==-1&&r(n.next[i].next)}return r(this),e.map((n,i)=>{let a=i+(n.validEnd?"*":" ")+" ";for(let o=0;o<n.next.length;o++)a+=(o?", ":"")+n.next[o].type.name+"->"+e.indexOf(n.next[o].next);return a}).join(`
`)}}zo.empty=new zo(!0);class yk{constructor(e,r){this.string=e,this.nodeTypes=r,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function CD(t){let e=[];do e.push(bk(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function bk(t){let e=[];do e.push(xk(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function xk(t){let e=Ak(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=wk(t,e);else break;return e}function Oy(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function wk(t,e){let r=Oy(t),n=r;return t.eat(",")&&(t.next!="}"?n=Oy(t):n=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:r,max:n,expr:e}}function Nk(t,e){let r=t.nodeTypes,n=r[e];if(n)return[n];let i=[];for(let a in r){let o=r[a];o.isInGroup(e)&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function Ak(t){if(t.eat("(")){let e=CD(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=Nk(t,t.next).map(r=>(t.inline==null?t.inline=r.isInline:t.inline!=r.isInline&&t.err("Mixing inline and block content"),{type:"name",value:r}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function Sk(t){let e=[[]];return i(a(t,0),r()),e;function r(){return e.push([])-1}function n(o,s,u){let l={term:u,to:s};return e[o].push(l),l}function i(o,s){o.forEach(u=>u.to=s)}function a(o,s){if(o.type=="choice")return o.exprs.reduce((u,l)=>u.concat(a(l,s)),[]);if(o.type=="seq")for(let u=0;;u++){let l=a(o.exprs[u],s);if(u==o.exprs.length-1)return l;i(l,s=r())}else if(o.type=="star"){let u=r();return n(s,u),i(a(o.expr,u),u),[n(u)]}else if(o.type=="plus"){let u=r();return i(a(o.expr,s),u),i(a(o.expr,u),u),[n(u)]}else{if(o.type=="opt")return[n(s)].concat(a(o.expr,s));if(o.type=="range"){let u=s;for(let l=0;l<o.min;l++){let c=r();i(a(o.expr,u),c),u=c}if(o.max==-1)i(a(o.expr,u),u);else for(let l=o.min;l<o.max;l++){let c=r();n(u,c),i(a(o.expr,u),c),u=c}return[n(u)]}else{if(o.type=="name")return[n(s,void 0,o.value)];throw new Error("Unknown expr type")}}}}function MD(t,e){return e-t}function Fy(t,e){let r=[];return n(e),r.sort(MD);function n(i){let a=t[i];if(a.length==1&&!a[0].term)return n(a[0].to);r.push(i);for(let o=0;o<a.length;o++){let{term:s,to:u}=a[o];!s&&r.indexOf(u)==-1&&n(u)}}}function Dk(t){let e=Object.create(null);return r(Fy(t,0));function r(n){let i=[];n.forEach(o=>{t[o].forEach(({term:s,to:u})=>{if(!s)return;let l;for(let c=0;c<i.length;c++)i[c][0]==s&&(l=i[c][1]);Fy(t,u).forEach(c=>{l||i.push([s,l=[]]),l.indexOf(c)==-1&&l.push(c)})})});let a=e[n.join(",")]=new zo(n.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let s=i[o][1].sort(MD);a.next.push({type:i[o][0],next:e[s.join(",")]||r(s)})}return a}}function Ek(t,e){for(let r=0,n=[t];r<n.length;r++){let i=n[r],a=!i.validEnd,o=[];for(let s=0;s<i.next.length;s++){let{type:u,next:l}=i.next[s];o.push(u.name),a&&!(u.isText||u.hasRequiredAttrs())&&(a=!1),n.indexOf(l)==-1&&n.push(l)}a&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function TD(t){let e=Object.create(null);for(let r in t){let n=t[r];if(!n.hasDefault)return null;e[r]=n.default}return e}function _D(t,e){let r=Object.create(null);for(let n in t){let i=e&&e[n];if(i===void 0){let a=t[n];if(a.hasDefault)i=a.default;else throw new RangeError("No value supplied for attribute "+n)}r[n]=i}return r}function OD(t,e,r,n){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${r} of type ${i}`);for(let i in t){let a=t[i];a.validate&&a.validate(e[i])}}function FD(t,e){let r=Object.create(null);if(e)for(let n in e)r[n]=new Mk(t,n,e[n]);return r}let By=class BD{constructor(e,r,n){this.name=e,this.schema=r,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=FD(e,n.attrs),this.defaultAttrs=TD(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==zo.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:_D(this.attrs,e)}create(e=null,r,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Ua(this,this.computeAttrs(e),De.from(r),qt.setFrom(n))}createChecked(e=null,r,n){return r=De.from(r),this.checkContent(r),new Ua(this,this.computeAttrs(e),r,qt.setFrom(n))}createAndFill(e=null,r,n){if(e=this.computeAttrs(e),r=De.from(r),r.size){let o=this.contentMatch.fillBefore(r);if(!o)return null;r=o.append(r)}let i=this.contentMatch.matchFragment(r),a=i&&i.fillBefore(De.empty,!0);return a?new Ua(this,e,r.append(a),qt.setFrom(n)):null}validContent(e){let r=this.contentMatch.matchFragment(e);if(!r||!r.validEnd)return!1;for(let n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){OD(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let r=0;r<e.length;r++)if(!this.allowsMarkType(e[r].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let r;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?r&&r.push(e[n]):r||(r=e.slice(0,n));return r?r.length?r:qt.none:e}static compile(e,r){let n=Object.create(null);e.forEach((a,o)=>n[a]=new BD(a,r,o));let i=r.spec.topNode||"doc";if(!n[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let a in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}};function Ck(t,e,r){let n=r.split("|");return i=>{let a=i===null?"null":typeof i;if(n.indexOf(a)<0)throw new RangeError(`Expected value of type ${n} for attribute ${e} on type ${t}, got ${a}`)}}class Mk{constructor(e,r,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate=typeof n.validate=="string"?Ck(e,r,n.validate):n.validate}get isRequired(){return!this.hasDefault}}class Xd{constructor(e,r,n,i){this.name=e,this.rank=r,this.schema=n,this.spec=i,this.attrs=FD(e,i.attrs),this.excluded=null;let a=TD(this.attrs);this.instance=a?new qt(this,a):null}create(e=null){return!e&&this.instance?this.instance:new qt(this,_D(this.attrs,e))}static compile(e,r){let n=Object.create(null),i=0;return e.forEach((a,o)=>n[a]=new Xd(a,i++,r,o)),n}removeFromSet(e){for(var r=0;r<e.length;r++)e[r].type==this&&(e=e.slice(0,r).concat(e.slice(r+1)),r--);return e}isInSet(e){for(let r=0;r<e.length;r++)if(e[r].type==this)return e[r]}checkAttrs(e){OD(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class kD{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let r=this.spec={};for(let i in e)r[i]=e[i];r.nodes=Mr.from(e.nodes),r.marks=Mr.from(e.marks||{}),this.nodes=By.compile(this.spec.nodes,this),this.marks=Xd.compile(this.spec.marks,this);let n=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let a=this.nodes[i],o=a.spec.content||"",s=a.spec.marks;if(a.contentMatch=n[o]||(n[o]=zo.parse(o,this.nodes)),a.inlineContent=a.contentMatch.inlineContent,a.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!a.isInline||!a.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=a}a.markSet=s=="_"?null:s?ky(this,s.split(" ")):s==""||!a.inlineContent?[]:null}for(let i in this.marks){let a=this.marks[i],o=a.spec.excludes;a.excluded=o==null?[a]:o==""?[]:ky(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,r=null,n,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof By){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(r,n,i)}text(e,r){let n=this.nodes.text;return new Df(n,n.defaultAttrs,e,qt.setFrom(r))}mark(e,r){return typeof e=="string"&&(e=this.marks[e]),e.create(r)}nodeFromJSON(e){return Ua.fromJSON(this,e)}markFromJSON(e){return qt.fromJSON(this,e)}nodeType(e){let r=this.nodes[e];if(!r)throw new RangeError("Unknown node type: "+e);return r}}function ky(t,e){let r=[];for(let n=0;n<e.length;n++){let i=e[n],a=t.marks[i],o=a;if(a)r.push(a);else for(let s in t.marks){let u=t.marks[s];(i=="_"||u.spec.group&&u.spec.group.split(" ").indexOf(i)>-1)&&r.push(o=u)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[n]+"'")}return r}function Tk(t){return t.tag!=null}function _k(t){return t.style!=null}class Ha{constructor(e,r){this.schema=e,this.rules=r,this.tags=[],this.styles=[];let n=this.matchedStyles=[];r.forEach(i=>{if(Tk(i))this.tags.push(i);else if(_k(i)){let a=/[^=]*/.exec(i.style)[0];n.indexOf(a)<0&&n.push(a),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let a=e.nodes[i.node];return a.contentMatch.matchType(a)})}parse(e,r={}){let n=new Ry(this,r,!1);return n.addAll(e,qt.none,r.from,r.to),n.finish()}parseSlice(e,r={}){let n=new Ry(this,r,!0);return n.addAll(e,qt.none,r.from,r.to),Be.maxOpen(n.finish())}matchTag(e,r,n){for(let i=n?this.tags.indexOf(n)+1:0;i<this.tags.length;i++){let a=this.tags[i];if(Bk(e,a.tag)&&(a.namespace===void 0||e.namespaceURI==a.namespace)&&(!a.context||r.matchesContext(a.context))){if(a.getAttrs){let o=a.getAttrs(e);if(o===!1)continue;a.attrs=o||void 0}return a}}}matchStyle(e,r,n,i){for(let a=i?this.styles.indexOf(i)+1:0;a<this.styles.length;a++){let o=this.styles[a],s=o.style;if(!(s.indexOf(e)!=0||o.context&&!n.matchesContext(o.context)||s.length>e.length&&(s.charCodeAt(e.length)!=61||s.slice(e.length+1)!=r))){if(o.getAttrs){let u=o.getAttrs(r);if(u===!1)continue;o.attrs=u||void 0}return o}}}static schemaRules(e){let r=[];function n(i){let a=i.priority==null?50:i.priority,o=0;for(;o<r.length;o++){let s=r[o];if((s.priority==null?50:s.priority)<a)break}r.splice(o,0,i)}for(let i in e.marks){let a=e.marks[i].spec.parseDOM;a&&a.forEach(o=>{n(o=Py(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let a=e.nodes[i].spec.parseDOM;a&&a.forEach(o=>{n(o=Py(o)),o.node||o.ignore||o.mark||(o.node=i)})}return r}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Ha(e,Ha.schemaRules(e)))}}const ID={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Ok={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},RD={ol:!0,ul:!0},fl=1,wm=2,Yc=4;function Iy(t,e,r){return e!=null?(e?fl:0)|(e==="full"?wm:0):t&&t.whitespace=="pre"?fl|wm:r&-5}class pc{constructor(e,r,n,i,a,o){this.type=e,this.attrs=r,this.marks=n,this.solid=i,this.options=o,this.content=[],this.activeMarks=qt.none,this.match=a||(o&Yc?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let r=this.type.contentMatch.fillBefore(De.from(e));if(r)this.match=this.type.contentMatch.matchFragment(r);else{let n=this.type.contentMatch,i;return(i=n.findWrapping(e.type))?(this.match=n,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&fl)){let n=this.content[this.content.length-1],i;if(n&&n.isText&&(i=/[ \t\r\n\u000c]+$/.exec(n.text))){let a=n;n.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=a.withText(a.text.slice(0,a.text.length-i[0].length))}}let r=De.from(this.content);return!e&&this.match&&(r=r.append(this.match.fillBefore(De.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!ID.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Ry{constructor(e,r,n){this.parser=e,this.options=r,this.isOpen=n,this.open=0,this.localPreserveWS=!1;let i=r.topNode,a,o=Iy(null,r.preserveWhitespace,0)|(n?Yc:0);i?a=new pc(i.type,i.attrs,qt.none,!0,r.topMatch||i.type.contentMatch,o):n?a=new pc(null,null,qt.none,!0,null,o):a=new pc(e.schema.topNodeType,null,qt.none,!0,null,o),this.nodes=[a],this.find=r.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,r){e.nodeType==3?this.addTextNode(e,r):e.nodeType==1&&this.addElement(e,r)}addTextNode(e,r){let n=e.nodeValue,i=this.top,a=i.options&wm?"full":this.localPreserveWS||(i.options&fl)>0;if(a==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(a)a!=="full"?n=n.replace(/\r?\n|\r/g," "):n=n.replace(/\r\n?/g,`
`);else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let o=i.content[i.content.length-1],s=e.previousSibling;(!o||s&&s.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n),r,!/\S/.test(n)),this.findInText(e)}else this.findInside(e)}addElement(e,r,n){let i=this.localPreserveWS,a=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),s;RD.hasOwnProperty(o)&&this.parser.normalizeLists&&Fk(e);let u=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(s=this.parser.matchTag(e,this,n));e:if(u?u.ignore:Ok.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,r);else if(!u||u.skip||u.closeParent){u&&u.closeParent?this.open=Math.max(0,this.open-1):u&&u.skip.nodeType&&(e=u.skip);let l,c=this.needsBlock;if(ID.hasOwnProperty(o))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),l=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,r);break e}let f=u&&u.skip?r:this.readStyles(e,r);f&&this.addAll(e,f),l&&this.sync(a),this.needsBlock=c}else{let l=this.readStyles(e,r);l&&this.addElementByRule(e,u,l,u.consuming===!1?s:void 0)}this.localPreserveWS=i}leafFallback(e,r){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),r)}ignoreFallback(e,r){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),r,!0)}readStyles(e,r){let n=e.style;if(n&&n.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let a=this.parser.matchedStyles[i],o=n.getPropertyValue(a);if(o)for(let s=void 0;;){let u=this.parser.matchStyle(a,o,this,s);if(!u)break;if(u.ignore)return null;if(u.clearMark?r=r.filter(l=>!u.clearMark(l)):r=r.concat(this.parser.schema.marks[u.mark].create(u.attrs)),u.consuming===!1)s=u;else break}}return r}addElementByRule(e,r,n,i){let a,o;if(r.node)if(o=this.parser.schema.nodes[r.node],o.isLeaf)this.insertNode(o.create(r.attrs),n,e.nodeName=="BR")||this.leafFallback(e,n);else{let u=this.enter(o,r.attrs||null,n,r.preserveWhitespace);u&&(a=!0,n=u)}else{let u=this.parser.schema.marks[r.mark];n=n.concat(u.create(r.attrs))}let s=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,n,i);else if(r.getContent)this.findInside(e),r.getContent(e,this.parser.schema).forEach(u=>this.insertNode(u,n,!1));else{let u=e;typeof r.contentElement=="string"?u=e.querySelector(r.contentElement):typeof r.contentElement=="function"?u=r.contentElement(e):r.contentElement&&(u=r.contentElement),this.findAround(e,u,!0),this.addAll(u,n),this.findAround(e,u,!1)}a&&this.sync(s)&&this.open--}addAll(e,r,n,i){let a=n||0;for(let o=n?e.childNodes[n]:e.firstChild,s=i==null?null:e.childNodes[i];o!=s;o=o.nextSibling,++a)this.findAtPoint(e,a),this.addDOM(o,r);this.findAtPoint(e,a)}findPlace(e,r,n){let i,a;for(let o=this.open,s=0;o>=0;o--){let u=this.nodes[o],l=u.findWrapping(e);if(l&&(!i||i.length>l.length+s)&&(i=l,a=u,!l.length))break;if(u.solid){if(n)break;s+=2}}if(!i)return null;this.sync(a);for(let o=0;o<i.length;o++)r=this.enterInner(i[o],null,r,!1);return r}insertNode(e,r,n){if(e.isInline&&this.needsBlock&&!this.top.type){let a=this.textblockFromContext();a&&(r=this.enterInner(a,null,r))}let i=this.findPlace(e,r,n);if(i){this.closeExtra();let a=this.top;a.match&&(a.match=a.match.matchType(e.type));let o=qt.none;for(let s of i.concat(e.marks))(a.type?a.type.allowsMarkType(s.type):$y(s.type,e.type))&&(o=s.addToSet(o));return a.content.push(e.mark(o)),!0}return!1}enter(e,r,n,i){let a=this.findPlace(e.create(r),n,!1);return a&&(a=this.enterInner(e,r,n,!0,i)),a}enterInner(e,r,n,i=!1,a){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let s=Iy(e,a,o.options);o.options&Yc&&o.content.length==0&&(s|=Yc);let u=qt.none;return n=n.filter(l=>(o.type?o.type.allowsMarkType(l.type):$y(l.type,e))?(u=l.addToSet(u),!1):!0),this.nodes.push(new pc(e,r,u,i,null,s)),this.open++,n}closeExtra(e=!1){let r=this.nodes.length-1;if(r>this.open){for(;r>this.open;r--)this.nodes[r-1].content.push(this.nodes[r].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let r=this.open;r>=0;r--){if(this.nodes[r]==e)return this.open=r,!0;this.localPreserveWS&&(this.nodes[r].options|=fl)}return!1}get currentPos(){this.closeExtra();let e=0;for(let r=this.open;r>=0;r--){let n=this.nodes[r].content;for(let i=n.length-1;i>=0;i--)e+=n[i].nodeSize;r&&e++}return e}findAtPoint(e,r){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==r&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].pos==null&&e.nodeType==1&&e.contains(this.find[r].node)&&(this.find[r].pos=this.currentPos)}findAround(e,r,n){if(e!=r&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&r.compareDocumentPosition(this.find[i].node)&(n?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&(this.find[r].pos=this.currentPos-(e.nodeValue.length-this.find[r].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let r=e.split("/"),n=this.options.context,i=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),a=-(n?n.depth+1:0)+(i?0:1),o=(s,u)=>{for(;s>=0;s--){let l=r[s];if(l==""){if(s==r.length-1||s==0)continue;for(;u>=a;u--)if(o(s-1,u))return!0;return!1}else{let c=u>0||u==0&&i?this.nodes[u].type:n&&u>=a?n.node(u-a).type:null;if(!c||c.name!=l&&!c.isInGroup(l))return!1;u--}}return!0};return o(r.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let r=e.depth;r>=0;r--){let n=e.node(r).contentMatchAt(e.indexAfter(r)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let r in this.parser.schema.nodes){let n=this.parser.schema.nodes[r];if(n.isTextblock&&n.defaultAttrs)return n}}}function Fk(t){for(let e=t.firstChild,r=null;e;e=e.nextSibling){let n=e.nodeType==1?e.nodeName.toLowerCase():null;n&&RD.hasOwnProperty(n)&&r?(r.appendChild(e),e=r):n=="li"?r=e:n&&(r=null)}}function Bk(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function Py(t){let e={};for(let r in t)e[r]=t[r];return e}function $y(t,e){let r=e.schema.nodes;for(let n in r){let i=r[n];if(!i.allowsMarkType(t))continue;let a=[],o=s=>{a.push(s);for(let u=0;u<s.edgeCount;u++){let{type:l,next:c}=s.edge(u);if(l==e||a.indexOf(c)<0&&o(c))return!0}};if(o(i.contentMatch))return!0}}class Yo{constructor(e,r){this.nodes=e,this.marks=r}serializeFragment(e,r={},n){n||(n=fh(r).createDocumentFragment());let i=n,a=[];return e.forEach(o=>{if(a.length||o.marks.length){let s=0,u=0;for(;s<a.length&&u<o.marks.length;){let l=o.marks[u];if(!this.marks[l.type.name]){u++;continue}if(!l.eq(a[s][0])||l.type.spec.spanning===!1)break;s++,u++}for(;s<a.length;)i=a.pop()[1];for(;u<o.marks.length;){let l=o.marks[u++],c=this.serializeMark(l,o.isInline,r);c&&(a.push([l,i]),i.appendChild(c.dom),i=c.contentDOM||c.dom)}}i.appendChild(this.serializeNodeInner(o,r))}),n}serializeNodeInner(e,r){let{dom:n,contentDOM:i}=Zc(fh(r),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,r,i)}return n}serializeNode(e,r={}){let n=this.serializeNodeInner(e,r);for(let i=e.marks.length-1;i>=0;i--){let a=this.serializeMark(e.marks[i],e.isInline,r);a&&((a.contentDOM||a.dom).appendChild(n),n=a.dom)}return n}serializeMark(e,r,n={}){let i=this.marks[e.type.name];return i&&Zc(fh(n),i(e,r),null,e.attrs)}static renderSpec(e,r,n=null,i){return Zc(e,r,n,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Yo(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let r=Ly(e.nodes);return r.text||(r.text=n=>n.text),r}static marksFromSchema(e){return Ly(e.marks)}}function Ly(t){let e={};for(let r in t){let n=t[r].spec.toDOM;n&&(e[r]=n)}return e}function fh(t){return t.document||window.document}const zy=new WeakMap;function kk(t){let e=zy.get(t);return e===void 0&&zy.set(t,e=Ik(t)),e}function Ik(t){let e=null;function r(n){if(n&&typeof n=="object")if(Array.isArray(n))if(typeof n[0]=="string")e||(e=[]),e.push(n);else for(let i=0;i<n.length;i++)r(n[i]);else for(let i in n)r(n[i])}return r(t),e}function Zc(t,e,r,n){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],a;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(n&&(a=kk(n))&&a.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(r=i.slice(0,o),i=i.slice(o+1));let s,u=r?t.createElementNS(r,i):t.createElement(i),l=e[1],c=1;if(l&&typeof l=="object"&&l.nodeType==null&&!Array.isArray(l)){c=2;for(let f in l)if(l[f]!=null){let d=f.indexOf(" ");d>0?u.setAttributeNS(f.slice(0,d),f.slice(d+1),l[f]):u.setAttribute(f,l[f])}}for(let f=c;f<e.length;f++){let d=e[f];if(d===0){if(f<e.length-1||f>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:u,contentDOM:u}}else{let{dom:p,contentDOM:h}=Zc(t,d,r,n);if(u.appendChild(p),h){if(s)throw new RangeError("Multiple content holes");s=h}}}return{dom:u,contentDOM:s}}const PD=65535,$D=Math.pow(2,16);function Rk(t,e){return t+e*$D}function qy(t){return t&PD}function Pk(t){return(t-(t&PD))/$D}const LD=1,zD=2,Xc=4,qD=8;class Nm{constructor(e,r,n){this.pos=e,this.delInfo=r,this.recover=n}get deleted(){return(this.delInfo&qD)>0}get deletedBefore(){return(this.delInfo&(LD|Xc))>0}get deletedAfter(){return(this.delInfo&(zD|Xc))>0}get deletedAcross(){return(this.delInfo&Xc)>0}}class En{constructor(e,r=!1){if(this.ranges=e,this.inverted=r,!e.length&&En.empty)return En.empty}recover(e){let r=0,n=qy(e);if(!this.inverted)for(let i=0;i<n;i++)r+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[n*3]+r+Pk(e)}mapResult(e,r=1){return this._map(e,r,!1)}map(e,r=1){return this._map(e,r,!0)}_map(e,r,n){let i=0,a=this.inverted?2:1,o=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let u=this.ranges[s]-(this.inverted?i:0);if(u>e)break;let l=this.ranges[s+a],c=this.ranges[s+o],f=u+l;if(e<=f){let d=l?e==u?-1:e==f?1:r:r,p=u+i+(d<0?0:c);if(n)return p;let h=e==(r<0?u:f)?null:Rk(s/3,e-u),m=e==u?zD:e==f?LD:Xc;return(r<0?e!=u:e!=f)&&(m|=qD),new Nm(p,m,h)}i+=c-l}return n?e+i:new Nm(e+i,0,null)}touches(e,r){let n=0,i=qy(r),a=this.inverted?2:1,o=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let u=this.ranges[s]-(this.inverted?n:0);if(u>e)break;let l=this.ranges[s+a],c=u+l;if(e<=c&&s==i*3)return!0;n+=this.ranges[s+o]-l}return!1}forEach(e){let r=this.inverted?2:1,n=this.inverted?1:2;for(let i=0,a=0;i<this.ranges.length;i+=3){let o=this.ranges[i],s=o-(this.inverted?a:0),u=o+(this.inverted?0:a),l=this.ranges[i+r],c=this.ranges[i+n];e(s,s+l,u,u+c),a+=c-l}}invert(){return new En(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?En.empty:new En(e<0?[0,-e,0]:[0,0,e])}}En.empty=new En([]);class dl{constructor(e,r,n=0,i=e?e.length:0){this.mirror=r,this.from=n,this.to=i,this._maps=e||[],this.ownData=!(e||r)}get maps(){return this._maps}slice(e=0,r=this.maps.length){return new dl(this._maps,this.mirror,e,r)}appendMap(e,r){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),r!=null&&this.setMirror(this._maps.length-1,r)}appendMapping(e){for(let r=0,n=this._maps.length;r<e._maps.length;r++){let i=e.getMirror(r);this.appendMap(e._maps[r],i!=null&&i<r?n+i:void 0)}}getMirror(e){if(this.mirror){for(let r=0;r<this.mirror.length;r++)if(this.mirror[r]==e)return this.mirror[r+(r%2?-1:1)]}}setMirror(e,r){this.mirror||(this.mirror=[]),this.mirror.push(e,r)}appendMappingInverted(e){for(let r=e.maps.length-1,n=this._maps.length+e._maps.length;r>=0;r--){let i=e.getMirror(r);this.appendMap(e._maps[r].invert(),i!=null&&i>r?n-i-1:void 0)}}invert(){let e=new dl;return e.appendMappingInverted(this),e}map(e,r=1){if(this.mirror)return this._map(e,r,!0);for(let n=this.from;n<this.to;n++)e=this._maps[n].map(e,r);return e}mapResult(e,r=1){return this._map(e,r,!1)}_map(e,r,n){let i=0;for(let a=this.from;a<this.to;a++){let o=this._maps[a],s=o.mapResult(e,r);if(s.recover!=null){let u=this.getMirror(a);if(u!=null&&u>a&&u<this.to){a=u,e=this._maps[u].recover(s.recover);continue}}i|=s.delInfo,e=s.pos}return n?e:new Nm(e,i,null)}}const dh=Object.create(null);class Yr{getMap(){return En.empty}merge(e){return null}static fromJSON(e,r){if(!r||!r.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=dh[r.stepType];if(!n)throw new RangeError(`No step type ${r.stepType} defined`);return n.fromJSON(e,r)}static jsonID(e,r){if(e in dh)throw new RangeError("Duplicate use of step JSON ID "+e);return dh[e]=r,r.prototype.jsonID=e,r}}class lr{constructor(e,r){this.doc=e,this.failed=r}static ok(e){return new lr(e,null)}static fail(e){return new lr(null,e)}static fromReplace(e,r,n,i){try{return lr.ok(e.replace(r,n,i))}catch(a){if(a instanceof Nf)return lr.fail(a.message);throw a}}}function zg(t,e,r){let n=[];for(let i=0;i<t.childCount;i++){let a=t.child(i);a.content.size&&(a=a.copy(zg(a.content,e,a))),a.isInline&&(a=e(a,r,i)),n.push(a)}return De.fromArray(n)}class Ia extends Yr{constructor(e,r,n){super(),this.from=e,this.to=r,this.mark=n}apply(e){let r=e.slice(this.from,this.to),n=e.resolve(this.from),i=n.node(n.sharedDepth(this.to)),a=new Be(zg(r.content,(o,s)=>!o.isAtom||!s.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),r.openStart,r.openEnd);return lr.fromReplace(e,this.from,this.to,a)}invert(){return new Ei(this.from,this.to,this.mark)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new Ia(r.pos,n.pos,this.mark)}merge(e){return e instanceof Ia&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ia(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Ia(r.from,r.to,e.markFromJSON(r.mark))}}Yr.jsonID("addMark",Ia);class Ei extends Yr{constructor(e,r,n){super(),this.from=e,this.to=r,this.mark=n}apply(e){let r=e.slice(this.from,this.to),n=new Be(zg(r.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),r.openStart,r.openEnd);return lr.fromReplace(e,this.from,this.to,n)}invert(){return new Ia(this.from,this.to,this.mark)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new Ei(r.pos,n.pos,this.mark)}merge(e){return e instanceof Ei&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ei(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Ei(r.from,r.to,e.markFromJSON(r.mark))}}Yr.jsonID("removeMark",Ei);class Ra extends Yr{constructor(e,r){super(),this.pos=e,this.mark=r}apply(e){let r=e.nodeAt(this.pos);if(!r)return lr.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.addToSet(r.marks));return lr.fromReplace(e,this.pos,this.pos+1,new Be(De.from(n),0,r.isLeaf?0:1))}invert(e){let r=e.nodeAt(this.pos);if(r){let n=this.mark.addToSet(r.marks);if(n.length==r.marks.length){for(let i=0;i<r.marks.length;i++)if(!r.marks[i].isInSet(n))return new Ra(this.pos,r.marks[i]);return new Ra(this.pos,this.mark)}}return new qo(this.pos,this.mark)}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new Ra(r.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ra(r.pos,e.markFromJSON(r.mark))}}Yr.jsonID("addNodeMark",Ra);class qo extends Yr{constructor(e,r){super(),this.pos=e,this.mark=r}apply(e){let r=e.nodeAt(this.pos);if(!r)return lr.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.removeFromSet(r.marks));return lr.fromReplace(e,this.pos,this.pos+1,new Be(De.from(n),0,r.isLeaf?0:1))}invert(e){let r=e.nodeAt(this.pos);return!r||!this.mark.isInSet(r.marks)?this:new Ra(this.pos,this.mark)}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new qo(r.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new qo(r.pos,e.markFromJSON(r.mark))}}Yr.jsonID("removeNodeMark",qo);class br extends Yr{constructor(e,r,n,i=!1){super(),this.from=e,this.to=r,this.slice=n,this.structure=i}apply(e){return this.structure&&Am(e,this.from,this.to)?lr.fail("Structure replace would overwrite content"):lr.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new En([this.from,this.to-this.from,this.slice.size])}invert(e){return new br(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deletedAcross&&n.deletedAcross?null:new br(r.pos,Math.max(r.pos,n.pos),this.slice,this.structure)}merge(e){if(!(e instanceof br)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let r=this.slice.size+e.slice.size==0?Be.empty:new Be(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new br(this.from,this.to+(e.to-e.from),r,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let r=this.slice.size+e.slice.size==0?Be.empty:new Be(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new br(e.from,this.to,r,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new br(r.from,r.to,Be.fromJSON(e,r.slice),!!r.structure)}}Yr.jsonID("replace",br);class wr extends Yr{constructor(e,r,n,i,a,o,s=!1){super(),this.from=e,this.to=r,this.gapFrom=n,this.gapTo=i,this.slice=a,this.insert=o,this.structure=s}apply(e){if(this.structure&&(Am(e,this.from,this.gapFrom)||Am(e,this.gapTo,this.to)))return lr.fail("Structure gap-replace would overwrite content");let r=e.slice(this.gapFrom,this.gapTo);if(r.openStart||r.openEnd)return lr.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,r.content);return n?lr.fromReplace(e,this.from,this.to,n):lr.fail("Content does not fit in gap")}getMap(){return new En([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let r=this.gapTo-this.gapFrom;return new wr(this.from,this.from+this.slice.size+r,this.from+this.insert,this.from+this.insert+r,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),i=this.from==this.gapFrom?r.pos:e.map(this.gapFrom,-1),a=this.to==this.gapTo?n.pos:e.map(this.gapTo,1);return r.deletedAcross&&n.deletedAcross||i<r.pos||a>n.pos?null:new wr(r.pos,n.pos,i,a,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number"||typeof r.gapFrom!="number"||typeof r.gapTo!="number"||typeof r.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new wr(r.from,r.to,r.gapFrom,r.gapTo,Be.fromJSON(e,r.slice),r.insert,!!r.structure)}}Yr.jsonID("replaceAround",wr);function Am(t,e,r){let n=t.resolve(e),i=r-e,a=n.depth;for(;i>0&&a>0&&n.indexAfter(a)==n.node(a).childCount;)a--,i--;if(i>0){let o=n.node(a).maybeChild(n.indexAfter(a));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function $k(t,e,r,n){let i=[],a=[],o,s;t.doc.nodesBetween(e,r,(u,l,c)=>{if(!u.isInline)return;let f=u.marks;if(!n.isInSet(f)&&c.type.allowsMarkType(n.type)){let d=Math.max(l,e),p=Math.min(l+u.nodeSize,r),h=n.addToSet(f);for(let m=0;m<f.length;m++)f[m].isInSet(h)||(o&&o.to==d&&o.mark.eq(f[m])?o.to=p:i.push(o=new Ei(d,p,f[m])));s&&s.to==d?s.to=p:a.push(s=new Ia(d,p,n))}}),i.forEach(u=>t.step(u)),a.forEach(u=>t.step(u))}function Lk(t,e,r,n){let i=[],a=0;t.doc.nodesBetween(e,r,(o,s)=>{if(!o.isInline)return;a++;let u=null;if(n instanceof Xd){let l=o.marks,c;for(;c=n.isInSet(l);)(u||(u=[])).push(c),l=c.removeFromSet(l)}else n?n.isInSet(o.marks)&&(u=[n]):u=o.marks;if(u&&u.length){let l=Math.min(s+o.nodeSize,r);for(let c=0;c<u.length;c++){let f=u[c],d;for(let p=0;p<i.length;p++){let h=i[p];h.step==a-1&&f.eq(i[p].style)&&(d=h)}d?(d.to=l,d.step=a):i.push({style:f,from:Math.max(s,e),to:l,step:a})}}}),i.forEach(o=>t.step(new Ei(o.from,o.to,o.style)))}function qg(t,e,r,n=r.contentMatch,i=!0){let a=t.doc.nodeAt(e),o=[],s=e+1;for(let u=0;u<a.childCount;u++){let l=a.child(u),c=s+l.nodeSize,f=n.matchType(l.type);if(!f)o.push(new br(s,c,Be.empty));else{n=f;for(let d=0;d<l.marks.length;d++)r.allowsMarkType(l.marks[d].type)||t.step(new Ei(s,c,l.marks[d]));if(i&&l.isText&&r.whitespace!="pre"){let d,p=/\r?\n|\r/g,h;for(;d=p.exec(l.text);)h||(h=new Be(De.from(r.schema.text(" ",r.allowedMarks(l.marks))),0,0)),o.push(new br(s+d.index,s+d.index+d[0].length,h))}}s=c}if(!n.validEnd){let u=n.fillBefore(De.empty,!0);t.replace(s,s,new Be(u,0,0))}for(let u=o.length-1;u>=0;u--)t.step(o[u])}function zk(t,e,r){return(e==0||t.canReplace(e,t.childCount))&&(r==t.childCount||t.canReplace(0,r))}function Qs(t){let r=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let n=t.depth;;--n){let i=t.$from.node(n),a=t.$from.index(n),o=t.$to.indexAfter(n);if(n<t.depth&&i.canReplace(a,o,r))return n;if(n==0||i.type.spec.isolating||!zk(i,a,o))break}return null}function qk(t,e,r){let{$from:n,$to:i,depth:a}=e,o=n.before(a+1),s=i.after(a+1),u=o,l=s,c=De.empty,f=0;for(let h=a,m=!1;h>r;h--)m||n.index(h)>0?(m=!0,c=De.from(n.node(h).copy(c)),f++):u--;let d=De.empty,p=0;for(let h=a,m=!1;h>r;h--)m||i.after(h+1)<i.end(h)?(m=!0,d=De.from(i.node(h).copy(d)),p++):l++;t.step(new wr(u,l,o,s,new Be(c.append(d),f,p),c.size-f,!0))}function Ug(t,e,r=null,n=t){let i=Uk(t,e),a=i&&Hk(n,e);return a?i.map(Uy).concat({type:e,attrs:r}).concat(a.map(Uy)):null}function Uy(t){return{type:t,attrs:null}}function Uk(t,e){let{parent:r,startIndex:n,endIndex:i}=t,a=r.contentMatchAt(n).findWrapping(e);if(!a)return null;let o=a.length?a[0]:e;return r.canReplaceWith(n,i,o)?a:null}function Hk(t,e){let{parent:r,startIndex:n,endIndex:i}=t,a=r.child(n),o=e.contentMatch.findWrapping(a.type);if(!o)return null;let u=(o.length?o[o.length-1]:e).contentMatch;for(let l=n;u&&l<i;l++)u=u.matchType(r.child(l).type);return!u||!u.validEnd?null:o}function Vk(t,e,r){let n=De.empty;for(let o=r.length-1;o>=0;o--){if(n.size){let s=r[o].type.contentMatch.matchFragment(n);if(!s||!s.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}n=De.from(r[o].type.create(r[o].attrs,n))}let i=e.start,a=e.end;t.step(new wr(i,a,i,a,new Be(n,0,0),r.length,!0))}function Wk(t,e,r,n,i){if(!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let a=t.steps.length;t.doc.nodesBetween(e,r,(o,s)=>{let u=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(n,u)&&jk(t.doc,t.mapping.slice(a).map(s),n)){let l=null;if(n.schema.linebreakReplacement){let p=n.whitespace=="pre",h=!!n.contentMatch.matchType(n.schema.linebreakReplacement);p&&!h?l=!1:!p&&h&&(l=!0)}l===!1&&HD(t,o,s,a),qg(t,t.mapping.slice(a).map(s,1),n,void 0,l===null);let c=t.mapping.slice(a),f=c.map(s,1),d=c.map(s+o.nodeSize,1);return t.step(new wr(f,d,f+1,d-1,new Be(De.from(n.create(u,null,o.marks)),0,0),1,!0)),l===!0&&UD(t,o,s,a),!1}})}function UD(t,e,r,n){e.forEach((i,a)=>{if(i.isText){let o,s=/\r?\n|\r/g;for(;o=s.exec(i.text);){let u=t.mapping.slice(n).map(r+1+a+o.index);t.replaceWith(u,u+1,e.type.schema.linebreakReplacement.create())}}})}function HD(t,e,r,n){e.forEach((i,a)=>{if(i.type==i.type.schema.linebreakReplacement){let o=t.mapping.slice(n).map(r+1+a);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function jk(t,e,r){let n=t.resolve(e),i=n.index();return n.parent.canReplaceWith(i,i+1,r)}function Gk(t,e,r,n,i){let a=t.doc.nodeAt(e);if(!a)throw new RangeError("No node at given position");r||(r=a.type);let o=r.create(n,null,i||a.marks);if(a.isLeaf)return t.replaceWith(e,e+a.nodeSize,o);if(!r.validContent(a.content))throw new RangeError("Invalid content for node type "+r.name);t.step(new wr(e,e+a.nodeSize,e+1,e+a.nodeSize-1,new Be(De.from(o),0,0),1,!0))}function oa(t,e,r=1,n){let i=t.resolve(e),a=i.depth-r,o=n&&n[n.length-1]||i.parent;if(a<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let l=i.depth-1,c=r-2;l>a;l--,c--){let f=i.node(l),d=i.index(l);if(f.type.spec.isolating)return!1;let p=f.content.cutByIndex(d,f.childCount),h=n&&n[c+1];h&&(p=p.replaceChild(0,h.type.create(h.attrs)));let m=n&&n[c]||f;if(!f.canReplace(d+1,f.childCount)||!m.type.validContent(p))return!1}let s=i.indexAfter(a),u=n&&n[0];return i.node(a).canReplaceWith(s,s,u?u.type:i.node(a+1).type)}function Kk(t,e,r=1,n){let i=t.doc.resolve(e),a=De.empty,o=De.empty;for(let s=i.depth,u=i.depth-r,l=r-1;s>u;s--,l--){a=De.from(i.node(s).copy(a));let c=n&&n[l];o=De.from(c?c.type.create(c.attrs,o):i.node(s).copy(o))}t.step(new br(e,e,new Be(a.append(o),r,r),!0))}function to(t,e){let r=t.resolve(e),n=r.index();return VD(r.nodeBefore,r.nodeAfter)&&r.parent.canReplace(n,n+1)}function Jk(t,e){e.content.size||t.type.compatibleContent(e.type);let r=t.contentMatchAt(t.childCount),{linebreakReplacement:n}=t.type.schema;for(let i=0;i<e.childCount;i++){let a=e.child(i),o=a.type==n?t.type.schema.nodes.text:a.type;if(r=r.matchType(o),!r||!t.type.allowsMarks(a.marks))return!1}return r.validEnd}function VD(t,e){return!!(t&&e&&!t.isLeaf&&Jk(t,e))}function Qd(t,e,r=-1){let n=t.resolve(e);for(let i=n.depth;;i--){let a,o,s=n.index(i);if(i==n.depth?(a=n.nodeBefore,o=n.nodeAfter):r>0?(a=n.node(i+1),s++,o=n.node(i).maybeChild(s)):(a=n.node(i).maybeChild(s-1),o=n.node(i+1)),a&&!a.isTextblock&&VD(a,o)&&n.node(i).canReplace(s,s+1))return e;if(i==0)break;e=r<0?n.before(i):n.after(i)}}function Yk(t,e,r){let n=null,{linebreakReplacement:i}=t.doc.type.schema,a=t.doc.resolve(e-r),o=a.node().type;if(i&&o.inlineContent){let c=o.whitespace=="pre",f=!!o.contentMatch.matchType(i);c&&!f?n=!1:!c&&f&&(n=!0)}let s=t.steps.length;if(n===!1){let c=t.doc.resolve(e+r);HD(t,c.node(),c.before(),s)}o.inlineContent&&qg(t,e+r-1,o,a.node().contentMatchAt(a.index()),n==null);let u=t.mapping.slice(s),l=u.map(e-r);if(t.step(new br(l,u.map(e+r,-1),Be.empty,!0)),n===!0){let c=t.doc.resolve(l);UD(t,c.node(),c.before(),t.steps.length)}return t}function Zk(t,e,r){let n=t.resolve(e);if(n.parent.canReplaceWith(n.index(),n.index(),r))return e;if(n.parentOffset==0)for(let i=n.depth-1;i>=0;i--){let a=n.index(i);if(n.node(i).canReplaceWith(a,a,r))return n.before(i+1);if(a>0)return null}if(n.parentOffset==n.parent.content.size)for(let i=n.depth-1;i>=0;i--){let a=n.indexAfter(i);if(n.node(i).canReplaceWith(a,a,r))return n.after(i+1);if(a<n.node(i).childCount)return null}return null}function WD(t,e,r){let n=t.resolve(e);if(!r.content.size)return e;let i=r.content;for(let a=0;a<r.openStart;a++)i=i.firstChild.content;for(let a=1;a<=(r.openStart==0&&r.size?2:1);a++)for(let o=n.depth;o>=0;o--){let s=o==n.depth?0:n.pos<=(n.start(o+1)+n.end(o+1))/2?-1:1,u=n.index(o)+(s>0?1:0),l=n.node(o),c=!1;if(a==1)c=l.canReplace(u,u,i);else{let f=l.contentMatchAt(u).findWrapping(i.firstChild.type);c=f&&l.canReplaceWith(u,u,f[0])}if(c)return s==0?n.pos:s<0?n.before(o+1):n.after(o+1)}return null}function ep(t,e,r=e,n=Be.empty){if(e==r&&!n.size)return null;let i=t.resolve(e),a=t.resolve(r);return jD(i,a,n)?new br(e,r,n):new Xk(i,a,n).fit()}function jD(t,e,r){return!r.openStart&&!r.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),r.content)}class Xk{constructor(e,r,n){this.$from=e,this.$to=r,this.unplaced=n,this.frontier=[],this.placed=De.empty;for(let i=0;i<=e.depth;i++){let a=e.node(i);this.frontier.push({type:a.type,match:a.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=De.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let l=this.findFittable();l?this.placeNodes(l):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),r=this.placed.size-this.depth-this.$from.depth,n=this.$from,i=this.close(e<0?this.$to:n.doc.resolve(e));if(!i)return null;let a=this.placed,o=n.depth,s=i.depth;for(;o&&s&&a.childCount==1;)a=a.firstChild.content,o--,s--;let u=new Be(a,o,s);return e>-1?new wr(n.pos,e,this.$to.pos,this.$to.end(),u,r):u.size||n.pos!=this.$to.pos?new br(n.pos,i.pos,u):null}findFittable(){let e=this.unplaced.openStart;for(let r=this.unplaced.content,n=0,i=this.unplaced.openEnd;n<e;n++){let a=r.firstChild;if(r.childCount>1&&(i=0),a.type.spec.isolating&&i<=n){e=n;break}r=a.content}for(let r=1;r<=2;r++)for(let n=r==1?e:this.unplaced.openStart;n>=0;n--){let i,a=null;n?(a=ph(this.unplaced.content,n-1).firstChild,i=a.content):i=this.unplaced.content;let o=i.firstChild;for(let s=this.depth;s>=0;s--){let{type:u,match:l}=this.frontier[s],c,f=null;if(r==1&&(o?l.matchType(o.type)||(f=l.fillBefore(De.from(o),!1)):a&&u.compatibleContent(a.type)))return{sliceDepth:n,frontierDepth:s,parent:a,inject:f};if(r==2&&o&&(c=l.findWrapping(o.type)))return{sliceDepth:n,frontierDepth:s,parent:a,wrap:c};if(a&&l.matchType(a.type))break}}}openMore(){let{content:e,openStart:r,openEnd:n}=this.unplaced,i=ph(e,r);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new Be(e,r+1,Math.max(n,i.size+r>=e.size-n?r+1:0)),!0)}dropNode(){let{content:e,openStart:r,openEnd:n}=this.unplaced,i=ph(e,r);if(i.childCount<=1&&r>0){let a=e.size-r<=r+i.size;this.unplaced=new Be(Tu(e,r-1,1),r-1,a?r-1:n)}else this.unplaced=new Be(Tu(e,r,1),r,n)}placeNodes({sliceDepth:e,frontierDepth:r,parent:n,inject:i,wrap:a}){for(;this.depth>r;)this.closeFrontierNode();if(a)for(let m=0;m<a.length;m++)this.openFrontierNode(a[m]);let o=this.unplaced,s=n?n.content:o.content,u=o.openStart-e,l=0,c=[],{match:f,type:d}=this.frontier[r];if(i){for(let m=0;m<i.childCount;m++)c.push(i.child(m));f=f.matchFragment(i)}let p=s.size+e-(o.content.size-o.openEnd);for(;l<s.childCount;){let m=s.child(l),g=f.matchType(m.type);if(!g)break;l++,(l>1||u==0||m.content.size)&&(f=g,c.push(GD(m.mark(d.allowedMarks(m.marks)),l==1?u:0,l==s.childCount?p:-1)))}let h=l==s.childCount;h||(p=-1),this.placed=_u(this.placed,r,De.from(c)),this.frontier[r].match=f,h&&p<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,g=s;m<p;m++){let y=g.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),g=y.content}this.unplaced=h?e==0?Be.empty:new Be(Tu(o.content,e-1,1),e-1,p<0?o.openEnd:e-1):new Be(Tu(o.content,e,l),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],r;if(!e.type.isTextblock||!hh(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(r=this.findCloseLevel(this.$to))&&r.depth==this.depth)return-1;let{depth:n}=this.$to,i=this.$to.after(n);for(;n>1&&i==this.$to.end(--n);)++i;return i}findCloseLevel(e){e:for(let r=Math.min(this.depth,e.depth);r>=0;r--){let{match:n,type:i}=this.frontier[r],a=r<e.depth&&e.end(r+1)==e.pos+(e.depth-(r+1)),o=hh(e,r,i,n,a);if(o){for(let s=r-1;s>=0;s--){let{match:u,type:l}=this.frontier[s],c=hh(e,s,l,u,!0);if(!c||c.childCount)continue e}return{depth:r,fit:o,move:a?e.doc.resolve(e.after(r+1)):e}}}}close(e){let r=this.findCloseLevel(e);if(!r)return null;for(;this.depth>r.depth;)this.closeFrontierNode();r.fit.childCount&&(this.placed=_u(this.placed,r.depth,r.fit)),e=r.move;for(let n=r.depth+1;n<=e.depth;n++){let i=e.node(n),a=i.type.contentMatch.fillBefore(i.content,!0,e.index(n));this.openFrontierNode(i.type,i.attrs,a)}return e}openFrontierNode(e,r=null,n){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=_u(this.placed,this.depth,De.from(e.create(r,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let r=this.frontier.pop().match.fillBefore(De.empty,!0);r.childCount&&(this.placed=_u(this.placed,this.frontier.length,r))}}function Tu(t,e,r){return e==0?t.cutByIndex(r,t.childCount):t.replaceChild(0,t.firstChild.copy(Tu(t.firstChild.content,e-1,r)))}function _u(t,e,r){return e==0?t.append(r):t.replaceChild(t.childCount-1,t.lastChild.copy(_u(t.lastChild.content,e-1,r)))}function ph(t,e){for(let r=0;r<e;r++)t=t.firstChild.content;return t}function GD(t,e,r){if(e<=0)return t;let n=t.content;return e>1&&(n=n.replaceChild(0,GD(n.firstChild,e-1,n.childCount==1?r-1:0))),e>0&&(n=t.type.contentMatch.fillBefore(n).append(n),r<=0&&(n=n.append(t.type.contentMatch.matchFragment(n).fillBefore(De.empty,!0)))),t.copy(n)}function hh(t,e,r,n,i){let a=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==a.childCount&&!r.compatibleContent(a.type))return null;let s=n.fillBefore(a.content,!0,o);return s&&!Qk(r,a.content,o)?s:null}function Qk(t,e,r){for(let n=r;n<e.childCount;n++)if(!t.allowsMarks(e.child(n).marks))return!0;return!1}function e4(t){return t.spec.defining||t.spec.definingForContent}function t4(t,e,r,n){if(!n.size)return t.deleteRange(e,r);let i=t.doc.resolve(e),a=t.doc.resolve(r);if(jD(i,a,n))return t.step(new br(e,r,n));let o=JD(i,t.doc.resolve(r));o[o.length-1]==0&&o.pop();let s=-(i.depth+1);o.unshift(s);for(let d=i.depth,p=i.pos-1;d>0;d--,p--){let h=i.node(d).type.spec;if(h.defining||h.definingAsContext||h.isolating)break;o.indexOf(d)>-1?s=d:i.before(d)==p&&o.splice(1,0,-d)}let u=o.indexOf(s),l=[],c=n.openStart;for(let d=n.content,p=0;;p++){let h=d.firstChild;if(l.push(h),p==n.openStart)break;d=h.content}for(let d=c-1;d>=0;d--){let p=l[d],h=e4(p.type);if(h&&!p.sameMarkup(i.node(Math.abs(s)-1)))c=d;else if(h||!p.type.isTextblock)break}for(let d=n.openStart;d>=0;d--){let p=(d+c+1)%(n.openStart+1),h=l[p];if(h)for(let m=0;m<o.length;m++){let g=o[(m+u)%o.length],y=!0;g<0&&(y=!1,g=-g);let N=i.node(g-1),v=i.index(g-1);if(N.canReplaceWith(v,v,h.type,h.marks))return t.replace(i.before(g),y?a.after(g):r,new Be(KD(n.content,0,n.openStart,p),p,n.openEnd))}}let f=t.steps.length;for(let d=o.length-1;d>=0&&(t.replace(e,r,n),!(t.steps.length>f));d--){let p=o[d];p<0||(e=i.before(p),r=a.after(p))}}function KD(t,e,r,n,i){if(e<r){let a=t.firstChild;t=t.replaceChild(0,a.copy(KD(a.content,e+1,r,n,a)))}if(e>n){let a=i.contentMatchAt(0),o=a.fillBefore(t).append(t);t=o.append(a.matchFragment(o).fillBefore(De.empty,!0))}return t}function r4(t,e,r,n){if(!n.isInline&&e==r&&t.doc.resolve(e).parent.content.size){let i=Zk(t.doc,e,n.type);i!=null&&(e=r=i)}t.replaceRange(e,r,new Be(De.from(n),0,0))}function n4(t,e,r){let n=t.doc.resolve(e),i=t.doc.resolve(r),a=JD(n,i);for(let o=0;o<a.length;o++){let s=a[o],u=o==a.length-1;if(u&&s==0||n.node(s).type.contentMatch.validEnd)return t.delete(n.start(s),i.end(s));if(s>0&&(u||n.node(s-1).canReplace(n.index(s-1),i.indexAfter(s-1))))return t.delete(n.before(s),i.after(s))}for(let o=1;o<=n.depth&&o<=i.depth;o++)if(e-n.start(o)==n.depth-o&&r>n.end(o)&&i.end(o)-r!=i.depth-o&&n.start(o-1)==i.start(o-1)&&n.node(o-1).canReplace(n.index(o-1),i.index(o-1)))return t.delete(n.before(o),r);t.delete(e,r)}function JD(t,e){let r=[],n=Math.min(t.depth,e.depth);for(let i=n;i>=0;i--){let a=t.start(i);if(a<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(a==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==a-1)&&r.push(i)}return r}class Os extends Yr{constructor(e,r,n){super(),this.pos=e,this.attr=r,this.value=n}apply(e){let r=e.nodeAt(this.pos);if(!r)return lr.fail("No node at attribute step's position");let n=Object.create(null);for(let a in r.attrs)n[a]=r.attrs[a];n[this.attr]=this.value;let i=r.type.create(n,null,r.marks);return lr.fromReplace(e,this.pos,this.pos+1,new Be(De.from(i),0,r.isLeaf?0:1))}getMap(){return En.empty}invert(e){return new Os(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new Os(r.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,r){if(typeof r.pos!="number"||typeof r.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Os(r.pos,r.attr,r.value)}}Yr.jsonID("attr",Os);class pl extends Yr{constructor(e,r){super(),this.attr=e,this.value=r}apply(e){let r=Object.create(null);for(let i in e.attrs)r[i]=e.attrs[i];r[this.attr]=this.value;let n=e.type.create(r,e.content,e.marks);return lr.ok(n)}getMap(){return En.empty}invert(e){return new pl(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,r){if(typeof r.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new pl(r.attr,r.value)}}Yr.jsonID("docAttr",pl);let Ls=class extends Error{};Ls=function t(e){let r=Error.call(this,e);return r.__proto__=t.prototype,r};Ls.prototype=Object.create(Error.prototype);Ls.prototype.constructor=Ls;Ls.prototype.name="TransformError";class YD{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new dl}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let r=this.maybeStep(e);if(r.failed)throw new Ls(r.failed);return this}maybeStep(e){let r=e.apply(this.doc);return r.failed||this.addStep(e,r.doc),r}get docChanged(){return this.steps.length>0}addStep(e,r){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=r}replace(e,r=e,n=Be.empty){let i=ep(this.doc,e,r,n);return i&&this.step(i),this}replaceWith(e,r,n){return this.replace(e,r,new Be(De.from(n),0,0))}delete(e,r){return this.replace(e,r,Be.empty)}insert(e,r){return this.replaceWith(e,e,r)}replaceRange(e,r,n){return t4(this,e,r,n),this}replaceRangeWith(e,r,n){return r4(this,e,r,n),this}deleteRange(e,r){return n4(this,e,r),this}lift(e,r){return qk(this,e,r),this}join(e,r=1){return Yk(this,e,r),this}wrap(e,r){return Vk(this,e,r),this}setBlockType(e,r=e,n,i=null){return Wk(this,e,r,n,i),this}setNodeMarkup(e,r,n=null,i){return Gk(this,e,r,n,i),this}setNodeAttribute(e,r,n){return this.step(new Os(e,r,n)),this}setDocAttribute(e,r){return this.step(new pl(e,r)),this}addNodeMark(e,r){return this.step(new Ra(e,r)),this}removeNodeMark(e,r){let n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(r instanceof qt)r.isInSet(n.marks)&&this.step(new qo(e,r));else{let i=n.marks,a,o=[];for(;a=r.isInSet(i);)o.push(new qo(e,a)),i=a.removeFromSet(i);for(let s=o.length-1;s>=0;s--)this.step(o[s])}return this}split(e,r=1,n){return Kk(this,e,r,n),this}addMark(e,r,n){return $k(this,e,r,n),this}removeMark(e,r,n){return Lk(this,e,r,n),this}clearIncompatible(e,r,n){return qg(this,e,r,n),this}}const mh=Object.create(null);class gt{constructor(e,r,n){this.$anchor=e,this.$head=r,this.ranges=n||[new i4(e.min(r),e.max(r))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let r=0;r<e.length;r++)if(e[r].$from.pos!=e[r].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,r=Be.empty){let n=r.content.lastChild,i=null;for(let s=0;s<r.openEnd;s++)i=n,n=n.lastChild;let a=e.steps.length,o=this.ranges;for(let s=0;s<o.length;s++){let{$from:u,$to:l}=o[s],c=e.mapping.slice(a);e.replaceRange(c.map(u.pos),c.map(l.pos),s?Be.empty:r),s==0&&Wy(e,a,(n?n.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,r){let n=e.steps.length,i=this.ranges;for(let a=0;a<i.length;a++){let{$from:o,$to:s}=i[a],u=e.mapping.slice(n),l=u.map(o.pos),c=u.map(s.pos);a?e.deleteRange(l,c):(e.replaceRangeWith(l,c,r),Wy(e,n,r.isInline?-1:1))}}static findFrom(e,r,n=!1){let i=e.parent.inlineContent?new at(e):bs(e.node(0),e.parent,e.pos,e.index(),r,n);if(i)return i;for(let a=e.depth-1;a>=0;a--){let o=r<0?bs(e.node(0),e.node(a),e.before(a+1),e.index(a),r,n):bs(e.node(0),e.node(a),e.after(a+1),e.index(a)+1,r,n);if(o)return o}return null}static near(e,r=1){return this.findFrom(e,r)||this.findFrom(e,-r)||new Tn(e.node(0))}static atStart(e){return bs(e,e,0,0,1)||new Tn(e)}static atEnd(e){return bs(e,e,e.content.size,e.childCount,-1)||new Tn(e)}static fromJSON(e,r){if(!r||!r.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=mh[r.type];if(!n)throw new RangeError(`No selection type ${r.type} defined`);return n.fromJSON(e,r)}static jsonID(e,r){if(e in mh)throw new RangeError("Duplicate use of selection JSON ID "+e);return mh[e]=r,r.prototype.jsonID=e,r}getBookmark(){return at.between(this.$anchor,this.$head).getBookmark()}}gt.prototype.visible=!0;class i4{constructor(e,r){this.$from=e,this.$to=r}}let Hy=!1;function Vy(t){!Hy&&!t.parent.inlineContent&&(Hy=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class at extends gt{constructor(e,r=e){Vy(e),Vy(r),super(e,r)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,r){let n=e.resolve(r.map(this.head));if(!n.parent.inlineContent)return gt.near(n);let i=e.resolve(r.map(this.anchor));return new at(i.parent.inlineContent?i:n,n)}replace(e,r=Be.empty){if(super.replace(e,r),r==Be.empty){let n=this.$from.marksAcross(this.$to);n&&e.ensureMarks(n)}}eq(e){return e instanceof at&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new tp(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,r){if(typeof r.anchor!="number"||typeof r.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new at(e.resolve(r.anchor),e.resolve(r.head))}static create(e,r,n=r){let i=e.resolve(r);return new this(i,n==r?i:e.resolve(n))}static between(e,r,n){let i=e.pos-r.pos;if((!n||i)&&(n=i>=0?1:-1),!r.parent.inlineContent){let a=gt.findFrom(r,n,!0)||gt.findFrom(r,-n,!0);if(a)r=a.$head;else return gt.near(r,n)}return e.parent.inlineContent||(i==0?e=r:(e=(gt.findFrom(e,-n,!0)||gt.findFrom(e,n,!0)).$anchor,e.pos<r.pos!=i<0&&(e=r))),new at(e,r)}}gt.jsonID("text",at);class tp{constructor(e,r){this.anchor=e,this.head=r}map(e){return new tp(e.map(this.anchor),e.map(this.head))}resolve(e){return at.between(e.resolve(this.anchor),e.resolve(this.head))}}class Ge extends gt{constructor(e){let r=e.nodeAfter,n=e.node(0).resolve(e.pos+r.nodeSize);super(e,n),this.node=r}map(e,r){let{deleted:n,pos:i}=r.mapResult(this.anchor),a=e.resolve(i);return n?gt.near(a):new Ge(a)}content(){return new Be(De.from(this.node),0,0)}eq(e){return e instanceof Ge&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Hg(this.anchor)}static fromJSON(e,r){if(typeof r.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Ge(e.resolve(r.anchor))}static create(e,r){return new Ge(e.resolve(r))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Ge.prototype.visible=!1;gt.jsonID("node",Ge);class Hg{constructor(e){this.anchor=e}map(e){let{deleted:r,pos:n}=e.mapResult(this.anchor);return r?new tp(n,n):new Hg(n)}resolve(e){let r=e.resolve(this.anchor),n=r.nodeAfter;return n&&Ge.isSelectable(n)?new Ge(r):gt.near(r)}}class Tn extends gt{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,r=Be.empty){if(r==Be.empty){e.delete(0,e.doc.content.size);let n=gt.atStart(e.doc);n.eq(e.selection)||e.setSelection(n)}else super.replace(e,r)}toJSON(){return{type:"all"}}static fromJSON(e){return new Tn(e)}map(e){return new Tn(e)}eq(e){return e instanceof Tn}getBookmark(){return a4}}gt.jsonID("all",Tn);const a4={map(){return this},resolve(t){return new Tn(t)}};function bs(t,e,r,n,i,a=!1){if(e.inlineContent)return at.create(t,r);for(let o=n-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let s=e.child(o);if(s.isAtom){if(!a&&Ge.isSelectable(s))return Ge.create(t,r-(i<0?s.nodeSize:0))}else{let u=bs(t,s,r+i,i<0?s.childCount:0,i,a);if(u)return u}r+=s.nodeSize*i}return null}function Wy(t,e,r){let n=t.steps.length-1;if(n<e)return;let i=t.steps[n];if(!(i instanceof br||i instanceof wr))return;let a=t.mapping.maps[n],o;a.forEach((s,u,l,c)=>{o==null&&(o=c)}),t.setSelection(gt.near(t.doc.resolve(o),r))}const jy=1,Gy=2,Ky=4;class o4 extends YD{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|jy)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&jy)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Gy,this}ensureMarks(e){return qt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Gy)>0}addStep(e,r){super.addStep(e,r),this.updated=this.updated&-3,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,r=!0){let n=this.selection;return r&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||qt.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,r,n){let i=this.doc.type.schema;if(r==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(n==null&&(n=r),n=n??r,!e)return this.deleteRange(r,n);let a=this.storedMarks;if(!a){let o=this.doc.resolve(r);a=n==r?o.marks():o.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(r,n,i.text(e,a)),this.selection.empty||this.setSelection(gt.near(this.selection.$to)),this}}setMeta(e,r){return this.meta[typeof e=="string"?e:e.key]=r,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Ky,this}get scrolledIntoView(){return(this.updated&Ky)>0}}function Jy(t,e){return!e||!t?t:t.bind(e)}class Ou{constructor(e,r,n){this.name=e,this.init=Jy(r.init,n),this.apply=Jy(r.apply,n)}}const s4=[new Ou("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Ou("selection",{init(t,e){return t.selection||gt.atStart(e.doc)},apply(t){return t.selection}}),new Ou("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,r,n){return n.selection.$cursor?t.storedMarks:null}}),new Ou("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class gh{constructor(e,r){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=s4.slice(),r&&r.forEach(n=>{if(this.pluginsByKey[n.key])throw new RangeError("Adding different instances of a keyed plugin ("+n.key+")");this.plugins.push(n),this.pluginsByKey[n.key]=n,n.spec.state&&this.fields.push(new Ou(n.key,n.spec.state,n))})}}class Ns{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,r=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=r){let i=this.config.plugins[n];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let r=[e],n=this.applyInner(e),i=null;for(;;){let a=!1;for(let o=0;o<this.config.plugins.length;o++){let s=this.config.plugins[o];if(s.spec.appendTransaction){let u=i?i[o].n:0,l=i?i[o].state:this,c=u<r.length&&s.spec.appendTransaction.call(s,u?r.slice(u):r,l,n);if(c&&n.filterTransaction(c,o)){if(c.setMeta("appendedTransaction",e),!i){i=[];for(let f=0;f<this.config.plugins.length;f++)i.push(f<o?{state:n,n:r.length}:{state:this,n:0})}r.push(c),n=n.applyInner(c),a=!0}i&&(i[o]={state:n,n:r.length})}}if(!a)return{state:n,transactions:r}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let r=new Ns(this.config),n=this.config.fields;for(let i=0;i<n.length;i++){let a=n[i];r[a.name]=a.apply(e,this[a.name],this,r)}return r}get tr(){return new o4(this)}static create(e){let r=new gh(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new Ns(r);for(let i=0;i<r.fields.length;i++)n[r.fields[i].name]=r.fields[i].init(e,n);return n}reconfigure(e){let r=new gh(this.schema,e.plugins),n=r.fields,i=new Ns(r);for(let a=0;a<n.length;a++){let o=n[a].name;i[o]=this.hasOwnProperty(o)?this[o]:n[a].init(e,i)}return i}toJSON(e){let r={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(r.storedMarks=this.storedMarks.map(n=>n.toJSON())),e&&typeof e=="object")for(let n in e){if(n=="doc"||n=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[n],a=i.spec.state;a&&a.toJSON&&(r[n]=a.toJSON.call(i,this[i.key]))}return r}static fromJSON(e,r,n){if(!r)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new gh(e.schema,e.plugins),a=new Ns(i);return i.fields.forEach(o=>{if(o.name=="doc")a.doc=Ua.fromJSON(e.schema,r.doc);else if(o.name=="selection")a.selection=gt.fromJSON(a.doc,r.selection);else if(o.name=="storedMarks")r.storedMarks&&(a.storedMarks=r.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let s in n){let u=n[s],l=u.spec.state;if(u.key==o.name&&l&&l.fromJSON&&Object.prototype.hasOwnProperty.call(r,s)){a[o.name]=l.fromJSON.call(u,e,r[s],a);return}}a[o.name]=o.init(e,a)}}),a}}function ZD(t,e,r){for(let n in t){let i=t[n];i instanceof Function?i=i.bind(e):n=="handleDOMEvents"&&(i=ZD(i,e,{})),r[n]=i}return r}class Cr{constructor(e){this.spec=e,this.props={},e.props&&ZD(e.props,this,this.props),this.key=e.key?e.key.key:XD("plugin")}getState(e){return e[this.key]}}const vh=Object.create(null);function XD(t){return t in vh?t+"$"+ ++vh[t]:(vh[t]=0,t+"$")}class Dn{constructor(e="key"){this.key=XD(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Or=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},zs=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let Sm=null;const Xi=function(t,e,r){let n=Sm||(Sm=document.createRange());return n.setEnd(t,r??t.nodeValue.length),n.setStart(t,e||0),n},u4=function(){Sm=null},Uo=function(t,e,r,n){return r&&(Yy(t,e,r,n,-1)||Yy(t,e,r,n,1))},l4=/^(img|br|input|textarea|hr)$/i;function Yy(t,e,r,n,i){for(;;){if(t==r&&e==n)return!0;if(e==(i<0?0:Un(t))){let a=t.parentNode;if(!a||a.nodeType!=1||Fl(t)||l4.test(t.nodeName)||t.contentEditable=="false")return!1;e=Or(t)+(i<0?0:1),t=a}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.contentEditable=="false")return!1;e=i<0?Un(t):0}else return!1}}function Un(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function c4(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Un(t)}else if(t.parentNode&&!Fl(t))e=Or(t),t=t.parentNode;else return null}}function f4(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!Fl(t))e=Or(t)+1,t=t.parentNode;else return null}}function d4(t,e,r){for(let n=e==0,i=e==Un(t);n||i;){if(t==r)return!0;let a=Or(t);if(t=t.parentNode,!t)return!1;n=n&&a==0,i=i&&a==Un(t)}}function Fl(t){let e;for(let r=t;r&&!(e=r.pmViewDesc);r=r.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const rp=function(t){return t.focusNode&&Uo(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Ao(t,e){let r=document.createEvent("Event");return r.initEvent("keydown",!0,!0),r.keyCode=t,r.key=r.code=e,r}function p4(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function h4(t,e,r){if(t.caretPositionFromPoint)try{let n=t.caretPositionFromPoint(e,r);if(n)return{node:n.offsetNode,offset:Math.min(Un(n.offsetNode),n.offset)}}catch{}if(t.caretRangeFromPoint){let n=t.caretRangeFromPoint(e,r);if(n)return{node:n.startContainer,offset:Math.min(Un(n.startContainer),n.startOffset)}}}const Oi=typeof navigator<"u"?navigator:null,Zy=typeof document<"u"?document:null,ro=Oi&&Oi.userAgent||"",Dm=/Edge\/(\d+)/.exec(ro),QD=/MSIE \d/.exec(ro),Em=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ro),wn=!!(QD||Em||Dm),Va=QD?document.documentMode:Em?+Em[1]:Dm?+Dm[1]:0,ci=!wn&&/gecko\/(\d+)/i.test(ro);ci&&+(/Firefox\/(\d+)/.exec(ro)||[0,0])[1];const Cm=!wn&&/Chrome\/(\d+)/.exec(ro),jr=!!Cm,eE=Cm?+Cm[1]:0,cn=!wn&&!!Oi&&/Apple Computer/.test(Oi.vendor),qs=cn&&(/Mobile\/\w+/.test(ro)||!!Oi&&Oi.maxTouchPoints>2),Ln=qs||(Oi?/Mac/.test(Oi.platform):!1),m4=Oi?/Win/.test(Oi.platform):!1,ta=/Android \d/.test(ro),Bl=!!Zy&&"webkitFontSmoothing"in Zy.documentElement.style,g4=Bl?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function v4(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Vi(t,e){return typeof t=="number"?t:t[e]}function y4(t){let e=t.getBoundingClientRect(),r=e.width/t.offsetWidth||1,n=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*r,top:e.top,bottom:e.top+t.clientHeight*n}}function Xy(t,e,r){let n=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,a=t.dom.ownerDocument;for(let o=r||t.dom;o;){if(o.nodeType!=1){o=zs(o);continue}let s=o,u=s==a.body,l=u?v4(a):y4(s),c=0,f=0;if(e.top<l.top+Vi(n,"top")?f=-(l.top-e.top+Vi(i,"top")):e.bottom>l.bottom-Vi(n,"bottom")&&(f=e.bottom-e.top>l.bottom-l.top?e.top+Vi(i,"top")-l.top:e.bottom-l.bottom+Vi(i,"bottom")),e.left<l.left+Vi(n,"left")?c=-(l.left-e.left+Vi(i,"left")):e.right>l.right-Vi(n,"right")&&(c=e.right-l.right+Vi(i,"right")),c||f)if(u)a.defaultView.scrollBy(c,f);else{let p=s.scrollLeft,h=s.scrollTop;f&&(s.scrollTop+=f),c&&(s.scrollLeft+=c);let m=s.scrollLeft-p,g=s.scrollTop-h;e={left:e.left-m,top:e.top-g,right:e.right-m,bottom:e.bottom-g}}let d=u?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(d))break;o=d=="absolute"?o.offsetParent:zs(o)}}function b4(t){let e=t.dom.getBoundingClientRect(),r=Math.max(0,e.top),n,i;for(let a=(e.left+e.right)/2,o=r+1;o<Math.min(innerHeight,e.bottom);o+=5){let s=t.root.elementFromPoint(a,o);if(!s||s==t.dom||!t.dom.contains(s))continue;let u=s.getBoundingClientRect();if(u.top>=r-20){n=s,i=u.top;break}}return{refDOM:n,refTop:i,stack:tE(t.dom)}}function tE(t){let e=[],r=t.ownerDocument;for(let n=t;n&&(e.push({dom:n,top:n.scrollTop,left:n.scrollLeft}),t!=r);n=zs(n));return e}function x4({refDOM:t,refTop:e,stack:r}){let n=t?t.getBoundingClientRect().top:0;rE(r,n==0?0:n-e)}function rE(t,e){for(let r=0;r<t.length;r++){let{dom:n,top:i,left:a}=t[r];n.scrollTop!=i+e&&(n.scrollTop=i+e),n.scrollLeft!=a&&(n.scrollLeft=a)}}let ls=null;function w4(t){if(t.setActive)return t.setActive();if(ls)return t.focus(ls);let e=tE(t);t.focus(ls==null?{get preventScroll(){return ls={preventScroll:!0},!0}}:void 0),ls||(ls=!1,rE(e,0))}function nE(t,e){let r,n=2e8,i,a=0,o=e.top,s=e.top,u,l;for(let c=t.firstChild,f=0;c;c=c.nextSibling,f++){let d;if(c.nodeType==1)d=c.getClientRects();else if(c.nodeType==3)d=Xi(c).getClientRects();else continue;for(let p=0;p<d.length;p++){let h=d[p];if(h.top<=o&&h.bottom>=s){o=Math.max(h.bottom,o),s=Math.min(h.top,s);let m=h.left>e.left?h.left-e.left:h.right<e.left?e.left-h.right:0;if(m<n){r=c,n=m,i=m&&r.nodeType==3?{left:h.right<e.left?h.right:h.left,top:e.top}:e,c.nodeType==1&&m&&(a=f+(e.left>=(h.left+h.right)/2?1:0));continue}}else h.top>e.top&&!u&&h.left<=e.left&&h.right>=e.left&&(u=c,l={left:Math.max(h.left,Math.min(h.right,e.left)),top:h.top});!r&&(e.left>=h.right&&e.top>=h.top||e.left>=h.left&&e.top>=h.bottom)&&(a=f+1)}}return!r&&u&&(r=u,i=l,n=0),r&&r.nodeType==3?N4(r,i):!r||n&&r.nodeType==1?{node:t,offset:a}:nE(r,i)}function N4(t,e){let r=t.nodeValue.length,n=document.createRange();for(let i=0;i<r;i++){n.setEnd(t,i+1),n.setStart(t,i);let a=Na(n,1);if(a.top!=a.bottom&&Vg(e,a))return{node:t,offset:i+(e.left>=(a.left+a.right)/2?1:0)}}return{node:t,offset:0}}function Vg(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function A4(t,e){let r=t.parentNode;return r&&/^li$/i.test(r.nodeName)&&e.left<t.getBoundingClientRect().left?r:t}function S4(t,e,r){let{node:n,offset:i}=nE(e,r),a=-1;if(n.nodeType==1&&!n.firstChild){let o=n.getBoundingClientRect();a=o.left!=o.right&&r.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(n,i,a)}function D4(t,e,r,n){let i=-1;for(let a=e,o=!1;a!=t.dom;){let s=t.docView.nearestDesc(a,!0),u;if(!s)return null;if(s.dom.nodeType==1&&(s.node.isBlock&&s.parent||!s.contentDOM)&&((u=s.dom.getBoundingClientRect()).width||u.height)&&(s.node.isBlock&&s.parent&&(!o&&u.left>n.left||u.top>n.top?i=s.posBefore:(!o&&u.right<n.left||u.bottom<n.top)&&(i=s.posAfter),o=!0),!s.contentDOM&&i<0&&!s.node.isText))return(s.node.isBlock?n.top<(u.top+u.bottom)/2:n.left<(u.left+u.right)/2)?s.posBefore:s.posAfter;a=s.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,r,-1)}function iE(t,e,r){let n=t.childNodes.length;if(n&&r.top<r.bottom)for(let i=Math.max(0,Math.min(n-1,Math.floor(n*(e.top-r.top)/(r.bottom-r.top))-2)),a=i;;){let o=t.childNodes[a];if(o.nodeType==1){let s=o.getClientRects();for(let u=0;u<s.length;u++){let l=s[u];if(Vg(e,l))return iE(o,e,l)}}if((a=(a+1)%n)==i)break}return t}function E4(t,e){let r=t.dom.ownerDocument,n,i=0,a=h4(r,e.left,e.top);a&&({node:n,offset:i}=a);let o=(t.root.elementFromPoint?t.root:r).elementFromPoint(e.left,e.top),s;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let l=t.dom.getBoundingClientRect();if(!Vg(e,l)||(o=iE(t.dom,e,l),!o))return null}if(cn)for(let l=o;n&&l;l=zs(l))l.draggable&&(n=void 0);if(o=A4(o,e),n){if(ci&&n.nodeType==1&&(i=Math.min(i,n.childNodes.length),i<n.childNodes.length)){let c=n.childNodes[i],f;c.nodeName=="IMG"&&(f=c.getBoundingClientRect()).right<=e.left&&f.bottom>e.top&&i++}let l;Bl&&i&&n.nodeType==1&&(l=n.childNodes[i-1]).nodeType==1&&l.contentEditable=="false"&&l.getBoundingClientRect().top>=e.top&&i--,n==t.dom&&i==n.childNodes.length-1&&n.lastChild.nodeType==1&&e.top>n.lastChild.getBoundingClientRect().bottom?s=t.state.doc.content.size:(i==0||n.nodeType!=1||n.childNodes[i-1].nodeName!="BR")&&(s=D4(t,n,i,e))}s==null&&(s=S4(t,o,e));let u=t.docView.nearestDesc(o,!0);return{pos:s,inside:u?u.posAtStart-u.border:-1}}function Qy(t){return t.top<t.bottom||t.left<t.right}function Na(t,e){let r=t.getClientRects();if(r.length){let n=r[e<0?0:r.length-1];if(Qy(n))return n}return Array.prototype.find.call(r,Qy)||t.getBoundingClientRect()}const C4=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function aE(t,e,r){let{node:n,offset:i,atom:a}=t.docView.domFromPos(e,r<0?-1:1),o=Bl||ci;if(n.nodeType==3)if(o&&(C4.test(n.nodeValue)||(r<0?!i:i==n.nodeValue.length))){let u=Na(Xi(n,i,i),r);if(ci&&i&&/\s/.test(n.nodeValue[i-1])&&i<n.nodeValue.length){let l=Na(Xi(n,i-1,i-1),-1);if(l.top==u.top){let c=Na(Xi(n,i,i+1),-1);if(c.top!=u.top)return Au(c,c.left<l.left)}}return u}else{let u=i,l=i,c=r<0?1:-1;return r<0&&!i?(l++,c=-1):r>=0&&i==n.nodeValue.length?(u--,c=1):r<0?u--:l++,Au(Na(Xi(n,u,l),c),c<0)}if(!t.state.doc.resolve(e-(a||0)).parent.inlineContent){if(a==null&&i&&(r<0||i==Un(n))){let u=n.childNodes[i-1];if(u.nodeType==1)return yh(u.getBoundingClientRect(),!1)}if(a==null&&i<Un(n)){let u=n.childNodes[i];if(u.nodeType==1)return yh(u.getBoundingClientRect(),!0)}return yh(n.getBoundingClientRect(),r>=0)}if(a==null&&i&&(r<0||i==Un(n))){let u=n.childNodes[i-1],l=u.nodeType==3?Xi(u,Un(u)-(o?0:1)):u.nodeType==1&&(u.nodeName!="BR"||!u.nextSibling)?u:null;if(l)return Au(Na(l,1),!1)}if(a==null&&i<Un(n)){let u=n.childNodes[i];for(;u.pmViewDesc&&u.pmViewDesc.ignoreForCoords;)u=u.nextSibling;let l=u?u.nodeType==3?Xi(u,0,o?0:1):u.nodeType==1?u:null:null;if(l)return Au(Na(l,-1),!0)}return Au(Na(n.nodeType==3?Xi(n):n,-r),r>=0)}function Au(t,e){if(t.width==0)return t;let r=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:r,right:r}}function yh(t,e){if(t.height==0)return t;let r=e?t.top:t.bottom;return{top:r,bottom:r,left:t.left,right:t.right}}function oE(t,e,r){let n=t.state,i=t.root.activeElement;n!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return r()}finally{n!=e&&t.updateState(n),i!=t.dom&&i&&i.focus()}}function M4(t,e,r){let n=e.selection,i=r=="up"?n.$from:n.$to;return oE(t,e,()=>{let{node:a}=t.docView.domFromPos(i.pos,r=="up"?-1:1);for(;;){let s=t.docView.nearestDesc(a,!0);if(!s)break;if(s.node.isBlock){a=s.contentDOM||s.dom;break}a=s.dom.parentNode}let o=aE(t,i.pos,1);for(let s=a.firstChild;s;s=s.nextSibling){let u;if(s.nodeType==1)u=s.getClientRects();else if(s.nodeType==3)u=Xi(s,0,s.nodeValue.length).getClientRects();else continue;for(let l=0;l<u.length;l++){let c=u[l];if(c.bottom>c.top+1&&(r=="up"?o.top-c.top>(c.bottom-o.top)*2:c.bottom-o.bottom>(o.bottom-c.top)*2))return!1}}return!0})}const T4=/[\u0590-\u08ac]/;function _4(t,e,r){let{$head:n}=e.selection;if(!n.parent.isTextblock)return!1;let i=n.parentOffset,a=!i,o=i==n.parent.content.size,s=t.domSelection();return s?!T4.test(n.parent.textContent)||!s.modify?r=="left"||r=="backward"?a:o:oE(t,e,()=>{let{focusNode:u,focusOffset:l,anchorNode:c,anchorOffset:f}=t.domSelectionRange(),d=s.caretBidiLevel;s.modify("move",r,"character");let p=n.depth?t.docView.domAfterPos(n.before()):t.dom,{focusNode:h,focusOffset:m}=t.domSelectionRange(),g=h&&!p.contains(h.nodeType==1?h:h.parentNode)||u==h&&l==m;try{s.collapse(c,f),u&&(u!=c||l!=f)&&s.extend&&s.extend(u,l)}catch{}return d!=null&&(s.caretBidiLevel=d),g}):n.pos==n.start()||n.pos==n.end()}let e1=null,t1=null,r1=!1;function O4(t,e,r){return e1==e&&t1==r?r1:(e1=e,t1=r,r1=r=="up"||r=="down"?M4(t,e,r):_4(t,e,r))}const Wn=0,n1=1,Eo=2,Fi=3;class kl{constructor(e,r,n,i){this.parent=e,this.children=r,this.dom=n,this.contentDOM=i,this.dirty=Wn,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,r,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let r=0;r<this.children.length;r++)e+=this.children[r].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let r=0,n=this.posAtStart;;r++){let i=this.children[r];if(i==e)return n;n+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,r,n){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(n<0){let a,o;if(e==this.contentDOM)a=e.childNodes[r-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;a=e.previousSibling}for(;a&&!((o=a.pmViewDesc)&&o.parent==this);)a=a.previousSibling;return a?this.posBeforeChild(o)+o.size:this.posAtStart}else{let a,o;if(e==this.contentDOM)a=e.childNodes[r];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;a=e.nextSibling}for(;a&&!((o=a.pmViewDesc)&&o.parent==this);)a=a.nextSibling;return a?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=r>Or(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(r==0)for(let a=e;;a=a.parentNode){if(a==this.dom){i=!1;break}if(a.previousSibling)break}if(i==null&&r==e.childNodes.length)for(let a=e;;a=a.parentNode){if(a==this.dom){i=!0;break}if(a.nextSibling)break}}return i??n>0?this.posAtEnd:this.posAtStart}nearestDesc(e,r=!1){for(let n=!0,i=e;i;i=i.parentNode){let a=this.getDesc(i),o;if(a&&(!r||a.node))if(n&&(o=a.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))n=!1;else return a}}getDesc(e){let r=e.pmViewDesc;for(let n=r;n;n=n.parent)if(n==this)return r}posFromDOM(e,r,n){for(let i=e;i;i=i.parentNode){let a=this.getDesc(i);if(a)return a.localPosFromDOM(e,r,n)}return-1}descAt(e){for(let r=0,n=0;r<this.children.length;r++){let i=this.children[r],a=n+i.size;if(n==e&&a!=n){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let s=i.children[o];if(s.size){i=s;break}}return i}if(e<a)return i.descAt(e-n-i.border);n=a}}domFromPos(e,r){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,i=0;for(let a=0;n<this.children.length;n++){let o=this.children[n],s=a+o.size;if(s>e||o instanceof uE){i=e-a;break}a=s}if(i)return this.children[n].domFromPos(i-this.children[n].border,r);for(let a;n&&!(a=this.children[n-1]).size&&a instanceof sE&&a.side>=0;n--);if(r<=0){let a,o=!0;for(;a=n?this.children[n-1]:null,!(!a||a.dom.parentNode==this.contentDOM);n--,o=!1);return a&&r&&o&&!a.border&&!a.domAtom?a.domFromPos(a.size,r):{node:this.contentDOM,offset:a?Or(a.dom)+1:0}}else{let a,o=!0;for(;a=n<this.children.length?this.children[n]:null,!(!a||a.dom.parentNode==this.contentDOM);n++,o=!1);return a&&o&&!a.border&&!a.domAtom?a.domFromPos(0,r):{node:this.contentDOM,offset:a?Or(a.dom):this.contentDOM.childNodes.length}}}parseRange(e,r,n=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:r,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,a=-1;for(let o=n,s=0;;s++){let u=this.children[s],l=o+u.size;if(i==-1&&e<=l){let c=o+u.border;if(e>=c&&r<=l-u.border&&u.node&&u.contentDOM&&this.contentDOM.contains(u.contentDOM))return u.parseRange(e,r,c);e=o;for(let f=s;f>0;f--){let d=this.children[f-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){i=Or(d.dom)+1;break}e-=d.size}i==-1&&(i=0)}if(i>-1&&(l>r||s==this.children.length-1)){r=l;for(let c=s+1;c<this.children.length;c++){let f=this.children[c];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){a=Or(f.dom);break}r+=f.size}a==-1&&(a=this.contentDOM.childNodes.length);break}o=l}return{node:this.contentDOM,from:e,to:r,fromOffset:i,toOffset:a}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let r=this.children[e<0?0:this.children.length-1];return r.size==0||r.emptyChildAt(e)}domAfterPos(e){let{node:r,offset:n}=this.domFromPos(e,0);if(r.nodeType!=1||n==r.childNodes.length)throw new RangeError("No node after pos "+e);return r.childNodes[n]}setSelection(e,r,n,i=!1){let a=Math.min(e,r),o=Math.max(e,r);for(let p=0,h=0;p<this.children.length;p++){let m=this.children[p],g=h+m.size;if(a>h&&o<g)return m.setSelection(e-h-m.border,r-h-m.border,n,i);h=g}let s=this.domFromPos(e,e?-1:1),u=r==e?s:this.domFromPos(r,r?-1:1),l=n.root.getSelection(),c=n.domSelectionRange(),f=!1;if((ci||cn)&&e==r){let{node:p,offset:h}=s;if(p.nodeType==3){if(f=!!(h&&p.nodeValue[h-1]==`
`),f&&h==p.nodeValue.length)for(let m=p,g;m;m=m.parentNode){if(g=m.nextSibling){g.nodeName=="BR"&&(s=u={node:g.parentNode,offset:Or(g)+1});break}let y=m.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{let m=p.childNodes[h-1];f=m&&(m.nodeName=="BR"||m.contentEditable=="false")}}if(ci&&c.focusNode&&c.focusNode!=u.node&&c.focusNode.nodeType==1){let p=c.focusNode.childNodes[c.focusOffset];p&&p.contentEditable=="false"&&(i=!0)}if(!(i||f&&cn)&&Uo(s.node,s.offset,c.anchorNode,c.anchorOffset)&&Uo(u.node,u.offset,c.focusNode,c.focusOffset))return;let d=!1;if((l.extend||e==r)&&!f){l.collapse(s.node,s.offset);try{e!=r&&l.extend(u.node,u.offset),d=!0}catch{}}if(!d){if(e>r){let h=s;s=u,u=h}let p=document.createRange();p.setEnd(u.node,u.offset),p.setStart(s.node,s.offset),l.removeAllRanges(),l.addRange(p)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,r){for(let n=0,i=0;i<this.children.length;i++){let a=this.children[i],o=n+a.size;if(n==o?e<=o&&r>=n:e<o&&r>n){let s=n+a.border,u=o-a.border;if(e>=s&&r<=u){this.dirty=e==n||r==o?Eo:n1,e==s&&r==u&&(a.contentLost||a.dom.parentNode!=this.contentDOM)?a.dirty=Fi:a.markDirty(e-s,r-s);return}else a.dirty=a.dom==a.contentDOM&&a.dom.parentNode==this.contentDOM&&!a.children.length?Eo:Fi}n=o}this.dirty=Eo}markParentsDirty(){let e=1;for(let r=this.parent;r;r=r.parent,e++){let n=e==1?Eo:n1;r.dirty<n&&(r.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class sE extends kl{constructor(e,r,n,i){let a,o=r.type.toDOM;if(typeof o=="function"&&(o=o(n,()=>{if(!a)return i;if(a.parent)return a.parent.posBeforeChild(a)})),!r.type.spec.raw){if(o.nodeType!=1){let s=document.createElement("span");s.appendChild(o),o=s}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=r,this.widget=r,a=this}matchesWidget(e){return this.dirty==Wn&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let r=this.widget.spec.stopEvent;return r?r(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class F4 extends kl{constructor(e,r,n,i){super(e,[],r,null),this.textDOM=n,this.text=i}get size(){return this.text.length}localPosFromDOM(e,r){return e!=this.textDOM?this.posAtStart+(r?this.size:0):this.posAtStart+r}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Ho extends kl{constructor(e,r,n,i,a){super(e,[],n,i),this.mark=r,this.spec=a}static create(e,r,n,i){let a=i.nodeViews[r.type.name],o=a&&a(r,i,n);return(!o||!o.dom)&&(o=Yo.renderSpec(document,r.type.spec.toDOM(r,n),null,r.attrs)),new Ho(e,r,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&Fi||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Fi&&this.mark.eq(e)}markDirty(e,r){if(super.markDirty(e,r),this.dirty!=Wn){let n=this.parent;for(;!n.node;)n=n.parent;n.dirty<this.dirty&&(n.dirty=this.dirty),this.dirty=Wn}}slice(e,r,n){let i=Ho.create(this.parent,this.mark,!0,n),a=this.children,o=this.size;r<o&&(a=Tm(a,r,o,n)),e>0&&(a=Tm(a,0,e,n));for(let s=0;s<a.length;s++)a[s].parent=i;return i.children=a,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Wa extends kl{constructor(e,r,n,i,a,o,s,u,l){super(e,[],a,o),this.node=r,this.outerDeco=n,this.innerDeco=i,this.nodeDOM=s}static create(e,r,n,i,a,o){let s=a.nodeViews[r.type.name],u,l=s&&s(r,a,()=>{if(!u)return o;if(u.parent)return u.parent.posBeforeChild(u)},n,i),c=l&&l.dom,f=l&&l.contentDOM;if(r.isText){if(!c)c=document.createTextNode(r.text);else if(c.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else c||({dom:c,contentDOM:f}=Yo.renderSpec(document,r.type.spec.toDOM(r),null,r.attrs));!f&&!r.isText&&c.nodeName!="BR"&&(c.hasAttribute("contenteditable")||(c.contentEditable="false"),r.type.spec.draggable&&(c.draggable=!0));let d=c;return c=fE(c,n,r),l?u=new B4(e,r,n,i,c,f||null,d,l,a,o+1):r.isText?new np(e,r,n,i,c,d,a):new Wa(e,r,n,i,c,f||null,d,a,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let r=this.children.length-1;r>=0;r--){let n=this.children[r];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>De.empty)}return e}matchesNode(e,r,n){return this.dirty==Wn&&e.eq(this.node)&&Ef(r,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,r){let n=this.node.inlineContent,i=r,a=e.composing?this.localCompositionInfo(e,r):null,o=a&&a.pos>-1?a:null,s=a&&a.pos<0,u=new I4(this,o&&o.node,e);$4(this.node,this.innerDeco,(l,c,f)=>{l.spec.marks?u.syncToMarks(l.spec.marks,n,e):l.type.side>=0&&!f&&u.syncToMarks(c==this.node.childCount?qt.none:this.node.child(c).marks,n,e),u.placeWidget(l,e,i)},(l,c,f,d)=>{u.syncToMarks(l.marks,n,e);let p;u.findNodeMatch(l,c,f,d)||s&&e.state.selection.from>i&&e.state.selection.to<i+l.nodeSize&&(p=u.findIndexWithChild(a.node))>-1&&u.updateNodeAt(l,c,f,p,e)||u.updateNextNode(l,c,f,e,d,i)||u.addNode(l,c,f,e,i),i+=l.nodeSize}),u.syncToMarks([],n,e),this.node.isTextblock&&u.addTextblockHacks(),u.destroyRest(),(u.changed||this.dirty==Eo)&&(o&&this.protectLocalComposition(e,o),lE(this.contentDOM,this.children,e),qs&&L4(this.dom))}localCompositionInfo(e,r){let{from:n,to:i}=e.state.selection;if(!(e.state.selection instanceof at)||n<r||i>r+this.node.content.size)return null;let a=e.input.compositionNode;if(!a||!this.dom.contains(a.parentNode))return null;if(this.node.inlineContent){let o=a.nodeValue,s=z4(this.node.content,o,n-r,i-r);return s<0?null:{node:a,pos:s,text:o}}else return{node:a,pos:-1,text:""}}protectLocalComposition(e,{node:r,pos:n,text:i}){if(this.getDesc(r))return;let a=r;for(;a.parentNode!=this.contentDOM;a=a.parentNode){for(;a.previousSibling;)a.parentNode.removeChild(a.previousSibling);for(;a.nextSibling;)a.parentNode.removeChild(a.nextSibling);a.pmViewDesc&&(a.pmViewDesc=void 0)}let o=new F4(this,a,r,i);e.input.compositionNodes.push(o),this.children=Tm(this.children,n,n+i.length,e,o)}update(e,r,n,i){return this.dirty==Fi||!e.sameMarkup(this.node)?!1:(this.updateInner(e,r,n,i),!0)}updateInner(e,r,n,i){this.updateOuterDeco(r),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Wn}updateOuterDeco(e){if(Ef(e,this.outerDeco))return;let r=this.nodeDOM.nodeType!=1,n=this.dom;this.dom=cE(this.dom,this.nodeDOM,Mm(this.outerDeco,this.node,r),Mm(e,this.node,r)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function i1(t,e,r,n,i){fE(n,e,t);let a=new Wa(void 0,t,e,r,n,n,n,i,0);return a.contentDOM&&a.updateChildren(i,0),a}class np extends Wa{constructor(e,r,n,i,a,o,s){super(e,r,n,i,a,null,o,s,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,r,n,i){return this.dirty==Fi||this.dirty!=Wn&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(r),(this.dirty!=Wn||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Wn,!0)}inParent(){let e=this.parent.contentDOM;for(let r=this.nodeDOM;r;r=r.parentNode)if(r==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,r,n){return e==this.nodeDOM?this.posAtStart+Math.min(r,this.node.text.length):super.localPosFromDOM(e,r,n)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,r,n){let i=this.node.cut(e,r),a=document.createTextNode(i.text);return new np(this.parent,i,this.outerDeco,this.innerDeco,a,a,n)}markDirty(e,r){super.markDirty(e,r),this.dom!=this.nodeDOM&&(e==0||r==this.nodeDOM.nodeValue.length)&&(this.dirty=Fi)}get domAtom(){return!1}isText(e){return this.node.text==e}}class uE extends kl{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Wn&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class B4 extends Wa{constructor(e,r,n,i,a,o,s,u,l,c){super(e,r,n,i,a,o,s,l,c),this.spec=u}update(e,r,n,i){if(this.dirty==Fi)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let a=this.spec.update(e,r,n);return a&&this.updateInner(e,r,n,i),a}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,r,n,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,r,n,i){this.spec.setSelection?this.spec.setSelection(e,r,n.root):super.setSelection(e,r,n,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function lE(t,e,r){let n=t.firstChild,i=!1;for(let a=0;a<e.length;a++){let o=e[a],s=o.dom;if(s.parentNode==t){for(;s!=n;)n=a1(n),i=!0;n=n.nextSibling}else i=!0,t.insertBefore(s,n);if(o instanceof Ho){let u=n?n.previousSibling:t.lastChild;lE(o.contentDOM,o.children,r),n=u?u.nextSibling:t.firstChild}}for(;n;)n=a1(n),i=!0;i&&r.trackWrites==t&&(r.trackWrites=null)}const Wu=function(t){t&&(this.nodeName=t)};Wu.prototype=Object.create(null);const Co=[new Wu];function Mm(t,e,r){if(t.length==0)return Co;let n=r?Co[0]:new Wu,i=[n];for(let a=0;a<t.length;a++){let o=t[a].type.attrs;if(o){o.nodeName&&i.push(n=new Wu(o.nodeName));for(let s in o){let u=o[s];u!=null&&(r&&i.length==1&&i.push(n=new Wu(e.isInline?"span":"div")),s=="class"?n.class=(n.class?n.class+" ":"")+u:s=="style"?n.style=(n.style?n.style+";":"")+u:s!="nodeName"&&(n[s]=u))}}}return i}function cE(t,e,r,n){if(r==Co&&n==Co)return e;let i=e;for(let a=0;a<n.length;a++){let o=n[a],s=r[a];if(a){let u;s&&s.nodeName==o.nodeName&&i!=t&&(u=i.parentNode)&&u.nodeName.toLowerCase()==o.nodeName||(u=document.createElement(o.nodeName),u.pmIsDeco=!0,u.appendChild(i),s=Co[0]),i=u}k4(i,s||Co[0],o)}return i}function k4(t,e,r){for(let n in e)n!="class"&&n!="style"&&n!="nodeName"&&!(n in r)&&t.removeAttribute(n);for(let n in r)n!="class"&&n!="style"&&n!="nodeName"&&r[n]!=e[n]&&t.setAttribute(n,r[n]);if(e.class!=r.class){let n=e.class?e.class.split(" ").filter(Boolean):[],i=r.class?r.class.split(" ").filter(Boolean):[];for(let a=0;a<n.length;a++)i.indexOf(n[a])==-1&&t.classList.remove(n[a]);for(let a=0;a<i.length;a++)n.indexOf(i[a])==-1&&t.classList.add(i[a]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=r.style){if(e.style){let n=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=n.exec(e.style);)t.style.removeProperty(i[1])}r.style&&(t.style.cssText+=r.style)}}function fE(t,e,r){return cE(t,t,Co,Mm(e,r,t.nodeType!=1))}function Ef(t,e){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].type.eq(e[r].type))return!1;return!0}function a1(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class I4{constructor(e,r,n){this.lock=r,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=R4(e.node.content,e)}destroyBetween(e,r){if(e!=r){for(let n=e;n<r;n++)this.top.children[n].destroy();this.top.children.splice(e,r-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,r,n){let i=0,a=this.stack.length>>1,o=Math.min(a,e.length);for(;i<o&&(i==a-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<a;)this.destroyRest(),this.top.dirty=Wn,this.index=this.stack.pop(),this.top=this.stack.pop(),a--;for(;a<e.length;){this.stack.push(this.top,this.index+1);let s=-1;for(let u=this.index;u<Math.min(this.index+3,this.top.children.length);u++){let l=this.top.children[u];if(l.matchesMark(e[a])&&!this.isLocked(l.dom)){s=u;break}}if(s>-1)s>this.index&&(this.changed=!0,this.destroyBetween(this.index,s)),this.top=this.top.children[this.index];else{let u=Ho.create(this.top,e[a],r,n);this.top.children.splice(this.index,0,u),this.top=u,this.changed=!0}this.index=0,a++}}findNodeMatch(e,r,n,i){let a=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,r,n))a=this.top.children.indexOf(o,this.index);else for(let s=this.index,u=Math.min(this.top.children.length,s+5);s<u;s++){let l=this.top.children[s];if(l.matchesNode(e,r,n)&&!this.preMatch.matched.has(l)){a=s;break}}return a<0?!1:(this.destroyBetween(this.index,a),this.index++,!0)}updateNodeAt(e,r,n,i,a){let o=this.top.children[i];return o.dirty==Fi&&o.dom==o.contentDOM&&(o.dirty=Eo),o.update(e,r,n,a)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let r=e.parentNode;if(!r)return-1;if(r==this.top.contentDOM){let n=e.pmViewDesc;if(n){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==n)return i}return-1}e=r}}updateNextNode(e,r,n,i,a,o){for(let s=this.index;s<this.top.children.length;s++){let u=this.top.children[s];if(u instanceof Wa){let l=this.preMatch.matched.get(u);if(l!=null&&l!=a)return!1;let c=u.dom,f,d=this.isLocked(c)&&!(e.isText&&u.node&&u.node.isText&&u.nodeDOM.nodeValue==e.text&&u.dirty!=Fi&&Ef(r,u.outerDeco));if(!d&&u.update(e,r,n,i))return this.destroyBetween(this.index,s),u.dom!=c&&(this.changed=!0),this.index++,!0;if(!d&&(f=this.recreateWrapper(u,e,r,n,i,o)))return this.destroyBetween(this.index,s),this.top.children[this.index]=f,f.contentDOM&&(f.dirty=Eo,f.updateChildren(i,o+1),f.dirty=Wn),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,r,n,i,a,o){if(e.dirty||r.isAtom||!e.children.length||!e.node.content.eq(r.content)||!Ef(n,e.outerDeco)||!i.eq(e.innerDeco))return null;let s=Wa.create(this.top,r,n,i,a,o);if(s.contentDOM){s.children=e.children,e.children=[];for(let u of s.children)u.parent=s}return e.destroy(),s}addNode(e,r,n,i,a){let o=Wa.create(this.top,e,r,n,i,a);o.contentDOM&&o.updateChildren(i,a+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,r,n){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let a=new sE(this.top,e,r,n);this.top.children.splice(this.index++,0,a),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],r=this.top;for(;e instanceof Ho;)r=e,e=r.children[r.children.length-1];(!e||!(e instanceof np)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((cn||jr)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",r),this.addHackNode("BR",this.top))}addHackNode(e,r){if(r==this.top&&this.index<r.children.length&&r.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);e=="IMG"&&(n.className="ProseMirror-separator",n.alt=""),e=="BR"&&(n.className="ProseMirror-trailingBreak");let i=new uE(this.top,[],n,null);r!=this.top?r.children.push(i):r.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function R4(t,e){let r=e,n=r.children.length,i=t.childCount,a=new Map,o=[];e:for(;i>0;){let s;for(;;)if(n){let l=r.children[n-1];if(l instanceof Ho)r=l,n=l.children.length;else{s=l,n--;break}}else{if(r==e)break e;n=r.parent.children.indexOf(r),r=r.parent}let u=s.node;if(u){if(u!=t.child(i-1))break;--i,a.set(s,i),o.push(s)}}return{index:i,matched:a,matches:o.reverse()}}function P4(t,e){return t.type.side-e.type.side}function $4(t,e,r,n){let i=e.locals(t),a=0;if(i.length==0){for(let l=0;l<t.childCount;l++){let c=t.child(l);n(c,i,e.forChild(a,c),l),a+=c.nodeSize}return}let o=0,s=[],u=null;for(let l=0;;){let c,f;for(;o<i.length&&i[o].to==a;){let g=i[o++];g.widget&&(c?(f||(f=[c])).push(g):c=g)}if(c)if(f){f.sort(P4);for(let g=0;g<f.length;g++)r(f[g],l,!!u)}else r(c,l,!!u);let d,p;if(u)p=-1,d=u,u=null;else if(l<t.childCount)p=l,d=t.child(l++);else break;for(let g=0;g<s.length;g++)s[g].to<=a&&s.splice(g--,1);for(;o<i.length&&i[o].from<=a&&i[o].to>a;)s.push(i[o++]);let h=a+d.nodeSize;if(d.isText){let g=h;o<i.length&&i[o].from<g&&(g=i[o].from);for(let y=0;y<s.length;y++)s[y].to<g&&(g=s[y].to);g<h&&(u=d.cut(g-a),d=d.cut(0,g-a),h=g,p=-1)}else for(;o<i.length&&i[o].to<h;)o++;let m=d.isInline&&!d.isLeaf?s.filter(g=>!g.inline):s.slice();n(d,m,e.forChild(a,d),p),a=h}}function L4(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function z4(t,e,r,n){for(let i=0,a=0;i<t.childCount&&a<=n;){let o=t.child(i++),s=a;if(a+=o.nodeSize,!o.isText)continue;let u=o.text;for(;i<t.childCount;){let l=t.child(i++);if(a+=l.nodeSize,!l.isText)break;u+=l.text}if(a>=r){if(a>=n&&u.slice(n-e.length-s,n-s)==e)return n-e.length;let l=s<n?u.lastIndexOf(e,n-s-1):-1;if(l>=0&&l+e.length+s>=r)return s+l;if(r==n&&u.length>=n+e.length-s&&u.slice(n-s,n-s+e.length)==e)return n}}return-1}function Tm(t,e,r,n,i){let a=[];for(let o=0,s=0;o<t.length;o++){let u=t[o],l=s,c=s+=u.size;l>=r||c<=e?a.push(u):(l<e&&a.push(u.slice(0,e-l,n)),i&&(a.push(i),i=void 0),c>r&&a.push(u.slice(r-l,u.size,n)))}return a}function Wg(t,e=null){let r=t.domSelectionRange(),n=t.state.doc;if(!r.focusNode)return null;let i=t.docView.nearestDesc(r.focusNode),a=i&&i.size==0,o=t.docView.posFromDOM(r.focusNode,r.focusOffset,1);if(o<0)return null;let s=n.resolve(o),u,l;if(rp(r)){for(u=o;i&&!i.node;)i=i.parent;let f=i.node;if(i&&f.isAtom&&Ge.isSelectable(f)&&i.parent&&!(f.isInline&&d4(r.focusNode,r.focusOffset,i.dom))){let d=i.posBefore;l=new Ge(o==d?s:n.resolve(d))}}else{if(r instanceof t.dom.ownerDocument.defaultView.Selection&&r.rangeCount>1){let f=o,d=o;for(let p=0;p<r.rangeCount;p++){let h=r.getRangeAt(p);f=Math.min(f,t.docView.posFromDOM(h.startContainer,h.startOffset,1)),d=Math.max(d,t.docView.posFromDOM(h.endContainer,h.endOffset,-1))}if(f<0)return null;[u,o]=d==t.state.selection.anchor?[d,f]:[f,d],s=n.resolve(o)}else u=t.docView.posFromDOM(r.anchorNode,r.anchorOffset,1);if(u<0)return null}let c=n.resolve(u);if(!l){let f=e=="pointer"||t.state.selection.head<s.pos&&!a?1:-1;l=jg(t,c,s,f)}return l}function dE(t){return t.editable?t.hasFocus():hE(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function sa(t,e=!1){let r=t.state.selection;if(pE(t,r),!!dE(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&jr){let n=t.domSelectionRange(),i=t.domObserver.currentSelection;if(n.anchorNode&&i.anchorNode&&Uo(n.anchorNode,n.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)U4(t);else{let{anchor:n,head:i}=r,a,o;o1&&!(r instanceof at)&&(r.$from.parent.inlineContent||(a=s1(t,r.from)),!r.empty&&!r.$from.parent.inlineContent&&(o=s1(t,r.to))),t.docView.setSelection(n,i,t,e),o1&&(a&&u1(a),o&&u1(o)),r.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&q4(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const o1=cn||jr&&eE<63;function s1(t,e){let{node:r,offset:n}=t.docView.domFromPos(e,0),i=n<r.childNodes.length?r.childNodes[n]:null,a=n?r.childNodes[n-1]:null;if(cn&&i&&i.contentEditable=="false")return bh(i);if((!i||i.contentEditable=="false")&&(!a||a.contentEditable=="false")){if(i)return bh(i);if(a)return bh(a)}}function bh(t){return t.contentEditable="true",cn&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function u1(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function q4(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let r=t.domSelectionRange(),n=r.anchorNode,i=r.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(r.anchorNode!=n||r.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!dE(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function U4(t){let e=t.domSelection(),r=document.createRange();if(!e)return;let n=t.cursorWrapper.dom,i=n.nodeName=="IMG";i?r.setStart(n.parentNode,Or(n)+1):r.setStart(n,0),r.collapse(!0),e.removeAllRanges(),e.addRange(r),!i&&!t.state.selection.visible&&wn&&Va<=11&&(n.disabled=!0,n.disabled=!1)}function pE(t,e){if(e instanceof Ge){let r=t.docView.descAt(e.from);r!=t.lastSelectedViewDesc&&(l1(t),r&&r.selectNode(),t.lastSelectedViewDesc=r)}else l1(t)}function l1(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function jg(t,e,r,n){return t.someProp("createSelectionBetween",i=>i(t,e,r))||at.between(e,r,n)}function c1(t){return t.editable&&!t.hasFocus()?!1:hE(t)}function hE(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function H4(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),r=t.domSelectionRange();return Uo(e.node,e.offset,r.anchorNode,r.anchorOffset)}function _m(t,e){let{$anchor:r,$head:n}=t.selection,i=e>0?r.max(n):r.min(n),a=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return a&&gt.findFrom(a,e)}function Ma(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function f1(t,e,r){let n=t.state.selection;if(n instanceof at)if(r.indexOf("s")>-1){let{$head:i}=n,a=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!a||a.isText||!a.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+a.nodeSize*(e<0?-1:1));return Ma(t,new at(n.$anchor,o))}else if(n.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=_m(t.state,e);return i&&i instanceof Ge?Ma(t,i):!1}else if(!(Ln&&r.indexOf("m")>-1)){let i=n.$head,a=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!a||a.isText)return!1;let s=e<0?i.pos-a.nodeSize:i.pos;return a.isAtom||(o=t.docView.descAt(s))&&!o.contentDOM?Ge.isSelectable(a)?Ma(t,new Ge(e<0?t.state.doc.resolve(i.pos-a.nodeSize):i)):Bl?Ma(t,new at(t.state.doc.resolve(e<0?s:s+a.nodeSize))):!1:!1}}else return!1;else{if(n instanceof Ge&&n.node.isInline)return Ma(t,new at(e>0?n.$to:n.$from));{let i=_m(t.state,e);return i?Ma(t,i):!1}}}function Cf(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function ju(t,e){let r=t.pmViewDesc;return r&&r.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function cs(t,e){return e<0?V4(t):W4(t)}function V4(t){let e=t.domSelectionRange(),r=e.focusNode,n=e.focusOffset;if(!r)return;let i,a,o=!1;for(ci&&r.nodeType==1&&n<Cf(r)&&ju(r.childNodes[n],-1)&&(o=!0);;)if(n>0){if(r.nodeType!=1)break;{let s=r.childNodes[n-1];if(ju(s,-1))i=r,a=--n;else if(s.nodeType==3)r=s,n=r.nodeValue.length;else break}}else{if(mE(r))break;{let s=r.previousSibling;for(;s&&ju(s,-1);)i=r.parentNode,a=Or(s),s=s.previousSibling;if(s)r=s,n=Cf(r);else{if(r=r.parentNode,r==t.dom)break;n=0}}}o?Om(t,r,n):i&&Om(t,i,a)}function W4(t){let e=t.domSelectionRange(),r=e.focusNode,n=e.focusOffset;if(!r)return;let i=Cf(r),a,o;for(;;)if(n<i){if(r.nodeType!=1)break;let s=r.childNodes[n];if(ju(s,1))a=r,o=++n;else break}else{if(mE(r))break;{let s=r.nextSibling;for(;s&&ju(s,1);)a=s.parentNode,o=Or(s)+1,s=s.nextSibling;if(s)r=s,n=0,i=Cf(r);else{if(r=r.parentNode,r==t.dom)break;n=i=0}}}a&&Om(t,a,o)}function mE(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function j4(t,e){for(;t&&e==t.childNodes.length&&!Fl(t);)e=Or(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let r=t.childNodes[e];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;t=r,e=0}}function G4(t,e){for(;t&&!e&&!Fl(t);)e=Or(t),t=t.parentNode;for(;t&&e;){let r=t.childNodes[e-1];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;t=r,e=t.childNodes.length}}function Om(t,e,r){if(e.nodeType!=3){let a,o;(o=j4(e,r))?(e=o,r=0):(a=G4(e,r))&&(e=a,r=a.nodeValue.length)}let n=t.domSelection();if(!n)return;if(rp(n)){let a=document.createRange();a.setEnd(e,r),a.setStart(e,r),n.removeAllRanges(),n.addRange(a)}else n.extend&&n.extend(e,r);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&sa(t)},50)}function d1(t,e){let r=t.state.doc.resolve(e);if(!(jr||m4)&&r.parent.inlineContent){let i=t.coordsAtPos(e);if(e>r.start()){let a=t.coordsAtPos(e-1),o=(a.top+a.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(a.left-i.left)>1)return a.left<i.left?"ltr":"rtl"}if(e<r.end()){let a=t.coordsAtPos(e+1),o=(a.top+a.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(a.left-i.left)>1)return a.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function p1(t,e,r){let n=t.state.selection;if(n instanceof at&&!n.empty||r.indexOf("s")>-1||Ln&&r.indexOf("m")>-1)return!1;let{$from:i,$to:a}=n;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=_m(t.state,e);if(o&&o instanceof Ge)return Ma(t,o)}if(!i.parent.inlineContent){let o=e<0?i:a,s=n instanceof Tn?gt.near(o,e):gt.findFrom(o,e);return s?Ma(t,s):!1}return!1}function h1(t,e){if(!(t.state.selection instanceof at))return!0;let{$head:r,$anchor:n,empty:i}=t.state.selection;if(!r.sameParent(n))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let a=!r.textOffset&&(e<0?r.nodeBefore:r.nodeAfter);if(a&&!a.isText){let o=t.state.tr;return e<0?o.delete(r.pos-a.nodeSize,r.pos):o.delete(r.pos,r.pos+a.nodeSize),t.dispatch(o),!0}return!1}function m1(t,e,r){t.domObserver.stop(),e.contentEditable=r,t.domObserver.start()}function K4(t){if(!cn||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:r}=t.domSelectionRange();if(e&&e.nodeType==1&&r==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let n=e.firstChild;m1(t,n,"true"),setTimeout(()=>m1(t,n,"false"),20)}return!1}function J4(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function Y4(t,e){let r=e.keyCode,n=J4(e);if(r==8||Ln&&r==72&&n=="c")return h1(t,-1)||cs(t,-1);if(r==46&&!e.shiftKey||Ln&&r==68&&n=="c")return h1(t,1)||cs(t,1);if(r==13||r==27)return!0;if(r==37||Ln&&r==66&&n=="c"){let i=r==37?d1(t,t.state.selection.from)=="ltr"?-1:1:-1;return f1(t,i,n)||cs(t,i)}else if(r==39||Ln&&r==70&&n=="c"){let i=r==39?d1(t,t.state.selection.from)=="ltr"?1:-1:1;return f1(t,i,n)||cs(t,i)}else{if(r==38||Ln&&r==80&&n=="c")return p1(t,-1,n)||cs(t,-1);if(r==40||Ln&&r==78&&n=="c")return K4(t)||p1(t,1,n)||cs(t,1);if(n==(Ln?"m":"c")&&(r==66||r==73||r==89||r==90))return!0}return!1}function Gg(t,e){t.someProp("transformCopied",p=>{e=p(e,t)});let r=[],{content:n,openStart:i,openEnd:a}=e;for(;i>1&&a>1&&n.childCount==1&&n.firstChild.childCount==1;){i--,a--;let p=n.firstChild;r.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),n=p.content}let o=t.someProp("clipboardSerializer")||Yo.fromSchema(t.state.schema),s=wE(),u=s.createElement("div");u.appendChild(o.serializeFragment(n,{document:s}));let l=u.firstChild,c,f=0;for(;l&&l.nodeType==1&&(c=xE[l.nodeName.toLowerCase()]);){for(let p=c.length-1;p>=0;p--){let h=s.createElement(c[p]);for(;u.firstChild;)h.appendChild(u.firstChild);u.appendChild(h),f++}l=u.firstChild}l&&l.nodeType==1&&l.setAttribute("data-pm-slice",`${i} ${a}${f?` -${f}`:""} ${JSON.stringify(r)}`);let d=t.someProp("clipboardTextSerializer",p=>p(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:u,text:d,slice:e}}function gE(t,e,r,n,i){let a=i.parent.type.spec.code,o,s;if(!r&&!e)return null;let u=e&&(n||a||!r);if(u){if(t.someProp("transformPastedText",d=>{e=d(e,a||n,t)}),a)return e?new Be(De.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):Be.empty;let f=t.someProp("clipboardTextParser",d=>d(e,i,n,t));if(f)s=f;else{let d=i.marks(),{schema:p}=t.state,h=Yo.fromSchema(p);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let g=o.appendChild(document.createElement("p"));m&&g.appendChild(h.serializeNode(p.text(m,d)))})}}else t.someProp("transformPastedHTML",f=>{r=f(r,t)}),o=eI(r),Bl&&tI(o);let l=o&&o.querySelector("[data-pm-slice]"),c=l&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(l.getAttribute("data-pm-slice")||"");if(c&&c[3])for(let f=+c[3];f>0;f--){let d=o.firstChild;for(;d&&d.nodeType!=1;)d=d.nextSibling;if(!d)break;o=d}if(s||(s=(t.someProp("clipboardParser")||t.someProp("domParser")||Ha.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(u||c),context:i,ruleFromNode(d){return d.nodeName=="BR"&&!d.nextSibling&&d.parentNode&&!Z4.test(d.parentNode.nodeName)?{ignore:!0}:null}})),c)s=rI(g1(s,+c[1],+c[2]),c[4]);else if(s=Be.maxOpen(X4(s.content,i),!0),s.openStart||s.openEnd){let f=0,d=0;for(let p=s.content.firstChild;f<s.openStart&&!p.type.spec.isolating;f++,p=p.firstChild);for(let p=s.content.lastChild;d<s.openEnd&&!p.type.spec.isolating;d++,p=p.lastChild);s=g1(s,f,d)}return t.someProp("transformPasted",f=>{s=f(s,t)}),s}const Z4=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function X4(t,e){if(t.childCount<2)return t;for(let r=e.depth;r>=0;r--){let i=e.node(r).contentMatchAt(e.index(r)),a,o=[];if(t.forEach(s=>{if(!o)return;let u=i.findWrapping(s.type),l;if(!u)return o=null;if(l=o.length&&a.length&&yE(u,a,s,o[o.length-1],0))o[o.length-1]=l;else{o.length&&(o[o.length-1]=bE(o[o.length-1],a.length));let c=vE(s,u);o.push(c),i=i.matchType(c.type),a=u}}),o)return De.from(o)}return t}function vE(t,e,r=0){for(let n=e.length-1;n>=r;n--)t=e[n].create(null,De.from(t));return t}function yE(t,e,r,n,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let a=yE(t,e,r,n.lastChild,i+1);if(a)return n.copy(n.content.replaceChild(n.childCount-1,a));if(n.contentMatchAt(n.childCount).matchType(i==t.length-1?r.type:t[i+1]))return n.copy(n.content.append(De.from(vE(r,t,i+1))))}}function bE(t,e){if(e==0)return t;let r=t.content.replaceChild(t.childCount-1,bE(t.lastChild,e-1)),n=t.contentMatchAt(t.childCount).fillBefore(De.empty,!0);return t.copy(r.append(n))}function Fm(t,e,r,n,i,a){let o=e<0?t.firstChild:t.lastChild,s=o.content;return t.childCount>1&&(a=0),i<n-1&&(s=Fm(s,e,r,n,i+1,a)),i>=r&&(s=e<0?o.contentMatchAt(0).fillBefore(s,a<=i).append(s):s.append(o.contentMatchAt(o.childCount).fillBefore(De.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(s))}function g1(t,e,r){return e<t.openStart&&(t=new Be(Fm(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),r<t.openEnd&&(t=new Be(Fm(t.content,1,r,t.openEnd,0,0),t.openStart,r)),t}const xE={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let v1=null;function wE(){return v1||(v1=document.implementation.createHTMLDocument("title"))}let xh=null;function Q4(t){let e=window.trustedTypes;return e?(xh||(xh=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:r=>r})),xh.createHTML(t)):t}function eI(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let r=wE().createElement("div"),n=/<([a-z][^>\s]+)/i.exec(t),i;if((i=n&&xE[n[1].toLowerCase()])&&(t=i.map(a=>"<"+a+">").join("")+t+i.map(a=>"</"+a+">").reverse().join("")),r.innerHTML=Q4(t),i)for(let a=0;a<i.length;a++)r=r.querySelector(i[a])||r;return r}function tI(t){let e=t.querySelectorAll(jr?"span:not([class]):not([style])":"span.Apple-converted-space");for(let r=0;r<e.length;r++){let n=e[r];n.childNodes.length==1&&n.textContent==""&&n.parentNode&&n.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),n)}}function rI(t,e){if(!t.size)return t;let r=t.content.firstChild.type.schema,n;try{n=JSON.parse(e)}catch{return t}let{content:i,openStart:a,openEnd:o}=t;for(let s=n.length-2;s>=0;s-=2){let u=r.nodes[n[s]];if(!u||u.hasRequiredAttrs())break;i=De.from(u.create(n[s+1],i)),a++,o++}return new Be(i,a,o)}const fn={},dn={},nI={touchstart:!0,touchmove:!0};class iI{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function aI(t){for(let e in fn){let r=fn[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=n=>{sI(t,n)&&!Kg(t,n)&&(t.editable||!(n.type in dn))&&r(t,n)},nI[e]?{passive:!0}:void 0)}cn&&t.dom.addEventListener("input",()=>null),Bm(t)}function Pa(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function oI(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function Bm(t){t.someProp("handleDOMEvents",e=>{for(let r in e)t.input.eventHandlers[r]||t.dom.addEventListener(r,t.input.eventHandlers[r]=n=>Kg(t,n))})}function Kg(t,e){return t.someProp("handleDOMEvents",r=>{let n=r[e.type];return n?n(t,e)||e.defaultPrevented:!1})}function sI(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let r=e.target;r!=t.dom;r=r.parentNode)if(!r||r.nodeType==11||r.pmViewDesc&&r.pmViewDesc.stopEvent(e))return!1;return!0}function uI(t,e){!Kg(t,e)&&fn[e.type]&&(t.editable||!(e.type in dn))&&fn[e.type](t,e)}dn.keydown=(t,e)=>{let r=e;if(t.input.shiftKey=r.keyCode==16||r.shiftKey,!AE(t,r)&&(t.input.lastKeyCode=r.keyCode,t.input.lastKeyCodeTime=Date.now(),!(ta&&jr&&r.keyCode==13)))if(r.keyCode!=229&&t.domObserver.forceFlush(),qs&&r.keyCode==13&&!r.ctrlKey&&!r.altKey&&!r.metaKey){let n=Date.now();t.input.lastIOSEnter=n,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==n&&(t.someProp("handleKeyDown",i=>i(t,Ao(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",n=>n(t,r))||Y4(t,r)?r.preventDefault():Pa(t,"key")};dn.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};dn.keypress=(t,e)=>{let r=e;if(AE(t,r)||!r.charCode||r.ctrlKey&&!r.altKey||Ln&&r.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,r))){r.preventDefault();return}let n=t.state.selection;if(!(n instanceof at)||!n.$from.sameParent(n.$to)){let i=String.fromCharCode(r.charCode);!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",a=>a(t,n.$from.pos,n.$to.pos,i))&&t.dispatch(t.state.tr.insertText(i).scrollIntoView()),r.preventDefault()}};function ip(t){return{left:t.clientX,top:t.clientY}}function lI(t,e){let r=e.x-t.clientX,n=e.y-t.clientY;return r*r+n*n<100}function Jg(t,e,r,n,i){if(n==-1)return!1;let a=t.state.doc.resolve(n);for(let o=a.depth+1;o>0;o--)if(t.someProp(e,s=>o>a.depth?s(t,r,a.nodeAfter,a.before(o),i,!0):s(t,r,a.node(o),a.before(o),i,!1)))return!0;return!1}function Fs(t,e,r){if(t.focused||t.focus(),t.state.selection.eq(e))return;let n=t.state.tr.setSelection(e);n.setMeta("pointer",!0),t.dispatch(n)}function cI(t,e){if(e==-1)return!1;let r=t.state.doc.resolve(e),n=r.nodeAfter;return n&&n.isAtom&&Ge.isSelectable(n)?(Fs(t,new Ge(r)),!0):!1}function fI(t,e){if(e==-1)return!1;let r=t.state.selection,n,i;r instanceof Ge&&(n=r.node);let a=t.state.doc.resolve(e);for(let o=a.depth+1;o>0;o--){let s=o>a.depth?a.nodeAfter:a.node(o);if(Ge.isSelectable(s)){n&&r.$from.depth>0&&o>=r.$from.depth&&a.before(r.$from.depth+1)==r.$from.pos?i=a.before(r.$from.depth):i=a.before(o);break}}return i!=null?(Fs(t,Ge.create(t.state.doc,i)),!0):!1}function dI(t,e,r,n,i){return Jg(t,"handleClickOn",e,r,n)||t.someProp("handleClick",a=>a(t,e,n))||(i?fI(t,r):cI(t,r))}function pI(t,e,r,n){return Jg(t,"handleDoubleClickOn",e,r,n)||t.someProp("handleDoubleClick",i=>i(t,e,n))}function hI(t,e,r,n){return Jg(t,"handleTripleClickOn",e,r,n)||t.someProp("handleTripleClick",i=>i(t,e,n))||mI(t,r,n)}function mI(t,e,r){if(r.button!=0)return!1;let n=t.state.doc;if(e==-1)return n.inlineContent?(Fs(t,at.create(n,0,n.content.size)),!0):!1;let i=n.resolve(e);for(let a=i.depth+1;a>0;a--){let o=a>i.depth?i.nodeAfter:i.node(a),s=i.before(a);if(o.inlineContent)Fs(t,at.create(n,s+1,s+1+o.content.size));else if(Ge.isSelectable(o))Fs(t,Ge.create(n,s));else continue;return!0}}function Yg(t){return Mf(t)}const NE=Ln?"metaKey":"ctrlKey";fn.mousedown=(t,e)=>{let r=e;t.input.shiftKey=r.shiftKey;let n=Yg(t),i=Date.now(),a="singleClick";i-t.input.lastClick.time<500&&lI(r,t.input.lastClick)&&!r[NE]&&t.input.lastClick.button==r.button&&(t.input.lastClick.type=="singleClick"?a="doubleClick":t.input.lastClick.type=="doubleClick"&&(a="tripleClick")),t.input.lastClick={time:i,x:r.clientX,y:r.clientY,type:a,button:r.button};let o=t.posAtCoords(ip(r));o&&(a=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new gI(t,o,r,!!n)):(a=="doubleClick"?pI:hI)(t,o.pos,o.inside,r)?r.preventDefault():Pa(t,"pointer"))};class gI{constructor(e,r,n,i){this.view=e,this.pos=r,this.event=n,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[NE],this.allowDefault=n.shiftKey;let a,o;if(r.inside>-1)a=e.state.doc.nodeAt(r.inside),o=r.inside;else{let c=e.state.doc.resolve(r.pos);a=c.parent,o=c.depth?c.before():0}const s=i?null:n.target,u=s?e.docView.nearestDesc(s,!0):null;this.target=u&&u.dom.nodeType==1?u.dom:null;let{selection:l}=e.state;(n.button==0&&a.type.spec.draggable&&a.type.spec.selectable!==!1||l instanceof Ge&&l.from<=o&&l.to>o)&&(this.mightDrag={node:a,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&ci&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Pa(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>sa(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let r=this.pos;this.view.state.doc!=this.startDoc&&(r=this.view.posAtCoords(ip(e))),this.updateAllowDefault(e),this.allowDefault||!r?Pa(this.view,"pointer"):dI(this.view,r.pos,r.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||cn&&this.mightDrag&&!this.mightDrag.node.isAtom||jr&&!this.view.state.selection.visible&&Math.min(Math.abs(r.pos-this.view.state.selection.from),Math.abs(r.pos-this.view.state.selection.to))<=2)?(Fs(this.view,gt.near(this.view.state.doc.resolve(r.pos))),e.preventDefault()):Pa(this.view,"pointer")}move(e){this.updateAllowDefault(e),Pa(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}fn.touchstart=t=>{t.input.lastTouch=Date.now(),Yg(t),Pa(t,"pointer")};fn.touchmove=t=>{t.input.lastTouch=Date.now(),Pa(t,"pointer")};fn.contextmenu=t=>Yg(t);function AE(t,e){return t.composing?!0:cn&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const vI=ta?5e3:-1;dn.compositionstart=dn.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,r=e.selection.$to;if(e.selection instanceof at&&(e.storedMarks||!r.textOffset&&r.parentOffset&&r.nodeBefore.marks.some(n=>n.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||r.marks(),Mf(t,!0),t.markCursor=null;else if(Mf(t,!e.selection.empty),ci&&e.selection.empty&&r.parentOffset&&!r.textOffset&&r.nodeBefore.marks.length){let n=t.domSelectionRange();for(let i=n.focusNode,a=n.focusOffset;i&&i.nodeType==1&&a!=0;){let o=a<0?i.lastChild:i.childNodes[a-1];if(!o)break;if(o.nodeType==3){let s=t.domSelection();s&&s.collapse(o,o.nodeValue.length);break}else i=o,a=-1}}t.input.composing=!0}SE(t,vI)};dn.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,SE(t,20))};function SE(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Mf(t),e))}function DE(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=bI());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function yI(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let r=c4(e.focusNode,e.focusOffset),n=f4(e.focusNode,e.focusOffset);if(r&&n&&r!=n){let i=n.pmViewDesc,a=t.domObserver.lastChangedTextNode;if(r==a||n==a)return a;if(!i||!i.isText(n.nodeValue))return n;if(t.input.compositionNode==n){let o=r.pmViewDesc;if(!(!o||!o.isText(r.nodeValue)))return n}}return r||n}function bI(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Mf(t,e=!1){if(!(ta&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),DE(t),e||t.docView&&t.docView.dirty){let r=Wg(t),n=t.state.selection;return r&&!r.eq(n)?t.dispatch(t.state.tr.setSelection(r)):(t.markCursor||e)&&!n.$from.node(n.$from.sharedDepth(n.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function xI(t,e){if(!t.dom.parentNode)return;let r=t.dom.parentNode.appendChild(document.createElement("div"));r.appendChild(e),r.style.cssText="position: fixed; left: -10000px; top: 10px";let n=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),n.removeAllRanges(),n.addRange(i),setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r),t.focus()},50)}const hl=wn&&Va<15||qs&&g4<604;fn.copy=dn.cut=(t,e)=>{let r=e,n=t.state.selection,i=r.type=="cut";if(n.empty)return;let a=hl?null:r.clipboardData,o=n.content(),{dom:s,text:u}=Gg(t,o);a?(r.preventDefault(),a.clearData(),a.setData("text/html",s.innerHTML),a.setData("text/plain",u)):xI(t,s),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function wI(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function NI(t,e){if(!t.dom.parentNode)return;let r=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,n=t.dom.parentNode.appendChild(document.createElement(r?"textarea":"div"));r||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),n.parentNode&&n.parentNode.removeChild(n),r?ml(t,n.value,null,i,e):ml(t,n.textContent,n.innerHTML,i,e)},50)}function ml(t,e,r,n,i){let a=gE(t,e,r,n,t.state.selection.$from);if(t.someProp("handlePaste",u=>u(t,i,a||Be.empty)))return!0;if(!a)return!1;let o=wI(a),s=o?t.state.tr.replaceSelectionWith(o,n):t.state.tr.replaceSelection(a);return t.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function EE(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let r=t.getData("text/uri-list");return r?r.replace(/\r?\n/g," "):""}dn.paste=(t,e)=>{let r=e;if(t.composing&&!ta)return;let n=hl?null:r.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;n&&ml(t,EE(n),n.getData("text/html"),i,r)?r.preventDefault():NI(t,r)};class CE{constructor(e,r,n){this.slice=e,this.move=r,this.node=n}}const AI=Ln?"altKey":"ctrlKey";function ME(t,e){let r=t.someProp("dragCopies",n=>!n(e));return r??!e[AI]}fn.dragstart=(t,e)=>{let r=e,n=t.input.mouseDown;if(n&&n.done(),!r.dataTransfer)return;let i=t.state.selection,a=i.empty?null:t.posAtCoords(ip(r)),o;if(!(a&&a.pos>=i.from&&a.pos<=(i instanceof Ge?i.to-1:i.to))){if(n&&n.mightDrag)o=Ge.create(t.state.doc,n.mightDrag.pos);else if(r.target&&r.target.nodeType==1){let f=t.docView.nearestDesc(r.target,!0);f&&f.node.type.spec.draggable&&f!=t.docView&&(o=Ge.create(t.state.doc,f.posBefore))}}let s=(o||t.state.selection).content(),{dom:u,text:l,slice:c}=Gg(t,s);(!r.dataTransfer.files.length||!jr||eE>120)&&r.dataTransfer.clearData(),r.dataTransfer.setData(hl?"Text":"text/html",u.innerHTML),r.dataTransfer.effectAllowed="copyMove",hl||r.dataTransfer.setData("text/plain",l),t.dragging=new CE(c,ME(t,r),o)};fn.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};dn.dragover=dn.dragenter=(t,e)=>e.preventDefault();dn.drop=(t,e)=>{let r=e,n=t.dragging;if(t.dragging=null,!r.dataTransfer)return;let i=t.posAtCoords(ip(r));if(!i)return;let a=t.state.doc.resolve(i.pos),o=n&&n.slice;o?t.someProp("transformPasted",h=>{o=h(o,t)}):o=gE(t,EE(r.dataTransfer),hl?null:r.dataTransfer.getData("text/html"),!1,a);let s=!!(n&&ME(t,r));if(t.someProp("handleDrop",h=>h(t,r,o||Be.empty,s))){r.preventDefault();return}if(!o)return;r.preventDefault();let u=o?WD(t.state.doc,a.pos,o):a.pos;u==null&&(u=a.pos);let l=t.state.tr;if(s){let{node:h}=n;h?h.replace(l):l.deleteSelection()}let c=l.mapping.map(u),f=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,d=l.doc;if(f?l.replaceRangeWith(c,c,o.content.firstChild):l.replaceRange(c,c,o),l.doc.eq(d))return;let p=l.doc.resolve(c);if(f&&Ge.isSelectable(o.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(o.content.firstChild))l.setSelection(new Ge(p));else{let h=l.mapping.map(u);l.mapping.maps[l.mapping.maps.length-1].forEach((m,g,y,N)=>h=N),l.setSelection(jg(t,p,l.doc.resolve(h)))}t.focus(),t.dispatch(l.setMeta("uiEvent","drop"))};fn.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&sa(t)},20))};fn.blur=(t,e)=>{let r=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),r.relatedTarget&&t.dom.contains(r.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};fn.beforeinput=(t,e)=>{if(jr&&ta&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:n}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=n||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",a=>a(t,Ao(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in dn)fn[t]=dn[t];function gl(t,e){if(t==e)return!0;for(let r in t)if(t[r]!==e[r])return!1;for(let r in e)if(!(r in t))return!1;return!0}class Tf{constructor(e,r){this.toDOM=e,this.spec=r||Ro,this.side=this.spec.side||0}map(e,r,n,i){let{pos:a,deleted:o}=e.mapResult(r.from+i,this.side<0?-1:1);return o?null:new Mn(a-n,a-n,this)}valid(){return!0}eq(e){return this==e||e instanceof Tf&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&gl(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class ja{constructor(e,r){this.attrs=e,this.spec=r||Ro}map(e,r,n,i){let a=e.map(r.from+i,this.spec.inclusiveStart?-1:1)-n,o=e.map(r.to+i,this.spec.inclusiveEnd?1:-1)-n;return a>=o?null:new Mn(a,o,this)}valid(e,r){return r.from<r.to}eq(e){return this==e||e instanceof ja&&gl(this.attrs,e.attrs)&&gl(this.spec,e.spec)}static is(e){return e.type instanceof ja}destroy(){}}class Zg{constructor(e,r){this.attrs=e,this.spec=r||Ro}map(e,r,n,i){let a=e.mapResult(r.from+i,1);if(a.deleted)return null;let o=e.mapResult(r.to+i,-1);return o.deleted||o.pos<=a.pos?null:new Mn(a.pos-n,o.pos-n,this)}valid(e,r){let{index:n,offset:i}=e.content.findIndex(r.from),a;return i==r.from&&!(a=e.child(n)).isText&&i+a.nodeSize==r.to}eq(e){return this==e||e instanceof Zg&&gl(this.attrs,e.attrs)&&gl(this.spec,e.spec)}destroy(){}}class Mn{constructor(e,r,n){this.from=e,this.to=r,this.type=n}copy(e,r){return new Mn(e,r,this.type)}eq(e,r=0){return this.type.eq(e.type)&&this.from+r==e.from&&this.to+r==e.to}map(e,r,n){return this.type.map(e,this,r,n)}static widget(e,r,n){return new Mn(e,e,new Tf(r,n))}static inline(e,r,n,i){return new Mn(e,r,new ja(n,i))}static node(e,r,n,i){return new Mn(e,r,new Zg(n,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof ja}get widget(){return this.type instanceof Tf}}const xs=[],Ro={};class ur{constructor(e,r){this.local=e.length?e:xs,this.children=r.length?r:xs}static create(e,r){return r.length?_f(r,e,0,Ro):Ur}find(e,r,n){let i=[];return this.findInner(e??0,r??1e9,i,0,n),i}findInner(e,r,n,i,a){for(let o=0;o<this.local.length;o++){let s=this.local[o];s.from<=r&&s.to>=e&&(!a||a(s.spec))&&n.push(s.copy(s.from+i,s.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<r&&this.children[o+1]>e){let s=this.children[o]+1;this.children[o+2].findInner(e-s,r-s,n,i+s,a)}}map(e,r,n){return this==Ur||e.maps.length==0?this:this.mapInner(e,r,0,0,n||Ro)}mapInner(e,r,n,i,a){let o;for(let s=0;s<this.local.length;s++){let u=this.local[s].map(e,n,i);u&&u.type.valid(r,u)?(o||(o=[])).push(u):a.onRemove&&a.onRemove(this.local[s].spec)}return this.children.length?SI(this.children,o||[],e,r,n,i,a):o?new ur(o.sort(Po),xs):Ur}add(e,r){return r.length?this==Ur?ur.create(e,r):this.addInner(e,r,0):this}addInner(e,r,n){let i,a=0;e.forEach((s,u)=>{let l=u+n,c;if(c=_E(r,s,l)){for(i||(i=this.children.slice());a<i.length&&i[a]<u;)a+=3;i[a]==u?i[a+2]=i[a+2].addInner(s,c,l+1):i.splice(a,0,u,u+s.nodeSize,_f(c,s,l+1,Ro)),a+=3}});let o=TE(a?OE(r):r,-n);for(let s=0;s<o.length;s++)o[s].type.valid(e,o[s])||o.splice(s--,1);return new ur(o.length?this.local.concat(o).sort(Po):this.local,i||this.children)}remove(e){return e.length==0||this==Ur?this:this.removeInner(e,0)}removeInner(e,r){let n=this.children,i=this.local;for(let a=0;a<n.length;a+=3){let o,s=n[a]+r,u=n[a+1]+r;for(let c=0,f;c<e.length;c++)(f=e[c])&&f.from>s&&f.to<u&&(e[c]=null,(o||(o=[])).push(f));if(!o)continue;n==this.children&&(n=this.children.slice());let l=n[a+2].removeInner(o,s+1);l!=Ur?n[a+2]=l:(n.splice(a,3),a-=3)}if(i.length){for(let a=0,o;a<e.length;a++)if(o=e[a])for(let s=0;s<i.length;s++)i[s].eq(o,r)&&(i==this.local&&(i=this.local.slice()),i.splice(s--,1))}return n==this.children&&i==this.local?this:i.length||n.length?new ur(i,n):Ur}forChild(e,r){if(this==Ur)return this;if(r.isLeaf)return ur.empty;let n,i;for(let s=0;s<this.children.length;s+=3)if(this.children[s]>=e){this.children[s]==e&&(n=this.children[s+2]);break}let a=e+1,o=a+r.content.size;for(let s=0;s<this.local.length;s++){let u=this.local[s];if(u.from<o&&u.to>a&&u.type instanceof ja){let l=Math.max(a,u.from)-a,c=Math.min(o,u.to)-a;l<c&&(i||(i=[])).push(u.copy(l,c))}}if(i){let s=new ur(i.sort(Po),xs);return n?new Ba([s,n]):s}return n||Ur}eq(e){if(this==e)return!0;if(!(e instanceof ur)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let r=0;r<this.local.length;r++)if(!this.local[r].eq(e.local[r]))return!1;for(let r=0;r<this.children.length;r+=3)if(this.children[r]!=e.children[r]||this.children[r+1]!=e.children[r+1]||!this.children[r+2].eq(e.children[r+2]))return!1;return!0}locals(e){return Xg(this.localsInner(e))}localsInner(e){if(this==Ur)return xs;if(e.inlineContent||!this.local.some(ja.is))return this.local;let r=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof ja||r.push(this.local[n]);return r}forEachSet(e){e(this)}}ur.empty=new ur([],[]);ur.removeOverlap=Xg;const Ur=ur.empty;class Ba{constructor(e){this.members=e}map(e,r){const n=this.members.map(i=>i.map(e,r,Ro));return Ba.from(n)}forChild(e,r){if(r.isLeaf)return ur.empty;let n=[];for(let i=0;i<this.members.length;i++){let a=this.members[i].forChild(e,r);a!=Ur&&(a instanceof Ba?n=n.concat(a.members):n.push(a))}return Ba.from(n)}eq(e){if(!(e instanceof Ba)||e.members.length!=this.members.length)return!1;for(let r=0;r<this.members.length;r++)if(!this.members[r].eq(e.members[r]))return!1;return!0}locals(e){let r,n=!0;for(let i=0;i<this.members.length;i++){let a=this.members[i].localsInner(e);if(a.length)if(!r)r=a;else{n&&(r=r.slice(),n=!1);for(let o=0;o<a.length;o++)r.push(a[o])}}return r?Xg(n?r:r.sort(Po)):xs}static from(e){switch(e.length){case 0:return Ur;case 1:return e[0];default:return new Ba(e.every(r=>r instanceof ur)?e:e.reduce((r,n)=>r.concat(n instanceof ur?n:n.members),[]))}}forEachSet(e){for(let r=0;r<this.members.length;r++)this.members[r].forEachSet(e)}}function SI(t,e,r,n,i,a,o){let s=t.slice();for(let l=0,c=a;l<r.maps.length;l++){let f=0;r.maps[l].forEach((d,p,h,m)=>{let g=m-h-(p-d);for(let y=0;y<s.length;y+=3){let N=s[y+1];if(N<0||d>N+c-f)continue;let v=s[y]+c-f;p>=v?s[y+1]=d<=v?-2:-1:d>=c&&g&&(s[y]+=g,s[y+1]+=g)}f+=g}),c=r.maps[l].map(c,-1)}let u=!1;for(let l=0;l<s.length;l+=3)if(s[l+1]<0){if(s[l+1]==-2){u=!0,s[l+1]=-1;continue}let c=r.map(t[l]+a),f=c-i;if(f<0||f>=n.content.size){u=!0;continue}let d=r.map(t[l+1]+a,-1),p=d-i,{index:h,offset:m}=n.content.findIndex(f),g=n.maybeChild(h);if(g&&m==f&&m+g.nodeSize==p){let y=s[l+2].mapInner(r,g,c+1,t[l]+a+1,o);y!=Ur?(s[l]=f,s[l+1]=p,s[l+2]=y):(s[l+1]=-2,u=!0)}else u=!0}if(u){let l=DI(s,t,e,r,i,a,o),c=_f(l,n,0,o);e=c.local;for(let f=0;f<s.length;f+=3)s[f+1]<0&&(s.splice(f,3),f-=3);for(let f=0,d=0;f<c.children.length;f+=3){let p=c.children[f];for(;d<s.length&&s[d]<p;)d+=3;s.splice(d,0,c.children[f],c.children[f+1],c.children[f+2])}}return new ur(e.sort(Po),s)}function TE(t,e){if(!e||!t.length)return t;let r=[];for(let n=0;n<t.length;n++){let i=t[n];r.push(new Mn(i.from+e,i.to+e,i.type))}return r}function DI(t,e,r,n,i,a,o){function s(u,l){for(let c=0;c<u.local.length;c++){let f=u.local[c].map(n,i,l);f?r.push(f):o.onRemove&&o.onRemove(u.local[c].spec)}for(let c=0;c<u.children.length;c+=3)s(u.children[c+2],u.children[c]+l+1)}for(let u=0;u<t.length;u+=3)t[u+1]==-1&&s(t[u+2],e[u]+a+1);return r}function _E(t,e,r){if(e.isLeaf)return null;let n=r+e.nodeSize,i=null;for(let a=0,o;a<t.length;a++)(o=t[a])&&o.from>r&&o.to<n&&((i||(i=[])).push(o),t[a]=null);return i}function OE(t){let e=[];for(let r=0;r<t.length;r++)t[r]!=null&&e.push(t[r]);return e}function _f(t,e,r,n){let i=[],a=!1;e.forEach((s,u)=>{let l=_E(t,s,u+r);if(l){a=!0;let c=_f(l,s,r+u+1,n);c!=Ur&&i.push(u,u+s.nodeSize,c)}});let o=TE(a?OE(t):t,-r).sort(Po);for(let s=0;s<o.length;s++)o[s].type.valid(e,o[s])||(n.onRemove&&n.onRemove(o[s].spec),o.splice(s--,1));return o.length||i.length?new ur(o,i):Ur}function Po(t,e){return t.from-e.from||t.to-e.to}function Xg(t){let e=t;for(let r=0;r<e.length-1;r++){let n=e[r];if(n.from!=n.to)for(let i=r+1;i<e.length;i++){let a=e[i];if(a.from==n.from){a.to!=n.to&&(e==t&&(e=t.slice()),e[i]=a.copy(a.from,n.to),y1(e,i+1,a.copy(n.to,a.to)));continue}else{a.from<n.to&&(e==t&&(e=t.slice()),e[r]=n.copy(n.from,a.from),y1(e,i,n.copy(a.from,n.to)));break}}}return e}function y1(t,e,r){for(;e<t.length&&Po(r,t[e])>0;)e++;t.splice(e,0,r)}function wh(t){let e=[];return t.someProp("decorations",r=>{let n=r(t.state);n&&n!=Ur&&e.push(n)}),t.cursorWrapper&&e.push(ur.create(t.state.doc,[t.cursorWrapper.deco])),Ba.from(e)}const EI={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},CI=wn&&Va<=11;class MI{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class TI{constructor(e,r){this.view=e,this.handleDOMChange=r,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new MI,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(n=>{for(let i=0;i<n.length;i++)this.queue.push(n[i]);wn&&Va<=11&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),CI&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,EI)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let r=0;r<e.length;r++)this.queue.push(e[r]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(c1(this.view)){if(this.suppressingSelectionUpdates)return sa(this.view);if(wn&&Va<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Uo(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let r=new Set,n;for(let a=e.focusNode;a;a=zs(a))r.add(a);for(let a=e.anchorNode;a;a=zs(a))if(r.has(a)){n=a;break}let i=n&&this.view.docView.nearestDesc(n);if(i&&i.ignoreMutation({type:"selection",target:n.nodeType==3?n.parentNode:n}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let r=this.pendingRecords();r.length&&(this.queue=[]);let n=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&c1(e)&&!this.ignoreSelectionChange(n),a=-1,o=-1,s=!1,u=[];if(e.editable)for(let c=0;c<r.length;c++){let f=this.registerMutation(r[c],u);f&&(a=a<0?f.from:Math.min(f.from,a),o=o<0?f.to:Math.max(f.to,o),f.typeOver&&(s=!0))}if(ci&&u.length){let c=u.filter(f=>f.nodeName=="BR");if(c.length==2){let[f,d]=c;f.parentNode&&f.parentNode.parentNode==d.parentNode?d.remove():f.remove()}else{let{focusNode:f}=this.currentSelection;for(let d of c){let p=d.parentNode;p&&p.nodeName=="LI"&&(!f||FI(e,f)!=p)&&d.remove()}}}let l=null;a<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&rp(n)&&(l=Wg(e))&&l.eq(gt.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,sa(e),this.currentSelection.set(n),e.scrollToSelection()):(a>-1||i)&&(a>-1&&(e.docView.markDirty(a,o),_I(e)),this.handleDOMChange(a,o,s,u),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||sa(e),this.currentSelection.set(n))}registerMutation(e,r){if(r.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(n==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!n||n.ignoreMutation(e))return null;if(e.type=="childList"){for(let c=0;c<e.addedNodes.length;c++){let f=e.addedNodes[c];r.push(f),f.nodeType==3&&(this.lastChangedTextNode=f)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let i=e.previousSibling,a=e.nextSibling;if(wn&&Va<=11&&e.addedNodes.length)for(let c=0;c<e.addedNodes.length;c++){let{previousSibling:f,nextSibling:d}=e.addedNodes[c];(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(i=f),(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(a=d)}let o=i&&i.parentNode==e.target?Or(i)+1:0,s=n.localPosFromDOM(e.target,o,-1),u=a&&a.parentNode==e.target?Or(a):e.target.childNodes.length,l=n.localPosFromDOM(e.target,u,1);return{from:s,to:l}}else return e.type=="attributes"?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=e.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let b1=new WeakMap,x1=!1;function _I(t){if(!b1.has(t)&&(b1.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=ci,x1)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),x1=!0}}function w1(t,e){let r=e.startContainer,n=e.startOffset,i=e.endContainer,a=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return Uo(o.node,o.offset,i,a)&&([r,n,i,a]=[i,a,r,n]),{anchorNode:r,anchorOffset:n,focusNode:i,focusOffset:a}}function OI(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return w1(t,i)}let r;function n(i){i.preventDefault(),i.stopImmediatePropagation(),r=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",n,!0),r?w1(t,r):null}function FI(t,e){for(let r=e.parentNode;r&&r!=t.dom;r=r.parentNode){let n=t.docView.nearestDesc(r,!0);if(n&&n.node.isBlock)return r}return null}function BI(t,e,r){let{node:n,fromOffset:i,toOffset:a,from:o,to:s}=t.docView.parseRange(e,r),u=t.domSelectionRange(),l,c=u.anchorNode;if(c&&t.dom.contains(c.nodeType==1?c:c.parentNode)&&(l=[{node:c,offset:u.anchorOffset}],rp(u)||l.push({node:u.focusNode,offset:u.focusOffset})),jr&&t.input.lastKeyCode===8)for(let g=a;g>i;g--){let y=n.childNodes[g-1],N=y.pmViewDesc;if(y.nodeName=="BR"&&!N){a=g;break}if(!N||N.size)break}let f=t.state.doc,d=t.someProp("domParser")||Ha.fromSchema(t.state.schema),p=f.resolve(o),h=null,m=d.parse(n,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:i,to:a,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:l,ruleFromNode:kI,context:p});if(l&&l[0].pos!=null){let g=l[0].pos,y=l[1]&&l[1].pos;y==null&&(y=g),h={anchor:g+o,head:y+o}}return{doc:m,sel:h,from:o,to:s}}function kI(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(cn&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let r=document.createElement("div");return r.appendChild(document.createElement("li")),{skip:r}}else if(t.parentNode.lastChild==t||cn&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const II=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function RI(t,e,r,n,i){let a=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let A=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,E=Wg(t,A);if(E&&!t.state.selection.eq(E)){if(jr&&ta&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",M=>M(t,Ao(13,"Enter"))))return;let D=t.state.tr.setSelection(E);A=="pointer"?D.setMeta("pointer",!0):A=="key"&&D.scrollIntoView(),a&&D.setMeta("composition",a),t.dispatch(D)}return}let o=t.state.doc.resolve(e),s=o.sharedDepth(r);e=o.before(s+1),r=t.state.doc.resolve(r).after(s+1);let u=t.state.selection,l=BI(t,e,r),c=t.state.doc,f=c.slice(l.from,l.to),d,p;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(d=t.state.selection.to,p="end"):(d=t.state.selection.from,p="start"),t.input.lastKeyCode=null;let h=LI(f.content,l.doc.content,l.from,d,p);if(h&&t.input.domChangeCount++,(qs&&t.input.lastIOSEnter>Date.now()-225||ta)&&i.some(A=>A.nodeType==1&&!II.test(A.nodeName))&&(!h||h.endA>=h.endB)&&t.someProp("handleKeyDown",A=>A(t,Ao(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!h)if(n&&u instanceof at&&!u.empty&&u.$head.sameParent(u.$anchor)&&!t.composing&&!(l.sel&&l.sel.anchor!=l.sel.head))h={start:u.from,endA:u.to,endB:u.to};else{if(l.sel){let A=N1(t,t.state.doc,l.sel);if(A&&!A.eq(t.state.selection)){let E=t.state.tr.setSelection(A);a&&E.setMeta("composition",a),t.dispatch(E)}}return}t.state.selection.from<t.state.selection.to&&h.start==h.endB&&t.state.selection instanceof at&&(h.start>t.state.selection.from&&h.start<=t.state.selection.from+2&&t.state.selection.from>=l.from?h.start=t.state.selection.from:h.endA<t.state.selection.to&&h.endA>=t.state.selection.to-2&&t.state.selection.to<=l.to&&(h.endB+=t.state.selection.to-h.endA,h.endA=t.state.selection.to)),wn&&Va<=11&&h.endB==h.start+1&&h.endA==h.start&&h.start>l.from&&l.doc.textBetween(h.start-l.from-1,h.start-l.from+1)==" "&&(h.start--,h.endA--,h.endB--);let m=l.doc.resolveNoCache(h.start-l.from),g=l.doc.resolveNoCache(h.endB-l.from),y=c.resolve(h.start),N=m.sameParent(g)&&m.parent.inlineContent&&y.end()>=h.endA,v;if((qs&&t.input.lastIOSEnter>Date.now()-225&&(!N||i.some(A=>A.nodeName=="DIV"||A.nodeName=="P"))||!N&&m.pos<l.doc.content.size&&(!m.sameParent(g)||!m.parent.inlineContent)&&!/\S/.test(l.doc.textBetween(m.pos,g.pos,"",""))&&(v=gt.findFrom(l.doc.resolve(m.pos+1),1,!0))&&v.head>m.pos)&&t.someProp("handleKeyDown",A=>A(t,Ao(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>h.start&&$I(c,h.start,h.endA,m,g)&&t.someProp("handleKeyDown",A=>A(t,Ao(8,"Backspace")))){ta&&jr&&t.domObserver.suppressSelectionUpdates();return}jr&&h.endB==h.start&&(t.input.lastChromeDelete=Date.now()),ta&&!N&&m.start()!=g.start()&&g.parentOffset==0&&m.depth==g.depth&&l.sel&&l.sel.anchor==l.sel.head&&l.sel.head==h.endA&&(h.endB-=2,g=l.doc.resolveNoCache(h.endB-l.from),setTimeout(()=>{t.someProp("handleKeyDown",function(A){return A(t,Ao(13,"Enter"))})},20));let w=h.start,x=h.endA,b,S,C;if(N){if(m.pos==g.pos)wn&&Va<=11&&m.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>sa(t),20)),b=t.state.tr.delete(w,x),S=c.resolve(h.start).marksAcross(c.resolve(h.endA));else if(h.endA==h.endB&&(C=PI(m.parent.content.cut(m.parentOffset,g.parentOffset),y.parent.content.cut(y.parentOffset,h.endA-y.start()))))b=t.state.tr,C.type=="add"?b.addMark(w,x,C.mark):b.removeMark(w,x,C.mark);else if(m.parent.child(m.index()).isText&&m.index()==g.index()-(g.textOffset?0:1)){let A=m.parent.textBetween(m.parentOffset,g.parentOffset);if(t.someProp("handleTextInput",E=>E(t,w,x,A)))return;b=t.state.tr.insertText(A,w,x)}}if(b||(b=t.state.tr.replace(w,x,l.doc.slice(h.start-l.from,h.endB-l.from))),l.sel){let A=N1(t,b.doc,l.sel);A&&!(jr&&t.composing&&A.empty&&(h.start!=h.endB||t.input.lastChromeDelete<Date.now()-100)&&(A.head==w||A.head==b.mapping.map(x)-1)||wn&&A.empty&&A.head==w)&&b.setSelection(A)}S&&b.ensureMarks(S),a&&b.setMeta("composition",a),t.dispatch(b.scrollIntoView())}function N1(t,e,r){return Math.max(r.anchor,r.head)>e.content.size?null:jg(t,e.resolve(r.anchor),e.resolve(r.head))}function PI(t,e){let r=t.firstChild.marks,n=e.firstChild.marks,i=r,a=n,o,s,u;for(let c=0;c<n.length;c++)i=n[c].removeFromSet(i);for(let c=0;c<r.length;c++)a=r[c].removeFromSet(a);if(i.length==1&&a.length==0)s=i[0],o="add",u=c=>c.mark(s.addToSet(c.marks));else if(i.length==0&&a.length==1)s=a[0],o="remove",u=c=>c.mark(s.removeFromSet(c.marks));else return null;let l=[];for(let c=0;c<e.childCount;c++)l.push(u(e.child(c)));if(De.from(l).eq(t))return{mark:s,type:o}}function $I(t,e,r,n,i){if(r-e<=i.pos-n.pos||Nh(n,!0,!1)<i.pos)return!1;let a=t.resolve(e);if(!n.parent.isTextblock){let s=a.nodeAfter;return s!=null&&r==e+s.nodeSize}if(a.parentOffset<a.parent.content.size||!a.parent.isTextblock)return!1;let o=t.resolve(Nh(a,!0,!0));return!o.parent.isTextblock||o.pos>r||Nh(o,!0,!1)<r?!1:n.parent.content.cut(n.parentOffset).eq(o.parent.content)}function Nh(t,e,r){let n=t.depth,i=e?t.end():t.pos;for(;n>0&&(e||t.indexAfter(n)==t.node(n).childCount);)n--,i++,e=!1;if(r){let a=t.node(n).maybeChild(t.indexAfter(n));for(;a&&!a.isLeaf;)a=a.firstChild,i++}return i}function LI(t,e,r,n,i){let a=t.findDiffStart(e,r);if(a==null)return null;let{a:o,b:s}=t.findDiffEnd(e,r+t.size,r+e.size);if(i=="end"){let u=Math.max(0,a-Math.min(o,s));n-=o+u-a}if(o<a&&t.size<e.size){let u=n<=a&&n>=o?a-n:0;a-=u,a&&a<e.size&&A1(e.textBetween(a-1,a+1))&&(a+=u?1:-1),s=a+(s-o),o=a}else if(s<a){let u=n<=a&&n>=s?a-n:0;a-=u,a&&a<t.size&&A1(t.textBetween(a-1,a+1))&&(a+=u?1:-1),o=a+(o-s),s=a}return{start:a,endA:o,endB:s}}function A1(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),r=t.charCodeAt(1);return e>=56320&&e<=57343&&r>=55296&&r<=56319}class zI{constructor(e,r){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new iI,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=r,this.state=r.state,this.directPlugins=r.plugins||[],this.directPlugins.forEach(M1),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=E1(this),D1(this),this.nodeViews=C1(this),this.docView=i1(this.state.doc,S1(this),wh(this),this.dom,this),this.domObserver=new TI(this,(n,i,a,o)=>RI(this,n,i,a,o)),this.domObserver.start(),aI(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let r in e)this._props[r]=e[r];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Bm(this);let r=this._props;this._props=e,e.plugins&&(e.plugins.forEach(M1),this.directPlugins=e.plugins),this.updateStateInner(e.state,r)}setProps(e){let r={};for(let n in this._props)r[n]=this._props[n];r.state=this.state;for(let n in e)r[n]=e[n];this.update(r)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,r){var n;let i=this.state,a=!1,o=!1;e.storedMarks&&this.composing&&(DE(this),o=!0),this.state=e;let s=i.plugins!=e.plugins||this._props.plugins!=r.plugins;if(s||this._props.plugins!=r.plugins||this._props.nodeViews!=r.nodeViews){let p=C1(this);UI(p,this.nodeViews)&&(this.nodeViews=p,a=!0)}(s||r.handleDOMEvents!=this._props.handleDOMEvents)&&Bm(this),this.editable=E1(this),D1(this);let u=wh(this),l=S1(this),c=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",f=a||!this.docView.matchesNode(e.doc,l,u);(f||!e.selection.eq(i.selection))&&(o=!0);let d=c=="preserve"&&o&&this.dom.style.overflowAnchor==null&&b4(this);if(o){this.domObserver.stop();let p=f&&(wn||jr)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&qI(i.selection,e.selection);if(f){let h=jr?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=yI(this)),(a||!this.docView.update(e.doc,l,u,this))&&(this.docView.updateOuterDeco(l),this.docView.destroy(),this.docView=i1(e.doc,l,u,this.dom,this)),h&&!this.trackWrites&&(p=!0)}p||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&H4(this))?sa(this,p):(pE(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((n=this.dragging)===null||n===void 0)&&n.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),c=="reset"?this.dom.scrollTop=0:c=="to selection"?this.scrollToSelection():d&&x4(d)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",r=>r(this)))if(this.state.selection instanceof Ge){let r=this.docView.domAfterPos(this.state.selection.from);r.nodeType==1&&Xy(this,r.getBoundingClientRect(),e)}else Xy(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let r=0;r<this.directPlugins.length;r++){let n=this.directPlugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}for(let r=0;r<this.state.plugins.length;r++){let n=this.state.plugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}}else for(let r=0;r<this.pluginViews.length;r++){let n=this.pluginViews[r];n.update&&n.update(this,e)}}updateDraggedNode(e,r){let n=e.node,i=-1;if(this.state.doc.nodeAt(n.from)==n.node)i=n.from;else{let a=n.from+(this.state.doc.content.size-r.doc.content.size);(a>0&&this.state.doc.nodeAt(a))==n.node&&(i=a)}this.dragging=new CE(e.slice,e.move,i<0?void 0:Ge.create(this.state.doc,i))}someProp(e,r){let n=this._props&&this._props[e],i;if(n!=null&&(i=r?r(n):n))return i;for(let o=0;o<this.directPlugins.length;o++){let s=this.directPlugins[o].props[e];if(s!=null&&(i=r?r(s):s))return i}let a=this.state.plugins;if(a)for(let o=0;o<a.length;o++){let s=a[o].props[e];if(s!=null&&(i=r?r(s):s))return i}}hasFocus(){if(wn){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&w4(this.dom),sa(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let r=this.dom.parentNode;r;r=r.parentNode)if(r.nodeType==9||r.nodeType==11&&r.host)return r.getSelection||(Object.getPrototypeOf(r).getSelection=()=>r.ownerDocument.getSelection()),this._root=r}return e||document}updateRoot(){this._root=null}posAtCoords(e){return E4(this,e)}coordsAtPos(e,r=1){return aE(this,e,r)}domAtPos(e,r=0){return this.docView.domFromPos(e,r)}nodeDOM(e){let r=this.docView.descAt(e);return r?r.nodeDOM:null}posAtDOM(e,r,n=-1){let i=this.docView.posFromDOM(e,r,n);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,r){return O4(this,r||this.state,e)}pasteHTML(e,r){return ml(this,"",e,!1,r||new ClipboardEvent("paste"))}pasteText(e,r){return ml(this,e,null,!0,r||new ClipboardEvent("paste"))}serializeForClipboard(e){return Gg(this,e)}destroy(){this.docView&&(oI(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],wh(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,u4())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return uI(this,e)}dispatch(e){let r=this._props.dispatchTransaction;r?r.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?cn&&this.root.nodeType===11&&p4(this.dom.ownerDocument)==this.dom&&OI(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function S1(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",r=>{if(typeof r=="function"&&(r=r(t.state)),r)for(let n in r)n=="class"?e.class+=" "+r[n]:n=="style"?e.style=(e.style?e.style+";":"")+r[n]:!e[n]&&n!="contenteditable"&&n!="nodeName"&&(e[n]=String(r[n]))}),e.translate||(e.translate="no"),[Mn.node(0,t.state.doc.content.size,e)]}function D1(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Mn.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function E1(t){return!t.someProp("editable",e=>e(t.state)===!1)}function qI(t,e){let r=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(r)!=e.$anchor.start(r)}function C1(t){let e=Object.create(null);function r(n){for(let i in n)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=n[i])}return t.someProp("nodeViews",r),t.someProp("markViews",r),e}function UI(t,e){let r=0,n=0;for(let i in t){if(t[i]!=e[i])return!0;r++}for(let i in e)n++;return r!=n}function M1(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Ya={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Of={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},HI=typeof navigator<"u"&&/Mac/.test(navigator.platform),VI=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Fr=0;Fr<10;Fr++)Ya[48+Fr]=Ya[96+Fr]=String(Fr);for(var Fr=1;Fr<=24;Fr++)Ya[Fr+111]="F"+Fr;for(var Fr=65;Fr<=90;Fr++)Ya[Fr]=String.fromCharCode(Fr+32),Of[Fr]=String.fromCharCode(Fr);for(var Ah in Ya)Of.hasOwnProperty(Ah)||(Of[Ah]=Ya[Ah]);function WI(t){var e=HI&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||VI&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",r=!e&&t.key||(t.shiftKey?Of:Ya)[t.keyCode]||t.key||"Unidentified";return r=="Esc"&&(r="Escape"),r=="Del"&&(r="Delete"),r=="Left"&&(r="ArrowLeft"),r=="Up"&&(r="ArrowUp"),r=="Right"&&(r="ArrowRight"),r=="Down"&&(r="ArrowDown"),r}const jI=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),GI=typeof navigator<"u"&&/Win/.test(navigator.platform);function KI(t){let e=t.split(/-(?!$)/),r=e[e.length-1];r=="Space"&&(r=" ");let n,i,a,o;for(let s=0;s<e.length-1;s++){let u=e[s];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))n=!0;else if(/^(c|ctrl|control)$/i.test(u))i=!0;else if(/^s(hift)?$/i.test(u))a=!0;else if(/^mod$/i.test(u))jI?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+u)}return n&&(r="Alt-"+r),i&&(r="Ctrl-"+r),o&&(r="Meta-"+r),a&&(r="Shift-"+r),r}function JI(t){let e=Object.create(null);for(let r in t)e[KI(r)]=t[r];return e}function Sh(t,e,r=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),r&&e.shiftKey&&(t="Shift-"+t),t}function YI(t){return new Cr({props:{handleKeyDown:FE(t)}})}function FE(t){let e=JI(t);return function(r,n){let i=WI(n),a,o=e[Sh(i,n)];if(o&&o(r.state,r.dispatch,r))return!0;if(i.length==1&&i!=" "){if(n.shiftKey){let s=e[Sh(i,n,!1)];if(s&&s(r.state,r.dispatch,r))return!0}if((n.altKey||n.metaKey||n.ctrlKey)&&!(GI&&n.ctrlKey&&n.altKey)&&(a=Ya[n.keyCode])&&a!=i){let s=e[Sh(a,n)];if(s&&s(r.state,r.dispatch,r))return!0}}return!1}}const Qg=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function BE(t,e){let{$cursor:r}=t.selection;return!r||(e?!e.endOfTextblock("backward",t):r.parentOffset>0)?null:r}const kE=(t,e,r)=>{let n=BE(t,r);if(!n)return!1;let i=ev(n);if(!i){let o=n.blockRange(),s=o&&Qs(o);return s==null?!1:(e&&e(t.tr.lift(o,s).scrollIntoView()),!0)}let a=i.nodeBefore;if(HE(t,i,e,-1))return!0;if(n.parent.content.size==0&&(Us(a,"end")||Ge.isSelectable(a)))for(let o=n.depth;;o--){let s=ep(t.doc,n.before(o),n.after(o),Be.empty);if(s&&s.slice.size<s.to-s.from){if(e){let u=t.tr.step(s);u.setSelection(Us(a,"end")?gt.findFrom(u.doc.resolve(u.mapping.map(i.pos,-1)),-1):Ge.create(u.doc,i.pos-a.nodeSize)),e(u.scrollIntoView())}return!0}if(o==1||n.node(o-1).childCount>1)break}return a.isAtom&&i.depth==n.depth-1?(e&&e(t.tr.delete(i.pos-a.nodeSize,i.pos).scrollIntoView()),!0):!1},ZI=(t,e,r)=>{let n=BE(t,r);if(!n)return!1;let i=ev(n);return i?IE(t,i,e):!1},XI=(t,e,r)=>{let n=PE(t,r);if(!n)return!1;let i=tv(n);return i?IE(t,i,e):!1};function IE(t,e,r){let n=e.nodeBefore,i=n,a=e.pos-1;for(;!i.isTextblock;a--){if(i.type.spec.isolating)return!1;let c=i.lastChild;if(!c)return!1;i=c}let o=e.nodeAfter,s=o,u=e.pos+1;for(;!s.isTextblock;u++){if(s.type.spec.isolating)return!1;let c=s.firstChild;if(!c)return!1;s=c}let l=ep(t.doc,a,u,Be.empty);if(!l||l.from!=a||l instanceof br&&l.slice.size>=u-a)return!1;if(r){let c=t.tr.step(l);c.setSelection(at.create(c.doc,a)),r(c.scrollIntoView())}return!0}function Us(t,e,r=!1){for(let n=t;n;n=e=="start"?n.firstChild:n.lastChild){if(n.isTextblock)return!0;if(r&&n.childCount!=1)return!1}return!1}const RE=(t,e,r)=>{let{$head:n,empty:i}=t.selection,a=n;if(!i)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("backward",t):n.parentOffset>0)return!1;a=ev(n)}let o=a&&a.nodeBefore;return!o||!Ge.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Ge.create(t.doc,a.pos-o.nodeSize)).scrollIntoView()),!0)};function ev(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function PE(t,e){let{$cursor:r}=t.selection;return!r||(e?!e.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)?null:r}const $E=(t,e,r)=>{let n=PE(t,r);if(!n)return!1;let i=tv(n);if(!i)return!1;let a=i.nodeAfter;if(HE(t,i,e,1))return!0;if(n.parent.content.size==0&&(Us(a,"start")||Ge.isSelectable(a))){let o=ep(t.doc,n.before(),n.after(),Be.empty);if(o&&o.slice.size<o.to-o.from){if(e){let s=t.tr.step(o);s.setSelection(Us(a,"start")?gt.findFrom(s.doc.resolve(s.mapping.map(i.pos)),1):Ge.create(s.doc,s.mapping.map(i.pos))),e(s.scrollIntoView())}return!0}}return a.isAtom&&i.depth==n.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+a.nodeSize).scrollIntoView()),!0):!1},LE=(t,e,r)=>{let{$head:n,empty:i}=t.selection,a=n;if(!i)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)return!1;a=tv(n)}let o=a&&a.nodeAfter;return!o||!Ge.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Ge.create(t.doc,a.pos)).scrollIntoView()),!0)};function tv(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let r=t.node(e);if(t.index(e)+1<r.childCount)return t.doc.resolve(t.after(e+1));if(r.type.spec.isolating)break}return null}const QI=(t,e)=>{let r=t.selection,n=r instanceof Ge,i;if(n){if(r.node.isTextblock||!to(t.doc,r.from))return!1;i=r.from}else if(i=Qd(t.doc,r.from,-1),i==null)return!1;if(e){let a=t.tr.join(i);n&&a.setSelection(Ge.create(a.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(a.scrollIntoView())}return!0},eR=(t,e)=>{let r=t.selection,n;if(r instanceof Ge){if(r.node.isTextblock||!to(t.doc,r.to))return!1;n=r.to}else if(n=Qd(t.doc,r.to,1),n==null)return!1;return e&&e(t.tr.join(n).scrollIntoView()),!0},tR=(t,e)=>{let{$from:r,$to:n}=t.selection,i=r.blockRange(n),a=i&&Qs(i);return a==null?!1:(e&&e(t.tr.lift(i,a).scrollIntoView()),!0)},zE=(t,e)=>{let{$head:r,$anchor:n}=t.selection;return!r.parent.type.spec.code||!r.sameParent(n)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function rv(t){for(let e=0;e<t.edgeCount;e++){let{type:r}=t.edge(e);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}const rR=(t,e)=>{let{$head:r,$anchor:n}=t.selection;if(!r.parent.type.spec.code||!r.sameParent(n))return!1;let i=r.node(-1),a=r.indexAfter(-1),o=rv(i.contentMatchAt(a));if(!o||!i.canReplaceWith(a,a,o))return!1;if(e){let s=r.after(),u=t.tr.replaceWith(s,s,o.createAndFill());u.setSelection(gt.near(u.doc.resolve(s),1)),e(u.scrollIntoView())}return!0},qE=(t,e)=>{let r=t.selection,{$from:n,$to:i}=r;if(r instanceof Tn||n.parent.inlineContent||i.parent.inlineContent)return!1;let a=rv(i.parent.contentMatchAt(i.indexAfter()));if(!a||!a.isTextblock)return!1;if(e){let o=(!n.parentOffset&&i.index()<i.parent.childCount?n:i).pos,s=t.tr.insert(o,a.createAndFill());s.setSelection(at.create(s.doc,o+1)),e(s.scrollIntoView())}return!0},UE=(t,e)=>{let{$cursor:r}=t.selection;if(!r||r.parent.content.size)return!1;if(r.depth>1&&r.after()!=r.end(-1)){let a=r.before();if(oa(t.doc,a))return e&&e(t.tr.split(a).scrollIntoView()),!0}let n=r.blockRange(),i=n&&Qs(n);return i==null?!1:(e&&e(t.tr.lift(n,i).scrollIntoView()),!0)};function nR(t){return(e,r)=>{let{$from:n,$to:i}=e.selection;if(e.selection instanceof Ge&&e.selection.node.isBlock)return!n.parentOffset||!oa(e.doc,n.pos)?!1:(r&&r(e.tr.split(n.pos).scrollIntoView()),!0);if(!n.depth)return!1;let a=[],o,s,u=!1,l=!1;for(let p=n.depth;;p--)if(n.node(p).isBlock){u=n.end(p)==n.pos+(n.depth-p),l=n.start(p)==n.pos-(n.depth-p),s=rv(n.node(p-1).contentMatchAt(n.indexAfter(p-1))),a.unshift(u&&s?{type:s}:null),o=p;break}else{if(p==1)return!1;a.unshift(null)}let c=e.tr;(e.selection instanceof at||e.selection instanceof Tn)&&c.deleteSelection();let f=c.mapping.map(n.pos),d=oa(c.doc,f,a.length,a);if(d||(a[0]=s?{type:s}:null,d=oa(c.doc,f,a.length,a)),!d)return!1;if(c.split(f,a.length,a),!u&&l&&n.node(o).type!=s){let p=c.mapping.map(n.before(o)),h=c.doc.resolve(p);s&&n.node(o-1).canReplaceWith(h.index(),h.index()+1,s)&&c.setNodeMarkup(c.mapping.map(n.before(o)),s)}return r&&r(c.scrollIntoView()),!0}}const iR=nR(),aR=(t,e)=>{let{$from:r,to:n}=t.selection,i,a=r.sharedDepth(n);return a==0?!1:(i=r.before(a),e&&e(t.tr.setSelection(Ge.create(t.doc,i))),!0)};function oR(t,e,r){let n=e.nodeBefore,i=e.nodeAfter,a=e.index();return!n||!i||!n.type.compatibleContent(i.type)?!1:!n.content.size&&e.parent.canReplace(a-1,a)?(r&&r(t.tr.delete(e.pos-n.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(a,a+1)||!(i.isTextblock||to(t.doc,e.pos))?!1:(r&&r(t.tr.join(e.pos).scrollIntoView()),!0)}function HE(t,e,r,n){let i=e.nodeBefore,a=e.nodeAfter,o,s,u=i.type.spec.isolating||a.type.spec.isolating;if(!u&&oR(t,e,r))return!0;let l=!u&&e.parent.canReplace(e.index(),e.index()+1);if(l&&(o=(s=i.contentMatchAt(i.childCount)).findWrapping(a.type))&&s.matchType(o[0]||a.type).validEnd){if(r){let p=e.pos+a.nodeSize,h=De.empty;for(let y=o.length-1;y>=0;y--)h=De.from(o[y].create(null,h));h=De.from(i.copy(h));let m=t.tr.step(new wr(e.pos-1,p,e.pos,p,new Be(h,1,0),o.length,!0)),g=m.doc.resolve(p+2*o.length);g.nodeAfter&&g.nodeAfter.type==i.type&&to(m.doc,g.pos)&&m.join(g.pos),r(m.scrollIntoView())}return!0}let c=a.type.spec.isolating||n>0&&u?null:gt.findFrom(e,1),f=c&&c.$from.blockRange(c.$to),d=f&&Qs(f);if(d!=null&&d>=e.depth)return r&&r(t.tr.lift(f,d).scrollIntoView()),!0;if(l&&Us(a,"start",!0)&&Us(i,"end")){let p=i,h=[];for(;h.push(p),!p.isTextblock;)p=p.lastChild;let m=a,g=1;for(;!m.isTextblock;m=m.firstChild)g++;if(p.canReplace(p.childCount,p.childCount,m.content)){if(r){let y=De.empty;for(let v=h.length-1;v>=0;v--)y=De.from(h[v].copy(y));let N=t.tr.step(new wr(e.pos-h.length,e.pos+a.nodeSize,e.pos+g,e.pos+a.nodeSize-g,new Be(y,h.length,0),0,!0));r(N.scrollIntoView())}return!0}}return!1}function VE(t){return function(e,r){let n=e.selection,i=t<0?n.$from:n.$to,a=i.depth;for(;i.node(a).isInline;){if(!a)return!1;a--}return i.node(a).isTextblock?(r&&r(e.tr.setSelection(at.create(e.doc,t<0?i.start(a):i.end(a)))),!0):!1}}const sR=VE(-1),uR=VE(1);function lR(t,e=null){return function(r,n){let{$from:i,$to:a}=r.selection,o=i.blockRange(a),s=o&&Ug(o,t,e);return s?(n&&n(r.tr.wrap(o,s).scrollIntoView()),!0):!1}}function T1(t,e=null){return function(r,n){let i=!1;for(let a=0;a<r.selection.ranges.length&&!i;a++){let{$from:{pos:o},$to:{pos:s}}=r.selection.ranges[a];r.doc.nodesBetween(o,s,(u,l)=>{if(i)return!1;if(!(!u.isTextblock||u.hasMarkup(t,e)))if(u.type==t)i=!0;else{let c=r.doc.resolve(l),f=c.index();i=c.parent.canReplaceWith(f,f+1,t)}})}if(!i)return!1;if(n){let a=r.tr;for(let o=0;o<r.selection.ranges.length;o++){let{$from:{pos:s},$to:{pos:u}}=r.selection.ranges[o];a.setBlockType(s,u,t,e)}n(a.scrollIntoView())}return!0}}function nv(...t){return function(e,r,n){for(let i=0;i<t.length;i++)if(t[i](e,r,n))return!0;return!1}}nv(Qg,kE,RE);nv(Qg,$E,LE);nv(zE,qE,UE,iR);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function cR(t,e=null){return function(r,n){let{$from:i,$to:a}=r.selection,o=i.blockRange(a);if(!o)return!1;let s=n?r.tr:null;return fR(s,o,t,e)?(n&&n(s.scrollIntoView()),!0):!1}}function fR(t,e,r,n=null){let i=!1,a=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(r)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let u=o.resolve(e.start-2);a=new Sf(u,u,e.depth),e.endIndex<e.parent.childCount&&(e=new Sf(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let s=Ug(a,r,n,e);return s?(t&&dR(t,e,s,i,r),!0):!1}function dR(t,e,r,n,i){let a=De.empty;for(let c=r.length-1;c>=0;c--)a=De.from(r[c].type.create(r[c].attrs,a));t.step(new wr(e.start-(n?2:0),e.end,e.start,e.end,new Be(a,0,0),r.length,!0));let o=0;for(let c=0;c<r.length;c++)r[c].type==i&&(o=c+1);let s=r.length-o,u=e.start+r.length-(n?2:0),l=e.parent;for(let c=e.startIndex,f=e.endIndex,d=!0;c<f;c++,d=!1)!d&&oa(t.doc,u,s)&&(t.split(u,s),u+=2*s),u+=l.child(c).nodeSize;return t}function pR(t){return function(e,r){let{$from:n,$to:i}=e.selection,a=n.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return a?r?n.node(a.depth-1).type==t?hR(e,r,t,a):mR(e,r,a):!0:!1}}function hR(t,e,r,n){let i=t.tr,a=n.end,o=n.$to.end(n.depth);a<o&&(i.step(new wr(a-1,o,a,o,new Be(De.from(r.create(null,n.parent.copy())),1,0),1,!0)),n=new Sf(i.doc.resolve(n.$from.pos),i.doc.resolve(o),n.depth));const s=Qs(n);if(s==null)return!1;i.lift(n,s);let u=i.doc.resolve(i.mapping.map(a,-1)-1);return to(i.doc,u.pos)&&u.nodeBefore.type==u.nodeAfter.type&&i.join(u.pos),e(i.scrollIntoView()),!0}function mR(t,e,r){let n=t.tr,i=r.parent;for(let p=r.end,h=r.endIndex-1,m=r.startIndex;h>m;h--)p-=i.child(h).nodeSize,n.delete(p-1,p+1);let a=n.doc.resolve(r.start),o=a.nodeAfter;if(n.mapping.map(r.end)!=r.start+a.nodeAfter.nodeSize)return!1;let s=r.startIndex==0,u=r.endIndex==i.childCount,l=a.node(-1),c=a.index(-1);if(!l.canReplace(c+(s?0:1),c+1,o.content.append(u?De.empty:De.from(i))))return!1;let f=a.pos,d=f+o.nodeSize;return n.step(new wr(f-(s?1:0),d+(u?1:0),f+1,d-1,new Be((s?De.empty:De.from(i.copy(De.empty))).append(u?De.empty:De.from(i.copy(De.empty))),s?0:1,u?0:1),s?0:1)),e(n.scrollIntoView()),!0}function gR(t){return function(e,r){let{$from:n,$to:i}=e.selection,a=n.blockRange(i,l=>l.childCount>0&&l.firstChild.type==t);if(!a)return!1;let o=a.startIndex;if(o==0)return!1;let s=a.parent,u=s.child(o-1);if(u.type!=t)return!1;if(r){let l=u.lastChild&&u.lastChild.type==s.type,c=De.from(l?t.create():null),f=new Be(De.from(t.create(null,De.from(s.type.create(null,c)))),l?3:1,0),d=a.start,p=a.end;r(e.tr.step(new wr(d-(l?3:1),p,d,p,f,1,!0)).scrollIntoView())}return!0}}function ap(t){const{state:e,transaction:r}=t;let{selection:n}=r,{doc:i}=r,{storedMarks:a}=r;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return a},get selection(){return n},get doc(){return i},get tr(){return n=r.selection,i=r.doc,a=r.storedMarks,r}}}class op{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:r,state:n}=this,{view:i}=r,{tr:a}=n,o=this.buildProps(a);return Object.fromEntries(Object.entries(e).map(([s,u])=>[s,(...c)=>{const f=u(...c)(o);return!a.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(a),f}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,r=!0){const{rawCommands:n,editor:i,state:a}=this,{view:o}=i,s=[],u=!!e,l=e||a.tr,c=()=>(!u&&r&&!l.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(l),s.every(d=>d===!0)),f={...Object.fromEntries(Object.entries(n).map(([d,p])=>[d,(...m)=>{const g=this.buildProps(l,r),y=p(...m)(g);return s.push(y),f}])),run:c};return f}createCan(e){const{rawCommands:r,state:n}=this,i=!1,a=e||n.tr,o=this.buildProps(a,i);return{...Object.fromEntries(Object.entries(r).map(([u,l])=>[u,(...c)=>l(...c)({...o,dispatch:void 0})])),chain:()=>this.createChain(a,i)}}buildProps(e,r=!0){const{rawCommands:n,editor:i,state:a}=this,{view:o}=i,s={tr:e,editor:i,view:o,state:ap({state:a,transaction:e}),dispatch:r?()=>{}:void 0,chain:()=>this.createChain(e,r),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map(([u,l])=>[u,(...c)=>l(...c)(s)]))}};return s}}class vR{constructor(){this.callbacks={}}on(e,r){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(r),this}emit(e,...r){const n=this.callbacks[e];return n&&n.forEach(i=>i.apply(this,r)),this}off(e,r){const n=this.callbacks[e];return n&&(r?this.callbacks[e]=n.filter(i=>i!==r):delete this.callbacks[e]),this}once(e,r){const n=(...i)=>{this.off(e,n),r.apply(this,i)};return this.on(e,n)}removeAllListeners(){this.callbacks={}}}function Re(t,e,r){return t.config[e]===void 0&&t.parent?Re(t.parent,e,r):typeof t.config[e]=="function"?t.config[e].bind({...r,parent:t.parent?Re(t.parent,e,r):null}):t.config[e]}function sp(t){const e=t.filter(i=>i.type==="extension"),r=t.filter(i=>i.type==="node"),n=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:r,markExtensions:n}}function WE(t){const e=[],{nodeExtensions:r,markExtensions:n}=sp(t),i=[...r,...n],a={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const s={name:o.name,options:o.options,storage:o.storage,extensions:i},u=Re(o,"addGlobalAttributes",s);if(!u)return;u().forEach(c=>{c.types.forEach(f=>{Object.entries(c.attributes).forEach(([d,p])=>{e.push({type:f,name:d,attribute:{...a,...p}})})})})}),i.forEach(o=>{const s={name:o.name,options:o.options,storage:o.storage},u=Re(o,"addAttributes",s);if(!u)return;const l=u();Object.entries(l).forEach(([c,f])=>{const d={...a,...f};typeof(d==null?void 0:d.default)=="function"&&(d.default=d.default()),d!=null&&d.isRequired&&(d==null?void 0:d.default)===void 0&&delete d.default,e.push({type:o.name,name:c,attribute:d})})}),e}function Sr(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function Dr(...t){return t.filter(e=>!!e).reduce((e,r)=>{const n={...e};return Object.entries(r).forEach(([i,a])=>{if(!n[i]){n[i]=a;return}if(i==="class"){const s=a?String(a).split(" "):[],u=n[i]?n[i].split(" "):[],l=s.filter(c=>!u.includes(c));n[i]=[...u,...l].join(" ")}else if(i==="style"){const s=a?a.split(";").map(c=>c.trim()).filter(Boolean):[],u=n[i]?n[i].split(";").map(c=>c.trim()).filter(Boolean):[],l=new Map;u.forEach(c=>{const[f,d]=c.split(":").map(p=>p.trim());l.set(f,d)}),s.forEach(c=>{const[f,d]=c.split(":").map(p=>p.trim());l.set(f,d)}),n[i]=Array.from(l.entries()).map(([c,f])=>`${c}: ${f}`).join("; ")}else n[i]=a}),n},{})}function km(t,e){return e.filter(r=>r.type===t.type.name).filter(r=>r.attribute.rendered).map(r=>r.attribute.renderHTML?r.attribute.renderHTML(t.attrs)||{}:{[r.name]:t.attrs[r.name]}).reduce((r,n)=>Dr(r,n),{})}function jE(t){return typeof t=="function"}function yt(t,e=void 0,...r){return jE(t)?e?t.bind(e)(...r):t(...r):t}function yR(t={}){return Object.keys(t).length===0&&t.constructor===Object}function bR(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function _1(t,e){return"style"in t?t:{...t,getAttrs:r=>{const n=t.getAttrs?t.getAttrs(r):t.attrs;if(n===!1)return!1;const i=e.reduce((a,o)=>{const s=o.attribute.parseHTML?o.attribute.parseHTML(r):bR(r.getAttribute(o.name));return s==null?a:{...a,[o.name]:s}},{});return{...n,...i}}}}function O1(t){return Object.fromEntries(Object.entries(t).filter(([e,r])=>e==="attrs"&&yR(r)?!1:r!=null))}function xR(t,e){var r;const n=WE(t),{nodeExtensions:i,markExtensions:a}=sp(t),o=(r=i.find(l=>Re(l,"topNode")))===null||r===void 0?void 0:r.name,s=Object.fromEntries(i.map(l=>{const c=n.filter(y=>y.type===l.name),f={name:l.name,options:l.options,storage:l.storage,editor:e},d=t.reduce((y,N)=>{const v=Re(N,"extendNodeSchema",f);return{...y,...v?v(l):{}}},{}),p=O1({...d,content:yt(Re(l,"content",f)),marks:yt(Re(l,"marks",f)),group:yt(Re(l,"group",f)),inline:yt(Re(l,"inline",f)),atom:yt(Re(l,"atom",f)),selectable:yt(Re(l,"selectable",f)),draggable:yt(Re(l,"draggable",f)),code:yt(Re(l,"code",f)),whitespace:yt(Re(l,"whitespace",f)),linebreakReplacement:yt(Re(l,"linebreakReplacement",f)),defining:yt(Re(l,"defining",f)),isolating:yt(Re(l,"isolating",f)),attrs:Object.fromEntries(c.map(y=>{var N;return[y.name,{default:(N=y==null?void 0:y.attribute)===null||N===void 0?void 0:N.default}]}))}),h=yt(Re(l,"parseHTML",f));h&&(p.parseDOM=h.map(y=>_1(y,c)));const m=Re(l,"renderHTML",f);m&&(p.toDOM=y=>m({node:y,HTMLAttributes:km(y,c)}));const g=Re(l,"renderText",f);return g&&(p.toText=g),[l.name,p]})),u=Object.fromEntries(a.map(l=>{const c=n.filter(g=>g.type===l.name),f={name:l.name,options:l.options,storage:l.storage,editor:e},d=t.reduce((g,y)=>{const N=Re(y,"extendMarkSchema",f);return{...g,...N?N(l):{}}},{}),p=O1({...d,inclusive:yt(Re(l,"inclusive",f)),excludes:yt(Re(l,"excludes",f)),group:yt(Re(l,"group",f)),spanning:yt(Re(l,"spanning",f)),code:yt(Re(l,"code",f)),attrs:Object.fromEntries(c.map(g=>{var y;return[g.name,{default:(y=g==null?void 0:g.attribute)===null||y===void 0?void 0:y.default}]}))}),h=yt(Re(l,"parseHTML",f));h&&(p.parseDOM=h.map(g=>_1(g,c)));const m=Re(l,"renderHTML",f);return m&&(p.toDOM=g=>m({mark:g,HTMLAttributes:km(g,c)})),[l.name,p]}));return new kD({topNode:o,nodes:s,marks:u})}function Dh(t,e){return e.nodes[t]||e.marks[t]||null}function F1(t,e){return Array.isArray(e)?e.some(r=>(typeof r=="string"?r:r.name)===t.name):e}function iv(t,e){const r=Yo.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(r),i.innerHTML}const wR=(t,e=500)=>{let r="";const n=t.parentOffset;return t.parent.nodesBetween(Math.max(0,n-e),n,(i,a,o,s)=>{var u,l;const c=((l=(u=i.type.spec).toText)===null||l===void 0?void 0:l.call(u,{node:i,pos:a,parent:o,index:s}))||i.textContent||"%leaf%";r+=i.isAtom&&!i.isText?c:c.slice(0,Math.max(0,n-a))}),r};function av(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class up{constructor(e){this.find=e.find,this.handler=e.handler}}const NR=(t,e)=>{if(av(e))return e.exec(t);const r=e(t);if(!r)return null;const n=[r.text];return n.index=r.index,n.input=t,n.data=r.data,r.replaceWith&&(r.text.includes(r.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),n.push(r.replaceWith)),n};function hc(t){var e;const{editor:r,from:n,to:i,text:a,rules:o,plugin:s}=t,{view:u}=r;if(u.composing)return!1;const l=u.state.doc.resolve(n);if(l.parent.type.spec.code||!((e=l.nodeBefore||l.nodeAfter)===null||e===void 0)&&e.marks.find(d=>d.type.spec.code))return!1;let c=!1;const f=wR(l)+a;return o.forEach(d=>{if(c)return;const p=NR(f,d.find);if(!p)return;const h=u.state.tr,m=ap({state:u.state,transaction:h}),g={from:n-(p[0].length-a.length),to:i},{commands:y,chain:N,can:v}=new op({editor:r,state:m});d.handler({state:m,range:g,match:p,commands:y,chain:N,can:v})===null||!h.steps.length||(h.setMeta(s,{transform:h,from:n,to:i,text:a}),u.dispatch(h),c=!0)}),c}function AR(t){const{editor:e,rules:r}=t,n=new Cr({state:{init(){return null},apply(i,a,o){const s=i.getMeta(n);if(s)return s;const u=i.getMeta("applyInputRules");return!!u&&setTimeout(()=>{let{text:c}=u;typeof c=="string"?c=c:c=iv(De.from(c),o.schema);const{from:f}=u,d=f+c.length;hc({editor:e,from:f,to:d,text:c,rules:r,plugin:n})}),i.selectionSet||i.docChanged?null:a}},props:{handleTextInput(i,a,o,s){return hc({editor:e,from:a,to:o,text:s,rules:r,plugin:n})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:a}=i.state.selection;a&&hc({editor:e,from:a.pos,to:a.pos,text:"",rules:r,plugin:n})}),!1)},handleKeyDown(i,a){if(a.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?hc({editor:e,from:o.pos,to:o.pos,text:`
`,rules:r,plugin:n}):!1}},isInputRules:!0});return n}function SR(t){return Object.prototype.toString.call(t).slice(8,-1)}function mc(t){return SR(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function lp(t,e){const r={...t};return mc(t)&&mc(e)&&Object.keys(e).forEach(n=>{mc(e[n])&&mc(t[n])?r[n]=lp(t[n],e[n]):r[n]=e[n]}),r}class Bi{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=yt(Re(this,"addOptions",{name:this.name}))),this.storage=yt(Re(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Bi(e)}configure(e={}){const r=this.extend({...this.config,addOptions:()=>lp(this.options,e)});return r.name=this.name,r.parent=this.parent,r}extend(e={}){const r=new Bi(e);return r.parent=this,this.child=r,r.name=e.name?e.name:r.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${r.name}".`),r.options=yt(Re(r,"addOptions",{name:r.name})),r.storage=yt(Re(r,"addStorage",{name:r.name,options:r.options})),r}static handleExit({editor:e,mark:r}){const{tr:n}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(l=>(l==null?void 0:l.type.name)===r.name))return!1;const u=o.find(l=>(l==null?void 0:l.type.name)===r.name);return u&&n.removeStoredMark(u),n.insertText(" ",i.pos),e.view.dispatch(n),!0}return!1}}function DR(t){return typeof t=="number"}class ER{constructor(e){this.find=e.find,this.handler=e.handler}}const CR=(t,e,r)=>{if(av(e))return[...t.matchAll(e)];const n=e(t,r);return n?n.map(i=>{const a=[i.text];return a.index=i.index,a.input=t,a.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),a.push(i.replaceWith)),a}):[]};function MR(t){const{editor:e,state:r,from:n,to:i,rule:a,pasteEvent:o,dropEvent:s}=t,{commands:u,chain:l,can:c}=new op({editor:e,state:r}),f=[];return r.doc.nodesBetween(n,i,(p,h)=>{if(!p.isTextblock||p.type.spec.code)return;const m=Math.max(n,h),g=Math.min(i,h+p.content.size),y=p.textBetween(m-h,g-h,void 0,"");CR(y,a.find,o).forEach(v=>{if(v.index===void 0)return;const w=m+v.index+1,x=w+v[0].length,b={from:r.tr.mapping.map(w),to:r.tr.mapping.map(x)},S=a.handler({state:r,range:b,match:v,commands:u,chain:l,can:c,pasteEvent:o,dropEvent:s});f.push(S)})}),f.every(p=>p!==null)}let gc=null;const TR=t=>{var e;const r=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=r.clipboardData)===null||e===void 0||e.setData("text/html",t),r};function _R(t){const{editor:e,rules:r}=t;let n=null,i=!1,a=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,s;try{s=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{s=null}const u=({state:c,from:f,to:d,rule:p,pasteEvt:h})=>{const m=c.tr,g=ap({state:c,transaction:m});if(!(!MR({editor:e,state:g,from:Math.max(f-1,0),to:d.b-1,rule:p,pasteEvent:h,dropEvent:s})||!m.steps.length)){try{s=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{s=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,m}};return r.map(c=>new Cr({view(f){const d=h=>{var m;n=!((m=f.dom.parentElement)===null||m===void 0)&&m.contains(h.target)?f.dom.parentElement:null,n&&(gc=e)},p=()=>{gc&&(gc=null)};return window.addEventListener("dragstart",d),window.addEventListener("dragend",p),{destroy(){window.removeEventListener("dragstart",d),window.removeEventListener("dragend",p)}}},props:{handleDOMEvents:{drop:(f,d)=>{if(a=n===f.dom.parentElement,s=d,!a){const p=gc;p&&setTimeout(()=>{const h=p.state.selection;h&&p.commands.deleteRange({from:h.from,to:h.to})},10)}return!1},paste:(f,d)=>{var p;const h=(p=d.clipboardData)===null||p===void 0?void 0:p.getData("text/html");return o=d,i=!!(h!=null&&h.includes("data-pm-slice")),!1}}},appendTransaction:(f,d,p)=>{const h=f[0],m=h.getMeta("uiEvent")==="paste"&&!i,g=h.getMeta("uiEvent")==="drop"&&!a,y=h.getMeta("applyPasteRules"),N=!!y;if(!m&&!g&&!N)return;if(N){let{text:x}=y;typeof x=="string"?x=x:x=iv(De.from(x),p.schema);const{from:b}=y,S=b+x.length,C=TR(x);return u({rule:c,state:p,from:b,to:{b:S},pasteEvt:C})}const v=d.doc.content.findDiffStart(p.doc.content),w=d.doc.content.findDiffEnd(p.doc.content);if(!(!DR(v)||!w||v===w.b))return u({rule:c,state:p,from:v,to:w,pasteEvt:o})}}))}function OR(t){const e=t.filter((r,n)=>t.indexOf(r)!==n);return Array.from(new Set(e))}class As{constructor(e,r){this.splittableMarks=[],this.editor=r,this.extensions=As.resolve(e),this.schema=xR(this.extensions,r),this.setupExtensions()}static resolve(e){const r=As.sort(As.flatten(e)),n=OR(r.map(i=>i.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),r}static flatten(e){return e.map(r=>{const n={name:r.name,options:r.options,storage:r.storage},i=Re(r,"addExtensions",n);return i?[r,...this.flatten(i())]:r}).flat(10)}static sort(e){return e.sort((n,i)=>{const a=Re(n,"priority")||100,o=Re(i,"priority")||100;return a>o?-1:a<o?1:0})}get commands(){return this.extensions.reduce((e,r)=>{const n={name:r.name,options:r.options,storage:r.storage,editor:this.editor,type:Dh(r.name,this.schema)},i=Re(r,"addCommands",n);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,r=As.sort([...this.extensions].reverse()),n=[],i=[],a=r.map(o=>{const s={name:o.name,options:o.options,storage:o.storage,editor:e,type:Dh(o.name,this.schema)},u=[],l=Re(o,"addKeyboardShortcuts",s);let c={};if(o.type==="mark"&&Re(o,"exitable",s)&&(c.ArrowRight=()=>Bi.handleExit({editor:e,mark:o})),l){const m=Object.fromEntries(Object.entries(l()).map(([g,y])=>[g,()=>y({editor:e})]));c={...c,...m}}const f=YI(c);u.push(f);const d=Re(o,"addInputRules",s);F1(o,e.options.enableInputRules)&&d&&n.push(...d());const p=Re(o,"addPasteRules",s);F1(o,e.options.enablePasteRules)&&p&&i.push(...p());const h=Re(o,"addProseMirrorPlugins",s);if(h){const m=h();u.push(...m)}return u}).flat();return[AR({editor:e,rules:n}),..._R({editor:e,rules:i}),...a]}get attributes(){return WE(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:r}=sp(this.extensions);return Object.fromEntries(r.filter(n=>!!Re(n,"addNodeView")).map(n=>{const i=this.attributes.filter(u=>u.type===n.name),a={name:n.name,options:n.options,storage:n.storage,editor:e,type:Sr(n.name,this.schema)},o=Re(n,"addNodeView",a);if(!o)return[];const s=(u,l,c,f,d)=>{const p=km(u,i);return o()({node:u,view:l,getPos:c,decorations:f,innerDecorations:d,editor:e,extension:n,HTMLAttributes:p})};return[n.name,s]}))}setupExtensions(){this.extensions.forEach(e=>{var r;this.editor.extensionStorage[e.name]=e.storage;const n={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Dh(e.name,this.schema)};e.type==="mark"&&(!((r=yt(Re(e,"keepOnSplit",n)))!==null&&r!==void 0)||r)&&this.splittableMarks.push(e.name);const i=Re(e,"onBeforeCreate",n),a=Re(e,"onCreate",n),o=Re(e,"onUpdate",n),s=Re(e,"onSelectionUpdate",n),u=Re(e,"onTransaction",n),l=Re(e,"onFocus",n),c=Re(e,"onBlur",n),f=Re(e,"onDestroy",n);i&&this.editor.on("beforeCreate",i),a&&this.editor.on("create",a),o&&this.editor.on("update",o),s&&this.editor.on("selectionUpdate",s),u&&this.editor.on("transaction",u),l&&this.editor.on("focus",l),c&&this.editor.on("blur",c),f&&this.editor.on("destroy",f)})}}class Pr{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=yt(Re(this,"addOptions",{name:this.name}))),this.storage=yt(Re(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Pr(e)}configure(e={}){const r=this.extend({...this.config,addOptions:()=>lp(this.options,e)});return r.name=this.name,r.parent=this.parent,r}extend(e={}){const r=new Pr({...this.config,...e});return r.parent=this,this.child=r,r.name=e.name?e.name:r.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${r.name}".`),r.options=yt(Re(r,"addOptions",{name:r.name})),r.storage=yt(Re(r,"addStorage",{name:r.name,options:r.options})),r}}function GE(t,e,r){const{from:n,to:i}=e,{blockSeparator:a=`

`,textSerializers:o={}}=r||{};let s="";return t.nodesBetween(n,i,(u,l,c,f)=>{var d;u.isBlock&&l>n&&(s+=a);const p=o==null?void 0:o[u.type.name];if(p)return c&&(s+=p({node:u,pos:l,parent:c,index:f,range:e})),!1;u.isText&&(s+=(d=u==null?void 0:u.text)===null||d===void 0?void 0:d.slice(Math.max(n,l)-l,i-l))}),s}function KE(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,r])=>[e,r.spec.toText]))}const FR=Pr.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Cr({key:new Dn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:r}=t,{doc:n,selection:i}=e,{ranges:a}=i,o=Math.min(...a.map(c=>c.$from.pos)),s=Math.max(...a.map(c=>c.$to.pos)),u=KE(r);return GE(n,{from:o,to:s},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:u})}}})]}}),BR=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var r;t.isDestroyed||(e.dom.blur(),(r=window==null?void 0:window.getSelection())===null||r===void 0||r.removeAllRanges())}),!0),kR=(t=!1)=>({commands:e})=>e.setContent("",t),IR=()=>({state:t,tr:e,dispatch:r})=>{const{selection:n}=e,{ranges:i}=n;return r&&i.forEach(({$from:a,$to:o})=>{t.doc.nodesBetween(a.pos,o.pos,(s,u)=>{if(s.type.isText)return;const{doc:l,mapping:c}=e,f=l.resolve(c.map(u)),d=l.resolve(c.map(u+s.nodeSize)),p=f.blockRange(d);if(!p)return;const h=Qs(p);if(s.type.isTextblock){const{defaultType:m}=f.parent.contentMatchAt(f.index());e.setNodeMarkup(p.start,m)}(h||h===0)&&e.lift(p,h)})}),!0},RR=t=>e=>t(e),PR=()=>({state:t,dispatch:e})=>qE(t,e),$R=(t,e)=>({editor:r,tr:n})=>{const{state:i}=r,a=i.doc.slice(t.from,t.to);n.deleteRange(t.from,t.to);const o=n.mapping.map(e);return n.insert(o,a.content),n.setSelection(new at(n.doc.resolve(o-1))),!0},LR=()=>({tr:t,dispatch:e})=>{const{selection:r}=t,n=r.$anchor.node();if(n.content.size>0)return!1;const i=t.selection.$anchor;for(let a=i.depth;a>0;a-=1)if(i.node(a).type===n.type){if(e){const s=i.before(a),u=i.after(a);t.delete(s,u).scrollIntoView()}return!0}return!1},zR=t=>({tr:e,state:r,dispatch:n})=>{const i=Sr(t,r.schema),a=e.selection.$anchor;for(let o=a.depth;o>0;o-=1)if(a.node(o).type===i){if(n){const u=a.before(o),l=a.after(o);e.delete(u,l).scrollIntoView()}return!0}return!1},qR=t=>({tr:e,dispatch:r})=>{const{from:n,to:i}=t;return r&&e.delete(n,i),!0},UR=()=>({state:t,dispatch:e})=>Qg(t,e),HR=()=>({commands:t})=>t.keyboardShortcut("Enter"),VR=()=>({state:t,dispatch:e})=>rR(t,e);function Ff(t,e,r={strict:!0}){const n=Object.keys(e);return n.length?n.every(i=>r.strict?e[i]===t[i]:av(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function JE(t,e,r={}){return t.find(n=>n.type===e&&Ff(Object.fromEntries(Object.keys(r).map(i=>[i,n.attrs[i]])),r))}function B1(t,e,r={}){return!!JE(t,e,r)}function ov(t,e,r){var n;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(c=>c.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(c=>c.type===e)||(r=r||((n=i.node.marks[0])===null||n===void 0?void 0:n.attrs),!JE([...i.node.marks],e,r)))return;let o=i.index,s=t.start()+i.offset,u=o+1,l=s+i.node.nodeSize;for(;o>0&&B1([...t.parent.child(o-1).marks],e,r);)o-=1,s-=t.parent.child(o).nodeSize;for(;u<t.parent.childCount&&B1([...t.parent.child(u).marks],e,r);)l+=t.parent.child(u).nodeSize,u+=1;return{from:s,to:l}}function no(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const WR=(t,e={})=>({tr:r,state:n,dispatch:i})=>{const a=no(t,n.schema),{doc:o,selection:s}=r,{$from:u,from:l,to:c}=s;if(i){const f=ov(u,a,e);if(f&&f.from<=l&&f.to>=c){const d=at.create(o,f.from,f.to);r.setSelection(d)}}return!0},jR=t=>e=>{const r=typeof t=="function"?t(e):t;for(let n=0;n<r.length;n+=1)if(r[n](e))return!0;return!1};function YE(t){return t instanceof at}function Mo(t=0,e=0,r=0){return Math.min(Math.max(t,e),r)}function ZE(t,e=null){if(!e)return null;const r=gt.atStart(t),n=gt.atEnd(t);if(e==="start"||e===!0)return r;if(e==="end")return n;const i=r.from,a=n.to;return e==="all"?at.create(t,Mo(0,i,a),Mo(t.content.size,i,a)):at.create(t,Mo(e,i,a),Mo(e,i,a))}function GR(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function sv(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const KR=(t=null,e={})=>({editor:r,view:n,tr:i,dispatch:a})=>{e={scrollIntoView:!0,...e};const o=()=>{(sv()||GR())&&n.dom.focus(),requestAnimationFrame(()=>{r.isDestroyed||(n.focus(),e!=null&&e.scrollIntoView&&r.commands.scrollIntoView())})};if(n.hasFocus()&&t===null||t===!1)return!0;if(a&&t===null&&!YE(r.state.selection))return o(),!0;const s=ZE(i.doc,t)||r.state.selection,u=r.state.selection.eq(s);return a&&(u||i.setSelection(s),u&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},JR=(t,e)=>r=>t.every((n,i)=>e(n,{...r,index:i})),YR=(t,e)=>({tr:r,commands:n})=>n.insertContentAt({from:r.selection.from,to:r.selection.to},t,e),XE=t=>{const e=t.childNodes;for(let r=e.length-1;r>=0;r-=1){const n=e[r];n.nodeType===3&&n.nodeValue&&/^(\n\s\s|\n)$/.test(n.nodeValue)?t.removeChild(n):n.nodeType===1&&XE(n)}return t};function vc(t){const e=`<body>${t}</body>`,r=new window.DOMParser().parseFromString(e,"text/html").body;return XE(r)}function Bf(t,e,r){if(t instanceof Ua||t instanceof De)return t;r={slice:!0,parseOptions:{},...r};const n=typeof t=="object"&&t!==null,i=typeof t=="string";if(n)try{if(Array.isArray(t)&&t.length>0)return De.fromArray(t.map(s=>e.nodeFromJSON(s)));const o=e.nodeFromJSON(t);return r.errorOnInvalidContent&&o.check(),o}catch(a){if(r.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:a});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",a),Bf("",e,r)}if(i){if(r.errorOnInvalidContent){let o=!1,s="";const u=new kD({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:l=>(o=!0,s=typeof l=="string"?l:l.outerHTML,null)}]}})});if(r.slice?Ha.fromSchema(u).parseSlice(vc(t),r.parseOptions):Ha.fromSchema(u).parse(vc(t),r.parseOptions),r.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${s}`)})}const a=Ha.fromSchema(e);return r.slice?a.parseSlice(vc(t),r.parseOptions).content:a.parse(vc(t),r.parseOptions)}return Bf("",e,r)}function ZR(t,e,r){const n=t.steps.length-1;if(n<e)return;const i=t.steps[n];if(!(i instanceof br||i instanceof wr))return;const a=t.mapping.maps[n];let o=0;a.forEach((s,u,l,c)=>{o===0&&(o=c)}),t.setSelection(gt.near(t.doc.resolve(o),r))}const XR=t=>!("type"in t),QR=(t,e,r)=>({tr:n,dispatch:i,editor:a})=>{var o;if(i){r={parseOptions:a.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...r};let s;try{s=Bf(e,a.schema,{parseOptions:{preserveWhitespace:"full",...r.parseOptions},errorOnInvalidContent:(o=r.errorOnInvalidContent)!==null&&o!==void 0?o:a.options.enableContentCheck})}catch(h){return a.emit("contentError",{editor:a,error:h,disableCollaboration:()=>{a.storage.collaboration&&(a.storage.collaboration.isDisabled=!0)}}),!1}let{from:u,to:l}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},c=!0,f=!0;if((XR(s)?s:[s]).forEach(h=>{h.check(),c=c?h.isText&&h.marks.length===0:!1,f=f?h.isBlock:!1}),u===l&&f){const{parent:h}=n.doc.resolve(u);h.isTextblock&&!h.type.spec.code&&!h.childCount&&(u-=1,l+=1)}let p;if(c){if(Array.isArray(e))p=e.map(h=>h.text||"").join("");else if(e instanceof De){let h="";e.forEach(m=>{m.text&&(h+=m.text)}),p=h}else typeof e=="object"&&e&&e.text?p=e.text:p=e;n.insertText(p,u,l)}else p=s,n.replaceWith(u,l,p);r.updateSelection&&ZR(n,n.steps.length-1,-1),r.applyInputRules&&n.setMeta("applyInputRules",{from:u,text:p}),r.applyPasteRules&&n.setMeta("applyPasteRules",{from:u,text:p})}return!0},e5=()=>({state:t,dispatch:e})=>QI(t,e),t5=()=>({state:t,dispatch:e})=>eR(t,e),r5=()=>({state:t,dispatch:e})=>kE(t,e),n5=()=>({state:t,dispatch:e})=>$E(t,e),i5=()=>({state:t,dispatch:e,tr:r})=>{try{const n=Qd(t.doc,t.selection.$from.pos,-1);return n==null?!1:(r.join(n,2),e&&e(r),!0)}catch{return!1}},a5=()=>({state:t,dispatch:e,tr:r})=>{try{const n=Qd(t.doc,t.selection.$from.pos,1);return n==null?!1:(r.join(n,2),e&&e(r),!0)}catch{return!1}},o5=()=>({state:t,dispatch:e})=>ZI(t,e),s5=()=>({state:t,dispatch:e})=>XI(t,e);function QE(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function u5(t){const e=t.split(/-(?!$)/);let r=e[e.length-1];r==="Space"&&(r=" ");let n,i,a,o;for(let s=0;s<e.length-1;s+=1){const u=e[s];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))n=!0;else if(/^(c|ctrl|control)$/i.test(u))i=!0;else if(/^s(hift)?$/i.test(u))a=!0;else if(/^mod$/i.test(u))sv()||QE()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${u}`)}return n&&(r=`Alt-${r}`),i&&(r=`Ctrl-${r}`),o&&(r=`Meta-${r}`),a&&(r=`Shift-${r}`),r}const l5=t=>({editor:e,view:r,tr:n,dispatch:i})=>{const a=u5(t).split(/-(?!$)/),o=a.find(l=>!["Alt","Ctrl","Meta","Shift"].includes(l)),s=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:a.includes("Alt"),ctrlKey:a.includes("Ctrl"),metaKey:a.includes("Meta"),shiftKey:a.includes("Shift"),bubbles:!0,cancelable:!0}),u=e.captureTransaction(()=>{r.someProp("handleKeyDown",l=>l(r,s))});return u==null||u.steps.forEach(l=>{const c=l.map(n.mapping);c&&i&&n.maybeStep(c)}),!0};function vl(t,e,r={}){const{from:n,to:i,empty:a}=t.selection,o=e?Sr(e,t.schema):null,s=[];t.doc.nodesBetween(n,i,(f,d)=>{if(f.isText)return;const p=Math.max(n,d),h=Math.min(i,d+f.nodeSize);s.push({node:f,from:p,to:h})});const u=i-n,l=s.filter(f=>o?o.name===f.node.type.name:!0).filter(f=>Ff(f.node.attrs,r,{strict:!1}));return a?!!l.length:l.reduce((f,d)=>f+d.to-d.from,0)>=u}const c5=(t,e={})=>({state:r,dispatch:n})=>{const i=Sr(t,r.schema);return vl(r,i,e)?tR(r,n):!1},f5=()=>({state:t,dispatch:e})=>UE(t,e),d5=t=>({state:e,dispatch:r})=>{const n=Sr(t,e.schema);return pR(n)(e,r)},p5=()=>({state:t,dispatch:e})=>zE(t,e);function cp(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function k1(t,e){const r=typeof e=="string"?[e]:e;return Object.keys(t).reduce((n,i)=>(r.includes(i)||(n[i]=t[i]),n),{})}const h5=(t,e)=>({tr:r,state:n,dispatch:i})=>{let a=null,o=null;const s=cp(typeof t=="string"?t:t.name,n.schema);return s?(s==="node"&&(a=Sr(t,n.schema)),s==="mark"&&(o=no(t,n.schema)),i&&r.selection.ranges.forEach(u=>{n.doc.nodesBetween(u.$from.pos,u.$to.pos,(l,c)=>{a&&a===l.type&&r.setNodeMarkup(c,void 0,k1(l.attrs,e)),o&&l.marks.length&&l.marks.forEach(f=>{o===f.type&&r.addMark(c,c+l.nodeSize,o.create(k1(f.attrs,e)))})})}),!0):!1},m5=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),g5=()=>({tr:t,dispatch:e})=>{if(e){const r=new Tn(t.doc);t.setSelection(r)}return!0},v5=()=>({state:t,dispatch:e})=>RE(t,e),y5=()=>({state:t,dispatch:e})=>LE(t,e),b5=()=>({state:t,dispatch:e})=>aR(t,e),x5=()=>({state:t,dispatch:e})=>uR(t,e),w5=()=>({state:t,dispatch:e})=>sR(t,e);function Im(t,e,r={},n={}){return Bf(t,e,{slice:!1,parseOptions:r,errorOnInvalidContent:n.errorOnInvalidContent})}const N5=(t,e=!1,r={},n={})=>({editor:i,tr:a,dispatch:o,commands:s})=>{var u,l;const{doc:c}=a;if(r.preserveWhitespace!=="full"){const f=Im(t,i.schema,r,{errorOnInvalidContent:(u=n.errorOnInvalidContent)!==null&&u!==void 0?u:i.options.enableContentCheck});return o&&a.replaceWith(0,c.content.size,f).setMeta("preventUpdate",!e),!0}return o&&a.setMeta("preventUpdate",!e),s.insertContentAt({from:0,to:c.content.size},t,{parseOptions:r,errorOnInvalidContent:(l=n.errorOnInvalidContent)!==null&&l!==void 0?l:i.options.enableContentCheck})};function e2(t,e){const r=no(e,t.schema),{from:n,to:i,empty:a}=t.selection,o=[];a?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(n,i,u=>{o.push(...u.marks)});const s=o.find(u=>u.type.name===r.name);return s?{...s.attrs}:{}}function A5(t,e){const r=new YD(t);return e.forEach(n=>{n.steps.forEach(i=>{r.step(i)})}),r}function S5(t){for(let e=0;e<t.edgeCount;e+=1){const{type:r}=t.edge(e);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}function D5(t,e,r){const n=[];return t.nodesBetween(e.from,e.to,(i,a)=>{r(i)&&n.push({node:i,pos:a})}),n}function E5(t,e){for(let r=t.depth;r>0;r-=1){const n=t.node(r);if(e(n))return{pos:r>0?t.before(r):0,start:t.start(r),depth:r,node:n}}}function uv(t){return e=>E5(e.$from,t)}function C5(t,e){const r={from:0,to:t.content.size};return GE(t,r,e)}function M5(t,e){const r=Sr(e,t.schema),{from:n,to:i}=t.selection,a=[];t.doc.nodesBetween(n,i,s=>{a.push(s)});const o=a.reverse().find(s=>s.type.name===r.name);return o?{...o.attrs}:{}}function t2(t,e){const r=cp(typeof e=="string"?e:e.name,t.schema);return r==="node"?M5(t,e):r==="mark"?e2(t,e):{}}function T5(t,e=JSON.stringify){const r={};return t.filter(n=>{const i=e(n);return Object.prototype.hasOwnProperty.call(r,i)?!1:r[i]=!0})}function _5(t){const e=T5(t);return e.length===1?e:e.filter((r,n)=>!e.filter((a,o)=>o!==n).some(a=>r.oldRange.from>=a.oldRange.from&&r.oldRange.to<=a.oldRange.to&&r.newRange.from>=a.newRange.from&&r.newRange.to<=a.newRange.to))}function O5(t){const{mapping:e,steps:r}=t,n=[];return e.maps.forEach((i,a)=>{const o=[];if(i.ranges.length)i.forEach((s,u)=>{o.push({from:s,to:u})});else{const{from:s,to:u}=r[a];if(s===void 0||u===void 0)return;o.push({from:s,to:u})}o.forEach(({from:s,to:u})=>{const l=e.slice(a).map(s,-1),c=e.slice(a).map(u),f=e.invert().map(l,-1),d=e.invert().map(c);n.push({oldRange:{from:f,to:d},newRange:{from:l,to:c}})})}),_5(n)}function lv(t,e,r){const n=[];return t===e?r.resolve(t).marks().forEach(i=>{const a=r.resolve(t),o=ov(a,i.type);o&&n.push({mark:i,...o})}):r.nodesBetween(t,e,(i,a)=>{!i||(i==null?void 0:i.nodeSize)===void 0||n.push(...i.marks.map(o=>({from:a,to:a+i.nodeSize,mark:o})))}),n}function Qc(t,e,r){return Object.fromEntries(Object.entries(r).filter(([n])=>{const i=t.find(a=>a.type===e&&a.name===n);return i?i.attribute.keepOnSplit:!1}))}function Rm(t,e,r={}){const{empty:n,ranges:i}=t.selection,a=e?no(e,t.schema):null;if(n)return!!(t.storedMarks||t.selection.$from.marks()).filter(f=>a?a.name===f.type.name:!0).find(f=>Ff(f.attrs,r,{strict:!1}));let o=0;const s=[];if(i.forEach(({$from:f,$to:d})=>{const p=f.pos,h=d.pos;t.doc.nodesBetween(p,h,(m,g)=>{if(!m.isText&&!m.marks.length)return;const y=Math.max(p,g),N=Math.min(h,g+m.nodeSize),v=N-y;o+=v,s.push(...m.marks.map(w=>({mark:w,from:y,to:N})))})}),o===0)return!1;const u=s.filter(f=>a?a.name===f.mark.type.name:!0).filter(f=>Ff(f.mark.attrs,r,{strict:!1})).reduce((f,d)=>f+d.to-d.from,0),l=s.filter(f=>a?f.mark.type!==a&&f.mark.type.excludes(a):!0).reduce((f,d)=>f+d.to-d.from,0);return(u>0?u+l:u)>=o}function F5(t,e,r={}){if(!e)return vl(t,null,r)||Rm(t,null,r);const n=cp(e,t.schema);return n==="node"?vl(t,e,r):n==="mark"?Rm(t,e,r):!1}function I1(t,e){const{nodeExtensions:r}=sp(e),n=r.find(o=>o.name===t);if(!n)return!1;const i={name:n.name,options:n.options,storage:n.storage},a=yt(Re(n,"group",i));return typeof a!="string"?!1:a.split(" ").includes("list")}function fp(t,{checkChildren:e=!0,ignoreWhitespace:r=!1}={}){var n;if(r){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((n=t.text)!==null&&n!==void 0?n:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(a=>{i!==!1&&(fp(a,{ignoreWhitespace:r,checkChildren:e})||(i=!1))}),i}return!1}function B5(t){return t instanceof Ge}function k5(t,e,r){var n;const{selection:i}=e;let a=null;if(YE(i)&&(a=i.$cursor),a){const s=(n=t.storedMarks)!==null&&n!==void 0?n:a.marks();return!!r.isInSet(s)||!s.some(u=>u.type.excludes(r))}const{ranges:o}=i;return o.some(({$from:s,$to:u})=>{let l=s.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(r):!1;return t.doc.nodesBetween(s.pos,u.pos,(c,f,d)=>{if(l)return!1;if(c.isInline){const p=!d||d.type.allowsMarkType(r),h=!!r.isInSet(c.marks)||!c.marks.some(m=>m.type.excludes(r));l=p&&h}return!l}),l})}const I5=(t,e={})=>({tr:r,state:n,dispatch:i})=>{const{selection:a}=r,{empty:o,ranges:s}=a,u=no(t,n.schema);if(i)if(o){const l=e2(n,u);r.addStoredMark(u.create({...l,...e}))}else s.forEach(l=>{const c=l.$from.pos,f=l.$to.pos;n.doc.nodesBetween(c,f,(d,p)=>{const h=Math.max(p,c),m=Math.min(p+d.nodeSize,f);d.marks.find(y=>y.type===u)?d.marks.forEach(y=>{u===y.type&&r.addMark(h,m,u.create({...y.attrs,...e}))}):r.addMark(h,m,u.create(e))})});return k5(n,r,u)},R5=(t,e)=>({tr:r})=>(r.setMeta(t,e),!0),P5=(t,e={})=>({state:r,dispatch:n,chain:i})=>{const a=Sr(t,r.schema);let o;return r.selection.$anchor.sameParent(r.selection.$head)&&(o=r.selection.$anchor.parent.attrs),a.isTextblock?i().command(({commands:s})=>T1(a,{...o,...e})(r)?!0:s.clearNodes()).command(({state:s})=>T1(a,{...o,...e})(s,n)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},$5=t=>({tr:e,dispatch:r})=>{if(r){const{doc:n}=e,i=Mo(t,0,n.content.size),a=Ge.create(n,i);e.setSelection(a)}return!0},L5=t=>({tr:e,dispatch:r})=>{if(r){const{doc:n}=e,{from:i,to:a}=typeof t=="number"?{from:t,to:t}:t,o=at.atStart(n).from,s=at.atEnd(n).to,u=Mo(i,o,s),l=Mo(a,o,s),c=at.create(n,u,l);e.setSelection(c)}return!0},z5=t=>({state:e,dispatch:r})=>{const n=Sr(t,e.schema);return gR(n)(e,r)};function R1(t,e){const r=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(r){const n=r.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(n)}}const q5=({keepMarks:t=!0}={})=>({tr:e,state:r,dispatch:n,editor:i})=>{const{selection:a,doc:o}=e,{$from:s,$to:u}=a,l=i.extensionManager.attributes,c=Qc(l,s.node().type.name,s.node().attrs);if(a instanceof Ge&&a.node.isBlock)return!s.parentOffset||!oa(o,s.pos)?!1:(n&&(t&&R1(r,i.extensionManager.splittableMarks),e.split(s.pos).scrollIntoView()),!0);if(!s.parent.isBlock)return!1;const f=u.parentOffset===u.parent.content.size,d=s.depth===0?void 0:S5(s.node(-1).contentMatchAt(s.indexAfter(-1)));let p=f&&d?[{type:d,attrs:c}]:void 0,h=oa(e.doc,e.mapping.map(s.pos),1,p);if(!p&&!h&&oa(e.doc,e.mapping.map(s.pos),1,d?[{type:d}]:void 0)&&(h=!0,p=d?[{type:d,attrs:c}]:void 0),n){if(h&&(a instanceof at&&e.deleteSelection(),e.split(e.mapping.map(s.pos),1,p),d&&!f&&!s.parentOffset&&s.parent.type!==d)){const m=e.mapping.map(s.before()),g=e.doc.resolve(m);s.node(-1).canReplaceWith(g.index(),g.index()+1,d)&&e.setNodeMarkup(e.mapping.map(s.before()),d)}t&&R1(r,i.extensionManager.splittableMarks),e.scrollIntoView()}return h},U5=(t,e={})=>({tr:r,state:n,dispatch:i,editor:a})=>{var o;const s=Sr(t,n.schema),{$from:u,$to:l}=n.selection,c=n.selection.node;if(c&&c.isBlock||u.depth<2||!u.sameParent(l))return!1;const f=u.node(-1);if(f.type!==s)return!1;const d=a.extensionManager.attributes;if(u.parent.content.size===0&&u.node(-1).childCount===u.indexAfter(-1)){if(u.depth===2||u.node(-3).type!==s||u.index(-2)!==u.node(-2).childCount-1)return!1;if(i){let y=De.empty;const N=u.index(-1)?1:u.index(-2)?2:3;for(let C=u.depth-N;C>=u.depth-3;C-=1)y=De.from(u.node(C).copy(y));const v=u.indexAfter(-1)<u.node(-2).childCount?1:u.indexAfter(-2)<u.node(-3).childCount?2:3,w={...Qc(d,u.node().type.name,u.node().attrs),...e},x=((o=s.contentMatch.defaultType)===null||o===void 0?void 0:o.createAndFill(w))||void 0;y=y.append(De.from(s.createAndFill(null,x)||void 0));const b=u.before(u.depth-(N-1));r.replace(b,u.after(-v),new Be(y,4-N,0));let S=-1;r.doc.nodesBetween(b,r.doc.content.size,(C,A)=>{if(S>-1)return!1;C.isTextblock&&C.content.size===0&&(S=A+1)}),S>-1&&r.setSelection(at.near(r.doc.resolve(S))),r.scrollIntoView()}return!0}const p=l.pos===u.end()?f.contentMatchAt(0).defaultType:null,h={...Qc(d,f.type.name,f.attrs),...e},m={...Qc(d,u.node().type.name,u.node().attrs),...e};r.delete(u.pos,l.pos);const g=p?[{type:s,attrs:h},{type:p,attrs:m}]:[{type:s,attrs:h}];if(!oa(r.doc,u.pos,2))return!1;if(i){const{selection:y,storedMarks:N}=n,{splittableMarks:v}=a.extensionManager,w=N||y.$to.parentOffset&&y.$from.marks();if(r.split(u.pos,2,g).scrollIntoView(),!w||!i)return!0;const x=w.filter(b=>v.includes(b.type.name));r.ensureMarks(x)}return!0},Eh=(t,e)=>{const r=uv(o=>o.type===e)(t.selection);if(!r)return!0;const n=t.doc.resolve(Math.max(0,r.pos-1)).before(r.depth);if(n===void 0)return!0;const i=t.doc.nodeAt(n);return r.node.type===(i==null?void 0:i.type)&&to(t.doc,r.pos)&&t.join(r.pos),!0},Ch=(t,e)=>{const r=uv(o=>o.type===e)(t.selection);if(!r)return!0;const n=t.doc.resolve(r.start).after(r.depth);if(n===void 0)return!0;const i=t.doc.nodeAt(n);return r.node.type===(i==null?void 0:i.type)&&to(t.doc,n)&&t.join(n),!0},H5=(t,e,r,n={})=>({editor:i,tr:a,state:o,dispatch:s,chain:u,commands:l,can:c})=>{const{extensions:f,splittableMarks:d}=i.extensionManager,p=Sr(t,o.schema),h=Sr(e,o.schema),{selection:m,storedMarks:g}=o,{$from:y,$to:N}=m,v=y.blockRange(N),w=g||m.$to.parentOffset&&m.$from.marks();if(!v)return!1;const x=uv(b=>I1(b.type.name,f))(m);if(v.depth>=1&&x&&v.depth-x.depth<=1){if(x.node.type===p)return l.liftListItem(h);if(I1(x.node.type.name,f)&&p.validContent(x.node.content)&&s)return u().command(()=>(a.setNodeMarkup(x.pos,p),!0)).command(()=>Eh(a,p)).command(()=>Ch(a,p)).run()}return!r||!w||!s?u().command(()=>c().wrapInList(p,n)?!0:l.clearNodes()).wrapInList(p,n).command(()=>Eh(a,p)).command(()=>Ch(a,p)).run():u().command(()=>{const b=c().wrapInList(p,n),S=w.filter(C=>d.includes(C.type.name));return a.ensureMarks(S),b?!0:l.clearNodes()}).wrapInList(p,n).command(()=>Eh(a,p)).command(()=>Ch(a,p)).run()},V5=(t,e={},r={})=>({state:n,commands:i})=>{const{extendEmptyMarkRange:a=!1}=r,o=no(t,n.schema);return Rm(n,o,e)?i.unsetMark(o,{extendEmptyMarkRange:a}):i.setMark(o,e)},W5=(t,e,r={})=>({state:n,commands:i})=>{const a=Sr(t,n.schema),o=Sr(e,n.schema),s=vl(n,a,r);let u;return n.selection.$anchor.sameParent(n.selection.$head)&&(u=n.selection.$anchor.parent.attrs),s?i.setNode(o,u):i.setNode(a,{...u,...r})},j5=(t,e={})=>({state:r,commands:n})=>{const i=Sr(t,r.schema);return vl(r,i,e)?n.lift(i):n.wrapIn(i,e)},G5=()=>({state:t,dispatch:e})=>{const r=t.plugins;for(let n=0;n<r.length;n+=1){const i=r[n];let a;if(i.spec.isInputRules&&(a=i.getState(t))){if(e){const o=t.tr,s=a.transform;for(let u=s.steps.length-1;u>=0;u-=1)o.step(s.steps[u].invert(s.docs[u]));if(a.text){const u=o.doc.resolve(a.from).marks();o.replaceWith(a.from,a.to,t.schema.text(a.text,u))}else o.delete(a.from,a.to)}return!0}}return!1},K5=()=>({tr:t,dispatch:e})=>{const{selection:r}=t,{empty:n,ranges:i}=r;return n||e&&i.forEach(a=>{t.removeMark(a.$from.pos,a.$to.pos)}),!0},J5=(t,e={})=>({tr:r,state:n,dispatch:i})=>{var a;const{extendEmptyMarkRange:o=!1}=e,{selection:s}=r,u=no(t,n.schema),{$from:l,empty:c,ranges:f}=s;if(!i)return!0;if(c&&o){let{from:d,to:p}=s;const h=(a=l.marks().find(g=>g.type===u))===null||a===void 0?void 0:a.attrs,m=ov(l,u,h);m&&(d=m.from,p=m.to),r.removeMark(d,p,u)}else f.forEach(d=>{r.removeMark(d.$from.pos,d.$to.pos,u)});return r.removeStoredMark(u),!0},Y5=(t,e={})=>({tr:r,state:n,dispatch:i})=>{let a=null,o=null;const s=cp(typeof t=="string"?t:t.name,n.schema);return s?(s==="node"&&(a=Sr(t,n.schema)),s==="mark"&&(o=no(t,n.schema)),i&&r.selection.ranges.forEach(u=>{const l=u.$from.pos,c=u.$to.pos;let f,d,p,h;r.selection.empty?n.doc.nodesBetween(l,c,(m,g)=>{a&&a===m.type&&(p=Math.max(g,l),h=Math.min(g+m.nodeSize,c),f=g,d=m)}):n.doc.nodesBetween(l,c,(m,g)=>{g<l&&a&&a===m.type&&(p=Math.max(g,l),h=Math.min(g+m.nodeSize,c),f=g,d=m),g>=l&&g<=c&&(a&&a===m.type&&r.setNodeMarkup(g,void 0,{...m.attrs,...e}),o&&m.marks.length&&m.marks.forEach(y=>{if(o===y.type){const N=Math.max(g,l),v=Math.min(g+m.nodeSize,c);r.addMark(N,v,o.create({...y.attrs,...e}))}}))}),d&&(f!==void 0&&r.setNodeMarkup(f,void 0,{...d.attrs,...e}),o&&d.marks.length&&d.marks.forEach(m=>{o===m.type&&r.addMark(p,h,o.create({...m.attrs,...e}))}))}),!0):!1},Z5=(t,e={})=>({state:r,dispatch:n})=>{const i=Sr(t,r.schema);return lR(i,e)(r,n)},X5=(t,e={})=>({state:r,dispatch:n})=>{const i=Sr(t,r.schema);return cR(i,e)(r,n)};var Q5=Object.freeze({__proto__:null,blur:BR,clearContent:kR,clearNodes:IR,command:RR,createParagraphNear:PR,cut:$R,deleteCurrentNode:LR,deleteNode:zR,deleteRange:qR,deleteSelection:UR,enter:HR,exitCode:VR,extendMarkRange:WR,first:jR,focus:KR,forEach:JR,insertContent:YR,insertContentAt:QR,joinBackward:r5,joinDown:t5,joinForward:n5,joinItemBackward:i5,joinItemForward:a5,joinTextblockBackward:o5,joinTextblockForward:s5,joinUp:e5,keyboardShortcut:l5,lift:c5,liftEmptyBlock:f5,liftListItem:d5,newlineInCode:p5,resetAttributes:h5,scrollIntoView:m5,selectAll:g5,selectNodeBackward:v5,selectNodeForward:y5,selectParentNode:b5,selectTextblockEnd:x5,selectTextblockStart:w5,setContent:N5,setMark:I5,setMeta:R5,setNode:P5,setNodeSelection:$5,setTextSelection:L5,sinkListItem:z5,splitBlock:q5,splitListItem:U5,toggleList:H5,toggleMark:V5,toggleNode:W5,toggleWrap:j5,undoInputRule:G5,unsetAllMarks:K5,unsetMark:J5,updateAttributes:Y5,wrapIn:Z5,wrapInList:X5});const eP=Pr.create({name:"commands",addCommands(){return{...Q5}}}),tP=Pr.create({name:"drop",addProseMirrorPlugins(){return[new Cr({key:new Dn("tiptapDrop"),props:{handleDrop:(t,e,r,n)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:r,moved:n})}}})]}}),rP=Pr.create({name:"editable",addProseMirrorPlugins(){return[new Cr({key:new Dn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),nP=new Dn("focusEvents"),iP=Pr.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Cr({key:nP,props:{handleDOMEvents:{focus:(e,r)=>{t.isFocused=!0;const n=t.state.tr.setMeta("focus",{event:r}).setMeta("addToHistory",!1);return e.dispatch(n),!1},blur:(e,r)=>{t.isFocused=!1;const n=t.state.tr.setMeta("blur",{event:r}).setMeta("addToHistory",!1);return e.dispatch(n),!1}}}})]}}),aP=Pr.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:s})=>{const{selection:u,doc:l}=s,{empty:c,$anchor:f}=u,{pos:d,parent:p}=f,h=f.parent.isTextblock&&d>0?s.doc.resolve(d-1):f,m=h.parent.type.spec.isolating,g=f.pos-f.parentOffset,y=m&&h.parent.childCount===1?g===f.pos:gt.atStart(l).from===d;return!c||!p.type.isTextblock||p.textContent.length||!y||y&&f.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),n={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...n},a={...n,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return sv()||QE()?a:i},addProseMirrorPlugins(){return[new Cr({key:new Dn("clearDocument"),appendTransaction:(t,e,r)=>{if(t.some(m=>m.getMeta("composition")))return;const n=t.some(m=>m.docChanged)&&!e.doc.eq(r.doc),i=t.some(m=>m.getMeta("preventClearDocument"));if(!n||i)return;const{empty:a,from:o,to:s}=e.selection,u=gt.atStart(e.doc).from,l=gt.atEnd(e.doc).to;if(a||!(o===u&&s===l)||!fp(r.doc))return;const d=r.tr,p=ap({state:r,transaction:d}),{commands:h}=new op({editor:this.editor,state:p});if(h.clearNodes(),!!d.steps.length)return d}})]}}),oP=Pr.create({name:"paste",addProseMirrorPlugins(){return[new Cr({key:new Dn("tiptapPaste"),props:{handlePaste:(t,e,r)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:r})}}})]}}),sP=Pr.create({name:"tabindex",addProseMirrorPlugins(){return[new Cr({key:new Dn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class So{get name(){return this.node.type.name}constructor(e,r,n=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=n,this.resolvedPos=e,this.editor=r,this.currentNode=i}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let r=this.from,n=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}r=this.from+1,n=this.to-1}this.editor.commands.insertContentAt({from:r,to:n},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),r=this.resolvedPos.doc.resolve(e);return new So(r,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new So(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new So(e,this.editor)}get children(){const e=[];return this.node.content.forEach((r,n)=>{const i=r.isBlock&&!r.isTextblock,a=r.isAtom&&!r.isText,o=this.pos+n+(a?0:1),s=this.resolvedPos.doc.resolve(o);if(!i&&s.depth<=this.depth)return;const u=new So(s,this.editor,i,i?r:null);i&&(u.actualDepth=this.depth+1),e.push(new So(s,this.editor,i,i?r:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,r={}){let n=null,i=this.parent;for(;i&&!n;){if(i.node.type.name===e)if(Object.keys(r).length>0){const a=i.node.attrs,o=Object.keys(r);for(let s=0;s<o.length;s+=1){const u=o[s];if(a[u]!==r[u])break}}else n=i;i=i.parent}return n}querySelector(e,r={}){return this.querySelectorAll(e,r,!0)[0]||null}querySelectorAll(e,r={},n=!1){let i=[];if(!this.children||this.children.length===0)return i;const a=Object.keys(r);return this.children.forEach(o=>{n&&i.length>0||(o.node.type.name===e&&a.every(u=>r[u]===o.node.attrs[u])&&i.push(o),!(n&&i.length>0)&&(i=i.concat(o.querySelectorAll(e,r,n))))}),i}setAttribute(e){const{tr:r}=this.editor.state;r.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(r)}}const uP=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function lP(t,e,r){const n=document.querySelector("style[data-tiptap-style]");if(n!==null)return n;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}let cP=class extends vR{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:n,moved:i})=>this.options.onDrop(r,n,i)),this.on("paste",({event:r,slice:n})=>this.options.onPaste(r,n)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=lP(uP,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,r=!0){this.setOptions({editable:e}),r&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,r){const n=jE(r)?r(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:n});return this.view.updateState(i),i}unregisterPlugin(e){if(this.isDestroyed)return;const r=this.state.plugins;let n=r;if([].concat(e).forEach(a=>{const o=typeof a=="string"?`${a}$`:a.key;n=n.filter(s=>!s.key.startsWith(o))}),r.length===n.length)return;const i=this.state.reconfigure({plugins:n});return this.view.updateState(i),i}createExtensionManager(){var e,r;const i=[...this.options.enableCoreExtensions?[rP,FR.configure({blockSeparator:(r=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||r===void 0?void 0:r.blockSeparator}),eP,iP,aP,sP,tP,oP].filter(a=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[a.name]!==!1:!0):[],...this.options.extensions].filter(a=>["extension","node","mark"].includes(a==null?void 0:a.type));this.extensionManager=new As(i,this)}createCommandManager(){this.commandManager=new op({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let r;try{r=Im(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(o){if(!(o instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(o.message))throw o;this.emit("contentError",{editor:this,error:o,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(s=>s.name!=="collaboration"),this.createExtensionManager()}}),r=Im(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const n=ZE(r,this.options.autofocus);this.view=new zI(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:Ns.create({doc:r,selection:n||void 0})});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.prependClass();const a=this.view.dom;a.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const r=this.capturedTransaction;return this.capturedTransaction=null,r}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(o=>{var s;return(s=this.capturedTransaction)===null||s===void 0?void 0:s.step(o)});return}const r=this.state.apply(e),n=!this.state.selection.eq(r.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:r}),this.view.updateState(r),this.emit("transaction",{editor:this,transaction:e}),n&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),a=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),a&&this.emit("blur",{editor:this,event:a.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return t2(this.state,e)}isActive(e,r){const n=typeof e=="string"?e:null,i=typeof e=="string"?r:e;return F5(this.state,n,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return iv(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:r=`

`,textSerializers:n={}}=e||{};return C5(this.state.doc,{blockSeparator:r,textSerializers:{...KE(this.schema),...n}})}get isEmpty(){return fp(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,r){var n;return((n=this.$doc)===null||n===void 0?void 0:n.querySelector(e,r))||null}$nodes(e,r){var n;return((n=this.$doc)===null||n===void 0?void 0:n.querySelectorAll(e,r))||null}$pos(e){const r=this.state.doc.resolve(e);return new So(r,this)}get $doc(){return this.$pos(0)}};function Hs(t){return new up({find:t.find,handler:({state:e,range:r,match:n})=>{const i=yt(t.getAttributes,void 0,n);if(i===!1||i===null)return null;const{tr:a}=e,o=n[n.length-1],s=n[0];if(o){const u=s.search(/\S/),l=r.from+s.indexOf(o),c=l+o.length;if(lv(r.from,r.to,e.doc).filter(p=>p.mark.type.excluded.find(m=>m===t.type&&m!==p.mark.type)).filter(p=>p.to>l).length)return null;c<r.to&&a.delete(c,r.to),l>r.from&&a.delete(r.from+u,l);const d=r.from+u+o.length;a.addMark(r.from+u,d,t.type.create(i||{})),a.removeStoredMark(t.type)}}})}function fP(t){return new up({find:t.find,handler:({state:e,range:r,match:n})=>{const i=yt(t.getAttributes,void 0,n)||{},{tr:a}=e,o=r.from;let s=r.to;const u=t.type.create(i);if(n[1]){const l=n[0].lastIndexOf(n[1]);let c=o+l;c>s?c=s:s=c+n[1].length;const f=n[0][n[0].length-1];a.insertText(f,o+n[0].length-1),a.replaceWith(c,s,u)}else if(n[0]){const l=t.type.isInline?o:o-1;a.insert(l,t.type.create(i)).delete(a.mapping.map(o),a.mapping.map(s))}a.scrollIntoView()}})}function Pm(t){return new up({find:t.find,handler:({state:e,range:r,match:n})=>{const i=e.doc.resolve(r.from),a=yt(t.getAttributes,void 0,n)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(r.from,r.to).setBlockType(r.from,r.from,t.type,a)}})}function yl(t){return new up({find:t.find,handler:({state:e,range:r,match:n,chain:i})=>{const a=yt(t.getAttributes,void 0,n)||{},o=e.tr.delete(r.from,r.to),u=o.doc.resolve(r.from).blockRange(),l=u&&Ug(u,t.type,a);if(!l)return null;if(o.wrap(u,l),t.keepMarks&&t.editor){const{selection:f,storedMarks:d}=e,{splittableMarks:p}=t.editor.extensionManager,h=d||f.$to.parentOffset&&f.$from.marks();if(h){const m=h.filter(g=>p.includes(g.type.name));o.ensureMarks(m)}}if(t.keepAttributes){const f=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(f,a).run()}const c=o.doc.resolve(r.from-1).nodeBefore;c&&c.type===t.type&&to(o.doc,r.from-1)&&(!t.joinPredicate||t.joinPredicate(n,c))&&o.join(r.from-1)}})}let fi=class $m{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=yt(Re(this,"addOptions",{name:this.name}))),this.storage=yt(Re(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new $m(e)}configure(e={}){const r=this.extend({...this.config,addOptions:()=>lp(this.options,e)});return r.name=this.name,r.parent=this.parent,r}extend(e={}){const r=new $m(e);return r.parent=this,this.child=r,r.name=e.name?e.name:r.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${r.name}".`),r.options=yt(Re(r,"addOptions",{name:r.name})),r.storage=yt(Re(r,"addStorage",{name:r.name,options:r.options})),r}};function Vo(t){return new ER({find:t.find,handler:({state:e,range:r,match:n,pasteEvent:i})=>{const a=yt(t.getAttributes,void 0,n,i);if(a===!1||a===null)return null;const{tr:o}=e,s=n[n.length-1],u=n[0];let l=r.to;if(s){const c=u.search(/\S/),f=r.from+u.indexOf(s),d=f+s.length;if(lv(r.from,r.to,e.doc).filter(h=>h.mark.type.excluded.find(g=>g===t.type&&g!==h.mark.type)).filter(h=>h.to>f).length)return null;d<r.to&&o.delete(d,r.to),f>r.from&&o.delete(r.from+c,f),l=r.from+c+s.length,o.addMark(r.from+c,l,t.type.create(a||{})),o.removeStoredMark(t.type)}}})}function P1(t){return t_((e,r)=>({get(){return e(),t},set(n){t=n,requestAnimationFrame(()=>{requestAnimationFrame(()=>{r()})})}}))}class dP extends cP{constructor(e={}){return super(e),this.contentComponent=null,this.appContext=null,this.reactiveState=P1(this.view.state),this.reactiveExtensionStorage=P1(this.extensionStorage),this.on("beforeTransaction",({nextState:r})=>{this.reactiveState.value=r,this.reactiveExtensionStorage.value=this.extensionStorage}),aS(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(e,r){const n=super.registerPlugin(e,r);return this.reactiveState&&(this.reactiveState.value=n),n}unregisterPlugin(e){const r=super.unregisterPlugin(e);return this.reactiveState&&r&&(this.reactiveState.value=r),r}}const pP=Er({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(t){const e=ut(),r=HS();return G_(()=>{const n=t.editor;n&&n.options.element&&e.value&&Cg(()=>{if(!e.value||!n.options.element.firstChild)return;const i=Oe(e.value);e.value.append(...n.options.element.childNodes),n.contentComponent=r.ctx._,r&&(n.appContext={...r.appContext,provides:r.provides}),n.setOptions({element:i}),n.createNodeViews()})}),Vd(()=>{const n=t.editor;n&&(n.contentComponent=null,n.appContext=null)}),{rootEl:e}},render(){return Kd("div",{ref:t=>{this.rootEl=t}})}}),hP=/^\s*>\s$/,mP=fi.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",Dr(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[yl({find:hP,type:this.type})]}}),gP=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,vP=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,yP=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,bP=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,xP=Bi.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",Dr(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Hs({find:gP,type:this.type}),Hs({find:yP,type:this.type})]},addPasteRules(){return[Vo({find:vP,type:this.type}),Vo({find:bP,type:this.type})]}}),wP="listItem",$1="textStyle",L1=/^\s*([-+*])\s$/,NP=fi.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Dr(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(wP,this.editor.getAttributes($1)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=yl({find:L1,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=yl({find:L1,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes($1),editor:this.editor})),[t]}}),AP=/(^|[^`])`([^`]+)`(?!`)/,SP=/(^|[^`])`([^`]+)`(?!`)/g,DP=Bi.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Dr(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Hs({find:AP,type:this.type})]},addPasteRules(){return[Vo({find:SP,type:this.type})]}}),EP=/^```([a-z]+)?[\s\n]$/,CP=/^~~~([a-z]+)?[\s\n]$/,MP=fi.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:r}=this.options,a=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(o=>o.startsWith(r)).map(o=>o.replace(r,""))[0];return a||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Dr(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,r=e.pos===1;return!t||e.parent.type.name!==this.name?!1:r||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:r}=e,{$from:n,empty:i}=r;if(!i||n.parent.type!==this.type)return!1;const a=n.parentOffset===n.parent.nodeSize-2,o=n.parent.textContent.endsWith(`

`);return!a||!o?!1:t.chain().command(({tr:s})=>(s.delete(n.pos-2,n.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:r,doc:n}=e,{$from:i,empty:a}=r;if(!a||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const s=i.after();return s===void 0?!1:n.nodeAt(s)?t.commands.command(({tr:l})=>(l.setSelection(gt.near(n.resolve(s))),!0)):t.commands.exitCode()}}},addInputRules(){return[Pm({find:EP,type:this.type,getAttributes:t=>({language:t[1]})}),Pm({find:CP,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Cr({key:new Dn("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const r=e.clipboardData.getData("text/plain"),n=e.clipboardData.getData("vscode-editor-data"),i=n?JSON.parse(n):void 0,a=i==null?void 0:i.mode;if(!r||!a)return!1;const{tr:o,schema:s}=t.state,u=s.text(r.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:a},u)),o.selection.$from.parent.type!==this.type&&o.setSelection(at.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),TP=fi.create({name:"doc",topNode:!0,content:"block+"});function _P(t={}){return new Cr({view(e){return new OP(e,t)}})}class OP{constructor(e,r){var n;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(n=r.width)!==null&&n!==void 0?n:1,this.color=r.color===!1?void 0:r.color||"black",this.class=r.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let a=o=>{this[i](o)};return e.dom.addEventListener(i,a),{name:i,handler:a}})}destroy(){this.handlers.forEach(({name:e,handler:r})=>this.editorView.dom.removeEventListener(e,r))}update(e,r){this.cursorPos!=null&&r.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),r=!e.parent.inlineContent,n,i=this.editorView.dom,a=i.getBoundingClientRect(),o=a.width/i.offsetWidth,s=a.height/i.offsetHeight;if(r){let f=e.nodeBefore,d=e.nodeAfter;if(f||d){let p=this.editorView.nodeDOM(this.cursorPos-(f?f.nodeSize:0));if(p){let h=p.getBoundingClientRect(),m=f?h.bottom:h.top;f&&d&&(m=(m+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let g=this.width/2*s;n={left:h.left,right:h.right,top:m-g,bottom:m+g}}}}if(!n){let f=this.editorView.coordsAtPos(this.cursorPos),d=this.width/2*o;n={left:f.left-d,right:f.left+d,top:f.top,bottom:f.bottom}}let u=this.editorView.dom.offsetParent;this.element||(this.element=u.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",r),this.element.classList.toggle("prosemirror-dropcursor-inline",!r);let l,c;if(!u||u==document.body&&getComputedStyle(u).position=="static")l=-pageXOffset,c=-pageYOffset;else{let f=u.getBoundingClientRect(),d=f.width/u.offsetWidth,p=f.height/u.offsetHeight;l=f.left-u.scrollLeft*d,c=f.top-u.scrollTop*p}this.element.style.left=(n.left-l)/o+"px",this.element.style.top=(n.top-c)/s+"px",this.element.style.width=(n.right-n.left)/o+"px",this.element.style.height=(n.bottom-n.top)/s+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let r=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),n=r&&r.inside>=0&&this.editorView.state.doc.nodeAt(r.inside),i=n&&n.type.spec.disableDropCursor,a=typeof i=="function"?i(this.editorView,r,e):i;if(r&&!a){let o=r.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let s=WD(this.editorView.state.doc,o,this.editorView.dragging.slice);s!=null&&(o=s)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const FP=Pr.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[_P(this.options)]}});class Xt extends gt{constructor(e){super(e,e)}map(e,r){let n=e.resolve(r.map(this.head));return Xt.valid(n)?new Xt(n):gt.near(n)}content(){return Be.empty}eq(e){return e instanceof Xt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Xt(e.resolve(r.pos))}getBookmark(){return new cv(this.anchor)}static valid(e){let r=e.parent;if(r.isTextblock||!BP(e)||!kP(e))return!1;let n=r.type.spec.allowGapCursor;if(n!=null)return n;let i=r.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,r,n=!1){e:for(;;){if(!n&&Xt.valid(e))return e;let i=e.pos,a=null;for(let o=e.depth;;o--){let s=e.node(o);if(r>0?e.indexAfter(o)<s.childCount:e.index(o)>0){a=s.child(r>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=r;let u=e.doc.resolve(i);if(Xt.valid(u))return u}for(;;){let o=r>0?a.firstChild:a.lastChild;if(!o){if(a.isAtom&&!a.isText&&!Ge.isSelectable(a)){e=e.doc.resolve(i+a.nodeSize*r),n=!1;continue e}break}a=o,i+=r;let s=e.doc.resolve(i);if(Xt.valid(s))return s}return null}}}Xt.prototype.visible=!1;Xt.findFrom=Xt.findGapCursorFrom;gt.jsonID("gapcursor",Xt);class cv{constructor(e){this.pos=e}map(e){return new cv(e.map(this.pos))}resolve(e){let r=e.resolve(this.pos);return Xt.valid(r)?new Xt(r):gt.near(r)}}function BP(t){for(let e=t.depth;e>=0;e--){let r=t.index(e),n=t.node(e);if(r==0){if(n.type.spec.isolating)return!0;continue}for(let i=n.child(r-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function kP(t){for(let e=t.depth;e>=0;e--){let r=t.indexAfter(e),n=t.node(e);if(r==n.childCount){if(n.type.spec.isolating)return!0;continue}for(let i=n.child(r);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function IP(){return new Cr({props:{decorations:LP,createSelectionBetween(t,e,r){return e.pos==r.pos&&Xt.valid(r)?new Xt(r):null},handleClick:PP,handleKeyDown:RP,handleDOMEvents:{beforeinput:$P}}})}const RP=FE({ArrowLeft:yc("horiz",-1),ArrowRight:yc("horiz",1),ArrowUp:yc("vert",-1),ArrowDown:yc("vert",1)});function yc(t,e){const r=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(n,i,a){let o=n.selection,s=e>0?o.$to:o.$from,u=o.empty;if(o instanceof at){if(!a.endOfTextblock(r)||s.depth==0)return!1;u=!1,s=n.doc.resolve(e>0?s.after():s.before())}let l=Xt.findGapCursorFrom(s,e,u);return l?(i&&i(n.tr.setSelection(new Xt(l))),!0):!1}}function PP(t,e,r){if(!t||!t.editable)return!1;let n=t.state.doc.resolve(e);if(!Xt.valid(n))return!1;let i=t.posAtCoords({left:r.clientX,top:r.clientY});return i&&i.inside>-1&&Ge.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Xt(n))),!0)}function $P(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Xt))return!1;let{$from:r}=t.state.selection,n=r.parent.contentMatchAt(r.index()).findWrapping(t.state.schema.nodes.text);if(!n)return!1;let i=De.empty;for(let o=n.length-1;o>=0;o--)i=De.from(n[o].createAndFill(null,i));let a=t.state.tr.replace(r.pos,r.pos,new Be(i,0,0));return a.setSelection(at.near(a.doc.resolve(r.pos+1))),t.dispatch(a),!1}function LP(t){if(!(t.selection instanceof Xt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",ur.create(t.doc,[Mn.widget(t.selection.head,e,{key:"gapcursor"})])}const zP=Pr.create({name:"gapCursor",addProseMirrorPlugins(){return[IP()]},extendNodeSchema(t){var e;const r={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=yt(Re(t,"allowGapCursor",r)))!==null&&e!==void 0?e:null}}}),qP=fi.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Dr(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:r,editor:n})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:a}=r;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:s}=n.extensionManager,u=a||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:l,dispatch:c})=>{if(c&&u&&o){const f=u.filter(d=>s.includes(d.type.name));l.ensureMarks(f)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),UP=fi.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Dr(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>Pm({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var kf=200,Nr=function(){};Nr.prototype.append=function(e){return e.length?(e=Nr.from(e),!this.length&&e||e.length<kf&&this.leafAppend(e)||this.length<kf&&e.leafPrepend(this)||this.appendInner(e)):this};Nr.prototype.prepend=function(e){return e.length?Nr.from(e).append(this):this};Nr.prototype.appendInner=function(e){return new HP(this,e)};Nr.prototype.slice=function(e,r){return e===void 0&&(e=0),r===void 0&&(r=this.length),e>=r?Nr.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,r))};Nr.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Nr.prototype.forEach=function(e,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length),r<=n?this.forEachInner(e,r,n,0):this.forEachInvertedInner(e,r,n,0)};Nr.prototype.map=function(e,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length);var i=[];return this.forEach(function(a,o){return i.push(e(a,o))},r,n),i};Nr.from=function(e){return e instanceof Nr?e:e&&e.length?new r2(e):Nr.empty};var r2=function(t){function e(n){t.call(this),this.values=n}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,a){return i==0&&a==this.length?this:new e(this.values.slice(i,a))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,a,o,s){for(var u=a;u<o;u++)if(i(this.values[u],s+u)===!1)return!1},e.prototype.forEachInvertedInner=function(i,a,o,s){for(var u=a-1;u>=o;u--)if(i(this.values[u],s+u)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=kf)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=kf)return new e(i.flatten().concat(this.values))},r.length.get=function(){return this.values.length},r.depth.get=function(){return 0},Object.defineProperties(e.prototype,r),e}(Nr);Nr.empty=new r2([]);var HP=function(t){function e(r,n){t.call(this),this.left=r,this.right=n,this.length=r.length+n.length,this.depth=Math.max(r.depth,n.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(n){return n<this.left.length?this.left.get(n):this.right.get(n-this.left.length)},e.prototype.forEachInner=function(n,i,a,o){var s=this.left.length;if(i<s&&this.left.forEachInner(n,i,Math.min(a,s),o)===!1||a>s&&this.right.forEachInner(n,Math.max(i-s,0),Math.min(this.length,a)-s,o+s)===!1)return!1},e.prototype.forEachInvertedInner=function(n,i,a,o){var s=this.left.length;if(i>s&&this.right.forEachInvertedInner(n,i-s,Math.max(a,s)-s,o+s)===!1||a<s&&this.left.forEachInvertedInner(n,Math.min(i,s),a,o)===!1)return!1},e.prototype.sliceInner=function(n,i){if(n==0&&i==this.length)return this;var a=this.left.length;return i<=a?this.left.slice(n,i):n>=a?this.right.slice(n-a,i-a):this.left.slice(n,a).append(this.right.slice(0,i-a))},e.prototype.leafAppend=function(n){var i=this.right.leafAppend(n);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(n){var i=this.left.leafPrepend(n);if(i)return new e(i,this.right)},e.prototype.appendInner=function(n){return this.left.depth>=Math.max(this.right.depth,n.depth)+1?new e(this.left,new e(this.right,n)):new e(this,n)},e}(Nr);const VP=500;class ii{constructor(e,r){this.items=e,this.eventCount=r}popEvent(e,r){if(this.eventCount==0)return null;let n=this.items.length;for(;;n--)if(this.items.get(n-1).selection){--n;break}let i,a;r&&(i=this.remapping(n,this.items.length),a=i.maps.length);let o=e.tr,s,u,l=[],c=[];return this.items.forEach((f,d)=>{if(!f.step){i||(i=this.remapping(n,d+1),a=i.maps.length),a--,c.push(f);return}if(i){c.push(new Ni(f.map));let p=f.step.map(i.slice(a)),h;p&&o.maybeStep(p).doc&&(h=o.mapping.maps[o.mapping.maps.length-1],l.push(new Ni(h,void 0,void 0,l.length+c.length))),a--,h&&i.appendMap(h,a)}else o.maybeStep(f.step);if(f.selection)return s=i?f.selection.map(i.slice(a)):f.selection,u=new ii(this.items.slice(0,n).append(c.reverse().concat(l)),this.eventCount-1),!1},this.items.length,0),{remaining:u,transform:o,selection:s}}addTransform(e,r,n,i){let a=[],o=this.eventCount,s=this.items,u=!i&&s.length?s.get(s.length-1):null;for(let c=0;c<e.steps.length;c++){let f=e.steps[c].invert(e.docs[c]),d=new Ni(e.mapping.maps[c],f,r),p;(p=u&&u.merge(d))&&(d=p,c?a.pop():s=s.slice(0,s.length-1)),a.push(d),r&&(o++,r=void 0),i||(u=d)}let l=o-n.depth;return l>jP&&(s=WP(s,l),o-=l),new ii(s.append(a),o)}remapping(e,r){let n=new dl;return this.items.forEach((i,a)=>{let o=i.mirrorOffset!=null&&a-i.mirrorOffset>=e?n.maps.length-i.mirrorOffset:void 0;n.appendMap(i.map,o)},e,r),n}addMaps(e){return this.eventCount==0?this:new ii(this.items.append(e.map(r=>new Ni(r))),this.eventCount)}rebased(e,r){if(!this.eventCount)return this;let n=[],i=Math.max(0,this.items.length-r),a=e.mapping,o=e.steps.length,s=this.eventCount;this.items.forEach(d=>{d.selection&&s--},i);let u=r;this.items.forEach(d=>{let p=a.getMirror(--u);if(p==null)return;o=Math.min(o,p);let h=a.maps[p];if(d.step){let m=e.steps[p].invert(e.docs[p]),g=d.selection&&d.selection.map(a.slice(u+1,p));g&&s++,n.push(new Ni(h,m,g))}else n.push(new Ni(h))},i);let l=[];for(let d=r;d<o;d++)l.push(new Ni(a.maps[d]));let c=this.items.slice(0,i).append(l).append(n),f=new ii(c,s);return f.emptyItemCount()>VP&&(f=f.compress(this.items.length-n.length)),f}emptyItemCount(){let e=0;return this.items.forEach(r=>{r.step||e++}),e}compress(e=this.items.length){let r=this.remapping(0,e),n=r.maps.length,i=[],a=0;return this.items.forEach((o,s)=>{if(s>=e)i.push(o),o.selection&&a++;else if(o.step){let u=o.step.map(r.slice(n)),l=u&&u.getMap();if(n--,l&&r.appendMap(l,n),u){let c=o.selection&&o.selection.map(r.slice(n));c&&a++;let f=new Ni(l.invert(),u,c),d,p=i.length-1;(d=i.length&&i[p].merge(f))?i[p]=d:i.push(f)}}else o.map&&n--},this.items.length,0),new ii(Nr.from(i.reverse()),a)}}ii.empty=new ii(Nr.empty,0);function WP(t,e){let r;return t.forEach((n,i)=>{if(n.selection&&e--==0)return r=i,!1}),t.slice(r)}class Ni{constructor(e,r,n,i){this.map=e,this.step=r,this.selection=n,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let r=e.step.merge(this.step);if(r)return new Ni(r.getMap().invert(),r,this.selection)}}}class Ta{constructor(e,r,n,i,a){this.done=e,this.undone=r,this.prevRanges=n,this.prevTime=i,this.prevComposition=a}}const jP=20;function GP(t,e,r,n){let i=r.getMeta($o),a;if(i)return i.historyState;r.getMeta(YP)&&(t=new Ta(t.done,t.undone,null,0,-1));let o=r.getMeta("appendedTransaction");if(r.steps.length==0)return t;if(o&&o.getMeta($o))return o.getMeta($o).redo?new Ta(t.done.addTransform(r,void 0,n,ef(e)),t.undone,z1(r.mapping.maps),t.prevTime,t.prevComposition):new Ta(t.done,t.undone.addTransform(r,void 0,n,ef(e)),null,t.prevTime,t.prevComposition);if(r.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let s=r.getMeta("composition"),u=t.prevTime==0||!o&&t.prevComposition!=s&&(t.prevTime<(r.time||0)-n.newGroupDelay||!KP(r,t.prevRanges)),l=o?Mh(t.prevRanges,r.mapping):z1(r.mapping.maps);return new Ta(t.done.addTransform(r,u?e.selection.getBookmark():void 0,n,ef(e)),ii.empty,l,r.time,s??t.prevComposition)}else return(a=r.getMeta("rebased"))?new Ta(t.done.rebased(r,a),t.undone.rebased(r,a),Mh(t.prevRanges,r.mapping),t.prevTime,t.prevComposition):new Ta(t.done.addMaps(r.mapping.maps),t.undone.addMaps(r.mapping.maps),Mh(t.prevRanges,r.mapping),t.prevTime,t.prevComposition)}function KP(t,e){if(!e)return!1;if(!t.docChanged)return!0;let r=!1;return t.mapping.maps[0].forEach((n,i)=>{for(let a=0;a<e.length;a+=2)n<=e[a+1]&&i>=e[a]&&(r=!0)}),r}function z1(t){let e=[];for(let r=t.length-1;r>=0&&e.length==0;r--)t[r].forEach((n,i,a,o)=>e.push(a,o));return e}function Mh(t,e){if(!t)return null;let r=[];for(let n=0;n<t.length;n+=2){let i=e.map(t[n],1),a=e.map(t[n+1],-1);i<=a&&r.push(i,a)}return r}function JP(t,e,r){let n=ef(e),i=$o.get(e).spec.config,a=(r?t.undone:t.done).popEvent(e,n);if(!a)return null;let o=a.selection.resolve(a.transform.doc),s=(r?t.done:t.undone).addTransform(a.transform,e.selection.getBookmark(),i,n),u=new Ta(r?s:a.remaining,r?a.remaining:s,null,0,-1);return a.transform.setSelection(o).setMeta($o,{redo:r,historyState:u})}let Th=!1,q1=null;function ef(t){let e=t.plugins;if(q1!=e){Th=!1,q1=e;for(let r=0;r<e.length;r++)if(e[r].spec.historyPreserveItems){Th=!0;break}}return Th}const $o=new Dn("history"),YP=new Dn("closeHistory");function ZP(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Cr({key:$o,state:{init(){return new Ta(ii.empty,ii.empty,null,0,-1)},apply(e,r,n){return GP(r,n,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,r){let n=r.inputType,i=n=="historyUndo"?i2:n=="historyRedo"?a2:null;return i?(r.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function n2(t,e){return(r,n)=>{let i=$o.getState(r);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(n){let a=JP(i,r,t);a&&n(e?a.scrollIntoView():a)}return!0}}const i2=n2(!1,!0),a2=n2(!0,!0),XP=Pr.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>i2(t,e),redo:()=>({state:t,dispatch:e})=>a2(t,e)}},addProseMirrorPlugins(){return[ZP(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),QP=fi.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Dr(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{const{selection:r}=e,{$from:n,$to:i}=r,a=t();return n.parentOffset===0?a.insertContentAt({from:Math.max(n.pos-1,0),to:i.pos},{type:this.name}):B5(r)?a.insertContentAt(i.pos,{type:this.name}):a.insertContent({type:this.name}),a.command(({tr:o,dispatch:s})=>{var u;if(s){const{$to:l}=o.selection,c=l.end();if(l.nodeAfter)l.nodeAfter.isTextblock?o.setSelection(at.create(o.doc,l.pos+1)):l.nodeAfter.isBlock?o.setSelection(Ge.create(o.doc,l.pos)):o.setSelection(at.create(o.doc,l.pos));else{const f=(u=l.parent.type.contentMatch.defaultType)===null||u===void 0?void 0:u.create();f&&(o.insert(c,f),o.setSelection(at.create(o.doc,c+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[fP({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),e$=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,t$=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,r$=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,n$=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,i$=Bi.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Dr(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Hs({find:e$,type:this.type}),Hs({find:r$,type:this.type})]},addPasteRules(){return[Vo({find:t$,type:this.type}),Vo({find:n$,type:this.type})]}}),a$=fi.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Dr(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),o$="listItem",U1="textStyle",H1=/^(\d+)\.\s$/,s$=fi.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...r}=t;return e===1?["ol",Dr(this.options.HTMLAttributes,r),0]:["ol",Dr(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(o$,this.editor.getAttributes(U1)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=yl({find:H1,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,r)=>r.childCount+r.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=yl({find:H1,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(U1)}),joinPredicate:(e,r)=>r.childCount+r.attrs.start===+e[1],editor:this.editor})),[t]}}),u$=fi.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Dr(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),l$=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,c$=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,f$=Bi.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Dr(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Hs({find:l$,type:this.type})]},addPasteRules(){return[Vo({find:c$,type:this.type})]}}),d$=fi.create({name:"text",group:"inline"}),p$=Pr.create({name:"starterKit",addExtensions(){const t=[];return this.options.bold!==!1&&t.push(xP.configure(this.options.bold)),this.options.blockquote!==!1&&t.push(mP.configure(this.options.blockquote)),this.options.bulletList!==!1&&t.push(NP.configure(this.options.bulletList)),this.options.code!==!1&&t.push(DP.configure(this.options.code)),this.options.codeBlock!==!1&&t.push(MP.configure(this.options.codeBlock)),this.options.document!==!1&&t.push(TP.configure(this.options.document)),this.options.dropcursor!==!1&&t.push(FP.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&t.push(zP.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&t.push(qP.configure(this.options.hardBreak)),this.options.heading!==!1&&t.push(UP.configure(this.options.heading)),this.options.history!==!1&&t.push(XP.configure(this.options.history)),this.options.horizontalRule!==!1&&t.push(QP.configure(this.options.horizontalRule)),this.options.italic!==!1&&t.push(i$.configure(this.options.italic)),this.options.listItem!==!1&&t.push(a$.configure(this.options.listItem)),this.options.orderedList!==!1&&t.push(s$.configure(this.options.orderedList)),this.options.paragraph!==!1&&t.push(u$.configure(this.options.paragraph)),this.options.strike!==!1&&t.push(f$.configure(this.options.strike)),this.options.text!==!1&&t.push(d$.configure(this.options.text)),t}}),h$=Bi.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",Dr(this.options.HTMLAttributes,t),0]},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),m$=Pr.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Cr({key:new Dn("placeholder"),props:{decorations:({doc:t,selection:e})=>{const r=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:n}=e,i=[];if(!r)return null;const a=this.editor.isEmpty;return t.descendants((o,s)=>{const u=n>=s&&n<=s+o.nodeSize,l=!o.isLeaf&&fp(o);if((u||!this.options.showOnlyCurrent)&&l){const c=[this.options.emptyNodeClass];a&&c.push(this.options.emptyEditorClass);const f=Mn.node(s,s+o.nodeSize,{class:c.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:s,hasAnchor:u}):this.options.placeholder});i.push(f)}return this.options.includeChildren}),ur.create(t,i)}}})]}}),g$="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",v$="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",Vs=(t,e)=>{for(const r in e)t[r]=e[r];return t},Lm="numeric",zm="ascii",qm="alpha",Gu="asciinumeric",Fu="alphanumeric",Um="domain",o2="emoji",y$="scheme",b$="slashscheme",_h="whitespace";function x$(t,e){return t in e||(e[t]=[]),e[t]}function To(t,e,r){e[Lm]&&(e[Gu]=!0,e[Fu]=!0),e[zm]&&(e[Gu]=!0,e[qm]=!0),e[Gu]&&(e[Fu]=!0),e[qm]&&(e[Fu]=!0),e[Fu]&&(e[Um]=!0),e[o2]&&(e[Um]=!0);for(const n in e){const i=x$(n,r);i.indexOf(t)<0&&i.push(t)}}function w$(t,e){const r={};for(const n in e)e[n].indexOf(t)>=0&&(r[n]=!0);return r}function bn(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}bn.groups={};bn.prototype={accepts(){return!!this.t},go(t){const e=this,r=e.j[t];if(r)return r;for(let n=0;n<e.jr.length;n++){const i=e.jr[n][0],a=e.jr[n][1];if(a&&i.test(t))return a}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,r,n){for(let i=0;i<t.length;i++)this.tt(t[i],e,r,n)},tr(t,e,r,n){n=n||bn.groups;let i;return e&&e.j?i=e:(i=new bn(e),r&&n&&To(e,r,n)),this.jr.push([t,i]),i},ts(t,e,r,n){let i=this;const a=t.length;if(!a)return i;for(let o=0;o<a-1;o++)i=i.tt(t[o]);return i.tt(t[a-1],e,r,n)},tt(t,e,r,n){n=n||bn.groups;const i=this;if(e&&e.j)return i.j[t]=e,e;const a=e;let o,s=i.go(t);if(s?(o=new bn,Vs(o.j,s.j),o.jr.push.apply(o.jr,s.jr),o.jd=s.jd,o.t=s.t):o=new bn,a){if(n)if(o.t&&typeof o.t=="string"){const u=Vs(w$(o.t,n),r);To(a,u,n)}else r&&To(a,r,n);o.t=a}return i.j[t]=o,o}};const vt=(t,e,r,n,i)=>t.ta(e,r,n,i),Zt=(t,e,r,n,i)=>t.tr(e,r,n,i),V1=(t,e,r,n,i)=>t.ts(e,r,n,i),Me=(t,e,r,n,i)=>t.tt(e,r,n,i),Yi="WORD",Hm="UWORD",s2="ASCIINUMERICAL",u2="ALPHANUMERICAL",bl="LOCALHOST",Vm="TLD",Wm="UTLD",tf="SCHEME",ws="SLASH_SCHEME",fv="NUM",jm="WS",dv="NL",Ku="OPENBRACE",Ju="CLOSEBRACE",If="OPENBRACKET",Rf="CLOSEBRACKET",Pf="OPENPAREN",$f="CLOSEPAREN",Lf="OPENANGLEBRACKET",zf="CLOSEANGLEBRACKET",qf="FULLWIDTHLEFTPAREN",Uf="FULLWIDTHRIGHTPAREN",Hf="LEFTCORNERBRACKET",Vf="RIGHTCORNERBRACKET",Wf="LEFTWHITECORNERBRACKET",jf="RIGHTWHITECORNERBRACKET",Gf="FULLWIDTHLESSTHAN",Kf="FULLWIDTHGREATERTHAN",Jf="AMPERSAND",Yf="APOSTROPHE",Zf="ASTERISK",_a="AT",Xf="BACKSLASH",Qf="BACKTICK",ed="CARET",ka="COLON",pv="COMMA",td="DOLLAR",Ai="DOT",rd="EQUALS",hv="EXCLAMATION",Pn="HYPHEN",Yu="PERCENT",nd="PIPE",id="PLUS",ad="POUND",Zu="QUERY",mv="QUOTE",l2="FULLWIDTHMIDDLEDOT",gv="SEMI",Si="SLASH",Xu="TILDE",od="UNDERSCORE",c2="EMOJI",sd="SYM";var f2=Object.freeze({__proto__:null,ALPHANUMERICAL:u2,AMPERSAND:Jf,APOSTROPHE:Yf,ASCIINUMERICAL:s2,ASTERISK:Zf,AT:_a,BACKSLASH:Xf,BACKTICK:Qf,CARET:ed,CLOSEANGLEBRACKET:zf,CLOSEBRACE:Ju,CLOSEBRACKET:Rf,CLOSEPAREN:$f,COLON:ka,COMMA:pv,DOLLAR:td,DOT:Ai,EMOJI:c2,EQUALS:rd,EXCLAMATION:hv,FULLWIDTHGREATERTHAN:Kf,FULLWIDTHLEFTPAREN:qf,FULLWIDTHLESSTHAN:Gf,FULLWIDTHMIDDLEDOT:l2,FULLWIDTHRIGHTPAREN:Uf,HYPHEN:Pn,LEFTCORNERBRACKET:Hf,LEFTWHITECORNERBRACKET:Wf,LOCALHOST:bl,NL:dv,NUM:fv,OPENANGLEBRACKET:Lf,OPENBRACE:Ku,OPENBRACKET:If,OPENPAREN:Pf,PERCENT:Yu,PIPE:nd,PLUS:id,POUND:ad,QUERY:Zu,QUOTE:mv,RIGHTCORNERBRACKET:Vf,RIGHTWHITECORNERBRACKET:jf,SCHEME:tf,SEMI:gv,SLASH:Si,SLASH_SCHEME:ws,SYM:sd,TILDE:Xu,TLD:Vm,UNDERSCORE:od,UTLD:Wm,UWORD:Hm,WORD:Yi,WS:jm});const Wi=/[a-z]/,Su=new RegExp("\\p{L}","u"),Oh=new RegExp("\\p{Emoji}","u"),ji=/\d/,Fh=/\s/,W1="\r",Bh=`
`,N$="",A$="",kh="";let bc=null,xc=null;function S$(t=[]){const e={};bn.groups=e;const r=new bn;bc==null&&(bc=j1(g$)),xc==null&&(xc=j1(v$)),Me(r,"'",Yf),Me(r,"{",Ku),Me(r,"}",Ju),Me(r,"[",If),Me(r,"]",Rf),Me(r,"(",Pf),Me(r,")",$f),Me(r,"<",Lf),Me(r,">",zf),Me(r,"",qf),Me(r,"",Uf),Me(r,"",Hf),Me(r,"",Vf),Me(r,"",Wf),Me(r,"",jf),Me(r,"",Gf),Me(r,"",Kf),Me(r,"&",Jf),Me(r,"*",Zf),Me(r,"@",_a),Me(r,"`",Qf),Me(r,"^",ed),Me(r,":",ka),Me(r,",",pv),Me(r,"$",td),Me(r,".",Ai),Me(r,"=",rd),Me(r,"!",hv),Me(r,"-",Pn),Me(r,"%",Yu),Me(r,"|",nd),Me(r,"+",id),Me(r,"#",ad),Me(r,"?",Zu),Me(r,'"',mv),Me(r,"/",Si),Me(r,";",gv),Me(r,"~",Xu),Me(r,"_",od),Me(r,"\\",Xf),Me(r,"",l2);const n=Zt(r,ji,fv,{[Lm]:!0});Zt(n,ji,n);const i=Zt(n,Wi,s2,{[Gu]:!0}),a=Zt(n,Su,u2,{[Fu]:!0}),o=Zt(r,Wi,Yi,{[zm]:!0});Zt(o,ji,i),Zt(o,Wi,o),Zt(i,ji,i),Zt(i,Wi,i);const s=Zt(r,Su,Hm,{[qm]:!0});Zt(s,Wi),Zt(s,ji,a),Zt(s,Su,s),Zt(a,ji,a),Zt(a,Wi),Zt(a,Su,a);const u=Me(r,Bh,dv,{[_h]:!0}),l=Me(r,W1,jm,{[_h]:!0}),c=Zt(r,Fh,jm,{[_h]:!0});Me(r,kh,c),Me(l,Bh,u),Me(l,kh,c),Zt(l,Fh,c),Me(c,W1),Me(c,Bh),Zt(c,Fh,c),Me(c,kh,c);const f=Zt(r,Oh,c2,{[o2]:!0});Me(f,"#"),Zt(f,Oh,f),Me(f,N$,f);const d=Me(f,A$);Me(d,"#"),Zt(d,Oh,f);const p=[[Wi,o],[ji,i]],h=[[Wi,null],[Su,s],[ji,a]];for(let m=0;m<bc.length;m++)wa(r,bc[m],Vm,Yi,p);for(let m=0;m<xc.length;m++)wa(r,xc[m],Wm,Hm,h);To(Vm,{tld:!0,ascii:!0},e),To(Wm,{utld:!0,alpha:!0},e),wa(r,"file",tf,Yi,p),wa(r,"mailto",tf,Yi,p),wa(r,"http",ws,Yi,p),wa(r,"https",ws,Yi,p),wa(r,"ftp",ws,Yi,p),wa(r,"ftps",ws,Yi,p),To(tf,{scheme:!0,ascii:!0},e),To(ws,{slashscheme:!0,ascii:!0},e),t=t.sort((m,g)=>m[0]>g[0]?1:-1);for(let m=0;m<t.length;m++){const g=t[m][0],N=t[m][1]?{[y$]:!0}:{[b$]:!0};g.indexOf("-")>=0?N[Um]=!0:Wi.test(g)?ji.test(g)?N[Gu]=!0:N[zm]=!0:N[Lm]=!0,V1(r,g,g,N)}return V1(r,"localhost",bl,{ascii:!0}),r.jd=new bn(sd),{start:r,tokens:Vs({groups:e},f2)}}function d2(t,e){const r=D$(e.replace(/[A-Z]/g,s=>s.toLowerCase())),n=r.length,i=[];let a=0,o=0;for(;o<n;){let s=t,u=null,l=0,c=null,f=-1,d=-1;for(;o<n&&(u=s.go(r[o]));)s=u,s.accepts()?(f=0,d=0,c=s):f>=0&&(f+=r[o].length,d++),l+=r[o].length,a+=r[o].length,o++;a-=f,o-=d,l-=f,i.push({t:c.t,v:e.slice(a-l,a),s:a-l,e:a})}return i}function D$(t){const e=[],r=t.length;let n=0;for(;n<r;){let i=t.charCodeAt(n),a,o=i<55296||i>56319||n+1===r||(a=t.charCodeAt(n+1))<56320||a>57343?t[n]:t.slice(n,n+2);e.push(o),n+=o.length}return e}function wa(t,e,r,n,i){let a;const o=e.length;for(let s=0;s<o-1;s++){const u=e[s];t.j[u]?a=t.j[u]:(a=new bn(n),a.jr=i.slice(),t.j[u]=a),t=a}return a=new bn(r),a.jr=i.slice(),t.j[e[o-1]]=a,a}function j1(t){const e=[],r=[];let n=0,i="0123456789";for(;n<t.length;){let a=0;for(;i.indexOf(t[n+a])>=0;)a++;if(a>0){e.push(r.join(""));for(let o=parseInt(t.substring(n,n+a),10);o>0;o--)r.pop();n+=a}else r.push(t[n]),n++}return e}const xl={defaultProtocol:"http",events:null,format:G1,formatHref:G1,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function vv(t,e=null){let r=Vs({},xl);t&&(r=Vs(r,t instanceof vv?t.o:t));const n=r.ignoreTags,i=[];for(let a=0;a<n.length;a++)i.push(n[a].toUpperCase());this.o=r,e&&(this.defaultRender=e),this.ignoreTags=i}vv.prototype={o:xl,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,r){const n=e!=null;let i=this.o[t];return i&&(typeof i=="object"?(i=r.t in i?i[r.t]:xl[t],typeof i=="function"&&n&&(i=i(e,r))):typeof i=="function"&&n&&(i=i(e,r.t,r)),i)},getObj(t,e,r){let n=this.o[t];return typeof n=="function"&&e!=null&&(n=n(e,r.t,r)),n},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function G1(t){return t}function p2(t,e){this.t="token",this.v=t,this.tk=e}p2.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),r=t.get("truncate",e,this),n=t.get("format",e,this);return r&&n.length>r?n.substring(0,r)+"":n},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=xl.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,r=this.toHref(t.get("defaultProtocol")),n=t.get("formatHref",r,this),i=t.get("tagName",r,e),a=this.toFormattedString(t),o={},s=t.get("className",r,e),u=t.get("target",r,e),l=t.get("rel",r,e),c=t.getObj("attributes",r,e),f=t.getObj("events",r,e);return o.href=n,s&&(o.class=s),u&&(o.target=u),l&&(o.rel=l),c&&Vs(o,c),{tagName:i,attributes:o,content:a,eventListeners:f}}};function dp(t,e){class r extends p2{constructor(i,a){super(i,a),this.t=t}}for(const n in e)r.prototype[n]=e[n];return r.t=t,r}const K1=dp("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),J1=dp("text"),E$=dp("nl"),wc=dp("url",{isLink:!0,toHref(t=xl.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==bl&&t[1].t===ka}}),kn=t=>new bn(t);function C$({groups:t}){const e=t.domain.concat([Jf,Zf,_a,Xf,Qf,ed,td,rd,Pn,fv,Yu,nd,id,ad,Si,sd,Xu,od]),r=[Yf,ka,pv,Ai,hv,Yu,Zu,mv,gv,Lf,zf,Ku,Ju,Rf,If,Pf,$f,qf,Uf,Hf,Vf,Wf,jf,Gf,Kf],n=[Jf,Yf,Zf,Xf,Qf,ed,td,rd,Pn,Ku,Ju,Yu,nd,id,ad,Zu,Si,sd,Xu,od],i=kn(),a=Me(i,Xu);vt(a,n,a),vt(a,t.domain,a);const o=kn(),s=kn(),u=kn();vt(i,t.domain,o),vt(i,t.scheme,s),vt(i,t.slashscheme,u),vt(o,n,a),vt(o,t.domain,o);const l=Me(o,_a);Me(a,_a,l),Me(s,_a,l),Me(u,_a,l);const c=Me(a,Ai);vt(c,n,a),vt(c,t.domain,a);const f=kn();vt(l,t.domain,f),vt(f,t.domain,f);const d=Me(f,Ai);vt(d,t.domain,f);const p=kn(K1);vt(d,t.tld,p),vt(d,t.utld,p),Me(l,bl,p);const h=Me(f,Pn);Me(h,Pn,h),vt(h,t.domain,f),vt(p,t.domain,f),Me(p,Ai,d),Me(p,Pn,h);const m=Me(p,ka);vt(m,t.numeric,K1);const g=Me(o,Pn),y=Me(o,Ai);Me(g,Pn,g),vt(g,t.domain,o),vt(y,n,a),vt(y,t.domain,o);const N=kn(wc);vt(y,t.tld,N),vt(y,t.utld,N),vt(N,t.domain,o),vt(N,n,a),Me(N,Ai,y),Me(N,Pn,g),Me(N,_a,l);const v=Me(N,ka),w=kn(wc);vt(v,t.numeric,w);const x=kn(wc),b=kn();vt(x,e,x),vt(x,r,b),vt(b,e,x),vt(b,r,b),Me(N,Si,x),Me(w,Si,x);const S=Me(s,ka),C=Me(u,ka),A=Me(C,Si),E=Me(A,Si);vt(s,t.domain,o),Me(s,Ai,y),Me(s,Pn,g),vt(u,t.domain,o),Me(u,Ai,y),Me(u,Pn,g),vt(S,t.domain,x),Me(S,Si,x),Me(S,Zu,x),vt(E,t.domain,x),vt(E,e,x),Me(E,Si,x);const D=[[Ku,Ju],[If,Rf],[Pf,$f],[Lf,zf],[qf,Uf],[Hf,Vf],[Wf,jf],[Gf,Kf]];for(let M=0;M<D.length;M++){const[F,I]=D[M],P=Me(x,F);Me(b,F,P),Me(P,I,x);const T=kn(wc);vt(P,e,T);const $=kn();vt(P,r),vt(T,e,T),vt(T,r,$),vt($,e,T),vt($,r,$),Me(T,I,x),Me($,I,x)}return Me(i,bl,N),Me(i,dv,E$),{start:i,tokens:f2}}function M$(t,e,r){let n=r.length,i=0,a=[],o=[];for(;i<n;){let s=t,u=null,l=null,c=0,f=null,d=-1;for(;i<n&&!(u=s.go(r[i].t));)o.push(r[i++]);for(;i<n&&(l=u||s.go(r[i].t));)u=null,s=l,s.accepts()?(d=0,f=s):d>=0&&d++,i++,c++;if(d<0)i-=c,i<n&&(o.push(r[i]),i++);else{o.length>0&&(a.push(Ih(J1,e,o)),o=[]),i-=d,c-=d;const p=f.t,h=r.slice(i-c,i);a.push(Ih(p,e,h))}}return o.length>0&&a.push(Ih(J1,e,o)),a}function Ih(t,e,r){const n=r[0].s,i=r[r.length-1].e,a=e.slice(n,i);return new t(a,r)}const T$=typeof console<"u"&&console&&console.warn||(()=>{}),_$="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Gt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function O$(){return bn.groups={},Gt.scanner=null,Gt.parser=null,Gt.tokenQueue=[],Gt.pluginQueue=[],Gt.customSchemes=[],Gt.initialized=!1,Gt}function Y1(t,e=!1){if(Gt.initialized&&T$(`linkifyjs: already initialized - will not register custom scheme "${t}" ${_$}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Gt.customSchemes.push([t,e])}function F$(){Gt.scanner=S$(Gt.customSchemes);for(let t=0;t<Gt.tokenQueue.length;t++)Gt.tokenQueue[t][1]({scanner:Gt.scanner});Gt.parser=C$(Gt.scanner.tokens);for(let t=0;t<Gt.pluginQueue.length;t++)Gt.pluginQueue[t][1]({scanner:Gt.scanner,parser:Gt.parser});return Gt.initialized=!0,Gt}function yv(t){return Gt.initialized||F$(),M$(Gt.parser.start,t,d2(Gt.scanner.start,t))}yv.scan=d2;function h2(t,e=null,r=null){if(e&&typeof e=="object"){if(r)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);r=e,e=null}const n=new vv(r),i=yv(t),a=[];for(let o=0;o<i.length;o++){const s=i[o];s.isLink&&(!e||s.t===e)&&n.check(s)&&a.push(s.toFormattedObject(n))}return a}function B$(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function k$(t){return new Cr({key:new Dn("autolink"),appendTransaction:(e,r,n)=>{const i=e.some(l=>l.docChanged)&&!r.doc.eq(n.doc),a=e.some(l=>l.getMeta("preventAutolink"));if(!i||a)return;const{tr:o}=n,s=A5(r.doc,[...e]);if(O5(s).forEach(({newRange:l})=>{const c=D5(n.doc,l,p=>p.isTextblock);let f,d;if(c.length>1?(f=c[0],d=n.doc.textBetween(f.pos,f.pos+f.node.nodeSize,void 0," ")):c.length&&n.doc.textBetween(l.from,l.to," "," ").endsWith(" ")&&(f=c[0],d=n.doc.textBetween(f.pos,l.to,void 0," ")),f&&d){const p=d.split(" ").filter(y=>y!=="");if(p.length<=0)return!1;const h=p[p.length-1],m=f.pos+d.lastIndexOf(h);if(!h)return!1;const g=yv(h).map(y=>y.toObject(t.defaultProtocol));if(!B$(g))return!1;g.filter(y=>y.isLink).map(y=>({...y,from:m+y.start+1,to:m+y.end+1})).filter(y=>n.schema.marks.code?!n.doc.rangeHasMark(y.from,y.to,n.schema.marks.code):!0).filter(y=>t.validate(y.value)).filter(y=>t.shouldAutoLink(y.value)).forEach(y=>{lv(y.from,y.to,n.doc).some(N=>N.mark.type===t.type)||o.addMark(y.from,y.to,t.type.create({href:y.href}))})}}),!!o.steps.length)return o}})}function I$(t){return new Cr({key:new Dn("handleClickLink"),props:{handleClick:(e,r,n)=>{var i,a;if(n.button!==0||!e.editable)return!1;let o=n.target;const s=[];for(;o.nodeName!=="DIV";)s.push(o),o=o.parentNode;if(!s.find(d=>d.nodeName==="A"))return!1;const u=t2(e.state,t.type.name),l=n.target,c=(i=l==null?void 0:l.href)!==null&&i!==void 0?i:u.href,f=(a=l==null?void 0:l.target)!==null&&a!==void 0?a:u.target;return l&&c?(window.open(c,f),!0):!1}}})}function R$(t){return new Cr({key:new Dn("handlePasteLink"),props:{handlePaste:(e,r,n)=>{const{state:i}=e,{selection:a}=i,{empty:o}=a;if(o)return!1;let s="";n.content.forEach(l=>{s+=l.textContent});const u=h2(s,{defaultProtocol:t.defaultProtocol}).find(l=>l.isLink&&l.value===s);return!s||!u?!1:t.editor.commands.setMark(t.type,{href:u.href})}}})}const P$=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g;function yo(t,e){const r=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(n=>{const i=typeof n=="string"?n:n.scheme;i&&r.push(i)}),!t||t.replace(P$,"").match(new RegExp(`^(?:(?:${r.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}const $$=Bi.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){Y1(t);return}Y1(t.scheme,t.optionalSlashes)})},onDestroy(){O$()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!yo(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:r=>!!yo(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!yo(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Dr(this.options.HTMLAttributes,t),0]:["a",Dr(this.options.HTMLAttributes,{...t,href:""}),0]},addCommands(){return{setLink:t=>({chain:e})=>{const{href:r}=t;return this.options.isAllowedUri(r,{defaultValidate:n=>!!yo(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:r}=t;return this.options.isAllowedUri(r,{defaultValidate:n=>!!yo(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run():!1},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Vo({find:t=>{const e=[];if(t){const{protocols:r,defaultProtocol:n}=this.options,i=h2(t).filter(a=>a.isLink&&this.options.isAllowedUri(a.value,{defaultValidate:o=>!!yo(o,r),protocols:r,defaultProtocol:n}));i.length&&i.forEach(a=>e.push({text:a.value,data:{href:a.href},index:a.start}))}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:r}=this.options;return this.options.autolink&&t.push(k$({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:n=>this.options.isAllowedUri(n,{defaultValidate:i=>!!yo(i,e),protocols:e,defaultProtocol:r}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&t.push(I$({type:this.type})),this.options.linkOnPaste&&t.push(R$({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),t}});function dr(){return dr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},dr.apply(null,arguments)}var m2={relTol:1e-12,absTol:1e-15,matrix:"Matrix",number:"number",numberFallback:"number",precision:64,predictable:!1,randomSeed:null};function an(t,e){if(ud(t,e))return t[e];throw typeof t[e]=="function"&&bv(t,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function Ws(t,e,r){if(ud(t,e))return t[e]=r,r;throw new Error('No access to property "'+e+'"')}function ud(t,e){return!z$(t)&&!Array.isArray(t)?!1:Ie(q$,e)?!0:!(e in Object.prototype||e in Function.prototype)}function L$(t,e){if(!bv(t,e))throw new Error('No access to method "'+e+'"');return t[e]}function bv(t,e){return t==null||typeof t[e]!="function"||Ie(t,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(t)?!1:Ie(U$,e)?!0:!(e in Object.prototype||e in Function.prototype)}function z$(t){return typeof t=="object"&&t&&t.constructor===Object}var q$={length:!0,name:!0},U$={toString:!0,valueOf:!0,toLocaleString:!0};class pp{constructor(e){this.wrappedObject=e,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).filter(e=>this.has(e)).values()}get(e){return an(this.wrappedObject,e)}set(e,r){return Ws(this.wrappedObject,e,r),this}has(e){return ud(this.wrappedObject,e)&&e in this.wrappedObject}entries(){return v2(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var r of this.keys())e(this.get(r),r,this)}delete(e){ud(this.wrappedObject,e)&&delete this.wrappedObject[e]}clear(){for(var e of this.keys())this.delete(e)}get size(){return Object.keys(this.wrappedObject).length}}class g2{constructor(e,r,n){this.a=e,this.b=r,this.bKeys=n,this[Symbol.iterator]=this.entries}get(e){return this.bKeys.has(e)?this.b.get(e):this.a.get(e)}set(e,r){return this.bKeys.has(e)?this.b.set(e,r):this.a.set(e,r),this}has(e){return this.b.has(e)||this.a.has(e)}keys(){return new Set([...this.a.keys(),...this.b.keys()])[Symbol.iterator]()}entries(){return v2(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var r of this.keys())e(this.get(r),r,this)}delete(e){return this.bKeys.has(e)?this.b.delete(e):this.a.delete(e)}clear(){this.a.clear(),this.b.clear()}get size(){return[...this.keys()].length}}function v2(t,e){return{next:()=>{var r=t.next();return r.done?r:{value:e(r.value),done:!1}}}}function wl(){return new Map}function Bs(t){if(!t)return wl();if(b2(t))return t;if(mp(t))return new pp(t);throw new Error("createMap can create maps from objects or Maps")}function H$(t){if(t instanceof pp)return t.wrappedObject;var e={};for(var r of t.keys()){var n=t.get(r);Ws(e,r,n)}return e}function it(t){return typeof t=="number"}function ot(t){return!t||typeof t!="object"||typeof t.constructor!="function"?!1:t.isBigNumber===!0&&typeof t.constructor.prototype=="object"&&t.constructor.prototype.isBigNumber===!0||typeof t.constructor.isDecimal=="function"&&t.constructor.isDecimal(t)===!0}function Qu(t){return typeof t=="bigint"}function ua(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isComplex===!0||!1}function Il(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isFraction===!0||!1}function qn(t){return t&&t.constructor.prototype.isUnit===!0||!1}function Vr(t){return typeof t=="string"}var Bt=Array.isArray;function We(t){return t&&t.constructor.prototype.isMatrix===!0||!1}function Jn(t){return Array.isArray(t)||We(t)}function ld(t){return t&&t.isDenseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function _o(t){return t&&t.isSparseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function xv(t){return t&&t.constructor.prototype.isRange===!0||!1}function hp(t){return t&&t.constructor.prototype.isIndex===!0||!1}function V$(t){return typeof t=="boolean"}function W$(t){return t&&t.constructor.prototype.isResultSet===!0||!1}function y2(t){return t&&t.constructor.prototype.isHelp===!0||!1}function j$(t){return typeof t=="function"}function G$(t){return t instanceof Date}function K$(t){return t instanceof RegExp}function mp(t){return!!(t&&typeof t=="object"&&t.constructor===Object&&!ua(t)&&!Il(t))}function b2(t){return t?t instanceof Map||t instanceof pp||typeof t.set=="function"&&typeof t.get=="function"&&typeof t.keys=="function"&&typeof t.has=="function":!1}function J$(t){return t===null}function Y$(t){return t===void 0}function Wo(t){return t&&t.isAccessorNode===!0&&t.constructor.prototype.isNode===!0||!1}function zn(t){return t&&t.isArrayNode===!0&&t.constructor.prototype.isNode===!0||!1}function Z$(t){return t&&t.isAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function X$(t){return t&&t.isBlockNode===!0&&t.constructor.prototype.isNode===!0||!1}function Q$(t){return t&&t.isConditionalNode===!0&&t.constructor.prototype.isNode===!0||!1}function wt(t){return t&&t.isConstantNode===!0&&t.constructor.prototype.isNode===!0||!1}function Gm(t){return wt(t)||ir(t)&&t.args.length===1&&wt(t.args[0])&&"-+~".includes(t.op)}function Rl(t){return t&&t.isFunctionAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function Za(t){return t&&t.isFunctionNode===!0&&t.constructor.prototype.isNode===!0||!1}function eu(t){return t&&t.isIndexNode===!0&&t.constructor.prototype.isNode===!0||!1}function Ot(t){return t&&t.isNode===!0&&t.constructor.prototype.isNode===!0||!1}function gp(t){return t&&t.isObjectNode===!0&&t.constructor.prototype.isNode===!0||!1}function ir(t){return t&&t.isOperatorNode===!0&&t.constructor.prototype.isNode===!0||!1}function da(t){return t&&t.isParenthesisNode===!0&&t.constructor.prototype.isNode===!0||!1}function e8(t){return t&&t.isRangeNode===!0&&t.constructor.prototype.isNode===!0||!1}function t8(t){return t&&t.isRelationalNode===!0&&t.constructor.prototype.isNode===!0||!1}function xr(t){return t&&t.isSymbolNode===!0&&t.constructor.prototype.isNode===!0||!1}function x2(t){return t&&t.constructor.prototype.isChain===!0||!1}function It(t){var e=typeof t;return e==="object"?t===null?"null":ot(t)?"BigNumber":t.constructor&&t.constructor.name?t.constructor.name:"Object":e}function et(t){var e=typeof t;if(e==="number"||e==="bigint"||e==="string"||e==="boolean"||t===null||t===void 0)return t;if(typeof t.clone=="function")return t.clone();if(Array.isArray(t))return t.map(function(r){return et(r)});if(t instanceof Date)return new Date(t.valueOf());if(ot(t))return t;if(mp(t))return r8(t,et);if(e==="function")return t;throw new TypeError("Cannot clone: unknown type of value (value: ".concat(t,")"))}function r8(t,e){var r={};for(var n in t)Ie(t,n)&&(r[n]=e(t[n]));return r}function w2(t,e){for(var r in e)Ie(e,r)&&(t[r]=e[r]);return t}function pa(t,e){var r,n,i;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;n++)if(!pa(t[n],e[n]))return!1;return!0}else{if(typeof t=="function")return t===e;if(t instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(r in t)if(!(r in e)||!pa(t[r],e[r]))return!1;for(r in e)if(!(r in t))return!1;return!0}else return t===e}}function n8(t,e,r){var n=!0,i;Object.defineProperty(t,e,{get:function(){return n&&(i=r(),n=!1),i},set:function(o){i=o,n=!1},configurable:!0,enumerable:!0})}function Ie(t,e){return t&&Object.hasOwnProperty.call(t,e)}function i8(t,e){for(var r={},n=0;n<e.length;n++){var i=e[n],a=t[i];a!==void 0&&(r[i]=a)}return r}var a8=["Matrix","Array"],o8=["number","BigNumber","Fraction"],be=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(m2)};dr(be,m2,{MATRIX_OPTIONS:a8,NUMBER_OPTIONS:o8});function Z1(){return!0}function In(){return!1}function fs(){}const X1="Argument is not a typed-function.";function N2(){function t(L){return typeof L=="object"&&L!==null&&L.constructor===Object}const e=[{name:"number",test:function(L){return typeof L=="number"}},{name:"string",test:function(L){return typeof L=="string"}},{name:"boolean",test:function(L){return typeof L=="boolean"}},{name:"Function",test:function(L){return typeof L=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(L){return L instanceof Date}},{name:"RegExp",test:function(L){return L instanceof RegExp}},{name:"Object",test:t},{name:"null",test:function(L){return L===null}},{name:"undefined",test:function(L){return L===void 0}}],r={name:"any",test:Z1,isAny:!0};let n,i,a=0,o={createCount:0};function s(L){const J=n.get(L);if(J)return J;let re='Unknown type "'+L+'"';const fe=L.toLowerCase();let he;for(he of i)if(he.toLowerCase()===fe){re+='. Did you mean "'+he+'" ?';break}throw new TypeError(re)}function u(L){let J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const re=J?s(J).index:i.length,fe=[];for(let me=0;me<L.length;++me){if(!L[me]||typeof L[me].name!="string"||typeof L[me].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const Se=L[me].name;if(n.has(Se))throw new TypeError('Duplicate type name "'+Se+'"');fe.push(Se),n.set(Se,{name:Se,test:L[me].test,isAny:L[me].isAny,index:re+me,conversionsTo:[]})}const he=i.slice(re);i=i.slice(0,re).concat(fe).concat(he);for(let me=re+fe.length;me<i.length;++me)n.get(i[me]).index=me}function l(){n=new Map,i=[],a=0,u([r],!1)}l(),u(e);function c(){let L;for(L of i)n.get(L).conversionsTo=[];a=0}function f(L){const J=i.filter(re=>{const fe=n.get(re);return!fe.isAny&&fe.test(L)});return J.length?J:["any"]}function d(L){return L&&typeof L=="function"&&"_typedFunctionData"in L}function p(L,J,re){if(!d(L))throw new TypeError(X1);const fe=re&&re.exact,he=Array.isArray(J)?J.join(","):J,me=w(he),Se=g(me);if(!fe||Se in L.signatures){const nt=L._typedFunctionData.signatureMap.get(Se);if(nt)return nt}const xe=me.length;let Ee;if(fe){Ee=[];let nt;for(nt in L.signatures)Ee.push(L._typedFunctionData.signatureMap.get(nt))}else Ee=L._typedFunctionData.signatures;for(let nt=0;nt<xe;++nt){const ke=me[nt],Xe=[];let _;for(_ of Ee){const ee=C(_.params,nt);if(!(!ee||ke.restParam&&!ee.restParam)){if(!ee.hasAny){const ge=v(ee);if(ke.types.some(Ne=>!ge.has(Ne.name)))continue}Xe.push(_)}}if(Ee=Xe,Ee.length===0)break}let we;for(we of Ee)if(we.params.length<=xe)return we;throw new TypeError("Signature not found (signature: "+(L.name||"unnamed")+"("+g(me,", ")+"))")}function h(L,J,re){return p(L,J,re).implementation}function m(L,J){const re=s(J);if(re.test(L))return L;const fe=re.conversionsTo;if(fe.length===0)throw new Error("There are no conversions to "+J+" defined.");for(let he=0;he<fe.length;he++)if(s(fe[he].from).test(L))return fe[he].convert(L);throw new Error("Cannot convert "+L+" to "+J)}function g(L){let J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return L.map(re=>re.name).join(J)}function y(L){const J=L.indexOf("...")===0,fe=(J?L.length>3?L.slice(3):"any":L).split("|").map(xe=>s(xe.trim()));let he=!1,me=J?"...":"";return{types:fe.map(function(xe){return he=xe.isAny||he,me+=xe.name+"|",{name:xe.name,typeIndex:xe.index,test:xe.test,isAny:xe.isAny,conversion:null,conversionIndex:-1}}),name:me.slice(0,-1),hasAny:he,hasConversion:!1,restParam:J}}function N(L){const J=L.types.map(Se=>Se.name),re=$(J);let fe=L.hasAny,he=L.name;const me=re.map(function(Se){const xe=s(Se.from);return fe=xe.isAny||fe,he+="|"+Se.from,{name:Se.from,typeIndex:xe.index,test:xe.test,isAny:xe.isAny,conversion:Se,conversionIndex:Se.index}});return{types:L.types.concat(me),name:he,hasAny:fe,hasConversion:me.length>0,restParam:L.restParam}}function v(L){return L.typeSet||(L.typeSet=new Set,L.types.forEach(J=>L.typeSet.add(J.name))),L.typeSet}function w(L){const J=[];if(typeof L!="string")throw new TypeError("Signatures must be strings");const re=L.trim();if(re==="")return J;const fe=re.split(",");for(let he=0;he<fe.length;++he){const me=y(fe[he].trim());if(me.restParam&&he!==fe.length-1)throw new SyntaxError('Unexpected rest parameter "'+fe[he]+'": only allowed for the last parameter');if(me.types.length===0)return null;J.push(me)}return J}function x(L){const J=U(L);return J?J.restParam:!1}function b(L){if(!L||L.types.length===0)return Z1;if(L.types.length===1)return s(L.types[0].name).test;if(L.types.length===2){const J=s(L.types[0].name).test,re=s(L.types[1].name).test;return function(he){return J(he)||re(he)}}else{const J=L.types.map(function(re){return s(re.name).test});return function(fe){for(let he=0;he<J.length;he++)if(J[he](fe))return!0;return!1}}}function S(L){let J,re,fe;if(x(L)){J=V(L).map(b);const he=J.length,me=b(U(L)),Se=function(xe){for(let Ee=he;Ee<xe.length;Ee++)if(!me(xe[Ee]))return!1;return!0};return function(Ee){for(let we=0;we<J.length;we++)if(!J[we](Ee[we]))return!1;return Se(Ee)&&Ee.length>=he+1}}else return L.length===0?function(me){return me.length===0}:L.length===1?(re=b(L[0]),function(me){return re(me[0])&&me.length===1}):L.length===2?(re=b(L[0]),fe=b(L[1]),function(me){return re(me[0])&&fe(me[1])&&me.length===2}):(J=L.map(b),function(me){for(let Se=0;Se<J.length;Se++)if(!J[Se](me[Se]))return!1;return me.length===J.length})}function C(L,J){return J<L.length?L[J]:x(L)?U(L):null}function A(L,J){const re=C(L,J);return re?v(re):new Set}function E(L){return L.conversion===null||L.conversion===void 0}function D(L,J){const re=new Set;return L.forEach(fe=>{const he=A(fe.params,J);let me;for(me of he)re.add(me)}),re.has("any")?["any"]:Array.from(re)}function M(L,J,re){let fe,he;const me=L||"unnamed";let Se=re,xe;for(xe=0;xe<J.length;xe++){const ke=[];if(Se.forEach(Xe=>{const _=C(Xe.params,xe),ee=b(_);(xe<Xe.params.length||x(Xe.params))&&ee(J[xe])&&ke.push(Xe)}),ke.length===0){if(he=D(Se,xe),he.length>0){const Xe=f(J[xe]);return fe=new TypeError("Unexpected type of argument in function "+me+" (expected: "+he.join(" or ")+", actual: "+Xe.join(" | ")+", index: "+xe+")"),fe.data={category:"wrongType",fn:me,index:xe,actual:Xe,expected:he},fe}}else Se=ke}const Ee=Se.map(function(ke){return x(ke.params)?1/0:ke.params.length});if(J.length<Math.min.apply(null,Ee))return he=D(Se,xe),fe=new TypeError("Too few arguments in function "+me+" (expected: "+he.join(" or ")+", index: "+J.length+")"),fe.data={category:"tooFewArgs",fn:me,index:J.length,expected:he},fe;const we=Math.max.apply(null,Ee);if(J.length>we)return fe=new TypeError("Too many arguments in function "+me+" (expected: "+we+", actual: "+J.length+")"),fe.data={category:"tooManyArgs",fn:me,index:J.length,expectedLength:we},fe;const nt=[];for(let ke=0;ke<J.length;++ke)nt.push(f(J[ke]).join("|"));return fe=new TypeError('Arguments of type "'+nt.join(", ")+'" do not match any of the defined signatures of function '+me+"."),fe.data={category:"mismatch",actual:nt},fe}function F(L){let J=i.length+1;for(let re=0;re<L.types.length;re++)E(L.types[re])&&(J=Math.min(J,L.types[re].typeIndex));return J}function I(L){let J=a+1;for(let re=0;re<L.types.length;re++)E(L.types[re])||(J=Math.min(J,L.types[re].conversionIndex));return J}function P(L,J){if(L.hasAny){if(!J.hasAny)return 1}else if(J.hasAny)return-1;if(L.restParam){if(!J.restParam)return 1}else if(J.restParam)return-1;if(L.hasConversion){if(!J.hasConversion)return 1}else if(J.hasConversion)return-1;const re=F(L)-F(J);if(re<0)return-1;if(re>0)return 1;const fe=I(L)-I(J);return fe<0?-1:fe>0?1:0}function T(L,J){const re=L.params,fe=J.params,he=U(re),me=U(fe),Se=x(re),xe=x(fe);if(Se&&he.hasAny){if(!xe||!me.hasAny)return 1}else if(xe&&me.hasAny)return-1;let Ee=0,we=0,nt;for(nt of re)nt.hasAny&&++Ee,nt.hasConversion&&++we;let ke=0,Xe=0;for(nt of fe)nt.hasAny&&++ke,nt.hasConversion&&++Xe;if(Ee!==ke)return Ee-ke;if(Se&&he.hasConversion){if(!xe||!me.hasConversion)return 1}else if(xe&&me.hasConversion)return-1;if(we!==Xe)return we-Xe;if(Se){if(!xe)return 1}else if(xe)return-1;const _=(re.length-fe.length)*(Se?-1:1);if(_!==0)return _;const ee=[];let ge=0;for(let qe=0;qe<re.length;++qe){const Qe=P(re[qe],fe[qe]);ee.push(Qe),ge+=Qe}if(ge!==0)return ge;let Ne;for(Ne of ee)if(Ne!==0)return Ne;return 0}function $(L){if(L.length===0)return[];const J=L.map(s);L.length>1&&J.sort((he,me)=>he.index-me.index);let re=J[0].conversionsTo;if(L.length===1)return re;re=re.concat([]);const fe=new Set(L);for(let he=1;he<J.length;++he){let me;for(me of J[he].conversionsTo)fe.has(me.from)||(re.push(me),fe.add(me.from))}return re}function O(L,J){let re=J;if(L.some(he=>he.hasConversion)){const he=x(L),me=L.map(W);re=function(){const xe=[],Ee=he?arguments.length-1:arguments.length;for(let we=0;we<Ee;we++)xe[we]=me[we](arguments[we]);return he&&(xe[Ee]=arguments[Ee].map(me[Ee])),J.apply(this,xe)}}let fe=re;if(x(L)){const he=L.length-1;fe=function(){return re.apply(this,K(arguments,0,he).concat([K(arguments,he)]))}}return fe}function W(L){let J,re,fe,he;const me=[],Se=[];switch(L.types.forEach(function(xe){xe.conversion&&(me.push(s(xe.conversion.from).test),Se.push(xe.conversion.convert))}),Se.length){case 0:return function(Ee){return Ee};case 1:return J=me[0],fe=Se[0],function(Ee){return J(Ee)?fe(Ee):Ee};case 2:return J=me[0],re=me[1],fe=Se[0],he=Se[1],function(Ee){return J(Ee)?fe(Ee):re(Ee)?he(Ee):Ee};default:return function(Ee){for(let we=0;we<Se.length;we++)if(me[we](Ee))return Se[we](Ee);return Ee}}}function R(L){function J(re,fe,he){if(fe<re.length){const me=re[fe];let Se=[];if(me.restParam){const xe=me.types.filter(E);xe.length<me.types.length&&Se.push({types:xe,name:"..."+xe.map(Ee=>Ee.name).join("|"),hasAny:xe.some(Ee=>Ee.isAny),hasConversion:!1,restParam:!0}),Se.push(me)}else Se=me.types.map(function(xe){return{types:[xe],name:xe.name,hasAny:xe.isAny,hasConversion:xe.conversion,restParam:!1}});return B(Se,function(xe){return J(re,fe+1,he.concat([xe]))})}else return[he]}return J(L,0,[])}function ie(L,J){const re=Math.max(L.length,J.length);for(let xe=0;xe<re;xe++){const Ee=A(L,xe),we=A(J,xe);let nt=!1,ke;for(ke of we)if(Ee.has(ke)){nt=!0;break}if(!nt)return!1}const fe=L.length,he=J.length,me=x(L),Se=x(J);return me?Se?fe===he:he>=fe:Se?fe>=he:fe===he}function te(L){return L.map(J=>z(J)?oe(J.referToSelf.callback):k(J)?j(J.referTo.references,J.referTo.callback):J)}function Z(L,J,re){const fe=[];let he;for(he of L){let me=re[he];if(typeof me!="number")throw new TypeError('No definition for referenced signature "'+he+'"');if(me=J[me],typeof me!="function")return!1;fe.push(me)}return fe}function X(L,J,re){const fe=te(L),he=new Array(fe.length).fill(!1);let me=!0;for(;me;){me=!1;let Se=!0;for(let xe=0;xe<fe.length;++xe){if(he[xe])continue;const Ee=fe[xe];if(z(Ee))fe[xe]=Ee.referToSelf.callback(re),fe[xe].referToSelf=Ee.referToSelf,he[xe]=!0,Se=!1;else if(k(Ee)){const we=Z(Ee.referTo.references,fe,J);we?(fe[xe]=Ee.referTo.callback.apply(this,we),fe[xe].referTo=Ee.referTo,he[xe]=!0,Se=!1):me=!0}}if(Se&&me)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return fe}function pe(L){const J=/\bthis(\(|\.signatures\b)/;Object.keys(L).forEach(re=>{const fe=L[re];if(J.test(fe.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function de(L,J){if(o.createCount++,Object.keys(J).length===0)throw new SyntaxError("No signatures provided");o.warnAgainstDeprecatedThis&&pe(J);const re=[],fe=[],he={},me=[];let Se;for(Se in J){if(!Object.prototype.hasOwnProperty.call(J,Se))continue;const Ye=w(Se);if(!Ye)continue;re.forEach(function(zi){if(ie(zi,Ye))throw new TypeError('Conflicting signatures "'+g(zi)+'" and "'+g(Ye)+'".')}),re.push(Ye);const Ft=fe.length;fe.push(J[Se]);const ei=Ye.map(N);let bi;for(bi of R(ei)){const zi=g(bi);me.push({params:bi,name:zi,fn:Ft}),bi.every(gr=>!gr.hasConversion)&&(he[zi]=Ft)}}me.sort(T);const xe=X(fe,he,Yt);let Ee;for(Ee in he)Object.prototype.hasOwnProperty.call(he,Ee)&&(he[Ee]=xe[he[Ee]]);const we=[],nt=new Map;for(Ee of me)nt.has(Ee.name)||(Ee.fn=xe[Ee.fn],we.push(Ee),nt.set(Ee.name,Ee));const ke=we[0]&&we[0].params.length<=2&&!x(we[0].params),Xe=we[1]&&we[1].params.length<=2&&!x(we[1].params),_=we[2]&&we[2].params.length<=2&&!x(we[2].params),ee=we[3]&&we[3].params.length<=2&&!x(we[3].params),ge=we[4]&&we[4].params.length<=2&&!x(we[4].params),Ne=we[5]&&we[5].params.length<=2&&!x(we[5].params),qe=ke&&Xe&&_&&ee&&ge&&Ne;for(let Ye=0;Ye<we.length;++Ye)we[Ye].test=S(we[Ye].params);const Qe=ke?b(we[0].params[0]):In,nr=Xe?b(we[1].params[0]):In,du=_?b(we[2].params[0]):In,Rp=ee?b(we[3].params[0]):In,sr=ge?b(we[4].params[0]):In,va=Ne?b(we[5].params[0]):In,Pp=ke?b(we[0].params[1]):In,Gl=Xe?b(we[1].params[1]):In,pu=_?b(we[2].params[1]):In,Kl=ee?b(we[3].params[1]):In,Jl=ge?b(we[4].params[1]):In,$p=Ne?b(we[5].params[1]):In;for(let Ye=0;Ye<we.length;++Ye)we[Ye].implementation=O(we[Ye].params,we[Ye].fn);const Fn=ke?we[0].implementation:fs,ya=Xe?we[1].implementation:fs,Yl=_?we[2].implementation:fs,Zl=ee?we[3].implementation:fs,hu=ge?we[4].implementation:fs,Xl=Ne?we[5].implementation:fs,Qn=ke?we[0].params.length:-1,Ql=Xe?we[1].params.length:-1,ec=_?we[2].params.length:-1,tc=ee?we[3].params.length:-1,rc=ge?we[4].params.length:-1,Lp=Ne?we[5].params.length:-1,ze=qe?6:0,le=we.length,_e=we.map(Ye=>Ye.test),Le=we.map(Ye=>Ye.implementation),Vt=function(){for(let Ft=ze;Ft<le;Ft++)if(_e[Ft](arguments))return Le[Ft].apply(this,arguments);return o.onMismatch(L,arguments,we)};function Yt(Ye,Ft){return arguments.length===Qn&&Qe(Ye)&&Pp(Ft)?Fn.apply(this,arguments):arguments.length===Ql&&nr(Ye)&&Gl(Ft)?ya.apply(this,arguments):arguments.length===ec&&du(Ye)&&pu(Ft)?Yl.apply(this,arguments):arguments.length===tc&&Rp(Ye)&&Kl(Ft)?Zl.apply(this,arguments):arguments.length===rc&&sr(Ye)&&Jl(Ft)?hu.apply(this,arguments):arguments.length===Lp&&va(Ye)&&$p(Ft)?Xl.apply(this,arguments):Vt.apply(this,arguments)}try{Object.defineProperty(Yt,"name",{value:L})}catch{}return Yt.signatures=he,Yt._typedFunctionData={signatures:we,signatureMap:nt},Yt}function G(L,J,re){throw M(L,J,re)}function V(L){return K(L,0,L.length-1)}function U(L){return L[L.length-1]}function K(L,J,re){return Array.prototype.slice.call(L,J,re)}function ae(L,J){for(let re=0;re<L.length;re++)if(J(L[re]))return L[re]}function B(L,J){return Array.prototype.concat.apply([],L.map(J))}function q(){const L=V(arguments).map(re=>g(w(re))),J=U(arguments);if(typeof J!="function")throw new TypeError("Callback function expected as last argument");return j(L,J)}function j(L,J){return{referTo:{references:L,callback:J}}}function oe(L){if(typeof L!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:L}}}function k(L){return L&&typeof L.referTo=="object"&&Array.isArray(L.referTo.references)&&typeof L.referTo.callback=="function"}function z(L){return L&&typeof L.referToSelf=="object"&&typeof L.referToSelf.callback=="function"}function Y(L,J){if(!L)return J;if(J&&J!==L){const re=new Error("Function names do not match (expected: "+L+", actual: "+J+")");throw re.data={actual:J,expected:L},re}return L}function ne(L){let J;for(const re in L)Object.prototype.hasOwnProperty.call(L,re)&&(d(L[re])||typeof L[re].signature=="string")&&(J=Y(J,L[re].name));return J}function se(L,J){let re;for(re in J)if(Object.prototype.hasOwnProperty.call(J,re)){if(re in L&&J[re]!==L[re]){const fe=new Error('Signature "'+re+'" is defined twice');throw fe.data={signature:re,sourceFunction:J[re],destFunction:L[re]},fe}L[re]=J[re]}}const ue=o;o=function(L){const J=typeof L=="string",re=J?1:0;let fe=J?L:"";const he={};for(let me=re;me<arguments.length;++me){const Se=arguments[me];let xe={},Ee;if(typeof Se=="function"?(Ee=Se.name,typeof Se.signature=="string"?xe[Se.signature]=Se:d(Se)&&(xe=Se.signatures)):t(Se)&&(xe=Se,J||(Ee=ne(Se))),Object.keys(xe).length===0){const we=new TypeError("Argument to 'typed' at index "+me+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw we.data={index:me,argument:Se},we}J||(fe=Y(fe,Ee)),se(he,xe)}return de(fe||"",he)},o.create=N2,o.createCount=ue.createCount,o.onMismatch=G,o.throwMismatchError=G,o.createError=M,o.clear=l,o.clearConversions=c,o.addTypes=u,o._findType=s,o.referTo=q,o.referToSelf=oe,o.convert=m,o.findSignature=p,o.find=h,o.isTypedFunction=d,o.warnAgainstDeprecatedThis=!0,o.addType=function(L,J){let re="any";J!==!1&&n.has("Object")&&(re="Object"),o.addTypes([L],re)};function ve(L){if(!L||typeof L.from!="string"||typeof L.to!="string"||typeof L.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(L.to===L.from)throw new SyntaxError('Illegal to define conversion from "'+L.from+'" to itself.')}return o.addConversion=function(L){let J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};ve(L);const re=s(L.to),fe=re.conversionsTo.find(he=>he.from===L.from);if(fe)if(J&&J.override)o.removeConversion({from:fe.from,to:L.to,convert:fe.convert});else throw new Error('There is already a conversion from "'+L.from+'" to "'+re.name+'"');re.conversionsTo.push({from:L.from,convert:L.convert,index:a++})},o.addConversions=function(L,J){L.forEach(re=>o.addConversion(re,J))},o.removeConversion=function(L){ve(L);const J=s(L.to),re=ae(J.conversionsTo,he=>he.from===L.from);if(!re)throw new Error("Attempt to remove nonexistent conversion from "+L.from+" to "+L.to);if(re.convert!==L.convert)throw new Error("Conversion to remove does not match existing conversion");const fe=J.conversionsTo.indexOf(re);J.conversionsTo.splice(fe,1)},o.resolve=function(L,J){if(!d(L))throw new TypeError(X1);const re=L._typedFunctionData.signatures;for(let fe=0;fe<re.length;++fe)if(re[fe].test(J))return re[fe];return null},o}const cd=N2();function H(t,e,r,n){function i(a){var o=i8(a,e.map(l8));return s8(t,e,a),r(o)}return i.isFactory=!0,i.fn=t,i.dependencies=e.slice().sort(),n&&(i.meta=n),i}function s8(t,e,r){var n=e.filter(a=>!u8(a)).every(a=>r[a]!==void 0);if(!n){var i=e.filter(a=>r[a]===void 0);throw new Error('Cannot create function "'.concat(t,'", ')+"some dependencies are missing: ".concat(i.map(a=>'"'.concat(a,'"')).join(", "),"."))}}function u8(t){return t&&t[0]==="?"}function l8(t){return t&&t[0]==="?"?t.slice(1):t}function $e(t){return typeof t=="boolean"?!0:isFinite(t)?t===Math.round(t):!1}function io(t,e){if(e.number==="bigint")try{BigInt(t)}catch{return e.numberFallback}return e.number}var $a=Math.sign||function(t){return t>0?1:t<0?-1:0},c8=Math.log2||function(e){return Math.log(e)/Math.LN2},f8=Math.log10||function(e){return Math.log(e)/Math.LN10},d8=Math.log1p||function(t){return Math.log(t+1)},p8=Math.cbrt||function(e){if(e===0)return e;var r=e<0,n;return r&&(e=-e),isFinite(e)?(n=Math.exp(Math.log(e)/3),n=(e/(n*n)+2*n)/3):n=e,r?-n:n},h8=Math.expm1||function(e){return e>=2e-4||e<=-2e-4?Math.exp(e)-1:e+e*e/2+e*e*e/6};function Rh(t,e,r){var n={2:"0b",8:"0o",16:"0x"},i=n[e],a="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!$e(r))throw new Error("size must be an integer");if(t>2**(r-1)-1||t<-(2**(r-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!$e(t))throw new Error("Value must be an integer");t<0&&(t=t+2**r),a="i".concat(r)}var o="";return t<0&&(t=-t,o="-"),"".concat(o).concat(i).concat(t.toString(e)).concat(a)}function Lo(t,e){if(typeof e=="function")return e(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var{notation:r,precision:n,wordSize:i}=A2(e);switch(r){case"fixed":return S2(t,n);case"exponential":return D2(t,n);case"engineering":return m8(t,n);case"bin":return Rh(t,2,i);case"oct":return Rh(t,8,i);case"hex":return Rh(t,16,i);case"auto":return g8(t,n,e).replace(/((\.\d*?)(0+))($|e)/,function(){var a=arguments[2],o=arguments[4];return a!=="."?a+o:o});default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function A2(t){var e="auto",r,n;if(t!==void 0)if(it(t))r=t;else if(ot(t))r=t.toNumber();else if(mp(t))t.precision!==void 0&&(r=Q1(t.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),t.wordSize!==void 0&&(n=Q1(t.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),t.notation&&(e=t.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:e,precision:r,wordSize:n}}function Pl(t){var e=String(t).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var r=e[1],n=e[2],i=parseFloat(e[4]||"0"),a=n.indexOf(".");i+=a!==-1?a-1:n.length-1;var o=n.replace(".","").replace(/^0*/,function(s){return i-=s.length,""}).replace(/0*$/,"").split("").map(function(s){return parseInt(s)});return o.length===0&&(o.push(0),i++),{sign:r,coefficients:o,exponent:i}}function m8(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=Pl(t),n=vp(r,e),i=n.exponent,a=n.coefficients,o=i%3===0?i:i<0?i-3-i%3:i-i%3;if(it(e))for(;e>a.length||i-o+1>a.length;)a.push(0);else for(var s=Math.abs(i-o)-(a.length-1),u=0;u<s;u++)a.push(0);for(var l=Math.abs(i-o),c=1;l>0;)c++,l--;var f=a.slice(c).join(""),d=it(e)&&f.length||f.match(/[1-9]/)?"."+f:"",p=a.slice(0,c).join("")+d+"e"+(i>=0?"+":"")+o.toString();return n.sign+p}function S2(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=Pl(t),n=typeof e=="number"?vp(r,r.exponent+1+e):r,i=n.coefficients,a=n.exponent+1,o=a+(e||0);return i.length<o&&(i=i.concat(ks(o-i.length))),a<0&&(i=ks(-a+1).concat(i),a=1),a<i.length&&i.splice(a,0,a===0?"0.":"."),n.sign+i.join("")}function D2(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=Pl(t),n=e?vp(r,e):r,i=n.coefficients,a=n.exponent;i.length<e&&(i=i.concat(ks(e-i.length)));var o=i.shift();return n.sign+o+(i.length>0?"."+i.join(""):"")+"e"+(a>=0?"+":"")+a}function g8(t,e,r){if(isNaN(t)||!isFinite(t))return String(t);var n=eb(r==null?void 0:r.lowerExp,-3),i=eb(r==null?void 0:r.upperExp,5),a=Pl(t),o=e?vp(a,e):a;if(o.exponent<n||o.exponent>=i)return D2(t,e);var s=o.coefficients,u=o.exponent;s.length<e&&(s=s.concat(ks(e-s.length))),s=s.concat(ks(u-s.length+1+(s.length<e?e-s.length:0))),s=ks(-u).concat(s);var l=u>0?u:0;return l<s.length-1&&s.splice(l+1,0,"."),o.sign+s.join("")}function vp(t,e){for(var r={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},n=r.coefficients;e<=0;)n.unshift(0),r.exponent++,e++;if(n.length>e){var i=n.splice(e,n.length-e);if(i[0]>=5){var a=e-1;for(n[a]++;n[a]===10;)n.pop(),a===0&&(n.unshift(0),r.exponent++,a++),a--,n[a]++}}return r}function ks(t){for(var e=[],r=0;r<t;r++)e.push(0);return e}function v8(t){return t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}function $r(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-8,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(r<=0)throw new Error("Relative tolerance must be greater than 0");if(n<0)throw new Error("Absolute tolerance must be at least 0");return isNaN(t)||isNaN(e)?!1:!isFinite(t)||!isFinite(e)?t===e:t===e?!0:Math.abs(t-e)<=Math.max(r*Math.max(Math.abs(t),Math.abs(e)),n)}var y8=Math.acosh||function(t){return Math.log(Math.sqrt(t*t-1)+t)},b8=Math.asinh||function(t){return Math.log(Math.sqrt(t*t+1)+t)},x8=Math.atanh||function(t){return Math.log((1+t)/(1-t))/2},w8=Math.cosh||function(t){return(Math.exp(t)+Math.exp(-t))/2},N8=Math.sinh||function(t){return(Math.exp(t)-Math.exp(-t))/2},A8=Math.tanh||function(t){var e=Math.exp(2*t);return(e-1)/(e+1)};function S8(t,e){var r=!0,n=e>0?!0:e<0?!1:1/e===1/0;return r^n?-6.283185307179586:t}function Q1(t,e){if(it(t))return t;if(ot(t))return t.toNumber();e()}function eb(t,e){return it(t)?t:ot(t)?t.toNumber():e}var E2=function(){return E2=cd.create,cd},D8=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],E8=H("typed",D8,function(e){var{BigNumber:r,Complex:n,DenseMatrix:i,Fraction:a}=e,o=E2();return o.clear(),o.addTypes([{name:"number",test:it},{name:"Complex",test:ua},{name:"BigNumber",test:ot},{name:"bigint",test:Qu},{name:"Fraction",test:Il},{name:"Unit",test:qn},{name:"identifier",test:s=>Vr&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(s)},{name:"string",test:Vr},{name:"Chain",test:x2},{name:"Array",test:Bt},{name:"Matrix",test:We},{name:"DenseMatrix",test:ld},{name:"SparseMatrix",test:_o},{name:"Range",test:xv},{name:"Index",test:hp},{name:"boolean",test:V$},{name:"ResultSet",test:W$},{name:"Help",test:y2},{name:"function",test:j$},{name:"Date",test:G$},{name:"RegExp",test:K$},{name:"null",test:J$},{name:"undefined",test:Y$},{name:"AccessorNode",test:Wo},{name:"ArrayNode",test:zn},{name:"AssignmentNode",test:Z$},{name:"BlockNode",test:X$},{name:"ConditionalNode",test:Q$},{name:"ConstantNode",test:wt},{name:"FunctionNode",test:Za},{name:"FunctionAssignmentNode",test:Rl},{name:"IndexNode",test:eu},{name:"Node",test:Ot},{name:"ObjectNode",test:gp},{name:"OperatorNode",test:ir},{name:"ParenthesisNode",test:da},{name:"RangeNode",test:e8},{name:"RelationalNode",test:t8},{name:"SymbolNode",test:xr},{name:"Map",test:b2},{name:"Object",test:mp}]),o.addConversions([{from:"number",to:"BigNumber",convert:function(u){if(r||Nc(u),v8(u)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+u+"). Use function bignumber(x) to convert to BigNumber.");return new r(u)}},{from:"number",to:"Complex",convert:function(u){return n||Ac(u),new n(u,0)}},{from:"BigNumber",to:"Complex",convert:function(u){return n||Ac(u),new n(u.toNumber(),0)}},{from:"bigint",to:"number",convert:function(u){if(u>Number.MAX_SAFE_INTEGER)throw new TypeError("Cannot implicitly convert bigint to number: value exceeds the max safe integer value (value: "+u+")");return Number(u)}},{from:"bigint",to:"BigNumber",convert:function(u){return r||Nc(u),new r(u.toString())}},{from:"bigint",to:"Fraction",convert:function(u){return a||Sc(u),new a(u)}},{from:"Fraction",to:"BigNumber",convert:function(u){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(u){return n||Ac(u),new n(u.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(u){a||Sc(u);var l=new a(u);if(l.valueOf()!==u)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+u+"). Use function fraction(x) to convert to Fraction.");return l}},{from:"string",to:"number",convert:function(u){var l=Number(u);if(isNaN(l))throw new Error('Cannot convert "'+u+'" to a number');return l}},{from:"string",to:"BigNumber",convert:function(u){r||Nc(u);try{return new r(u)}catch{throw new Error('Cannot convert "'+u+'" to BigNumber')}}},{from:"string",to:"bigint",convert:function(u){try{return BigInt(u)}catch{throw new Error('Cannot convert "'+u+'" to BigInt')}}},{from:"string",to:"Fraction",convert:function(u){a||Sc(u);try{return new a(u)}catch{throw new Error('Cannot convert "'+u+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(u){n||Ac(u);try{return new n(u)}catch{throw new Error('Cannot convert "'+u+'" to Complex')}}},{from:"boolean",to:"number",convert:function(u){return+u}},{from:"boolean",to:"BigNumber",convert:function(u){return r||Nc(u),new r(+u)}},{from:"boolean",to:"bigint",convert:function(u){return BigInt(+u)}},{from:"boolean",to:"Fraction",convert:function(u){return a||Sc(u),new a(+u)}},{from:"boolean",to:"string",convert:function(u){return String(u)}},{from:"Array",to:"Matrix",convert:function(u){return i||C8(),new i(u)}},{from:"Matrix",to:"Array",convert:function(u){return u.valueOf()}}]),o.onMismatch=(s,u,l)=>{var c=o.createError(s,u,l);if(["wrongType","mismatch"].includes(c.data.category)&&u.length===1&&Jn(u[0])&&l.some(d=>!d.params.includes(","))){var f=new TypeError("Function '".concat(s,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(s,")'."));throw f.data=c.data,f}throw c},o.onMismatch=(s,u,l)=>{var c=o.createError(s,u,l);if(["wrongType","mismatch"].includes(c.data.category)&&u.length===1&&Jn(u[0])&&l.some(d=>!d.params.includes(","))){var f=new TypeError("Function '".concat(s,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(s,")'."));throw f.data=c.data,f}throw c},o});function Nc(t){throw new Error("Cannot convert value ".concat(t," into a BigNumber: no class 'BigNumber' provided"))}function Ac(t){throw new Error("Cannot convert value ".concat(t," into a Complex number: no class 'Complex' provided"))}function C8(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function Sc(t){throw new Error("Cannot convert value ".concat(t," into a Fraction, no class 'Fraction' provided."))}var M8="ResultSet",T8=[],_8=H(M8,T8,()=>{function t(e){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");this.entries=e||[]}return t.prototype.type="ResultSet",t.prototype.isResultSet=!0,t.prototype.valueOf=function(){return this.entries},t.prototype.toString=function(){return"["+this.entries.map(String).join(", ")+"]"},t.prototype.toJSON=function(){return{mathjs:"ResultSet",entries:this.entries}},t.fromJSON=function(e){return new t(e.entries)},t},{isClass:!0});/*!
 *  decimal.js v10.5.0
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var Km=9e15,ao=1e9,Jm="0123456789abcdef",fd="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",dd="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Ym={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-9e15,maxE:Km,crypto:!1},C2,ra,tt=!0,yp="[DecimalError] ",Xa=yp+"Invalid argument: ",M2=yp+"Precision limit exceeded",T2=yp+"crypto unavailable",_2="[object Decimal]",Jr=Math.floor,fr=Math.pow,O8=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,F8=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,B8=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,O2=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,si=1e7,Ke=7,k8=9007199254740991,I8=fd.length-1,Zm=dd.length-1,Ae={toStringTag:_2};Ae.absoluteValue=Ae.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),He(t)};Ae.ceil=function(){return He(new this.constructor(this),this.e+1,2)};Ae.clampedTo=Ae.clamp=function(t,e){var r,n=this,i=n.constructor;if(t=new i(t),e=new i(e),!t.s||!e.s)return new i(NaN);if(t.gt(e))throw Error(Xa+e);return r=n.cmp(t),r<0?t:n.cmp(e)>0?e:new i(n)};Ae.comparedTo=Ae.cmp=function(t){var e,r,n,i,a=this,o=a.d,s=(t=new a.constructor(t)).d,u=a.s,l=t.s;if(!o||!s)return!u||!l?NaN:u!==l?u:o===s?0:!o^u<0?1:-1;if(!o[0]||!s[0])return o[0]?u:s[0]?-l:0;if(u!==l)return u;if(a.e!==t.e)return a.e>t.e^u<0?1:-1;for(n=o.length,i=s.length,e=0,r=n<i?n:i;e<r;++e)if(o[e]!==s[e])return o[e]>s[e]^u<0?1:-1;return n===i?0:n>i^u<0?1:-1};Ae.cosine=Ae.cos=function(){var t,e,r=this,n=r.constructor;return r.d?r.d[0]?(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+Ke,n.rounding=1,r=R8(n,R2(n,r)),n.precision=t,n.rounding=e,He(ra==2||ra==3?r.neg():r,t,e,!0)):new n(1):new n(NaN)};Ae.cubeRoot=Ae.cbrt=function(){var t,e,r,n,i,a,o,s,u,l,c=this,f=c.constructor;if(!c.isFinite()||c.isZero())return new f(c);for(tt=!1,a=c.s*fr(c.s*c,1/3),!a||Math.abs(a)==1/0?(r=kr(c.d),t=c.e,(a=(t-r.length+1)%3)&&(r+=a==1||a==-2?"0":"00"),a=fr(r,1/3),t=Jr((t+1)/3)-(t%3==(t<0?-1:2)),a==1/0?r="5e"+t:(r=a.toExponential(),r=r.slice(0,r.indexOf("e")+1)+t),n=new f(r),n.s=c.s):n=new f(a.toString()),o=(t=f.precision)+3;;)if(s=n,u=s.times(s).times(s),l=u.plus(c),n=Ut(l.plus(c).times(s),l.plus(u),o+2,1),kr(s.d).slice(0,o)===(r=kr(n.d)).slice(0,o))if(r=r.slice(o-3,o+1),r=="9999"||!i&&r=="4999"){if(!i&&(He(s,t+1,0),s.times(s).times(s).eq(c))){n=s;break}o+=4,i=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(He(n,t+1,1),e=!n.times(n).times(n).eq(c));break}return tt=!0,He(n,t,f.rounding,e)};Ae.decimalPlaces=Ae.dp=function(){var t,e=this.d,r=NaN;if(e){if(t=e.length-1,r=(t-Jr(this.e/Ke))*Ke,t=e[t],t)for(;t%10==0;t/=10)r--;r<0&&(r=0)}return r};Ae.dividedBy=Ae.div=function(t){return Ut(this,new this.constructor(t))};Ae.dividedToIntegerBy=Ae.divToInt=function(t){var e=this,r=e.constructor;return He(Ut(e,new r(t),0,1,1),r.precision,r.rounding)};Ae.equals=Ae.eq=function(t){return this.cmp(t)===0};Ae.floor=function(){return He(new this.constructor(this),this.e+1,3)};Ae.greaterThan=Ae.gt=function(t){return this.cmp(t)>0};Ae.greaterThanOrEqualTo=Ae.gte=function(t){var e=this.cmp(t);return e==1||e===0};Ae.hyperbolicCosine=Ae.cosh=function(){var t,e,r,n,i,a=this,o=a.constructor,s=new o(1);if(!a.isFinite())return new o(a.s?1/0:NaN);if(a.isZero())return s;r=o.precision,n=o.rounding,o.precision=r+Math.max(a.e,a.sd())+4,o.rounding=1,i=a.d.length,i<32?(t=Math.ceil(i/3),e=(1/xp(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),a=js(o,1,a.times(e),new o(1),!0);for(var u,l=t,c=new o(8);l--;)u=a.times(a),a=s.minus(u.times(c.minus(u.times(c))));return He(a,o.precision=r,o.rounding=n,!0)};Ae.hyperbolicSine=Ae.sinh=function(){var t,e,r,n,i=this,a=i.constructor;if(!i.isFinite()||i.isZero())return new a(i);if(e=a.precision,r=a.rounding,a.precision=e+Math.max(i.e,i.sd())+4,a.rounding=1,n=i.d.length,n<3)i=js(a,2,i,i,!0);else{t=1.4*Math.sqrt(n),t=t>16?16:t|0,i=i.times(1/xp(5,t)),i=js(a,2,i,i,!0);for(var o,s=new a(5),u=new a(16),l=new a(20);t--;)o=i.times(i),i=i.times(s.plus(o.times(u.times(o).plus(l))))}return a.precision=e,a.rounding=r,He(i,e,r,!0)};Ae.hyperbolicTangent=Ae.tanh=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+7,n.rounding=1,Ut(r.sinh(),r.cosh(),n.precision=t,n.rounding=e)):new n(r.s)};Ae.inverseCosine=Ae.acos=function(){var t=this,e=t.constructor,r=t.abs().cmp(1),n=e.precision,i=e.rounding;return r!==-1?r===0?t.isNeg()?Ci(e,n,i):new e(0):new e(NaN):t.isZero()?Ci(e,n+4,i).times(.5):(e.precision=n+6,e.rounding=1,t=new e(1).minus(t).div(t.plus(1)).sqrt().atan(),e.precision=n,e.rounding=i,t.times(2))};Ae.inverseHyperbolicCosine=Ae.acosh=function(){var t,e,r=this,n=r.constructor;return r.lte(1)?new n(r.eq(1)?0:NaN):r.isFinite()?(t=n.precision,e=n.rounding,n.precision=t+Math.max(Math.abs(r.e),r.sd())+4,n.rounding=1,tt=!1,r=r.times(r).minus(1).sqrt().plus(r),tt=!0,n.precision=t,n.rounding=e,r.ln()):new n(r)};Ae.inverseHyperbolicSine=Ae.asinh=function(){var t,e,r=this,n=r.constructor;return!r.isFinite()||r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+2*Math.max(Math.abs(r.e),r.sd())+6,n.rounding=1,tt=!1,r=r.times(r).plus(1).sqrt().plus(r),tt=!0,n.precision=t,n.rounding=e,r.ln())};Ae.inverseHyperbolicTangent=Ae.atanh=function(){var t,e,r,n,i=this,a=i.constructor;return i.isFinite()?i.e>=0?new a(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=a.precision,e=a.rounding,n=i.sd(),Math.max(n,t)<2*-i.e-1?He(new a(i),t,e,!0):(a.precision=r=n-i.e,i=Ut(i.plus(1),new a(1).minus(i),r+t,1),a.precision=t+4,a.rounding=1,i=i.ln(),a.precision=t,a.rounding=e,i.times(.5))):new a(NaN)};Ae.inverseSine=Ae.asin=function(){var t,e,r,n,i=this,a=i.constructor;return i.isZero()?new a(i):(e=i.abs().cmp(1),r=a.precision,n=a.rounding,e!==-1?e===0?(t=Ci(a,r+4,n).times(.5),t.s=i.s,t):new a(NaN):(a.precision=r+6,a.rounding=1,i=i.div(new a(1).minus(i.times(i)).sqrt().plus(1)).atan(),a.precision=r,a.rounding=n,i.times(2)))};Ae.inverseTangent=Ae.atan=function(){var t,e,r,n,i,a,o,s,u,l=this,c=l.constructor,f=c.precision,d=c.rounding;if(l.isFinite()){if(l.isZero())return new c(l);if(l.abs().eq(1)&&f+4<=Zm)return o=Ci(c,f+4,d).times(.25),o.s=l.s,o}else{if(!l.s)return new c(NaN);if(f+4<=Zm)return o=Ci(c,f+4,d).times(.5),o.s=l.s,o}for(c.precision=s=f+10,c.rounding=1,r=Math.min(28,s/Ke+2|0),t=r;t;--t)l=l.div(l.times(l).plus(1).sqrt().plus(1));for(tt=!1,e=Math.ceil(s/Ke),n=1,u=l.times(l),o=new c(l),i=l;t!==-1;)if(i=i.times(u),a=o.minus(i.div(n+=2)),i=i.times(u),o=a.plus(i.div(n+=2)),o.d[e]!==void 0)for(t=e;o.d[t]===a.d[t]&&t--;);return r&&(o=o.times(2<<r-1)),tt=!0,He(o,c.precision=f,c.rounding=d,!0)};Ae.isFinite=function(){return!!this.d};Ae.isInteger=Ae.isInt=function(){return!!this.d&&Jr(this.e/Ke)>this.d.length-2};Ae.isNaN=function(){return!this.s};Ae.isNegative=Ae.isNeg=function(){return this.s<0};Ae.isPositive=Ae.isPos=function(){return this.s>0};Ae.isZero=function(){return!!this.d&&this.d[0]===0};Ae.lessThan=Ae.lt=function(t){return this.cmp(t)<0};Ae.lessThanOrEqualTo=Ae.lte=function(t){return this.cmp(t)<1};Ae.logarithm=Ae.log=function(t){var e,r,n,i,a,o,s,u,l=this,c=l.constructor,f=c.precision,d=c.rounding,p=5;if(t==null)t=new c(10),e=!0;else{if(t=new c(t),r=t.d,t.s<0||!r||!r[0]||t.eq(1))return new c(NaN);e=t.eq(10)}if(r=l.d,l.s<0||!r||!r[0]||l.eq(1))return new c(r&&!r[0]?-1/0:l.s!=1?NaN:r?0:1/0);if(e)if(r.length>1)a=!0;else{for(i=r[0];i%10===0;)i/=10;a=i!==1}if(tt=!1,s=f+p,o=La(l,s),n=e?pd(c,s+10):La(t,s),u=Ut(o,n,s,1),Nl(u.d,i=f,d))do if(s+=10,o=La(l,s),n=e?pd(c,s+10):La(t,s),u=Ut(o,n,s,1),!a){+kr(u.d).slice(i+1,i+15)+1==1e14&&(u=He(u,f+1,0));break}while(Nl(u.d,i+=10,d));return tt=!0,He(u,f,d)};Ae.minus=Ae.sub=function(t){var e,r,n,i,a,o,s,u,l,c,f,d,p=this,h=p.constructor;if(t=new h(t),!p.d||!t.d)return!p.s||!t.s?t=new h(NaN):p.d?t.s=-t.s:t=new h(t.d||p.s!==t.s?p:NaN),t;if(p.s!=t.s)return t.s=-t.s,p.plus(t);if(l=p.d,d=t.d,s=h.precision,u=h.rounding,!l[0]||!d[0]){if(d[0])t.s=-t.s;else if(l[0])t=new h(p);else return new h(u===3?-0:0);return tt?He(t,s,u):t}if(r=Jr(t.e/Ke),c=Jr(p.e/Ke),l=l.slice(),a=c-r,a){for(f=a<0,f?(e=l,a=-a,o=d.length):(e=d,r=c,o=l.length),n=Math.max(Math.ceil(s/Ke),o)+2,a>n&&(a=n,e.length=1),e.reverse(),n=a;n--;)e.push(0);e.reverse()}else{for(n=l.length,o=d.length,f=n<o,f&&(o=n),n=0;n<o;n++)if(l[n]!=d[n]){f=l[n]<d[n];break}a=0}for(f&&(e=l,l=d,d=e,t.s=-t.s),o=l.length,n=d.length-o;n>0;--n)l[o++]=0;for(n=d.length;n>a;){if(l[--n]<d[n]){for(i=n;i&&l[--i]===0;)l[i]=si-1;--l[i],l[n]+=si}l[n]-=d[n]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(t.d=l,t.e=bp(l,r),tt?He(t,s,u):t):new h(u===3?-0:0)};Ae.modulo=Ae.mod=function(t){var e,r=this,n=r.constructor;return t=new n(t),!r.d||!t.s||t.d&&!t.d[0]?new n(NaN):!t.d||r.d&&!r.d[0]?He(new n(r),n.precision,n.rounding):(tt=!1,n.modulo==9?(e=Ut(r,t.abs(),0,3,1),e.s*=t.s):e=Ut(r,t,0,n.modulo,1),e=e.times(t),tt=!0,r.minus(e))};Ae.naturalExponential=Ae.exp=function(){return Xm(this)};Ae.naturalLogarithm=Ae.ln=function(){return La(this)};Ae.negated=Ae.neg=function(){var t=new this.constructor(this);return t.s=-t.s,He(t)};Ae.plus=Ae.add=function(t){var e,r,n,i,a,o,s,u,l,c,f=this,d=f.constructor;if(t=new d(t),!f.d||!t.d)return!f.s||!t.s?t=new d(NaN):f.d||(t=new d(t.d||f.s===t.s?f:NaN)),t;if(f.s!=t.s)return t.s=-t.s,f.minus(t);if(l=f.d,c=t.d,s=d.precision,u=d.rounding,!l[0]||!c[0])return c[0]||(t=new d(f)),tt?He(t,s,u):t;if(a=Jr(f.e/Ke),n=Jr(t.e/Ke),l=l.slice(),i=a-n,i){for(i<0?(r=l,i=-i,o=c.length):(r=c,n=a,o=l.length),a=Math.ceil(s/Ke),o=a>o?a+1:o+1,i>o&&(i=o,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(o=l.length,i=c.length,o-i<0&&(i=o,r=c,c=l,l=r),e=0;i;)e=(l[--i]=l[i]+c[i]+e)/si|0,l[i]%=si;for(e&&(l.unshift(e),++n),o=l.length;l[--o]==0;)l.pop();return t.d=l,t.e=bp(l,n),tt?He(t,s,u):t};Ae.precision=Ae.sd=function(t){var e,r=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Xa+t);return r.d?(e=F2(r.d),t&&r.e+1>e&&(e=r.e+1)):e=NaN,e};Ae.round=function(){var t=this,e=t.constructor;return He(new e(t),t.e+1,e.rounding)};Ae.sine=Ae.sin=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+Ke,n.rounding=1,r=$8(n,R2(n,r)),n.precision=t,n.rounding=e,He(ra>2?r.neg():r,t,e,!0)):new n(NaN)};Ae.squareRoot=Ae.sqrt=function(){var t,e,r,n,i,a,o=this,s=o.d,u=o.e,l=o.s,c=o.constructor;if(l!==1||!s||!s[0])return new c(!l||l<0&&(!s||s[0])?NaN:s?o:1/0);for(tt=!1,l=Math.sqrt(+o),l==0||l==1/0?(e=kr(s),(e.length+u)%2==0&&(e+="0"),l=Math.sqrt(e),u=Jr((u+1)/2)-(u<0||u%2),l==1/0?e="5e"+u:(e=l.toExponential(),e=e.slice(0,e.indexOf("e")+1)+u),n=new c(e)):n=new c(l.toString()),r=(u=c.precision)+3;;)if(a=n,n=a.plus(Ut(o,a,r+2,1)).times(.5),kr(a.d).slice(0,r)===(e=kr(n.d)).slice(0,r))if(e=e.slice(r-3,r+1),e=="9999"||!i&&e=="4999"){if(!i&&(He(a,u+1,0),a.times(a).eq(o))){n=a;break}r+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(He(n,u+1,1),t=!n.times(n).eq(o));break}return tt=!0,He(n,u,c.rounding,t)};Ae.tangent=Ae.tan=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+10,n.rounding=1,r=r.sin(),r.s=1,r=Ut(r,new n(1).minus(r.times(r)).sqrt(),t+10,0),n.precision=t,n.rounding=e,He(ra==2||ra==4?r.neg():r,t,e,!0)):new n(NaN)};Ae.times=Ae.mul=function(t){var e,r,n,i,a,o,s,u,l,c=this,f=c.constructor,d=c.d,p=(t=new f(t)).d;if(t.s*=c.s,!d||!d[0]||!p||!p[0])return new f(!t.s||d&&!d[0]&&!p||p&&!p[0]&&!d?NaN:!d||!p?t.s/0:t.s*0);for(r=Jr(c.e/Ke)+Jr(t.e/Ke),u=d.length,l=p.length,u<l&&(a=d,d=p,p=a,o=u,u=l,l=o),a=[],o=u+l,n=o;n--;)a.push(0);for(n=l;--n>=0;){for(e=0,i=u+n;i>n;)s=a[i]+p[n]*d[i-n-1]+e,a[i--]=s%si|0,e=s/si|0;a[i]=(a[i]+e)%si|0}for(;!a[--o];)a.pop();return e?++r:a.shift(),t.d=a,t.e=bp(a,r),tt?He(t,f.precision,f.rounding):t};Ae.toBinary=function(t,e){return wv(this,2,t,e)};Ae.toDecimalPlaces=Ae.toDP=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(Sn(t,0,ao),e===void 0?e=n.rounding:Sn(e,0,8),He(r,t+r.e+1,e))};Ae.toExponential=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=ki(n,!0):(Sn(t,0,ao),e===void 0?e=i.rounding:Sn(e,0,8),n=He(new i(n),t+1,e),r=ki(n,!0,t+1)),n.isNeg()&&!n.isZero()?"-"+r:r};Ae.toFixed=function(t,e){var r,n,i=this,a=i.constructor;return t===void 0?r=ki(i):(Sn(t,0,ao),e===void 0?e=a.rounding:Sn(e,0,8),n=He(new a(i),t+i.e+1,e),r=ki(n,!1,t+n.e+1)),i.isNeg()&&!i.isZero()?"-"+r:r};Ae.toFraction=function(t){var e,r,n,i,a,o,s,u,l,c,f,d,p=this,h=p.d,m=p.constructor;if(!h)return new m(p);if(l=r=new m(1),n=u=new m(0),e=new m(n),a=e.e=F2(h)-p.e-1,o=a%Ke,e.d[0]=fr(10,o<0?Ke+o:o),t==null)t=a>0?e:l;else{if(s=new m(t),!s.isInt()||s.lt(l))throw Error(Xa+s);t=s.gt(e)?a>0?e:l:s}for(tt=!1,s=new m(kr(h)),c=m.precision,m.precision=a=h.length*Ke*2;f=Ut(s,e,0,1,1),i=r.plus(f.times(n)),i.cmp(t)!=1;)r=n,n=i,i=l,l=u.plus(f.times(i)),u=i,i=e,e=s.minus(f.times(i)),s=i;return i=Ut(t.minus(r),n,0,1,1),u=u.plus(i.times(l)),r=r.plus(i.times(n)),u.s=l.s=p.s,d=Ut(l,n,a,1).minus(p).abs().cmp(Ut(u,r,a,1).minus(p).abs())<1?[l,n]:[u,r],m.precision=c,tt=!0,d};Ae.toHexadecimal=Ae.toHex=function(t,e){return wv(this,16,t,e)};Ae.toNearest=function(t,e){var r=this,n=r.constructor;if(r=new n(r),t==null){if(!r.d)return r;t=new n(1),e=n.rounding}else{if(t=new n(t),e===void 0?e=n.rounding:Sn(e,0,8),!r.d)return t.s?r:t;if(!t.d)return t.s&&(t.s=r.s),t}return t.d[0]?(tt=!1,r=Ut(r,t,0,e,1).times(t),tt=!0,He(r)):(t.s=r.s,r=t),r};Ae.toNumber=function(){return+this};Ae.toOctal=function(t,e){return wv(this,8,t,e)};Ae.toPower=Ae.pow=function(t){var e,r,n,i,a,o,s=this,u=s.constructor,l=+(t=new u(t));if(!s.d||!t.d||!s.d[0]||!t.d[0])return new u(fr(+s,l));if(s=new u(s),s.eq(1))return s;if(n=u.precision,a=u.rounding,t.eq(1))return He(s,n,a);if(e=Jr(t.e/Ke),e>=t.d.length-1&&(r=l<0?-l:l)<=k8)return i=B2(u,s,r,n),t.s<0?new u(1).div(i):He(i,n,a);if(o=s.s,o<0){if(e<t.d.length-1)return new u(NaN);if((t.d[e]&1)==0&&(o=1),s.e==0&&s.d[0]==1&&s.d.length==1)return s.s=o,s}return r=fr(+s,l),e=r==0||!isFinite(r)?Jr(l*(Math.log("0."+kr(s.d))/Math.LN10+s.e+1)):new u(r+"").e,e>u.maxE+1||e<u.minE-1?new u(e>0?o/0:0):(tt=!1,u.rounding=s.s=1,r=Math.min(12,(e+"").length),i=Xm(t.times(La(s,n+r)),n),i.d&&(i=He(i,n+5,1),Nl(i.d,n,a)&&(e=n+10,i=He(Xm(t.times(La(s,e+r)),e),e+5,1),+kr(i.d).slice(n+1,n+15)+1==1e14&&(i=He(i,n+1,0)))),i.s=o,tt=!0,u.rounding=a,He(i,n,a))};Ae.toPrecision=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=ki(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(Sn(t,1,ao),e===void 0?e=i.rounding:Sn(e,0,8),n=He(new i(n),t,e),r=ki(n,t<=n.e||n.e<=i.toExpNeg,t)),n.isNeg()&&!n.isZero()?"-"+r:r};Ae.toSignificantDigits=Ae.toSD=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(Sn(t,1,ao),e===void 0?e=n.rounding:Sn(e,0,8)),He(new n(r),t,e)};Ae.toString=function(){var t=this,e=t.constructor,r=ki(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+r:r};Ae.truncated=Ae.trunc=function(){return He(new this.constructor(this),this.e+1,1)};Ae.valueOf=Ae.toJSON=function(){var t=this,e=t.constructor,r=ki(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+r:r};function kr(t){var e,r,n,i=t.length-1,a="",o=t[0];if(i>0){for(a+=o,e=1;e<i;e++)n=t[e]+"",r=Ke-n.length,r&&(a+=Oa(r)),a+=n;o=t[e],n=o+"",r=Ke-n.length,r&&(a+=Oa(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}function Sn(t,e,r){if(t!==~~t||t<e||t>r)throw Error(Xa+t)}function Nl(t,e,r,n){var i,a,o,s;for(a=t[0];a>=10;a/=10)--e;return--e<0?(e+=Ke,i=0):(i=Math.ceil((e+1)/Ke),e%=Ke),a=fr(10,Ke-e),s=t[i]%a|0,n==null?e<3?(e==0?s=s/100|0:e==1&&(s=s/10|0),o=r<4&&s==99999||r>3&&s==49999||s==5e4||s==0):o=(r<4&&s+1==a||r>3&&s+1==a/2)&&(t[i+1]/a/100|0)==fr(10,e-2)-1||(s==a/2||s==0)&&(t[i+1]/a/100|0)==0:e<4?(e==0?s=s/1e3|0:e==1?s=s/100|0:e==2&&(s=s/10|0),o=(n||r<4)&&s==9999||!n&&r>3&&s==4999):o=((n||r<4)&&s+1==a||!n&&r>3&&s+1==a/2)&&(t[i+1]/a/1e3|0)==fr(10,e-3)-1,o}function rf(t,e,r){for(var n,i=[0],a,o=0,s=t.length;o<s;){for(a=i.length;a--;)i[a]*=e;for(i[0]+=Jm.indexOf(t.charAt(o++)),n=0;n<i.length;n++)i[n]>r-1&&(i[n+1]===void 0&&(i[n+1]=0),i[n+1]+=i[n]/r|0,i[n]%=r)}return i.reverse()}function R8(t,e){var r,n,i;if(e.isZero())return e;n=e.d.length,n<32?(r=Math.ceil(n/3),i=(1/xp(4,r)).toString()):(r=16,i="2.3283064365386962890625e-10"),t.precision+=r,e=js(t,1,e.times(i),new t(1));for(var a=r;a--;){var o=e.times(e);e=o.times(o).minus(o).times(8).plus(1)}return t.precision-=r,e}var Ut=function(){function t(n,i,a){var o,s=0,u=n.length;for(n=n.slice();u--;)o=n[u]*i+s,n[u]=o%a|0,s=o/a|0;return s&&n.unshift(s),n}function e(n,i,a,o){var s,u;if(a!=o)u=a>o?1:-1;else for(s=u=0;s<a;s++)if(n[s]!=i[s]){u=n[s]>i[s]?1:-1;break}return u}function r(n,i,a,o){for(var s=0;a--;)n[a]-=s,s=n[a]<i[a]?1:0,n[a]=s*o+n[a]-i[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,a,o,s,u){var l,c,f,d,p,h,m,g,y,N,v,w,x,b,S,C,A,E,D,M,F=n.constructor,I=n.s==i.s?1:-1,P=n.d,T=i.d;if(!P||!P[0]||!T||!T[0])return new F(!n.s||!i.s||(P?T&&P[0]==T[0]:!T)?NaN:P&&P[0]==0||!T?I*0:I/0);for(u?(p=1,c=n.e-i.e):(u=si,p=Ke,c=Jr(n.e/p)-Jr(i.e/p)),D=T.length,A=P.length,y=new F(I),N=y.d=[],f=0;T[f]==(P[f]||0);f++);if(T[f]>(P[f]||0)&&c--,a==null?(b=a=F.precision,o=F.rounding):s?b=a+(n.e-i.e)+1:b=a,b<0)N.push(1),h=!0;else{if(b=b/p+2|0,f=0,D==1){for(d=0,T=T[0],b++;(f<A||d)&&b--;f++)S=d*u+(P[f]||0),N[f]=S/T|0,d=S%T|0;h=d||f<A}else{for(d=u/(T[0]+1)|0,d>1&&(T=t(T,d,u),P=t(P,d,u),D=T.length,A=P.length),C=D,v=P.slice(0,D),w=v.length;w<D;)v[w++]=0;M=T.slice(),M.unshift(0),E=T[0],T[1]>=u/2&&++E;do d=0,l=e(T,v,D,w),l<0?(x=v[0],D!=w&&(x=x*u+(v[1]||0)),d=x/E|0,d>1?(d>=u&&(d=u-1),m=t(T,d,u),g=m.length,w=v.length,l=e(m,v,g,w),l==1&&(d--,r(m,D<g?M:T,g,u))):(d==0&&(l=d=1),m=T.slice()),g=m.length,g<w&&m.unshift(0),r(v,m,w,u),l==-1&&(w=v.length,l=e(T,v,D,w),l<1&&(d++,r(v,D<w?M:T,w,u))),w=v.length):l===0&&(d++,v=[0]),N[f++]=d,l&&v[0]?v[w++]=P[C]||0:(v=[P[C]],w=1);while((C++<A||v[0]!==void 0)&&b--);h=v[0]!==void 0}N[0]||N.shift()}if(p==1)y.e=c,C2=h;else{for(f=1,d=N[0];d>=10;d/=10)f++;y.e=f+c*p-1,He(y,s?a+y.e+1:a,o,h)}return y}}();function He(t,e,r,n){var i,a,o,s,u,l,c,f,d,p=t.constructor;e:if(e!=null){if(f=t.d,!f)return t;for(i=1,s=f[0];s>=10;s/=10)i++;if(a=e-i,a<0)a+=Ke,o=e,c=f[d=0],u=c/fr(10,i-o-1)%10|0;else if(d=Math.ceil((a+1)/Ke),s=f.length,d>=s)if(n){for(;s++<=d;)f.push(0);c=u=0,i=1,a%=Ke,o=a-Ke+1}else break e;else{for(c=s=f[d],i=1;s>=10;s/=10)i++;a%=Ke,o=a-Ke+i,u=o<0?0:c/fr(10,i-o-1)%10|0}if(n=n||e<0||f[d+1]!==void 0||(o<0?c:c%fr(10,i-o-1)),l=r<4?(u||n)&&(r==0||r==(t.s<0?3:2)):u>5||u==5&&(r==4||n||r==6&&(a>0?o>0?c/fr(10,i-o):0:f[d-1])%10&1||r==(t.s<0?8:7)),e<1||!f[0])return f.length=0,l?(e-=t.e+1,f[0]=fr(10,(Ke-e%Ke)%Ke),t.e=-e||0):f[0]=t.e=0,t;if(a==0?(f.length=d,s=1,d--):(f.length=d+1,s=fr(10,Ke-a),f[d]=o>0?(c/fr(10,i-o)%fr(10,o)|0)*s:0),l)for(;;)if(d==0){for(a=1,o=f[0];o>=10;o/=10)a++;for(o=f[0]+=s,s=1;o>=10;o/=10)s++;a!=s&&(t.e++,f[0]==si&&(f[0]=1));break}else{if(f[d]+=s,f[d]!=si)break;f[d--]=0,s=1}for(a=f.length;f[--a]===0;)f.pop()}return tt&&(t.e>p.maxE?(t.d=null,t.e=NaN):t.e<p.minE&&(t.e=0,t.d=[0])),t}function ki(t,e,r){if(!t.isFinite())return I2(t);var n,i=t.e,a=kr(t.d),o=a.length;return e?(r&&(n=r-o)>0?a=a.charAt(0)+"."+a.slice(1)+Oa(n):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(t.e<0?"e":"e+")+t.e):i<0?(a="0."+Oa(-i-1)+a,r&&(n=r-o)>0&&(a+=Oa(n))):i>=o?(a+=Oa(i+1-o),r&&(n=r-i-1)>0&&(a=a+"."+Oa(n))):((n=i+1)<o&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-o)>0&&(i+1===o&&(a+="."),a+=Oa(n))),a}function bp(t,e){var r=t[0];for(e*=Ke;r>=10;r/=10)e++;return e}function pd(t,e,r){if(e>I8)throw tt=!0,r&&(t.precision=r),Error(M2);return He(new t(fd),e,1,!0)}function Ci(t,e,r){if(e>Zm)throw Error(M2);return He(new t(dd),e,r,!0)}function F2(t){var e=t.length-1,r=e*Ke+1;if(e=t[e],e){for(;e%10==0;e/=10)r--;for(e=t[0];e>=10;e/=10)r++}return r}function Oa(t){for(var e="";t--;)e+="0";return e}function B2(t,e,r,n){var i,a=new t(1),o=Math.ceil(n/Ke+4);for(tt=!1;;){if(r%2&&(a=a.times(e),rb(a.d,o)&&(i=!0)),r=Jr(r/2),r===0){r=a.d.length-1,i&&a.d[r]===0&&++a.d[r];break}e=e.times(e),rb(e.d,o)}return tt=!0,a}function tb(t){return t.d[t.d.length-1]&1}function k2(t,e,r){for(var n,i,a=new t(e[0]),o=0;++o<e.length;){if(i=new t(e[o]),!i.s){a=i;break}n=a.cmp(i),(n===r||n===0&&a.s===r)&&(a=i)}return a}function Xm(t,e){var r,n,i,a,o,s,u,l=0,c=0,f=0,d=t.constructor,p=d.rounding,h=d.precision;if(!t.d||!t.d[0]||t.e>17)return new d(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(e==null?(tt=!1,u=h):u=e,s=new d(.03125);t.e>-2;)t=t.times(s),f+=5;for(n=Math.log(fr(2,f))/Math.LN10*2+5|0,u+=n,r=a=o=new d(1),d.precision=u;;){if(a=He(a.times(t),u,1),r=r.times(++c),s=o.plus(Ut(a,r,u,1)),kr(s.d).slice(0,u)===kr(o.d).slice(0,u)){for(i=f;i--;)o=He(o.times(o),u,1);if(e==null)if(l<3&&Nl(o.d,u-n,p,l))d.precision=u+=10,r=a=s=new d(1),c=0,l++;else return He(o,d.precision=h,p,tt=!0);else return d.precision=h,o}o=s}}function La(t,e){var r,n,i,a,o,s,u,l,c,f,d,p=1,h=10,m=t,g=m.d,y=m.constructor,N=y.rounding,v=y.precision;if(m.s<0||!g||!g[0]||!m.e&&g[0]==1&&g.length==1)return new y(g&&!g[0]?-1/0:m.s!=1?NaN:g?0:m);if(e==null?(tt=!1,c=v):c=e,y.precision=c+=h,r=kr(g),n=r.charAt(0),Math.abs(a=m.e)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(t),r=kr(m.d),n=r.charAt(0),p++;a=m.e,n>1?(m=new y("0."+r),a++):m=new y(n+"."+r.slice(1))}else return l=pd(y,c+2,v).times(a+""),m=La(new y(n+"."+r.slice(1)),c-h).plus(l),y.precision=v,e==null?He(m,v,N,tt=!0):m;for(f=m,u=o=m=Ut(m.minus(1),m.plus(1),c,1),d=He(m.times(m),c,1),i=3;;){if(o=He(o.times(d),c,1),l=u.plus(Ut(o,new y(i),c,1)),kr(l.d).slice(0,c)===kr(u.d).slice(0,c))if(u=u.times(2),a!==0&&(u=u.plus(pd(y,c+2,v).times(a+""))),u=Ut(u,new y(p),c,1),e==null)if(Nl(u.d,c-h,N,s))y.precision=c+=h,l=o=m=Ut(f.minus(1),f.plus(1),c,1),d=He(m.times(m),c,1),i=s=1;else return He(u,y.precision=v,N,tt=!0);else return y.precision=v,u;u=l,i+=2}}function I2(t){return String(t.s*t.s/0)}function nf(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;n++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(n,i),e){if(i-=n,t.e=r=r-n-1,t.d=[],n=(r+1)%Ke,r<0&&(n+=Ke),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=Ke;n<i;)t.d.push(+e.slice(n,n+=Ke));e=e.slice(n),n=Ke-e.length}else n-=i;for(;n--;)e+="0";t.d.push(+e),tt&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function P8(t,e){var r,n,i,a,o,s,u,l,c;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),O2.test(e))return nf(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(F8.test(e))r=16,e=e.toLowerCase();else if(O8.test(e))r=2;else if(B8.test(e))r=8;else throw Error(Xa+e);for(a=e.search(/p/i),a>0?(u=+e.slice(a+1),e=e.substring(2,a)):e=e.slice(2),a=e.indexOf("."),o=a>=0,n=t.constructor,o&&(e=e.replace(".",""),s=e.length,a=s-a,i=B2(n,new n(r),a,a*2)),l=rf(e,r,si),c=l.length-1,a=c;l[a]===0;--a)l.pop();return a<0?new n(t.s*0):(t.e=bp(l,c),t.d=l,tt=!1,o&&(t=Ut(t,i,s*4)),u&&(t=t.times(Math.abs(u)<54?fr(2,u):Qa.pow(2,u))),tt=!0,t)}function $8(t,e){var r,n=e.d.length;if(n<3)return e.isZero()?e:js(t,2,e,e);r=1.4*Math.sqrt(n),r=r>16?16:r|0,e=e.times(1/xp(5,r)),e=js(t,2,e,e);for(var i,a=new t(5),o=new t(16),s=new t(20);r--;)i=e.times(e),e=e.times(a.plus(i.times(o.times(i).minus(s))));return e}function js(t,e,r,n,i){var a,o,s,u,l=t.precision,c=Math.ceil(l/Ke);for(tt=!1,u=r.times(r),s=new t(n);;){if(o=Ut(s.times(u),new t(e++*e++),l,1),s=i?n.plus(o):n.minus(o),n=Ut(o.times(u),new t(e++*e++),l,1),o=s.plus(n),o.d[c]!==void 0){for(a=c;o.d[a]===s.d[a]&&a--;);if(a==-1)break}a=s,s=n,n=o,o=a}return tt=!0,o.d.length=c+1,o}function xp(t,e){for(var r=t;--e;)r*=t;return r}function R2(t,e){var r,n=e.s<0,i=Ci(t,t.precision,1),a=i.times(.5);if(e=e.abs(),e.lte(a))return ra=n?4:1,e;if(r=e.divToInt(i),r.isZero())ra=n?3:2;else{if(e=e.minus(r.times(i)),e.lte(a))return ra=tb(r)?n?2:3:n?4:1,e;ra=tb(r)?n?1:4:n?3:2}return e.minus(i).abs()}function wv(t,e,r,n){var i,a,o,s,u,l,c,f,d,p=t.constructor,h=r!==void 0;if(h?(Sn(r,1,ao),n===void 0?n=p.rounding:Sn(n,0,8)):(r=p.precision,n=p.rounding),!t.isFinite())c=I2(t);else{for(c=ki(t),o=c.indexOf("."),h?(i=2,e==16?r=r*4-3:e==8&&(r=r*3-2)):i=e,o>=0&&(c=c.replace(".",""),d=new p(1),d.e=c.length-o,d.d=rf(ki(d),10,i),d.e=d.d.length),f=rf(c,10,i),a=u=f.length;f[--u]==0;)f.pop();if(!f[0])c=h?"0p+0":"0";else{if(o<0?a--:(t=new p(t),t.d=f,t.e=a,t=Ut(t,d,r,n,0,i),f=t.d,a=t.e,l=C2),o=f[r],s=i/2,l=l||f[r+1]!==void 0,l=n<4?(o!==void 0||l)&&(n===0||n===(t.s<0?3:2)):o>s||o===s&&(n===4||l||n===6&&f[r-1]&1||n===(t.s<0?8:7)),f.length=r,l)for(;++f[--r]>i-1;)f[r]=0,r||(++a,f.unshift(1));for(u=f.length;!f[u-1];--u);for(o=0,c="";o<u;o++)c+=Jm.charAt(f[o]);if(h){if(u>1)if(e==16||e==8){for(o=e==16?4:3,--u;u%o;u++)c+="0";for(f=rf(c,i,e),u=f.length;!f[u-1];--u);for(o=1,c="1.";o<u;o++)c+=Jm.charAt(f[o])}else c=c.charAt(0)+"."+c.slice(1);c=c+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)c="0"+c;c="0."+c}else if(++a>u)for(a-=u;a--;)c+="0";else a<u&&(c=c.slice(0,a)+"."+c.slice(a))}c=(e==16?"0x":e==2?"0b":e==8?"0o":"")+c}return t.s<0?"-"+c:c}function rb(t,e){if(t.length>e)return t.length=e,!0}function L8(t){return new this(t).abs()}function z8(t){return new this(t).acos()}function q8(t){return new this(t).acosh()}function U8(t,e){return new this(t).plus(e)}function H8(t){return new this(t).asin()}function V8(t){return new this(t).asinh()}function W8(t){return new this(t).atan()}function j8(t){return new this(t).atanh()}function G8(t,e){t=new this(t),e=new this(e);var r,n=this.precision,i=this.rounding,a=n+4;return!t.s||!e.s?r=new this(NaN):!t.d&&!e.d?(r=Ci(this,a,1).times(e.s>0?.25:.75),r.s=t.s):!e.d||t.isZero()?(r=e.s<0?Ci(this,n,i):new this(0),r.s=t.s):!t.d||e.isZero()?(r=Ci(this,a,1).times(.5),r.s=t.s):e.s<0?(this.precision=a,this.rounding=1,r=this.atan(Ut(t,e,a,1)),e=Ci(this,a,1),this.precision=n,this.rounding=i,r=t.s<0?r.minus(e):r.plus(e)):r=this.atan(Ut(t,e,a,1)),r}function K8(t){return new this(t).cbrt()}function J8(t){return He(t=new this(t),t.e+1,2)}function Y8(t,e,r){return new this(t).clamp(e,r)}function Z8(t){if(!t||typeof t!="object")throw Error(yp+"Object expected");var e,r,n,i=t.defaults===!0,a=["precision",1,ao,"rounding",0,8,"toExpNeg",-9e15,0,"toExpPos",0,Km,"maxE",0,Km,"minE",-9e15,0,"modulo",0,9];for(e=0;e<a.length;e+=3)if(r=a[e],i&&(this[r]=Ym[r]),(n=t[r])!==void 0)if(Jr(n)===n&&n>=a[e+1]&&n<=a[e+2])this[r]=n;else throw Error(Xa+r+": "+n);if(r="crypto",i&&(this[r]=Ym[r]),(n=t[r])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(T2);else this[r]=!1;else throw Error(Xa+r+": "+n);return this}function X8(t){return new this(t).cos()}function Q8(t){return new this(t).cosh()}function P2(t){var e,r,n;function i(a){var o,s,u,l=this;if(!(l instanceof i))return new i(a);if(l.constructor=i,nb(a)){l.s=a.s,tt?!a.d||a.e>i.maxE?(l.e=NaN,l.d=null):a.e<i.minE?(l.e=0,l.d=[0]):(l.e=a.e,l.d=a.d.slice()):(l.e=a.e,l.d=a.d?a.d.slice():a.d);return}if(u=typeof a,u==="number"){if(a===0){l.s=1/a<0?-1:1,l.e=0,l.d=[0];return}if(a<0?(a=-a,l.s=-1):l.s=1,a===~~a&&a<1e7){for(o=0,s=a;s>=10;s/=10)o++;tt?o>i.maxE?(l.e=NaN,l.d=null):o<i.minE?(l.e=0,l.d=[0]):(l.e=o,l.d=[a]):(l.e=o,l.d=[a]);return}if(a*0!==0){a||(l.s=NaN),l.e=NaN,l.d=null;return}return nf(l,a.toString())}if(u==="string")return(s=a.charCodeAt(0))===45?(a=a.slice(1),l.s=-1):(s===43&&(a=a.slice(1)),l.s=1),O2.test(a)?nf(l,a):P8(l,a);if(u==="bigint")return a<0?(a=-a,l.s=-1):l.s=1,nf(l,a.toString());throw Error(Xa+a)}if(i.prototype=Ae,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=Z8,i.clone=P2,i.isDecimal=nb,i.abs=L8,i.acos=z8,i.acosh=q8,i.add=U8,i.asin=H8,i.asinh=V8,i.atan=W8,i.atanh=j8,i.atan2=G8,i.cbrt=K8,i.ceil=J8,i.clamp=Y8,i.cos=X8,i.cosh=Q8,i.div=e6,i.exp=t6,i.floor=r6,i.hypot=n6,i.ln=i6,i.log=a6,i.log10=s6,i.log2=o6,i.max=u6,i.min=l6,i.mod=c6,i.mul=f6,i.pow=d6,i.random=p6,i.round=h6,i.sign=m6,i.sin=g6,i.sinh=v6,i.sqrt=y6,i.sub=b6,i.sum=x6,i.tan=w6,i.tanh=N6,i.trunc=A6,t===void 0&&(t={}),t&&t.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return i.config(t),i}function e6(t,e){return new this(t).div(e)}function t6(t){return new this(t).exp()}function r6(t){return He(t=new this(t),t.e+1,3)}function n6(){var t,e,r=new this(0);for(tt=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)r.d&&(r=r.plus(e.times(e)));else{if(e.s)return tt=!0,new this(1/0);r=e}return tt=!0,r.sqrt()}function nb(t){return t instanceof Qa||t&&t.toStringTag===_2||!1}function i6(t){return new this(t).ln()}function a6(t,e){return new this(t).log(e)}function o6(t){return new this(t).log(2)}function s6(t){return new this(t).log(10)}function u6(){return k2(this,arguments,-1)}function l6(){return k2(this,arguments,1)}function c6(t,e){return new this(t).mod(e)}function f6(t,e){return new this(t).mul(e)}function d6(t,e){return new this(t).pow(e)}function p6(t){var e,r,n,i,a=0,o=new this(1),s=[];if(t===void 0?t=this.precision:Sn(t,1,ao),n=Math.ceil(t/Ke),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(n));a<n;)i=e[a],i>=429e7?e[a]=crypto.getRandomValues(new Uint32Array(1))[0]:s[a++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(n*=4);a<n;)i=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+((e[a+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,a):(s.push(i%1e7),a+=4);a=n/4}else throw Error(T2);else for(;a<n;)s[a++]=Math.random()*1e7|0;for(n=s[--a],t%=Ke,n&&t&&(i=fr(10,Ke-t),s[a]=(n/i|0)*i);s[a]===0;a--)s.pop();if(a<0)r=0,s=[0];else{for(r=-1;s[0]===0;r-=Ke)s.shift();for(n=1,i=s[0];i>=10;i/=10)n++;n<Ke&&(r-=Ke-n)}return o.e=r,o.d=s,o}function h6(t){return He(t=new this(t),t.e+1,this.rounding)}function m6(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function g6(t){return new this(t).sin()}function v6(t){return new this(t).sinh()}function y6(t){return new this(t).sqrt()}function b6(t,e){return new this(t).sub(e)}function x6(){var t=0,e=arguments,r=new this(e[t]);for(tt=!1;r.s&&++t<e.length;)r=r.plus(e[t]);return tt=!0,He(r,this.precision,this.rounding)}function w6(t){return new this(t).tan()}function N6(t){return new this(t).tanh()}function A6(t){return He(t=new this(t),t.e+1,1)}Ae[Symbol.for("nodejs.util.inspect.custom")]=Ae.toString;Ae[Symbol.toStringTag]="Decimal";var Qa=Ae.constructor=P2(Ym);fd=new Qa(fd);dd=new Qa(dd);var S6="BigNumber",D6=["?on","config"],E6=H(S6,D6,t=>{var{on:e,config:r}=t,n=Qa.clone({precision:r.precision,modulo:Qa.EUCLID});return n.prototype=Object.create(n.prototype),n.prototype.type="BigNumber",n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},n.fromJSON=function(i){return new n(i.value)},e&&e("config",function(i,a){i.precision!==a.precision&&n.config({precision:i.precision})}),n},{isClass:!0});const qr=Math.cosh||function(t){return Math.abs(t)<1e-9?1-t:(Math.exp(t)+Math.exp(-t))*.5},Rn=Math.sinh||function(t){return Math.abs(t)<1e-9?t:(Math.exp(t)-Math.exp(-t))*.5},C6=function(t){const e=Math.PI/4;if(-e>t||t>e)return Math.cos(t)-1;const r=t*t;return r*(r*(r*(r*(r*(r*(r*(r/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},Ph=function(t,e){return t=Math.abs(t),e=Math.abs(e),t<e&&([t,e]=[e,t]),t<1e8?Math.sqrt(t*t+e*e):(e/=t,t*Math.sqrt(1+e*e))},ds=function(){throw SyntaxError("Invalid Param")};function $h(t,e){const r=Math.abs(t),n=Math.abs(e);return t===0?Math.log(n):e===0?Math.log(r):r<3e3&&n<3e3?Math.log(t*t+e*e)*.5:(t=t*.5,e=e*.5,.5*Math.log(t*t+e*e)+Math.LN2)}const M6={re:0,im:0},xo=function(t,e){const r=M6;if(t==null)r.re=r.im=0;else if(e!==void 0)r.re=t,r.im=e;else switch(typeof t){case"object":if("im"in t&&"re"in t)r.re=t.re,r.im=t.im;else if("abs"in t&&"arg"in t){if(!isFinite(t.abs)&&isFinite(t.arg))return ye.INFINITY;r.re=t.abs*Math.cos(t.arg),r.im=t.abs*Math.sin(t.arg)}else if("r"in t&&"phi"in t){if(!isFinite(t.r)&&isFinite(t.phi))return ye.INFINITY;r.re=t.r*Math.cos(t.phi),r.im=t.r*Math.sin(t.phi)}else t.length===2?(r.re=t[0],r.im=t[1]):ds();break;case"string":r.im=r.re=0;const n=t.replace(/_/g,"").match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let i=1,a=0;n===null&&ds();for(let o=0;o<n.length;o++){const s=n[o];s===" "||s==="	"||s===`
`||(s==="+"?i++:s==="-"?a++:s==="i"||s==="I"?(i+a===0&&ds(),n[o+1]!==" "&&!isNaN(n[o+1])?(r.im+=parseFloat((a%2?"-":"")+n[o+1]),o++):r.im+=parseFloat((a%2?"-":"")+"1"),i=a=0):((i+a===0||isNaN(s))&&ds(),n[o+1]==="i"||n[o+1]==="I"?(r.im+=parseFloat((a%2?"-":"")+s),o++):r.re+=parseFloat((a%2?"-":"")+s),i=a=0))}i+a>0&&ds();break;case"number":r.im=0,r.re=t;break;default:ds()}return isNaN(r.re)||isNaN(r.im),r};function ye(t,e){if(!(this instanceof ye))return new ye(t,e);const r=xo(t,e);this.re=r.re,this.im=r.im}ye.prototype={re:0,im:0,sign:function(){const t=Ph(this.re,this.im);return new ye(this.re/t,this.im/t)},add:function(t,e){const r=xo(t,e),n=this.isInfinite(),i=!(isFinite(r.re)&&isFinite(r.im));return n||i?n&&i?ye.NAN:ye.INFINITY:new ye(this.re+r.re,this.im+r.im)},sub:function(t,e){const r=xo(t,e),n=this.isInfinite(),i=!(isFinite(r.re)&&isFinite(r.im));return n||i?n&&i?ye.NAN:ye.INFINITY:new ye(this.re-r.re,this.im-r.im)},mul:function(t,e){const r=xo(t,e),n=this.isInfinite(),i=!(isFinite(r.re)&&isFinite(r.im)),a=this.re===0&&this.im===0,o=r.re===0&&r.im===0;return n&&o||i&&a?ye.NAN:n||i?ye.INFINITY:r.im===0&&this.im===0?new ye(this.re*r.re,0):new ye(this.re*r.re-this.im*r.im,this.re*r.im+this.im*r.re)},div:function(t,e){const r=xo(t,e),n=this.isInfinite(),i=!(isFinite(r.re)&&isFinite(r.im)),a=this.re===0&&this.im===0,o=r.re===0&&r.im===0;if(a&&o||n&&i)return ye.NAN;if(o||n)return ye.INFINITY;if(a||i)return ye.ZERO;if(r.im===0)return new ye(this.re/r.re,this.im/r.re);if(Math.abs(r.re)<Math.abs(r.im)){const s=r.re/r.im,u=r.re*s+r.im;return new ye((this.re*s+this.im)/u,(this.im*s-this.re)/u)}else{const s=r.im/r.re,u=r.im*s+r.re;return new ye((this.re+this.im*s)/u,(this.im-this.re*s)/u)}},pow:function(t,e){const r=xo(t,e),n=this.re===0&&this.im===0;if(r.re===0&&r.im===0)return ye.ONE;if(r.im===0){if(this.im===0&&this.re>0)return new ye(Math.pow(this.re,r.re),0);if(this.re===0)switch((r.re%4+4)%4){case 0:return new ye(Math.pow(this.im,r.re),0);case 1:return new ye(0,Math.pow(this.im,r.re));case 2:return new ye(-Math.pow(this.im,r.re),0);case 3:return new ye(0,-Math.pow(this.im,r.re))}}if(n&&r.re>0)return ye.ZERO;const a=Math.atan2(this.im,this.re),o=$h(this.re,this.im);let s=Math.exp(r.re*o-r.im*a),u=r.im*o+r.re*a;return new ye(s*Math.cos(u),s*Math.sin(u))},sqrt:function(){const t=this.re,e=this.im;if(e===0)return t>=0?new ye(Math.sqrt(t),0):new ye(0,Math.sqrt(-t));const r=Ph(t,e);let n=Math.sqrt(.5*(r+Math.abs(t))),i=Math.abs(e)/(2*n);return t>=0?new ye(n,e<0?-i:i):new ye(i,e<0?-n:n)},exp:function(){const t=Math.exp(this.re);return this.im===0?new ye(t,0):new ye(t*Math.cos(this.im),t*Math.sin(this.im))},expm1:function(){const t=this.re,e=this.im;return new ye(Math.expm1(t)*Math.cos(e)+C6(e),Math.exp(t)*Math.sin(e))},log:function(){const t=this.re,e=this.im;return e===0&&t>0?new ye(Math.log(t),0):new ye($h(t,e),Math.atan2(e,t))},abs:function(){return Ph(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){const t=this.re,e=this.im;return new ye(Math.sin(t)*qr(e),Math.cos(t)*Rn(e))},cos:function(){const t=this.re,e=this.im;return new ye(Math.cos(t)*qr(e),-Math.sin(t)*Rn(e))},tan:function(){const t=2*this.re,e=2*this.im,r=Math.cos(t)+qr(e);return new ye(Math.sin(t)/r,Rn(e)/r)},cot:function(){const t=2*this.re,e=2*this.im,r=Math.cos(t)-qr(e);return new ye(-Math.sin(t)/r,Rn(e)/r)},sec:function(){const t=this.re,e=this.im,r=.5*qr(2*e)+.5*Math.cos(2*t);return new ye(Math.cos(t)*qr(e)/r,Math.sin(t)*Rn(e)/r)},csc:function(){const t=this.re,e=this.im,r=.5*qr(2*e)-.5*Math.cos(2*t);return new ye(Math.sin(t)*qr(e)/r,-Math.cos(t)*Rn(e)/r)},asin:function(){const t=this.re,e=this.im,r=new ye(e*e-t*t+1,-2*t*e).sqrt(),n=new ye(r.re-e,r.im+t).log();return new ye(n.im,-n.re)},acos:function(){const t=this.re,e=this.im,r=new ye(e*e-t*t+1,-2*t*e).sqrt(),n=new ye(r.re-e,r.im+t).log();return new ye(Math.PI/2-n.im,n.re)},atan:function(){const t=this.re,e=this.im;if(t===0){if(e===1)return new ye(0,1/0);if(e===-1)return new ye(0,-1/0)}const r=t*t+(1-e)*(1-e),n=new ye((1-e*e-t*t)/r,-2*t/r).log();return new ye(-.5*n.im,.5*n.re)},acot:function(){const t=this.re,e=this.im;if(e===0)return new ye(Math.atan2(1,t),0);const r=t*t+e*e;return r!==0?new ye(t/r,-e/r).atan():new ye(t!==0?t/0:0,e!==0?-e/0:0).atan()},asec:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new ye(0,1/0);const r=t*t+e*e;return r!==0?new ye(t/r,-e/r).acos():new ye(t!==0?t/0:0,e!==0?-e/0:0).acos()},acsc:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new ye(Math.PI/2,1/0);const r=t*t+e*e;return r!==0?new ye(t/r,-e/r).asin():new ye(t!==0?t/0:0,e!==0?-e/0:0).asin()},sinh:function(){const t=this.re,e=this.im;return new ye(Rn(t)*Math.cos(e),qr(t)*Math.sin(e))},cosh:function(){const t=this.re,e=this.im;return new ye(qr(t)*Math.cos(e),Rn(t)*Math.sin(e))},tanh:function(){const t=2*this.re,e=2*this.im,r=qr(t)+Math.cos(e);return new ye(Rn(t)/r,Math.sin(e)/r)},coth:function(){const t=2*this.re,e=2*this.im,r=qr(t)-Math.cos(e);return new ye(Rn(t)/r,-Math.sin(e)/r)},csch:function(){const t=this.re,e=this.im,r=Math.cos(2*e)-qr(2*t);return new ye(-2*Rn(t)*Math.cos(e)/r,2*qr(t)*Math.sin(e)/r)},sech:function(){const t=this.re,e=this.im,r=Math.cos(2*e)+qr(2*t);return new ye(2*qr(t)*Math.cos(e)/r,-2*Rn(t)*Math.sin(e)/r)},asinh:function(){let t=this.im;this.im=-this.re,this.re=t;const e=this.asin();return this.re=-this.im,this.im=t,t=e.re,e.re=-e.im,e.im=t,e},acosh:function(){const t=this.acos();if(t.im<=0){const e=t.re;t.re=-t.im,t.im=e}else{const e=t.im;t.im=-t.re,t.re=e}return t},atanh:function(){const t=this.re,e=this.im,r=t>1&&e===0,n=1-t,i=1+t,a=n*n+e*e,o=a!==0?new ye((i*n-e*e)/a,(e*n+i*e)/a):new ye(t!==-1?t/0:0,e!==0?e/0:0),s=o.re;return o.re=$h(o.re,o.im)/2,o.im=Math.atan2(o.im,s)/2,r&&(o.im=-o.im),o},acoth:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new ye(0,Math.PI/2);const r=t*t+e*e;return r!==0?new ye(t/r,-e/r).atanh():new ye(t!==0?t/0:0,e!==0?-e/0:0).atanh()},acsch:function(){const t=this.re,e=this.im;if(e===0)return new ye(t!==0?Math.log(t+Math.sqrt(t*t+1)):1/0,0);const r=t*t+e*e;return r!==0?new ye(t/r,-e/r).asinh():new ye(t!==0?t/0:0,e!==0?-e/0:0).asinh()},asech:function(){const t=this.re,e=this.im;if(this.isZero())return ye.INFINITY;const r=t*t+e*e;return r!==0?new ye(t/r,-e/r).acosh():new ye(t!==0?t/0:0,e!==0?-e/0:0).acosh()},inverse:function(){if(this.isZero())return ye.INFINITY;if(this.isInfinite())return ye.ZERO;const t=this.re,e=this.im,r=t*t+e*e;return new ye(t/r,-e/r)},conjugate:function(){return new ye(this.re,-this.im)},neg:function(){return new ye(-this.re,-this.im)},ceil:function(t){return t=Math.pow(10,t||0),new ye(Math.ceil(this.re*t)/t,Math.ceil(this.im*t)/t)},floor:function(t){return t=Math.pow(10,t||0),new ye(Math.floor(this.re*t)/t,Math.floor(this.im*t)/t)},round:function(t){return t=Math.pow(10,t||0),new ye(Math.round(this.re*t)/t,Math.round(this.im*t)/t)},equals:function(t,e){const r=xo(t,e);return Math.abs(r.re-this.re)<=ye.EPSILON&&Math.abs(r.im-this.im)<=ye.EPSILON},clone:function(){return new ye(this.re,this.im)},toString:function(){let t=this.re,e=this.im,r="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(t)<ye.EPSILON&&(t=0),Math.abs(e)<ye.EPSILON&&(e=0),e===0?r+t:(t!==0?(r+=t,r+=" ",e<0?(e=-e,r+="-"):r+="+",r+=" "):e<0&&(e=-e,r+="-"),e!==1&&(r+=e),r+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!this.isFinite()}};ye.ZERO=new ye(0,0);ye.ONE=new ye(1,0);ye.I=new ye(0,1);ye.PI=new ye(Math.PI,0);ye.E=new ye(Math.E,0);ye.INFINITY=new ye(1/0,1/0);ye.NAN=new ye(NaN,NaN);ye.EPSILON=1e-15;var T6="Complex",_6=[],O6=H(T6,_6,()=>(Object.defineProperty(ye,"name",{value:"Complex"}),ye.prototype.constructor=ye,ye.prototype.type="Complex",ye.prototype.isComplex=!0,ye.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},ye.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},ye.prototype.format=function(t){var e="",r=this.im,n=this.re,i=Lo(this.re,t),a=Lo(this.im,t),o=it(t)?t:t?t.precision:null;if(o!==null){var s=Math.pow(10,-o);Math.abs(n/r)<s&&(n=0),Math.abs(r/n)<s&&(r=0)}return r===0?e=i:n===0?r===1?e="i":r===-1?e="-i":e=a+"i":r<0?r===-1?e=i+" - i":e=i+" - "+a.substring(1)+"i":r===1?e=i+" + i":e=i+" + "+a+"i",e},ye.fromPolar=function(t){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return ye(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var r=arguments[0],n=arguments[1];if(it(r)){if(qn(n)&&n.hasBase("ANGLE")&&(n=n.toNumber("rad")),it(n))return new ye({r,phi:n});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},ye.prototype.valueOf=ye.prototype.toString,ye.fromJSON=function(t){return new ye(t)},ye.compare=function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0},ye),{isClass:!0});typeof BigInt>"u"&&(BigInt=function(t){if(isNaN(t))throw new Error("");return t});const Ue=BigInt(0),dt=BigInt(1),Al=BigInt(2),Qm=BigInt(5),yn=BigInt(10),F6=2e3,Fe={s:dt,n:Ue,d:dt};function Gi(t,e){try{t=BigInt(t)}catch{throw Aa()}return t*e}function ti(t){return typeof t=="bigint"?t:Math.floor(t)}function Kt(t,e){if(e===Ue)throw Nv();const r=Object.create($n.prototype);r.s=t<Ue?-dt:dt,t=t<Ue?-t:t;const n=Do(t,e);return r.n=t/n,r.d=e/n,r}function ps(t){const e={};let r=t,n=Al,i=Qm-dt;for(;i<=r;){for(;r%n===Ue;)r/=n,e[n]=(e[n]||Ue)+dt;i+=dt+Al*n++}return r!==t?r>1&&(e[r]=(e[r]||Ue)+dt):e[t]=(e[t]||Ue)+dt,e}const yr=function(t,e){let r=Ue,n=dt,i=dt;if(t!=null)if(e!==void 0){if(typeof t=="bigint")r=t;else{if(isNaN(t))throw Aa();if(t%1!==0)throw ib();r=BigInt(t)}if(typeof e=="bigint")n=e;else{if(isNaN(e))throw Aa();if(e%1!==0)throw ib();n=BigInt(e)}i=r*n}else if(typeof t=="object"){if("d"in t&&"n"in t)r=BigInt(t.n),n=BigInt(t.d),"s"in t&&(r*=BigInt(t.s));else if(0 in t)r=BigInt(t[0]),1 in t&&(n=BigInt(t[1]));else if(typeof t=="bigint")r=t;else throw Aa();i=r*n}else if(typeof t=="number"){if(isNaN(t))throw Aa();if(t<0&&(i=-dt,t=-t),t%1===0)r=BigInt(t);else{let a=1,o=0,s=1,u=1,l=1,c=1e7;for(t>=1&&(a=10**Math.floor(1+Math.log10(t)),t/=a);s<=c&&l<=c;){let f=(o+u)/(s+l);if(t===f){s+l<=c?(r=o+u,n=s+l):l>s?(r=u,n=l):(r=o,n=s);break}else t>f?(o+=u,s+=l):(u+=o,l+=s),s>c?(r=u,n=l):(r=o,n=s)}r=BigInt(r)*BigInt(a),n=BigInt(n)}}else if(typeof t=="string"){let a=0,o=Ue,s=Ue,u=Ue,l=dt,c=dt,f=t.replace(/_/g,"").match(/\d+|./g);if(f===null)throw Aa();if(f[a]==="-"?(i=-dt,a++):f[a]==="+"&&a++,f.length===a+1?s=Gi(f[a++],i):f[a+1]==="."||f[a]==="."?(f[a]!=="."&&(o=Gi(f[a++],i)),a++,(a+1===f.length||f[a+1]==="("&&f[a+3]===")"||f[a+1]==="'"&&f[a+3]==="'")&&(s=Gi(f[a],i),l=yn**BigInt(f[a].length),a++),(f[a]==="("&&f[a+2]===")"||f[a]==="'"&&f[a+2]==="'")&&(u=Gi(f[a+1],i),c=yn**BigInt(f[a+1].length)-dt,a+=3)):f[a+1]==="/"||f[a+1]===":"?(s=Gi(f[a],i),l=Gi(f[a+2],dt),a+=3):f[a+3]==="/"&&f[a+1]===" "&&(o=Gi(f[a],i),s=Gi(f[a+2],i),l=Gi(f[a+4],dt),a+=5),f.length<=a)n=l*c,i=r=u+n*o+c*s;else throw Aa()}else if(typeof t=="bigint")r=t,i=t,n=dt;else throw Aa();if(n===Ue)throw Nv();Fe.s=i<Ue?-dt:dt,Fe.n=r<Ue?-r:r,Fe.d=n<Ue?-n:n};function B6(t,e,r){let n=dt;for(;e>Ue;t=t*t%r,e>>=dt)e&dt&&(n=n*t%r);return n}function k6(t,e){for(;e%Al===Ue;e/=Al);for(;e%Qm===Ue;e/=Qm);if(e===dt)return Ue;let r=yn%e,n=1;for(;r!==dt;n++)if(r=r*yn%e,n>F6)return Ue;return BigInt(n)}function I6(t,e,r){let n=dt,i=B6(yn,r,e);for(let a=0;a<300;a++){if(n===i)return BigInt(a);n=n*yn%e,i=i*yn%e}return 0}function Do(t,e){if(!t)return e;if(!e)return t;for(;;){if(t%=e,!t)return e;if(e%=t,!e)return t}}function $n(t,e){if(yr(t,e),this instanceof $n)t=Do(Fe.d,Fe.n),this.s=Fe.s,this.n=Fe.n/t,this.d=Fe.d/t;else return Kt(Fe.s*Fe.n,Fe.d)}var Nv=function(){return new Error("Division by Zero")},Aa=function(){return new Error("Invalid argument")},ib=function(){return new Error("Parameters must be integer")};$n.prototype={s:dt,n:Ue,d:dt,abs:function(){return Kt(this.n,this.d)},neg:function(){return Kt(-this.s*this.n,this.d)},add:function(t,e){return yr(t,e),Kt(this.s*this.n*Fe.d+Fe.s*this.d*Fe.n,this.d*Fe.d)},sub:function(t,e){return yr(t,e),Kt(this.s*this.n*Fe.d-Fe.s*this.d*Fe.n,this.d*Fe.d)},mul:function(t,e){return yr(t,e),Kt(this.s*Fe.s*this.n*Fe.n,this.d*Fe.d)},div:function(t,e){return yr(t,e),Kt(this.s*Fe.s*this.n*Fe.d,this.d*Fe.n)},clone:function(){return Kt(this.s*this.n,this.d)},mod:function(t,e){if(t===void 0)return Kt(this.s*this.n%this.d,dt);if(yr(t,e),Ue===Fe.n*this.d)throw Nv();return Kt(this.s*(Fe.d*this.n)%(Fe.n*this.d),Fe.d*this.d)},gcd:function(t,e){return yr(t,e),Kt(Do(Fe.n,this.n)*Do(Fe.d,this.d),Fe.d*this.d)},lcm:function(t,e){return yr(t,e),Fe.n===Ue&&this.n===Ue?Kt(Ue,dt):Kt(Fe.n*this.n,Do(Fe.n,this.n)*Do(Fe.d,this.d))},inverse:function(){return Kt(this.s*this.d,this.n)},pow:function(t,e){if(yr(t,e),Fe.d===dt)return Fe.s<Ue?Kt((this.s*this.d)**Fe.n,this.n**Fe.n):Kt((this.s*this.n)**Fe.n,this.d**Fe.n);if(this.s<Ue)return null;let r=ps(this.n),n=ps(this.d),i=dt,a=dt;for(let o in r)if(o!=="1"){if(o==="0"){i=Ue;break}if(r[o]*=Fe.n,r[o]%Fe.d===Ue)r[o]/=Fe.d;else return null;i*=BigInt(o)**r[o]}for(let o in n)if(o!=="1"){if(n[o]*=Fe.n,n[o]%Fe.d===Ue)n[o]/=Fe.d;else return null;a*=BigInt(o)**n[o]}return Fe.s<Ue?Kt(a,i):Kt(i,a)},log:function(t,e){if(yr(t,e),this.s<=Ue||Fe.s<=Ue)return null;const r={},n=ps(Fe.n),i=ps(Fe.d),a=ps(this.n),o=ps(this.d);for(const l in i)n[l]=(n[l]||Ue)-i[l];for(const l in o)a[l]=(a[l]||Ue)-o[l];for(const l in n)l!=="1"&&(r[l]=!0);for(const l in a)l!=="1"&&(r[l]=!0);let s=null,u=null;for(const l in r){const c=n[l]||Ue,f=a[l]||Ue;if(c===Ue){if(f!==Ue)return null;continue}let d=f,p=c;const h=Do(d,p);if(d/=h,p/=h,s===null&&u===null)s=d,u=p;else if(d*u!==s*p)return null}return s!==null&&u!==null?Kt(s,u):null},equals:function(t,e){return yr(t,e),this.s*this.n*Fe.d===Fe.s*Fe.n*this.d},lt:function(t,e){return yr(t,e),this.s*this.n*Fe.d<Fe.s*Fe.n*this.d},lte:function(t,e){return yr(t,e),this.s*this.n*Fe.d<=Fe.s*Fe.n*this.d},gt:function(t,e){return yr(t,e),this.s*this.n*Fe.d>Fe.s*Fe.n*this.d},gte:function(t,e){return yr(t,e),this.s*this.n*Fe.d>=Fe.s*Fe.n*this.d},compare:function(t,e){yr(t,e);let r=this.s*this.n*Fe.d-Fe.s*Fe.n*this.d;return(Ue<r)-(r<Ue)},ceil:function(t){return t=yn**BigInt(t||0),Kt(ti(this.s*t*this.n/this.d)+(t*this.n%this.d>Ue&&this.s>=Ue?dt:Ue),t)},floor:function(t){return t=yn**BigInt(t||0),Kt(ti(this.s*t*this.n/this.d)-(t*this.n%this.d>Ue&&this.s<Ue?dt:Ue),t)},round:function(t){return t=yn**BigInt(t||0),Kt(ti(this.s*t*this.n/this.d)+this.s*((this.s>=Ue?dt:Ue)+Al*(t*this.n%this.d)>this.d?dt:Ue),t)},roundTo:function(t,e){yr(t,e);const r=this.n*Fe.d,n=this.d*Fe.n,i=r%n;let a=ti(r/n);return i+i>=n&&a++,Kt(this.s*a*Fe.n,Fe.d)},divisible:function(t,e){return yr(t,e),!(!(Fe.n*this.d)||this.n*Fe.d%(Fe.n*this.d))},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(t){let e=this.n,r=this.d;t=t||15;let n=k6(e,r),i=I6(e,r,n),a=this.s<Ue?"-":"";if(a+=ti(e/r),e%=r,e*=yn,e&&(a+="."),n){for(let o=i;o--;)a+=ti(e/r),e%=r,e*=yn;a+="(";for(let o=n;o--;)a+=ti(e/r),e%=r,e*=yn;a+=")"}else for(let o=t;e&&o--;)a+=ti(e/r),e%=r,e*=yn;return a},toFraction:function(t){let e=this.n,r=this.d,n=this.s<Ue?"-":"";if(r===dt)n+=e;else{let i=ti(e/r);t&&i>Ue&&(n+=i,n+=" ",e%=r),n+=e,n+="/",n+=r}return n},toLatex:function(t){let e=this.n,r=this.d,n=this.s<Ue?"-":"";if(r===dt)n+=e;else{let i=ti(e/r);t&&i>Ue&&(n+=i,e%=r),n+="\\frac{",n+=e,n+="}{",n+=r,n+="}"}return n},toContinued:function(){let t=this.n,e=this.d,r=[];do{r.push(ti(t/e));let n=t%e;t=e,e=n}while(t!==dt);return r},simplify:function(t){const e=BigInt(1/(t||.001)|0),r=this.abs(),n=r.toContinued();for(let i=1;i<n.length;i++){let a=Kt(n[i-1],dt);for(let s=i-2;s>=0;s--)a=a.inverse().add(n[s]);let o=a.sub(r);if(o.n*e<o.d)return a.mul(this.s)}return this}};var R6="Fraction",P6=[],$6=H(R6,P6,()=>(Object.defineProperty($n,"name",{value:"Fraction"}),$n.prototype.constructor=$n,$n.prototype.type="Fraction",$n.prototype.isFraction=!0,$n.prototype.toJSON=function(){return{mathjs:"Fraction",n:String(this.s*this.n),d:String(this.d)}},$n.fromJSON=function(t){return new $n(t)},$n),{isClass:!0}),L6="Range",z6=[],q6=H(L6,z6,()=>{function t(e,r,n){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");var i=e!=null,a=r!=null,o=n!=null;if(i){if(ot(e))e=e.toNumber();else if(typeof e!="number"&&!Qu(e))throw new TypeError("Parameter start must be a number or bigint")}if(a){if(ot(r))r=r.toNumber();else if(typeof r!="number"&&!Qu(r))throw new TypeError("Parameter end must be a number or bigint")}if(o){if(ot(n))n=n.toNumber();else if(typeof n!="number"&&!Qu(n))throw new TypeError("Parameter step must be a number or bigint")}this.start=i?parseFloat(e):0,this.end=a?parseFloat(r):0,this.step=o?parseFloat(n):1}return t.prototype.type="Range",t.prototype.isRange=!0,t.parse=function(e){if(typeof e!="string")return null;var r=e.split(":"),n=r.map(function(a){return parseFloat(a)}),i=n.some(function(a){return isNaN(a)});if(i)return null;switch(n.length){case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[2],n[1]);default:return null}},t.prototype.clone=function(){return new t(this.start,this.end,this.step)},t.prototype.size=function(){var e=0,r=this.start,n=this.step,i=this.end,a=i-r;return $a(n)===$a(a)?e=Math.ceil(a/n):a===0&&(e=0),isNaN(e)&&(e=0),[e]},t.prototype.min=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start:this.start+(e-1)*this.step},t.prototype.max=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start+(e-1)*this.step:this.start},t.prototype.forEach=function(e){var r=this.start,n=this.step,i=this.end,a=0;if(n>0)for(;r<i;)e(r,[a],this),r+=n,a++;else if(n<0)for(;r>i;)e(r,[a],this),r+=n,a++},t.prototype.map=function(e){var r=[];return this.forEach(function(n,i,a){r[i[0]]=e(n,i,a)}),r},t.prototype.toArray=function(){var e=[];return this.forEach(function(r,n){e[n[0]]=r}),e},t.prototype.valueOf=function(){return this.toArray()},t.prototype.format=function(e){var r=Lo(this.start,e);return this.step!==1&&(r+=":"+Lo(this.step,e)),r+=":"+Lo(this.end,e),r},t.prototype.toString=function(){return this.format()},t.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},t.fromJSON=function(e){return new t(e.start,e.end,e.step)},t},{isClass:!0}),U6="Matrix",H6=[],V6=H(U6,H6,()=>{function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator")}return t.prototype.type="Matrix",t.prototype.isMatrix=!0,t.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},t.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},t.prototype.create=function(e,r){throw new Error("Cannot invoke create on a Matrix interface")},t.prototype.subset=function(e,r,n){throw new Error("Cannot invoke subset on a Matrix interface")},t.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},t.prototype.set=function(e,r,n){throw new Error("Cannot invoke set on a Matrix interface")},t.prototype.resize=function(e,r){throw new Error("Cannot invoke resize on a Matrix interface")},t.prototype.reshape=function(e,r){throw new Error("Cannot invoke reshape on a Matrix interface")},t.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},t.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},t.prototype.map=function(e,r){throw new Error("Cannot invoke map on a Matrix interface")},t.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},t.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},t.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},t.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},t.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},t.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},t},{isClass:!0});function Lh(t,e,r){var n=t.constructor,i=new n(2),a="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!$e(r))throw new Error("size must be an integer");if(t.greaterThan(i.pow(r-1).sub(1))||t.lessThan(i.pow(r-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!t.isInteger())throw new Error("Value must be an integer");t.lessThan(0)&&(t=t.add(i.pow(r))),a="i".concat(r)}switch(e){case 2:return"".concat(t.toBinary()).concat(a);case 8:return"".concat(t.toOctal()).concat(a);case 16:return"".concat(t.toHexadecimal()).concat(a);default:throw new Error("Base ".concat(e," not supported "))}}function W6(t,e){if(typeof e=="function")return e(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var{notation:r,precision:n,wordSize:i}=A2(e);switch(r){case"fixed":return G6(t,n);case"exponential":return ab(t,n);case"engineering":return j6(t,n);case"bin":return Lh(t,2,i);case"oct":return Lh(t,8,i);case"hex":return Lh(t,16,i);case"auto":{var a=ob(e==null?void 0:e.lowerExp,-3),o=ob(e==null?void 0:e.upperExp,5);if(t.isZero())return"0";var s,u=t.toSignificantDigits(n),l=u.e;return l>=a&&l<o?s=u.toFixed():s=ab(t,n),s.replace(/((\.\d*?)(0+))($|e)/,function(){var c=arguments[2],f=arguments[4];return c!=="."?c+f:f})}default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function j6(t,e){var r=t.e,n=r%3===0?r:r<0?r-3-r%3:r-r%3,i=t.mul(Math.pow(10,-n)),a=i.toPrecision(e);if(a.includes("e")){var o=t.constructor;a=new o(a).toFixed()}return a+"e"+(r>=0?"+":"")+n.toString()}function ab(t,e){return e!==void 0?t.toExponential(e-1):t.toExponential()}function G6(t,e){return t.toFixed(e)}function ob(t,e){return it(t)?t:ot(t)?t.toNumber():e}function K6(t,e){var r=t.length-e.length,n=t.length;return t.substring(r,n)===e}function pt(t,e){var r=J6(t,e);return e&&typeof e=="object"&&"truncate"in e&&r.length>e.truncate?r.substring(0,e.truncate-3)+"...":r}function J6(t,e){if(typeof t=="number")return Lo(t,e);if(ot(t))return W6(t,e);if(Y6(t))return!e||e.fraction!=="decimal"?"".concat(t.s*t.n,"/").concat(t.d):t.toString();if(Array.isArray(t))return $2(t,e);if(Vr(t))return Ss(t);if(typeof t=="function")return t.syntax?String(t.syntax):"function";if(t&&typeof t=="object"){if(typeof t.format=="function")return t.format(e);if(t&&t.toString(e)!=={}.toString())return t.toString(e);var r=Object.keys(t).map(n=>Ss(n)+": "+pt(t[n],e));return"{"+r.join(", ")+"}"}return String(t)}function Ss(t){for(var e=String(t),r="",n=0;n<e.length;){var i=e.charAt(n);r+=i in sb?sb[i]:i,n++}return'"'+r+'"'}var sb={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function Hn(t){var e=String(t);return e=e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e}function $2(t,e){if(Array.isArray(t)){for(var r="[",n=t.length,i=0;i<n;i++)i!==0&&(r+=", "),r+=$2(t[i],e);return r+="]",r}else return pt(t,e)}function Y6(t){return t&&typeof t=="object"&&typeof t.s=="bigint"&&typeof t.n=="bigint"&&typeof t.d=="bigint"||!1}function eg(t,e){if(!Vr(t))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+It(t)+", index: 0)");if(!Vr(e))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+It(e)+", index: 1)");return t===e?0:t>e?1:-1}function ht(t,e,r){if(!(this instanceof ht))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=r,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}ht.prototype=new RangeError;ht.prototype.constructor=RangeError;ht.prototype.name="DimensionError";ht.prototype.isDimensionError=!0;function di(t,e,r){if(!(this instanceof di))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=r),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}di.prototype=new RangeError;di.prototype.constructor=RangeError;di.prototype.name="IndexError";di.prototype.isIndexError=!0;function Ze(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e}function L2(t,e,r){var n,i=t.length;if(i!==e[r])throw new ht(i,e[r]);if(r<e.length-1){var a=r+1;for(n=0;n<i;n++){var o=t[n];if(!Array.isArray(o))throw new ht(e.length-1,e.length,"<");L2(t[n],e,a)}}else for(n=0;n<i;n++)if(Array.isArray(t[n]))throw new ht(e.length+1,e.length,">")}function ub(t,e){var r=e.length===0;if(r){if(Array.isArray(t))throw new ht(t.length,0)}else L2(t,e,0)}function hd(t,e){var r=t.isMatrix?t._size:Ze(t),n=e._sourceSize;n.forEach((i,a)=>{if(i!==null&&i!==r[a])throw new ht(i,r[a])})}function Pt(t,e){if(t!==void 0){if(!it(t)||!$e(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||typeof e=="number"&&t>=e)throw new di(t,e)}}function Gs(t){for(var e=0;e<t._dimensions.length;++e){var r=t._dimensions[e];if(r._data&&Bt(r._data)){if(r._size[0]===0)return!0}else if(r.isRange){if(r.start===r.end)return!0}else if(Vr(r)&&r.length===0)return!0}return!1}function Ks(t,e,r){if(!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(i){if(!it(i)||!$e(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+pt(e)+")")}),(it(t)||ot(t))&&(t=[t]);var n=r!==void 0?r:0;return tg(t,e,0,n),t}function tg(t,e,r,n){var i,a,o=t.length,s=e[r],u=Math.min(o,s);if(t.length=s,r<e.length-1){var l=r+1;for(i=0;i<u;i++)a=t[i],Array.isArray(a)||(a=[a],t[i]=a),tg(a,e,l,n);for(i=u;i<s;i++)a=[],t[i]=a,tg(a,e,l,n)}else{for(i=0;i<u;i++)for(;Array.isArray(t[i]);)t[i]=t[i][0];for(i=u;i<s;i++)t[i]=n}}function Av(t,e){var r=Et(t,!0),n=r.length;if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new ht(0,n,"!=");e=Sv(e,n);var i=z2(e);if(n!==i)throw new ht(i,n,"!=");try{return Z6(r,e)}catch(a){throw a instanceof ht?new ht(i,n,"!="):a}}function Sv(t,e){var r=z2(t),n=t.slice(),i=-1,a=t.indexOf(i),o=t.indexOf(i,a+1)>=0;if(o)throw new Error("More than one wildcard in sizes");var s=a>=0,u=e%r===0;if(s)if(u)n[a]=-e/r;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-r);return n}function z2(t){return t.reduce((e,r)=>e*r,1)}function Z6(t,e){for(var r=t,n,i=e.length-1;i>0;i--){var a=e[i];n=[];for(var o=r.length/a,s=0;s<o;s++)n.push(r.slice(s*a,(s+1)*a));r=n}return r}function md(t,e){for(var r=Ze(t);Array.isArray(t)&&t.length===1;)t=t[0],r.shift();for(var n=r.length;r[n-1]===1;)n--;return n<r.length&&(t=q2(t,n,0),r.length=n),t}function q2(t,e,r){var n,i;if(r<e){var a=r+1;for(n=0,i=t.length;n<i;n++)t[n]=q2(t[n],e,a)}else for(;Array.isArray(t);)t=t[0];return t}function U2(t,e,r,n){var i=n||Ze(t);if(r)for(var a=0;a<r;a++)t=[t],i.unshift(1);for(t=H2(t,e,0);i.length<e;)i.push(1);return t}function H2(t,e,r){var n,i;if(Array.isArray(t)){var a=r+1;for(n=0,i=t.length;n<i;n++)t[n]=H2(t[n],e,a)}else for(var o=r;o<e;o++)t=[t];return t}function Et(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!Array.isArray(t))return t;if(typeof e!="boolean")throw new TypeError("Boolean expected for second argument of flatten");var r=[];return e?i(t):n(t),r;function n(a){for(var o=0;o<a.length;o++){var s=a[o];Array.isArray(s)?n(s):r.push(s)}}function i(a){if(Array.isArray(a[0]))for(var o=0;o<a.length;o++)i(a[o]);else for(var s=0;s<a.length;s++)r.push(a[s])}}function Ga(t,e){return Array.prototype.map.call(t,e)}function V2(t,e){Array.prototype.forEach.call(t,e)}function lb(t,e){if(Ze(t).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(t,e)}function cb(t,e){if(Ze(t).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(t,r=>e.test(r))}function fb(t,e){return Array.prototype.join.call(t,e)}function Js(t){if(!Array.isArray(t))throw new TypeError("Array input expected");if(t.length===0)return t;var e=[],r=0;e[0]={value:t[0],identifier:0};for(var n=1;n<t.length;n++)t[n]===t[n-1]?r++:r=0,e.push({value:t[n],identifier:r});return e}function gd(t){if(!Array.isArray(t))throw new TypeError("Array input expected");if(t.length===0)return t;for(var e=[],r=0;r<t.length;r++)e.push(t[r].value);return e}function wp(t,e){for(var r,n=0,i=0;i<t.length;i++){var a=t[i],o=Array.isArray(a);if(i===0&&o&&(n=a.length),o&&a.length!==n)return;var s=o?wp(a,e):e(a);if(r===void 0)r=s;else if(r!==s)return"mixed"}return r}function W2(t,e,r,n){if(n<r){if(t.length!==e.length)throw new ht(t.length,e.length);for(var i=[],a=0;a<t.length;a++)i[a]=W2(t[a],e[a],r,n+1);return i}else return t.concat(e)}function j2(){var t=Array.prototype.slice.call(arguments,0,-1),e=Array.prototype.slice.call(arguments,-1);if(t.length===1)return t[0];if(t.length>1)return t.slice(1).reduce(function(r,n){return W2(r,n,e,0)},t[0]);throw new Error("Wrong number of arguments in function concat")}function Dv(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=e.map(d=>d.length),i=Math.max(...n),a=new Array(i).fill(null),o=0;o<e.length;o++)for(var s=e[o],u=n[o],l=0;l<u;l++){var c=i-u+l;s[l]>a[c]&&(a[c]=s[l])}for(var f=0;f<e.length;f++)G2(e[f],a);return a}function G2(t,e){for(var r=e.length,n=t.length,i=0;i<n;i++){var a=r-n+i;if(t[i]<e[a]&&t[i]>1||t[i]>e[a])throw new Error("shape mismatch: mismatch is found in arg with shape (".concat(t,") not possible to broadcast dimension ").concat(n," with size ").concat(t[i]," to size ").concat(e[a]))}}function Oo(t,e){var r=Ze(t);if(pa(r,e))return t;G2(r,e);var n=Dv(r,e),i=n.length,a=[...Array(i-r.length).fill(1),...r],o=Q6(t);r.length<i&&(o=Av(o,a),r=Ze(o));for(var s=0;s<i;s++)r[s]<n[s]&&(o=X6(o,n[s],s),r=Ze(o));return o}function X6(t,e,r){return j2(...Array(e).fill(t),r)}function Ev(t,e){if(!Array.isArray(t))throw new Error("Array expected");var r=Ze(t);if(e.length!==r.length)throw new ht(e.length,r.length);for(var n=0;n<e.length;n++)Pt(e[n],r[n]);return e.reduce((i,a)=>i[a],t)}function rg(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(t.length===0)return[];if(r)return a(t);var n=[];return i(t,0);function i(o,s){if(Array.isArray(o)){for(var u=o.length,l=Array(u),c=0;c<u;c++)n[s]=c,l[c]=i(o[c],s+1);return l}else return e(o,n.slice(0,s),t)}function a(o){if(Array.isArray(o)){for(var s=o.length,u=Array(s),l=0;l<s;l++)u[l]=a(o[l]);return u}else return e(o)}}function K2(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(t.length===0)return;if(r){a(t);return}var n=[];i(t,0);function i(o,s){if(Array.isArray(o))for(var u=o.length,l=0;l<u;l++)n[s]=l,i(o[l],s+1);else e(o,n.slice(0,s),t)}function a(o){if(Array.isArray(o))for(var s=o.length,u=0;u<s;u++)a(o[u]);else e(o)}}function Q6(t){return dr([],t)}function jo(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(cd.isTypedFunction(t)){var i;if(n)i=1;else{var a=(e.isMatrix?e.size():Ze(e)).map(()=>0),o=e.isMatrix?e.get(a):Ev(e,a);i=rL(t,o,a,e)}var s;if(e.isMatrix&&e.dataType!=="mixed"&&e.dataType!==void 0){var u=eL(t,i);s=u!==void 0?u:t}else s=t;return i>=1&&i<=3?{isUnary:i===1,fn:function(){for(var c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return db(s,f.slice(0,i),r,t.name)}}:{isUnary:!1,fn:function(){for(var c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return db(s,f,r,t.name)}}}return n===void 0?{isUnary:tL(t),fn:t}:{isUnary:n,fn:t}}function eL(t,e){var r=[];if(Object.entries(t.signatures).forEach(n=>{var[i,a]=n;i.split(",").length===e&&r.push(a)}),r.length===1)return r[0]}function tL(t){if(t.length!==1)return!1;var e=t.toString();if(/arguments/.test(e))return!1;var r=e.match(/\(.*?\)/);return!/\.\.\./.test(r)}function rL(t,e,r,n){for(var i=[e,r,n],a=3;a>0;a--){var o=i.slice(0,a);if(cd.resolve(t,o)!==null)return a}}function db(t,e,r,n){try{return t(...e)}catch(i){nL(i,e,r,n)}}function nL(t,e,r,n){var i;if(t instanceof TypeError&&((i=t.data)===null||i===void 0?void 0:i.category)==="wrongType"){var a=[];throw a.push("value: ".concat(It(e[0]))),e.length>=2&&a.push("index: ".concat(It(e[1]))),e.length>=3&&a.push("array: ".concat(It(e[2]))),new TypeError("Function ".concat(r," cannot apply callback arguments ")+"".concat(n,"(").concat(a.join(", "),") at index ").concat(JSON.stringify(e[1])))}else throw new TypeError("Function ".concat(r," cannot apply callback arguments ")+"to function ".concat(n,": ").concat(t.message))}var iL="DenseMatrix",aL=["Matrix"],oL=H(iL,aL,t=>{var{Matrix:e}=t;function r(c,f){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(f&&!Vr(f))throw new Error("Invalid datatype: "+f);if(We(c))c.type==="DenseMatrix"?(this._data=et(c._data),this._size=et(c._size),this._datatype=f||c._datatype):(this._data=c.toArray(),this._size=c.size(),this._datatype=f||c._datatype);else if(c&&Bt(c.data)&&Bt(c.size))this._data=c.data,this._size=c.size,ub(this._data,this._size),this._datatype=f||c.datatype;else if(Bt(c))this._data=l(c),this._size=Ze(this._data),ub(this._data,this._size),this._datatype=f;else{if(c)throw new TypeError("Unsupported type of data ("+It(c)+")");this._data=[],this._size=[0],this._datatype=f}}r.prototype=new e,r.prototype.createDenseMatrix=function(c,f){return new r(c,f)},Object.defineProperty(r,"name",{value:"DenseMatrix"}),r.prototype.constructor=r,r.prototype.type="DenseMatrix",r.prototype.isDenseMatrix=!0,r.prototype.getDataType=function(){return wp(this._data,It)},r.prototype.storage=function(){return"dense"},r.prototype.datatype=function(){return this._datatype},r.prototype.create=function(c,f){return new r(c,f)},r.prototype.subset=function(c,f,d){switch(arguments.length){case 1:return n(this,c);case 2:case 3:return a(this,c,f,d);default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.get=function(c){return Ev(this._data,c)},r.prototype.set=function(c,f,d){if(!Bt(c))throw new TypeError("Array expected");if(c.length<this._size.length)throw new ht(c.length,this._size.length,"<");var p,h,m,g=c.map(function(N){return N+1});u(this,g,d);var y=this._data;for(p=0,h=c.length-1;p<h;p++)m=c[p],Pt(m,y.length),y=y[m];return m=c[c.length-1],Pt(m,y.length),y[m]=f,this};function n(c,f){if(!hp(f))throw new TypeError("Invalid index");var d=f.isScalar();if(d)return c.get(f.min());var p=f.size();if(p.length!==c._size.length)throw new ht(p.length,c._size.length);for(var h=f.min(),m=f.max(),g=0,y=c._size.length;g<y;g++)Pt(h[g],c._size[g]),Pt(m[g],c._size[g]);var N=new r([]),v=i(c._data,f);return N._size=v.size,N._datatype=c._datatype,N._data=v.data,N}function i(c,f){var d=f.size().length-1,p=Array(d);return{data:h(c),size:p};function h(m){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,y=f.dimension(g);return p[g]=y.size()[0],g<d?y.map(N=>(Pt(N,m.length),h(m[N],g+1))).valueOf():y.map(N=>(Pt(N,m.length),m[N])).valueOf()}}function a(c,f,d,p){if(!f||f.isIndex!==!0)throw new TypeError("Invalid index");var h=f.size(),m=f.isScalar(),g;if(We(d)?(g=d.size(),d=d.valueOf()):g=Ze(d),m){if(g.length!==0)throw new TypeError("Scalar expected");c.set(f.min(),d,p)}else{if(!pa(g,h))try{g.length===0?d=Oo([d],h):d=Oo(d,h),g=Ze(d)}catch{}if(h.length<c._size.length)throw new ht(h.length,c._size.length,"<");if(g.length<h.length){for(var y=0,N=0;h[y]===1&&g[y]===1;)y++;for(;h[y]===1;)N++,y++;d=U2(d,h.length,N,g)}if(!pa(h,g))throw new ht(h,g,">");var v=f.max().map(function(w){return w+1});u(c,v,p),o(c._data,f,d)}return c}function o(c,f,d){var p=f.size().length-1;h(c,d);function h(m,g){var y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,N=f.dimension(y);y<p?N.forEach((v,w)=>{Pt(v,m.length),h(m[v],g[w[0]],y+1)}):N.forEach((v,w)=>{Pt(v,m.length),m[v]=g[w[0]]})}}r.prototype.resize=function(c,f,d){if(!Jn(c))throw new TypeError("Array or Matrix expected");var p=c.valueOf().map(m=>Array.isArray(m)&&m.length===1?m[0]:m),h=d?this.clone():this;return s(h,p,f)};function s(c,f,d){if(f.length===0){for(var p=c._data;Bt(p);)p=p[0];return p}return c._size=f.slice(0),c._data=Ks(c._data,c._size,d),c}r.prototype.reshape=function(c,f){var d=f?this.clone():this;d._data=Av(d._data,c);var p=d._size.reduce((h,m)=>h*m);return d._size=Sv(c,p),d};function u(c,f,d){for(var p=c._size.slice(0),h=!1;p.length<f.length;)p.push(0),h=!0;for(var m=0,g=f.length;m<g;m++)f[m]>p[m]&&(p[m]=f[m],h=!0);h&&s(c,p,d)}r.prototype.clone=function(){var c=new r({data:et(this._data),size:et(this._size),datatype:this._datatype});return c},r.prototype.size=function(){return this._size.slice(0)},r.prototype.map=function(c){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,d=this,p=d._size.length-1;if(p<0)return d.clone();var h=jo(c,d,"map",f),m=h.fn,g=d.create(void 0,d._datatype);if(g._size=d._size,f||h.isUnary)return g._data=b(d._data),g;if(p===0){for(var y=d.valueOf(),N=Array(y.length),v=0;v<y.length;v++)N[v]=m(y[v],[v],d);return g._data=N,g}var w=[];return g._data=x(d._data),g;function x(S){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,A=Array(S.length);if(C<p)for(var E=0;E<S.length;E++)w[C]=E,A[E]=x(S[E],C+1);else for(var D=0;D<S.length;D++)w[C]=D,A[D]=m(S[D],w.slice(),d);return A}function b(S){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,A=Array(S.length);if(C<p)for(var E=0;E<S.length;E++)A[E]=b(S[E],C+1);else for(var D=0;D<S.length;D++)A[D]=m(S[D]);return A}},r.prototype.forEach=function(c){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,d=this,p=d._size.length-1;if(p<0)return;var h=jo(c,d,"map",f),m=h.fn;if(f||h.isUnary){v(d._data);return}if(p===0){for(var g=0;g<d._data.length;g++)m(d._data[g],[g],d);return}var y=[];N(d._data);function N(w){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(x<p)for(var b=0;b<w.length;b++)y[x]=b,N(w[b],x+1);else for(var S=0;S<w.length;S++)y[x]=S,m(w[S],y.slice(),d)}function v(w){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(x<p)for(var b=0;b<w.length;b++)v(w[b],x+1);else for(var S=0;S<w.length;S++)m(w[S])}},r.prototype[Symbol.iterator]=function*(){var c=this._size.length-1;if(!(c<0)){if(c===0){for(var f=0;f<this._data.length;f++)yield{value:this._data[f],index:[f]};return}var d=[],p=function*(m,g){if(g<c)for(var y=0;y<m.length;y++)d[g]=y,yield*p(m[y],g+1);else for(var N=0;N<m.length;N++)d[g]=N,yield{value:m[N],index:d.slice()}};yield*p(this._data,0)}},r.prototype.rows=function(){var c=[],f=this.size();if(f.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var d=this._data;for(var p of d)c.push(new r([p],this._datatype));return c},r.prototype.columns=function(){var c=this,f=[],d=this.size();if(d.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var p=this._data,h=function(y){var N=p.map(v=>[v[y]]);f.push(new r(N,c._datatype))},m=0;m<d[1];m++)h(m);return f},r.prototype.toArray=function(){return et(this._data)},r.prototype.valueOf=function(){return this._data},r.prototype.format=function(c){return pt(this._data,c)},r.prototype.toString=function(){return pt(this._data)},r.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.prototype.diagonal=function(c){if(c){if(ot(c)&&(c=c.toNumber()),!it(c)||!$e(c))throw new TypeError("The parameter k must be an integer number")}else c=0;for(var f=c>0?c:0,d=c<0?-c:0,p=this._size[0],h=this._size[1],m=Math.min(p-d,h-f),g=[],y=0;y<m;y++)g[y]=this._data[y+d][y+f];return new r({data:g,size:[m],datatype:this._datatype})},r.diagonal=function(c,f,d,p){if(!Bt(c))throw new TypeError("Array expected, size parameter");if(c.length!==2)throw new Error("Only two dimensions matrix are supported");if(c=c.map(function(S){if(ot(S)&&(S=S.toNumber()),!it(S)||!$e(S)||S<1)throw new Error("Size values must be positive integers");return S}),d){if(ot(d)&&(d=d.toNumber()),!it(d)||!$e(d))throw new TypeError("The parameter k must be an integer number")}else d=0;var h=d>0?d:0,m=d<0?-d:0,g=c[0],y=c[1],N=Math.min(g-m,y-h),v;if(Bt(f)){if(f.length!==N)throw new Error("Invalid value array length");v=function(C){return f[C]}}else if(We(f)){var w=f.size();if(w.length!==1||w[0]!==N)throw new Error("Invalid matrix length");v=function(C){return f.get([C])}}else v=function(){return f};p||(p=ot(v(0))?v(0).mul(0):0);var x=[];if(c.length>0){x=Ks(x,c,p);for(var b=0;b<N;b++)x[b+m][b+h]=v(b)}return new r({data:x,size:[g,y]})},r.fromJSON=function(c){return new r(c)},r.prototype.swapRows=function(c,f){if(!it(c)||!$e(c)||!it(f)||!$e(f))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Pt(c,this._size[0]),Pt(f,this._size[0]),r._swapRows(c,f,this._data),this},r._swapRows=function(c,f,d){var p=d[c];d[c]=d[f],d[f]=p};function l(c){return We(c)?l(c.valueOf()):Bt(c)?c.map(l):c}return r},{isClass:!0}),pb="clone",sL=["typed"],uL=H(pb,sL,t=>{var{typed:e}=t;return e(pb,{any:et})});function J2(t){var e=t.length,r=t[0].length,n,i,a=[];for(i=0;i<r;i++){var o=[];for(n=0;n<e;n++)o.push(t[n][i]);a.push(o)}return a}function tu(t){for(var e=0;e<t.length;e++)if(Jn(t[e]))return!0;return!1}function eo(t,e){We(t)?t.forEach(r=>e(r),!1,!0):K2(t,e,!0)}function st(t,e,r){if(!r)return We(t)?t.map(i=>e(i),!1,!0):rg(t,e,!0);var n=i=>i===0?i:e(i);return We(t)?t.map(i=>n(i),!1,!0):rg(t,n,!0)}function Np(t,e,r){var n=Array.isArray(t)?Ze(t):t.size();if(e<0||e>=n.length)throw new di(e,n.length);return We(t)?t.create(vd(t.valueOf(),e,r),t.datatype()):vd(t,e,r)}function vd(t,e,r){var n,i,a,o;if(e<=0)if(Array.isArray(t[0])){for(o=J2(t),i=[],n=0;n<o.length;n++)i[n]=vd(o[n],e-1,r);return i}else{for(a=t[0],n=1;n<t.length;n++)a=r(a,t[n]);return a}else{for(i=[],n=0;n<t.length;n++)i[n]=vd(t[n],e-1,r);return i}}function hb(t,e,r,n,i,a,o,s,u,l,c){var f=t._values,d=t._index,p=t._ptr,h,m,g,y;if(n)for(m=p[e],g=p[e+1],h=m;h<g;h++)y=d[h],r[y]!==a?(r[y]=a,o.push(y),n[y]=f[h]):(n[y]=s(n[y],f[h]),i[y]=a);else for(m=p[e],g=p[e+1],h=m;h<g;h++)y=d[h],r[y]!==a?(r[y]=a,o.push(y)):i[y]=a}var mb="isInteger",lL=["typed"],cL=H(mb,lL,t=>{var{typed:e}=t;return e(mb,{number:$e,BigNumber:function(n){return n.isInt()},bigint:function(n){return!0},Fraction:function(n){return n.d===1n},"Array | Matrix":e.referToSelf(r=>n=>st(n,r))})}),pi="number",ru="number, number";function Y2(t){return Math.abs(t)}Y2.signature=pi;function Z2(t,e){return t+e}Z2.signature=ru;function X2(t,e){return t-e}X2.signature=ru;function Q2(t,e){return t*e}Q2.signature=ru;function eC(t){return-t}eC.signature=pi;function tC(t){return t}tC.signature=pi;function Bu(t){return p8(t)}Bu.signature=pi;function rC(t){return t*t*t}rC.signature=pi;function nC(t){return Math.exp(t)}nC.signature=pi;function iC(t){return h8(t)}iC.signature=pi;function aC(t,e){if(!$e(t)||!$e(e))throw new Error("Parameters in function lcm must be integer numbers");if(t===0||e===0)return 0;for(var r,n=t*e;e!==0;)r=e,e=t%r,t=r;return Math.abs(n/t)}aC.signature=ru;function gb(t,e){return e?Math.log(t)/Math.log(e):Math.log(t)}function yd(t){return f8(t)}yd.signature=pi;function ng(t){return c8(t)}ng.signature=pi;function vb(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,r=e<0;if(r&&(e=-e),e===0)throw new Error("Root must be non-zero");if(t<0&&Math.abs(e)%2!==1)throw new Error("Root must be odd when a is negative.");if(t===0)return r?1/0:0;if(!isFinite(t))return r?0:t;var n=Math.pow(Math.abs(t),1/e);return n=t<0?-n:n,r?1/n:n}function ig(t){return $a(t)}ig.signature=pi;function oC(t){return t*t}oC.signature=pi;function sC(t,e){var r,n,i,a=0,o=1,s=1,u=0;if(!$e(t)||!$e(e))throw new Error("Parameters in function xgcd must be integer numbers");for(;e;)n=Math.floor(t/e),i=t-n*e,r=a,a=o-n*a,o=r,r=s,s=u-n*s,u=r,t=e,e=i;var l;return t<0?l=[-t,-o,-u]:l=[t,t?o:0,u],l}sC.signature=ru;function uC(t,e){return t*t<1&&e===1/0||t*t>1&&e===-1/0?0:Math.pow(t,e)}uC.signature=ru;function Du(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!$e(e)||e<0||e>15)throw new Error("Number of decimals in function round must be an integer from 0 to 15 inclusive");return parseFloat(S2(t,e))}var fL="number",nu="number, number";function lC(t,e){if(!$e(t)||!$e(e))throw new Error("Integers expected in function bitAnd");return t&e}lC.signature=nu;function cC(t){if(!$e(t))throw new Error("Integer expected in function bitNot");return~t}cC.signature=fL;function fC(t,e){if(!$e(t)||!$e(e))throw new Error("Integers expected in function bitOr");return t|e}fC.signature=nu;function dC(t,e){if(!$e(t)||!$e(e))throw new Error("Integers expected in function bitXor");return t^e}dC.signature=nu;function pC(t,e){if(!$e(t)||!$e(e))throw new Error("Integers expected in function leftShift");return t<<e}pC.signature=nu;function hC(t,e){if(!$e(t)||!$e(e))throw new Error("Integers expected in function rightArithShift");return t>>e}hC.signature=nu;function mC(t,e){if(!$e(t)||!$e(e))throw new Error("Integers expected in function rightLogShift");return t>>>e}mC.signature=nu;function na(t,e){if(e<t)return 1;if(e===t)return e;var r=e+t>>1;return na(t,r)*na(r+1,e)}function gC(t,e){if(!$e(t)||t<0)throw new TypeError("Positive integer value expected in function combinations");if(!$e(e)||e<0)throw new TypeError("Positive integer value expected in function combinations");if(e>t)throw new TypeError("k must be less than or equal to n");for(var r=t-e,n=1,i=e<r?r+1:e+1,a=2,o=e<r?e:r,s=i;s<=t;++s)for(n*=s;a<=o&&n%a===0;)n/=a,++a;return a<=o&&(n/=na(a,o)),n}gC.signature="number, number";var dL=Math.PI,pL=2*Math.PI,hL=Math.E,mL=1.618033988749895,gL="number",Cv="number, number";function vC(t){return!t}vC.signature=gL;function ag(t,e){return!!(t||e)}ag.signature=Cv;function og(t,e){return!!t!=!!e}og.signature=Cv;function sg(t,e){return!!(t&&e)}sg.signature=Cv;function bd(t){var e;if($e(t))return t<=0?isFinite(t)?1/0:NaN:t>171?1/0:na(1,t-1);if(t<.5)return Math.PI/(Math.sin(Math.PI*t)*bd(1-t));if(t>=171.35)return 1/0;if(t>85){var r=t*t,n=r*t,i=n*t,a=i*t;return Math.sqrt(2*Math.PI/t)*Math.pow(t/Math.E,t)*(1+1/(12*t)+1/(288*r)-139/(51840*n)-571/(2488320*i)+163879/(209018880*a)+5246819/(75246796800*a*t))}--t,e=Is[0];for(var o=1;o<Is.length;++o)e+=Is[o]/(t+o);var s=t+yC+.5;return Math.sqrt(2*Math.PI)*Math.pow(s,t+.5)*Math.exp(-s)*e}bd.signature="number";var yC=4.7421875,Is=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],bC=.9189385332046728,vL=5,yL=7,yb=[1.000000000190015,76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18];function xd(t){if(t<0)return NaN;if(t===0)return 1/0;if(!isFinite(t))return t;if(t<.5)return Math.log(Math.PI/Math.sin(Math.PI*t))-xd(1-t);t=t-1;for(var e=t+vL+.5,r=yb[0],n=yL-1;n>=1;n--)r+=yb[n]/(t+n);return bC+(t+.5)*Math.log(e)-e+Math.log(r)}xd.signature="number";var Zr="number";function xC(t){return y8(t)}xC.signature=Zr;function wC(t){return Math.atan(1/t)}wC.signature=Zr;function NC(t){return isFinite(t)?(Math.log((t+1)/t)+Math.log(t/(t-1)))/2:0}NC.signature=Zr;function AC(t){return Math.asin(1/t)}AC.signature=Zr;function SC(t){var e=1/t;return Math.log(e+Math.sqrt(e*e+1))}SC.signature=Zr;function DC(t){return Math.acos(1/t)}DC.signature=Zr;function EC(t){var e=1/t,r=Math.sqrt(e*e-1);return Math.log(r+e)}EC.signature=Zr;function CC(t){return b8(t)}CC.signature=Zr;function MC(t){return x8(t)}MC.signature=Zr;function TC(t){return 1/Math.tan(t)}TC.signature=Zr;function _C(t){var e=Math.exp(2*t);return(e+1)/(e-1)}_C.signature=Zr;function OC(t){return 1/Math.sin(t)}OC.signature=Zr;function FC(t){return t===0?Number.POSITIVE_INFINITY:Math.abs(2/(Math.exp(t)-Math.exp(-t)))*$a(t)}FC.signature=Zr;function BC(t){return 1/Math.cos(t)}BC.signature=Zr;function kC(t){return 2/(Math.exp(t)+Math.exp(-t))}kC.signature=Zr;function IC(t){return N8(t)}IC.signature=Zr;var Mv="number";function RC(t){return t<0}RC.signature=Mv;function PC(t){return t>0}PC.signature=Mv;function $C(t){return Number.isNaN(t)}$C.signature=Mv;function Yn(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-9,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(r<=0)throw new Error("Relative tolerance must be greater than 0");if(n<0)throw new Error("Absolute tolerance must be at least 0");return t.isNaN()||e.isNaN()?!1:!t.isFinite()||!e.isFinite()?t.eq(e):t.eq(e)?!0:t.minus(e).abs().lte(t.constructor.max(t.constructor.max(t.abs(),e.abs()).mul(r),n))}var bb="isNegative",bL=["typed","config"],xL=H(bb,bL,t=>{var{typed:e,config:r}=t;return e(bb,{number:n=>$r(n,0,r.relTol,r.absTol)?!1:RC(n),BigNumber:n=>Yn(n,new n.constructor(0),r.relTol,r.absTol)?!1:n.isNeg()&&!n.isZero()&&!n.isNaN(),bigint:n=>n<0n,Fraction:n=>n.s<0n,Unit:e.referToSelf(n=>i=>e.find(n,i.valueType())(i.value)),"Array | Matrix":e.referToSelf(n=>i=>st(i,n))})}),xb="isNumeric",wL=["typed"],NL=H(xb,wL,t=>{var{typed:e}=t;return e(xb,{"number | BigNumber | bigint | Fraction | boolean":()=>!0,"Complex | Unit | string | null | undefined | Node":()=>!1,"Array | Matrix":e.referToSelf(r=>n=>st(n,r))})}),wb="hasNumericValue",AL=["typed","isNumeric"],SL=H(wb,AL,t=>{var{typed:e,isNumeric:r}=t;return e(wb,{boolean:()=>!0,string:function(i){return i.trim().length>0&&!isNaN(Number(i))},any:function(i){return r(i)}})}),Nb="isPositive",DL=["typed","config"],EL=H(Nb,DL,t=>{var{typed:e,config:r}=t;return e(Nb,{number:n=>$r(n,0,r.relTol,r.absTol)?!1:PC(n),BigNumber:n=>Yn(n,new n.constructor(0),r.relTol,r.absTol)?!1:!n.isNeg()&&!n.isZero()&&!n.isNaN(),bigint:n=>n>0n,Fraction:n=>n.s>0n&&n.n>0n,Unit:e.referToSelf(n=>i=>e.find(n,i.valueType())(i.value)),"Array | Matrix":e.referToSelf(n=>i=>st(i,n))})}),Ab="isZero",CL=["typed","equalScalar"],ML=H(Ab,CL,t=>{var{typed:e,equalScalar:r}=t;return e(Ab,{"number | BigNumber | Complex | Fraction":n=>r(n,0),bigint:n=>n===0n,Unit:e.referToSelf(n=>i=>e.find(n,i.valueType())(i.value)),"Array | Matrix":e.referToSelf(n=>i=>st(i,n))})}),Sb="isNaN",TL=["typed"],_L=H(Sb,TL,t=>{var{typed:e}=t;return e(Sb,{number:$C,BigNumber:function(n){return n.isNaN()},bigint:function(n){return!1},Fraction:function(n){return!1},Complex:function(n){return n.isNaN()},Unit:function(n){return Number.isNaN(n.value)},"Array | Matrix":e.referToSelf(r=>n=>st(n,r))})}),Db="typeOf",OL=["typed"],FL=H(Db,OL,t=>{var{typed:e}=t;return e(Db,{any:It})});function BL(t,e,r,n){return $r(t.re,e.re,r,n)&&$r(t.im,e.im,r,n)}var iu=H("compareUnits",["typed"],t=>{var{typed:e}=t;return{"Unit, Unit":e.referToSelf(r=>(n,i)=>{if(!n.equalBase(i))throw new Error("Cannot compare units with different base");return e.find(r,[n.valueType(),i.valueType()])(n.value,i.value)})}}),wd="equalScalar",kL=["typed","config"],IL=H(wd,kL,t=>{var{typed:e,config:r}=t,n=iu({typed:e});return e(wd,{"boolean, boolean":function(a,o){return a===o},"number, number":function(a,o){return $r(a,o,r.relTol,r.absTol)},"BigNumber, BigNumber":function(a,o){return a.eq(o)||Yn(a,o,r.relTol,r.absTol)},"bigint, bigint":function(a,o){return a===o},"Fraction, Fraction":function(a,o){return a.equals(o)},"Complex, Complex":function(a,o){return BL(a,o,r.relTol,r.absTol)}},n)});H(wd,["typed","config"],t=>{var{typed:e,config:r}=t;return e(wd,{"number, number":function(i,a){return $r(i,a,r.relTol,r.absTol)}})});var RL="SparseMatrix",PL=["typed","equalScalar","Matrix"],$L=H(RL,PL,t=>{var{typed:e,equalScalar:r,Matrix:n}=t;function i(m,g){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(g&&!Vr(g))throw new Error("Invalid datatype: "+g);if(We(m))a(this,m,g);else if(m&&Bt(m.index)&&Bt(m.ptr)&&Bt(m.size))this._values=m.values,this._index=m.index,this._ptr=m.ptr,this._size=m.size,this._datatype=g||m.datatype;else if(Bt(m))o(this,m,g);else{if(m)throw new TypeError("Unsupported type of data ("+It(m)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=g}}function a(m,g,y){g.type==="SparseMatrix"?(m._values=g._values?et(g._values):void 0,m._index=et(g._index),m._ptr=et(g._ptr),m._size=et(g._size),m._datatype=y||g._datatype):o(m,g.valueOf(),y||g._datatype)}function o(m,g,y){m._values=[],m._index=[],m._ptr=[],m._datatype=y;var N=g.length,v=0,w=r,x=0;if(Vr(y)&&(w=e.find(r,[y,y])||r,x=e.convert(0,y)),N>0){var b=0;do{m._ptr.push(m._index.length);for(var S=0;S<N;S++){var C=g[S];if(Bt(C)){if(b===0&&v<C.length&&(v=C.length),b<C.length){var A=C[b];w(A,x)||(m._values.push(A),m._index.push(S))}}else b===0&&v<1&&(v=1),w(C,x)||(m._values.push(C),m._index.push(S))}b++}while(b<v)}m._ptr.push(m._index.length),m._size=[N,v]}i.prototype=new n,i.prototype.createSparseMatrix=function(m,g){return new i(m,g)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return wp(this._values,It)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(m,g){return new i(m,g)},i.prototype.density=function(){var m=this._size[0],g=this._size[1];return m!==0&&g!==0?this._index.length/(m*g):0},i.prototype.subset=function(m,g,y){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return s(this,m);case 2:case 3:return u(this,m,g,y);default:throw new SyntaxError("Wrong number of arguments")}};function s(m,g){if(!hp(g))throw new TypeError("Invalid index");var y=g.isScalar();if(y)return m.get(g.min());var N=g.size();if(N.length!==m._size.length)throw new ht(N.length,m._size.length);var v,w,x,b,S=g.min(),C=g.max();for(v=0,w=m._size.length;v<w;v++)Pt(S[v],m._size[v]),Pt(C[v],m._size[v]);var A=m._values,E=m._index,D=m._ptr,M=g.dimension(0),F=g.dimension(1),I=[],P=[];M.forEach(function(W,R){P[W]=R[0],I[W]=!0});var T=A?[]:void 0,$=[],O=[];return F.forEach(function(W){for(O.push($.length),x=D[W],b=D[W+1];x<b;x++)v=E[x],I[v]===!0&&($.push(P[v]),T&&T.push(A[x]))}),O.push($.length),new i({values:T,index:$,ptr:O,size:N,datatype:m._datatype})}function u(m,g,y,N){if(!g||g.isIndex!==!0)throw new TypeError("Invalid index");var v=g.size(),w=g.isScalar(),x;if(We(y)?(x=y.size(),y=y.toArray()):x=Ze(y),w){if(x.length!==0)throw new TypeError("Scalar expected");m.set(g.min(),y,N)}else{if(v.length!==1&&v.length!==2)throw new ht(v.length,m._size.length,"<");if(x.length<v.length){for(var b=0,S=0;v[b]===1&&x[b]===1;)b++;for(;v[b]===1;)S++,b++;y=U2(y,v.length,S,x)}if(!pa(v,x))throw new ht(v,x,">");if(v.length===1){var C=g.dimension(0);C.forEach(function(D,M){Pt(D),m.set([D,0],y[M[0]],N)})}else{var A=g.dimension(0),E=g.dimension(1);A.forEach(function(D,M){Pt(D),E.forEach(function(F,I){Pt(F),m.set([D,F],y[M[0]][I[0]],N)})})}}return m}i.prototype.get=function(m){if(!Bt(m))throw new TypeError("Array expected");if(m.length!==this._size.length)throw new ht(m.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var g=m[0],y=m[1];Pt(g,this._size[0]),Pt(y,this._size[1]);var N=l(g,this._ptr[y],this._ptr[y+1],this._index);return N<this._ptr[y+1]&&this._index[N]===g?this._values[N]:0},i.prototype.set=function(m,g,y){if(!Bt(m))throw new TypeError("Array expected");if(m.length!==this._size.length)throw new ht(m.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var N=m[0],v=m[1],w=this._size[0],x=this._size[1],b=r,S=0;Vr(this._datatype)&&(b=e.find(r,[this._datatype,this._datatype])||r,S=e.convert(0,this._datatype)),(N>w-1||v>x-1)&&(d(this,Math.max(N+1,w),Math.max(v+1,x),y),w=this._size[0],x=this._size[1]),Pt(N,w),Pt(v,x);var C=l(N,this._ptr[v],this._ptr[v+1],this._index);return C<this._ptr[v+1]&&this._index[C]===N?b(g,S)?c(C,v,this._values,this._index,this._ptr):this._values[C]=g:b(g,S)||f(C,N,v,g,this._values,this._index,this._ptr),this};function l(m,g,y,N){if(y-g===0)return y;for(var v=g;v<y;v++)if(N[v]===m)return v;return g}function c(m,g,y,N,v){y.splice(m,1),N.splice(m,1);for(var w=g+1;w<v.length;w++)v[w]--}function f(m,g,y,N,v,w,x){v.splice(m,0,N),w.splice(m,0,g);for(var b=y+1;b<x.length;b++)x[b]++}i.prototype.resize=function(m,g,y){if(!Jn(m))throw new TypeError("Array or Matrix expected");var N=m.valueOf().map(w=>Array.isArray(w)&&w.length===1?w[0]:w);if(N.length!==2)throw new Error("Only two dimensions matrix are supported");N.forEach(function(w){if(!it(w)||!$e(w)||w<0)throw new TypeError("Invalid size, must contain positive integers (size: "+pt(N)+")")});var v=y?this.clone():this;return d(v,N[0],N[1],g)};function d(m,g,y,N){var v=N||0,w=r,x=0;Vr(m._datatype)&&(w=e.find(r,[m._datatype,m._datatype])||r,x=e.convert(0,m._datatype),v=e.convert(v,m._datatype));var b=!w(v,x),S=m._size[0],C=m._size[1],A,E,D;if(y>C){for(E=C;E<y;E++)if(m._ptr[E]=m._values.length,b)for(A=0;A<S;A++)m._values.push(v),m._index.push(A);m._ptr[y]=m._values.length}else y<C&&(m._ptr.splice(y+1,C-y),m._values.splice(m._ptr[y],m._values.length),m._index.splice(m._ptr[y],m._index.length));if(C=y,g>S){if(b){var M=0;for(E=0;E<C;E++){m._ptr[E]=m._ptr[E]+M,D=m._ptr[E+1]+M;var F=0;for(A=S;A<g;A++,F++)m._values.splice(D+F,0,v),m._index.splice(D+F,0,A),M++}m._ptr[C]=m._values.length}}else if(g<S){var I=0;for(E=0;E<C;E++){m._ptr[E]=m._ptr[E]-I;var P=m._ptr[E],T=m._ptr[E+1]-I;for(D=P;D<T;D++)A=m._index[D],A>g-1&&(m._values.splice(D,1),m._index.splice(D,1),I++)}m._ptr[E]=m._values.length}return m._size[0]=g,m._size[1]=y,m}i.prototype.reshape=function(m,g){if(!Bt(m))throw new TypeError("Array expected");if(m.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");m.forEach(function(W){if(!it(W)||!$e(W)||W<=-2||W===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+pt(m)+")")});var y=this._size[0]*this._size[1];m=Sv(m,y);var N=m[0]*m[1];if(y!==N)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var v=g?this.clone():this;if(this._size[0]===m[0]&&this._size[1]===m[1])return v;for(var w=[],x=0;x<v._ptr.length;x++)for(var b=0;b<v._ptr[x+1]-v._ptr[x];b++)w.push(x);for(var S=v._values.slice(),C=v._index.slice(),A=0;A<v._index.length;A++){var E=C[A],D=w[A],M=E*v._size[1]+D;w[A]=M%m[1],C[A]=Math.floor(M/m[1])}v._values.length=0,v._index.length=0,v._ptr.length=m[1]+1,v._size=m.slice();for(var F=0;F<v._ptr.length;F++)v._ptr[F]=0;for(var I=0;I<S.length;I++){var P=C[I],T=w[I],$=S[I],O=l(P,v._ptr[T],v._ptr[T+1],v._index);f(O,P,T,$,v._values,v._index,v._ptr)}return v},i.prototype.clone=function(){var m=new i({values:this._values?et(this._values):void 0,index:et(this._index),ptr:et(this._ptr),size:et(this._size),datatype:this._datatype});return m},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(m,g){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var y=this,N=this._size[0],v=this._size[1],w=jo(m,y,"map"),x=function(S,C,A){return w.fn(S,[C,A],y)};return p(this,0,N-1,0,v-1,x,g)};function p(m,g,y,N,v,w,x){var b=[],S=[],C=[],A=r,E=0;Vr(m._datatype)&&(A=e.find(r,[m._datatype,m._datatype])||r,E=e.convert(0,m._datatype));for(var D=function(Z,X,pe){var de=w(Z,X,pe);A(de,E)||(b.push(de),S.push(X))},M=N;M<=v;M++){C.push(b.length);var F=m._ptr[M],I=m._ptr[M+1];if(x)for(var P=F;P<I;P++){var T=m._index[P];T>=g&&T<=y&&D(m._values[P],T-g,M-N)}else{for(var $={},O=F;O<I;O++){var W=m._index[O];$[W]=m._values[O]}for(var R=g;R<=y;R++){var ie=R in $?$[R]:0;D(ie,R-g,M-N)}}}return C.push(b.length),new i({values:b,index:S,ptr:C,size:[y-g+1,v-N+1]})}i.prototype.forEach=function(m,g){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var y=this,N=this._size[0],v=this._size[1],w=jo(m,y,"forEach"),x=0;x<v;x++){var b=this._ptr[x],S=this._ptr[x+1];if(g)for(var C=b;C<S;C++){var A=this._index[C];w.fn(this._values[C],[A,x],y)}else{for(var E={},D=b;D<S;D++){var M=this._index[D];E[M]=this._values[D]}for(var F=0;F<N;F++){var I=F in E?E[F]:0;w.fn(I,[F,x],y)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var m=this._size[1],g=0;g<m;g++)for(var y=this._ptr[g],N=this._ptr[g+1],v=y;v<N;v++){var w=this._index[v];yield{value:this._values[v],index:[w,g]}}},i.prototype.toArray=function(){return h(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return h(this._values,this._index,this._ptr,this._size,!1)};function h(m,g,y,N,v){var w=N[0],x=N[1],b=[],S,C;for(S=0;S<w;S++)for(b[S]=[],C=0;C<x;C++)b[S][C]=0;for(C=0;C<x;C++)for(var A=y[C],E=y[C+1],D=A;D<E;D++)S=g[D],b[S][C]=m?v?et(m[D]):m[D]:1;return b}return i.prototype.format=function(m){for(var g=this._size[0],y=this._size[1],N=this.density(),v="Sparse Matrix ["+pt(g,m)+" x "+pt(y,m)+"] density: "+pt(N,m)+`
`,w=0;w<y;w++)for(var x=this._ptr[w],b=this._ptr[w+1],S=x;S<b;S++){var C=this._index[S];v+=`
    (`+pt(C,m)+", "+pt(w,m)+") ==> "+(this._values?pt(this._values[S],m):"X")}return v},i.prototype.toString=function(){return pt(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(m){if(m){if(ot(m)&&(m=m.toNumber()),!it(m)||!$e(m))throw new TypeError("The parameter k must be an integer number")}else m=0;var g=m>0?m:0,y=m<0?-m:0,N=this._size[0],v=this._size[1],w=Math.min(N-y,v-g),x=[],b=[],S=[];S[0]=0;for(var C=g;C<v&&x.length<w;C++)for(var A=this._ptr[C],E=this._ptr[C+1],D=A;D<E;D++){var M=this._index[D];if(M===C-g+y){x.push(this._values[D]),b[x.length-1]=M-y;break}}return S.push(x.length),new i({values:x,index:b,ptr:S,size:[w,1]})},i.fromJSON=function(m){return new i(m)},i.diagonal=function(m,g,y,N,v){if(!Bt(m))throw new TypeError("Array expected, size parameter");if(m.length!==2)throw new Error("Only two dimensions matrix are supported");if(m=m.map(function(W){if(ot(W)&&(W=W.toNumber()),!it(W)||!$e(W)||W<1)throw new Error("Size values must be positive integers");return W}),y){if(ot(y)&&(y=y.toNumber()),!it(y)||!$e(y))throw new TypeError("The parameter k must be an integer number")}else y=0;var w=r,x=0;Vr(v)&&(w=e.find(r,[v,v])||r,x=e.convert(0,v));var b=y>0?y:0,S=y<0?-y:0,C=m[0],A=m[1],E=Math.min(C-S,A-b),D;if(Bt(g)){if(g.length!==E)throw new Error("Invalid value array length");D=function(R){return g[R]}}else if(We(g)){var M=g.size();if(M.length!==1||M[0]!==E)throw new Error("Invalid matrix length");D=function(R){return g.get([R])}}else D=function(){return g};for(var F=[],I=[],P=[],T=0;T<A;T++){P.push(F.length);var $=T-b;if($>=0&&$<E){var O=D($);w(O,x)||(I.push($+S),F.push(O))}}return P.push(F.length),new i({values:F,index:I,ptr:P,size:[C,A]})},i.prototype.swapRows=function(m,g){if(!it(m)||!$e(m)||!it(g)||!$e(g))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Pt(m,this._size[0]),Pt(g,this._size[0]),i._swapRows(m,g,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(m,g,y,N,v){for(var w=N[m],x=N[m+1],b=w;b<x;b++)v(y[b],g[b])},i._swapRows=function(m,g,y,N,v,w){for(var x=0;x<y;x++){var b=w[x],S=w[x+1],C=l(m,b,S,v),A=l(g,b,S,v);if(C<S&&A<S&&v[C]===m&&v[A]===g){if(N){var E=N[C];N[C]=N[A],N[A]=E}continue}if(C<S&&v[C]===m&&(A>=S||v[A]!==g)){var D=N?N[C]:void 0;v.splice(A,0,g),N&&N.splice(A,0,D),v.splice(A<=C?C+1:C,1),N&&N.splice(A<=C?C+1:C,1);continue}if(A<S&&v[A]===g&&(C>=S||v[C]!==m)){var M=N?N[A]:void 0;v.splice(C,0,m),N&&N.splice(C,0,M),v.splice(C<=A?A+1:A,1),N&&N.splice(C<=A?A+1:A,1)}}},i},{isClass:!0}),LL="number",zL=["typed"];function qL(t){var e=t.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(e){var r={"0b":2,"0o":8,"0x":16}[e[1]],n=e[2],i=e[3];return{input:t,radix:r,integerPart:n,fractionalPart:i}}else return null}function UL(t){for(var e=parseInt(t.integerPart,t.radix),r=0,n=0;n<t.fractionalPart.length;n++){var i=parseInt(t.fractionalPart[n],t.radix);r+=i/Math.pow(t.radix,n+1)}var a=e+r;if(isNaN(a))throw new SyntaxError('String "'+t.input+'" is not a valid number');return a}var HL=H(LL,zL,t=>{var{typed:e}=t,r=e("number",{"":function(){return 0},number:function(i){return i},string:function(i){if(i==="NaN")return NaN;var a=qL(i);if(a)return UL(a);var o=0,s=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);s&&(o=Number(s[2]),i=s[1]);var u=Number(i);if(isNaN(u))throw new SyntaxError('String "'+i+'" is not a valid number');if(s){if(u>2**o-1)throw new SyntaxError('String "'.concat(i,'" is out of range'));u>=2**(o-1)&&(u=u-2**o)}return u},BigNumber:function(i){return i.toNumber()},bigint:function(i){return Number(i)},Fraction:function(i){return i.valueOf()},Unit:e.referToSelf(n=>i=>{var a=i.clone();return a.value=n(i.value),a}),null:function(i){return 0},"Unit, string | Unit":function(i,a){return i.toNumber(a)},"Array | Matrix":e.referToSelf(n=>i=>st(i,n))});return r.fromJSON=function(n){return parseFloat(n.value)},r}),VL="bigint",WL=["typed"],jL=H(VL,WL,t=>{var{typed:e}=t,r=e("bigint",{"":function(){return 0n},bigint:function(i){return i},number:function(i){return BigInt(i.toFixed())},BigNumber:function(i){return BigInt(i.round().toString())},Fraction:function(i){return BigInt(i.valueOf().toFixed())},"string | boolean":function(i){return BigInt(i)},null:function(i){return 0n},"Array | Matrix":e.referToSelf(n=>i=>st(i,n))});return r.fromJSON=function(n){return BigInt(n.value)},r}),Eb="string",GL=["typed"],KL=H(Eb,GL,t=>{var{typed:e}=t;return e(Eb,{"":function(){return""},number:Lo,null:function(n){return"null"},boolean:function(n){return n+""},string:function(n){return n},"Array | Matrix":e.referToSelf(r=>n=>st(n,r)),any:function(n){return String(n)}})}),Cb="boolean",JL=["typed"],YL=H(Cb,JL,t=>{var{typed:e}=t;return e(Cb,{"":function(){return!1},boolean:function(n){return n},number:function(n){return!!n},null:function(n){return!1},BigNumber:function(n){return!n.isZero()},string:function(n){var i=n.toLowerCase();if(i==="true")return!0;if(i==="false")return!1;var a=Number(n);if(n!==""&&!isNaN(a))return!!a;throw new Error('Cannot convert "'+n+'" to a boolean')},"Array | Matrix":e.referToSelf(r=>n=>st(n,r))})}),ZL="bignumber",XL=["typed","BigNumber"],QL=H(ZL,XL,t=>{var{typed:e,BigNumber:r}=t;return e("bignumber",{"":function(){return new r(0)},number:function(i){return new r(i+"")},string:function(i){var a=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(a){var o=a[2],s=r(a[1]),u=new r(2).pow(Number(o));if(s.gt(u.sub(1)))throw new SyntaxError('String "'.concat(i,'" is out of range'));var l=new r(2).pow(Number(o)-1);return s.gte(l)?s.sub(u):s}return new r(i)},BigNumber:function(i){return i},bigint:function(i){return new r(i.toString())},Unit:e.referToSelf(n=>i=>{var a=i.clone();return a.value=n(i.value),a}),Fraction:function(i){return new r(String(i.n)).div(String(i.d)).times(String(i.s))},null:function(i){return new r(0)},"Array | Matrix":e.referToSelf(n=>i=>st(i,n))})}),ez="complex",tz=["typed","Complex"],rz=H(ez,tz,t=>{var{typed:e,Complex:r}=t;return e("complex",{"":function(){return r.ZERO},number:function(i){return new r(i,0)},"number, number":function(i,a){return new r(i,a)},"BigNumber, BigNumber":function(i,a){return new r(i.toNumber(),a.toNumber())},Fraction:function(i){return new r(i.valueOf(),0)},Complex:function(i){return i.clone()},string:function(i){return r(i)},null:function(i){return r(0)},Object:function(i){if("re"in i&&"im"in i)return new r(i.re,i.im);if("r"in i&&"phi"in i||"abs"in i&&"arg"in i)return new r(i);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":e.referToSelf(n=>i=>st(i,n))})}),nz="fraction",iz=["typed","Fraction"],az=H(nz,iz,t=>{var{typed:e,Fraction:r}=t;return e("fraction",{number:function(i){if(!isFinite(i)||isNaN(i))throw new Error(i+" cannot be represented as a fraction");return new r(i)},string:function(i){return new r(i)},"number, number":function(i,a){return new r(i,a)},"bigint, bigint":function(i,a){return new r(i,a)},null:function(i){return new r(0)},BigNumber:function(i){return new r(i.toString())},bigint:function(i){return new r(i.toString())},Fraction:function(i){return i},Unit:e.referToSelf(n=>i=>{var a=i.clone();return a.value=n(i.value),a}),Object:function(i){return new r(i)},"Array | Matrix":e.referToSelf(n=>i=>st(i,n))})}),Mb="matrix",oz=["typed","Matrix","DenseMatrix","SparseMatrix"],sz=H(Mb,oz,t=>{var{typed:e,Matrix:r,DenseMatrix:n,SparseMatrix:i}=t;return e(Mb,{"":function(){return a([])},string:function(s){return a([],s)},"string, string":function(s,u){return a([],s,u)},Array:function(s){return a(s)},Matrix:function(s){return a(s,s.storage())},"Array | Matrix, string":a,"Array | Matrix, string, string":a});function a(o,s,u){if(s==="dense"||s==="default"||s===void 0)return new n(o,u);if(s==="sparse")return new i(o,u);throw new TypeError("Unknown matrix type "+JSON.stringify(s)+".")}}),Tb="matrixFromFunction",uz=["typed","matrix","isZero"],lz=H(Tb,uz,t=>{var{typed:e,matrix:r,isZero:n}=t;return e(Tb,{"Array | Matrix, function, string, string":function(o,s,u,l){return i(o,s,u,l)},"Array | Matrix, function, string":function(o,s,u){return i(o,s,u)},"Matrix, function":function(o,s){return i(o,s,"dense")},"Array, function":function(o,s){return i(o,s,"dense").toArray()},"Array | Matrix, string, function":function(o,s,u){return i(o,u,s)},"Array | Matrix, string, string, function":function(o,s,u,l){return i(o,l,s,u)}});function i(a,o,s,u){var l;return u!==void 0?l=r(s,u):l=r(s),l.resize(a),l.forEach(function(c,f){var d=o(f);n(d)||l.set(f,d)}),l}}),_b="matrixFromRows",cz=["typed","matrix","flatten","size"],fz=H(_b,cz,t=>{var{typed:e,matrix:r,flatten:n,size:i}=t;return e(_b,{"...Array":function(u){return a(u)},"...Matrix":function(u){return r(a(u.map(l=>l.toArray())))}});function a(s){if(s.length===0)throw new TypeError("At least one row is needed to construct a matrix.");var u=o(s[0]),l=[];for(var c of s){var f=o(c);if(f!==u)throw new TypeError("The vectors had different length: "+(u|0)+"  "+(f|0));l.push(n(c))}return l}function o(s){var u=i(s);if(u.length===1)return u[0];if(u.length===2){if(u[0]===1)return u[1];if(u[1]===1)return u[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),Ob="matrixFromColumns",dz=["typed","matrix","flatten","size"],pz=H(Ob,dz,t=>{var{typed:e,matrix:r,flatten:n,size:i}=t;return e(Ob,{"...Array":function(u){return a(u)},"...Matrix":function(u){return r(a(u.map(l=>l.toArray())))}});function a(s){if(s.length===0)throw new TypeError("At least one column is needed to construct a matrix.");for(var u=o(s[0]),l=[],c=0;c<u;c++)l[c]=[];for(var f of s){var d=o(f);if(d!==u)throw new TypeError("The vectors had different length: "+(u|0)+"  "+(d|0));for(var p=n(f),h=0;h<u;h++)l[h].push(p[h])}return l}function o(s){var u=i(s);if(u.length===1)return u[0];if(u.length===2){if(u[0]===1)return u[1];if(u[1]===1)return u[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),Fb="splitUnit",hz=["typed"],mz=H(Fb,hz,t=>{var{typed:e}=t;return e(Fb,{"Unit, Array":function(n,i){return n.splitUnit(i)}})}),Bb="unaryMinus",gz=["typed"],vz=H(Bb,gz,t=>{var{typed:e}=t;return e(Bb,{number:eC,"Complex | BigNumber | Fraction":r=>r.neg(),bigint:r=>-r,Unit:e.referToSelf(r=>n=>{var i=n.clone();return i.value=e.find(r,i.valueType())(n.value),i}),"Array | Matrix":e.referToSelf(r=>n=>st(n,r,!0))})}),kb="unaryPlus",yz=["typed","config","numeric"],bz=H(kb,yz,t=>{var{typed:e,config:r,numeric:n}=t;return e(kb,{number:tC,Complex:function(a){return a},BigNumber:function(a){return a},bigint:function(a){return a},Fraction:function(a){return a},Unit:function(a){return a.clone()},"Array | Matrix":e.referToSelf(i=>a=>st(a,i,!0)),boolean:function(a){return n(a?1:0,r.number)},string:function(a){return n(a,io(a,r))}})}),Ib="abs",xz=["typed"],wz=H(Ib,xz,t=>{var{typed:e}=t;return e(Ib,{number:Y2,"Complex | BigNumber | Fraction | Unit":r=>r.abs(),bigint:r=>r<0n?-r:r,"Array | Matrix":e.referToSelf(r=>n=>st(n,r,!0))})}),Rb="mapSlices",Nz=["typed","isInteger"],ug=H(Rb,Nz,t=>{var{typed:e,isInteger:r}=t;return e(Rb,{"Array | Matrix, number | BigNumber, function":function(i,a,o){if(!r(a))throw new TypeError("Integer number expected for dimension");var s=Array.isArray(i)?Ze(i):i.size();if(a<0||a>=s.length)throw new di(a,s.length);return We(i)?i.create(Nd(i.valueOf(),a,o),i.datatype()):Nd(i,a,o)}})},{formerly:"apply"});function Nd(t,e,r){var n,i,a;if(e<=0)if(Array.isArray(t[0])){for(a=Az(t),i=[],n=0;n<a.length;n++)i[n]=Nd(a[n],e-1,r);return i}else return r(t);else{for(i=[],n=0;n<t.length;n++)i[n]=Nd(t[n],e-1,r);return i}}function Az(t){var e=t.length,r=t[0].length,n,i,a=[];for(i=0;i<r;i++){var o=[];for(n=0;n<e;n++)o.push(t[n][i]);a.push(o)}return a}var Pb="addScalar",Sz=["typed"],Dz=H(Pb,Sz,t=>{var{typed:e}=t;return e(Pb,{"number, number":Z2,"Complex, Complex":function(n,i){return n.add(i)},"BigNumber, BigNumber":function(n,i){return n.plus(i)},"bigint, bigint":function(n,i){return n+i},"Fraction, Fraction":function(n,i){return n.add(i)},"Unit, Unit":e.referToSelf(r=>(n,i)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(i))throw new Error("Units do not match");var a=n.clone();return a.value=e.find(r,[a.valueType(),i.valueType()])(a.value,i.value),a.fixPrefix=!1,a})})}),$b="subtractScalar",Ez=["typed"],Cz=H($b,Ez,t=>{var{typed:e}=t;return e($b,{"number, number":X2,"Complex, Complex":function(n,i){return n.sub(i)},"BigNumber, BigNumber":function(n,i){return n.minus(i)},"bigint, bigint":function(n,i){return n-i},"Fraction, Fraction":function(n,i){return n.sub(i)},"Unit, Unit":e.referToSelf(r=>(n,i)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(i))throw new Error("Units do not match");var a=n.clone();return a.value=e.find(r,[a.valueType(),i.valueType()])(a.value,i.value),a.fixPrefix=!1,a})})}),Lb="cbrt",Mz=["config","typed","isNegative","unaryMinus","matrix","Complex","BigNumber","Fraction"],Tz=H(Lb,Mz,t=>{var{config:e,typed:r,isNegative:n,unaryMinus:i,matrix:a,Complex:o,BigNumber:s,Fraction:u}=t;return r(Lb,{number:Bu,Complex:l,"Complex, boolean":l,BigNumber:function(d){return d.cbrt()},Unit:c});function l(f,d){var p=f.arg()/3,h=f.abs(),m=new o(Bu(h),0).mul(new o(0,p).exp());if(d){var g=[m,new o(Bu(h),0).mul(new o(0,p+Math.PI*2/3).exp()),new o(Bu(h),0).mul(new o(0,p-Math.PI*2/3).exp())];return e.matrix==="Array"?g:a(g)}else return m}function c(f){if(f.value&&ua(f.value)){var d=f.clone();return d.value=1,d=d.pow(1/3),d.value=l(f.value),d}else{var p=n(f.value);p&&(f.value=i(f.value));var h;ot(f.value)?h=new s(1).div(3):Il(f.value)?h=new u(1,3):h=1/3;var m=f.pow(h);return p&&(m.value=i(m.value)),m}}}),_z="matAlgo11xS0s",Oz=["typed","equalScalar"],Lr=H(_z,Oz,t=>{var{typed:e,equalScalar:r}=t;return function(i,a,o,s){var u=i._values,l=i._index,c=i._ptr,f=i._size,d=i._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var p=f[0],h=f[1],m,g=r,y=0,N=o;typeof d=="string"&&(m=d,g=e.find(r,[m,m]),y=e.convert(0,m),a=e.convert(a,m),N=e.find(o,[m,m]));for(var v=[],w=[],x=[],b=0;b<h;b++){x[b]=w.length;for(var S=c[b],C=c[b+1],A=S;A<C;A++){var E=l[A],D=s?N(a,u[A]):N(u[A],a);g(D,y)||(w.push(E),v.push(D))}}return x[h]=w.length,i.createSparseMatrix({values:v,index:w,ptr:x,size:[p,h],datatype:m})}}),Fz="matAlgo12xSfs",Bz=["typed","DenseMatrix"],pr=H(Fz,Bz,t=>{var{typed:e,DenseMatrix:r}=t;return function(i,a,o,s){var u=i._values,l=i._index,c=i._ptr,f=i._size,d=i._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var p=f[0],h=f[1],m,g=o;typeof d=="string"&&(m=d,a=e.convert(a,m),g=e.find(o,[m,m]));for(var y=[],N=[],v=[],w=0;w<h;w++){for(var x=w+1,b=c[w],S=c[w+1],C=b;C<S;C++){var A=l[C];N[A]=u[C],v[A]=x}for(var E=0;E<p;E++)w===0&&(y[E]=[]),v[E]===x?y[E][w]=s?g(a,N[E]):g(N[E],a):y[E][w]=s?g(a,0):g(0,a)}return new r({data:y,size:[p,h],datatype:m})}}),kz="matAlgo14xDs",Iz=["typed"],hi=H(kz,Iz,t=>{var{typed:e}=t;return function(i,a,o,s){var u=i._data,l=i._size,c=i._datatype,f,d=o;typeof c=="string"&&(f=c,a=e.convert(a,f),d=e.find(o,[f,f]));var p=l.length>0?r(d,0,l,l[0],u,a,s):[];return i.createDenseMatrix({data:p,size:et(l),datatype:f})};function r(n,i,a,o,s,u,l){var c=[];if(i===a.length-1)for(var f=0;f<o;f++)c[f]=l?n(u,s[f]):n(s[f],u);else for(var d=0;d<o;d++)c[d]=r(n,i+1,a,a[i+1],s[d],u,l);return c}}),lg="ceil",Rz=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],Pz=new Qa(10),$z=H(lg,["typed","config","round"],t=>{var{typed:e,config:r,round:n}=t;function i(a){var o=Math.ceil(a),s=n(a);return o===s?o:$r(a,s,r.relTol,r.absTol)&&!$r(a,o,r.relTol,r.absTol)?s:o}return e(lg,{number:i,"number, number":function(o,s){if(!$e(s))throw new RangeError("number of decimals in function ceil must be an integer");if(s<0||s>15)throw new RangeError("number of decimals in ceil number must be in range 0-15");var u=10**s;return i(o*u)/u}})}),Lz=H(lg,Rz,t=>{var{typed:e,config:r,round:n,matrix:i,equalScalar:a,zeros:o,DenseMatrix:s}=t,u=Lr({typed:e,equalScalar:a}),l=pr({typed:e,DenseMatrix:s}),c=hi({typed:e}),f=$z({typed:e,config:r,round:n});function d(p){var h=(y,N)=>Yn(y,N,r.relTol,r.absTol),m=p.ceil(),g=n(p);return m.eq(g)?m:h(p,g)&&!h(p,m)?g:m}return e("ceil",{number:f.signatures.number,"number,number":f.signatures["number,number"],Complex:function(h){return h.ceil()},"Complex, number":function(h,m){return h.ceil(m)},"Complex, BigNumber":function(h,m){return h.ceil(m.toNumber())},BigNumber:d,"BigNumber, BigNumber":function(h,m){var g=Pz.pow(m);return d(h.mul(g)).div(g)},bigint:p=>p,"bigint, number":(p,h)=>p,"bigint, BigNumber":(p,h)=>p,Fraction:function(h){return h.ceil()},"Fraction, number":function(h,m){return h.ceil(m)},"Fraction, BigNumber":function(h,m){return h.ceil(m.toNumber())},"Unit, number, Unit":e.referToSelf(p=>function(h,m,g){var y=h.toNumeric(g);return g.multiply(p(y,m))}),"Unit, BigNumber, Unit":e.referToSelf(p=>(h,m,g)=>p(h,m.toNumber(),g)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(p=>(h,m,g)=>st(h,y=>p(y,m,g),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(p=>(h,m)=>p(h,0,m)),"Array | Matrix":e.referToSelf(p=>h=>st(h,p,!0)),"Array, number | BigNumber":e.referToSelf(p=>(h,m)=>st(h,g=>p(g,m),!0)),"SparseMatrix, number | BigNumber":e.referToSelf(p=>(h,m)=>u(h,m,p,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(p=>(h,m)=>c(h,m,p,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(p=>(h,m)=>c(i(m),h,p,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(p=>(h,m)=>a(h,0)?o(m.size(),m.storage()):m.storage()==="dense"?c(m,h,p,!0):l(m,h,p,!0))})}),zb="cube",zz=["typed"],qz=H(zb,zz,t=>{var{typed:e}=t;return e(zb,{number:rC,Complex:function(n){return n.mul(n).mul(n)},BigNumber:function(n){return n.times(n).times(n)},bigint:function(n){return n*n*n},Fraction:function(n){return n.pow(3)},Unit:function(n){return n.pow(3)}})}),qb="exp",Uz=["typed"],Hz=H(qb,Uz,t=>{var{typed:e}=t;return e(qb,{number:nC,Complex:function(n){return n.exp()},BigNumber:function(n){return n.exp()}})}),Ub="expm1",Vz=["typed","Complex"],Wz=H(Ub,Vz,t=>{var{typed:e,Complex:r}=t;return e(Ub,{number:iC,Complex:function(i){var a=Math.exp(i.re);return new r(a*Math.cos(i.im)-1,a*Math.sin(i.im))},BigNumber:function(i){return i.exp().minus(1)}})}),cg="fix",jz=["typed","Complex","matrix","ceil","floor","equalScalar","zeros","DenseMatrix"],Gz=H(cg,["typed","ceil","floor"],t=>{var{typed:e,ceil:r,floor:n}=t;return e(cg,{number:function(a){return a>0?n(a):r(a)},"number, number":function(a,o){return a>0?n(a,o):r(a,o)}})}),Kz=H(cg,jz,t=>{var{typed:e,Complex:r,matrix:n,ceil:i,floor:a,equalScalar:o,zeros:s,DenseMatrix:u}=t,l=pr({typed:e,DenseMatrix:u}),c=hi({typed:e}),f=Gz({typed:e,ceil:i,floor:a});return e("fix",{number:f.signatures.number,"number, number | BigNumber":f.signatures["number,number"],Complex:function(p){return new r(p.re>0?Math.floor(p.re):Math.ceil(p.re),p.im>0?Math.floor(p.im):Math.ceil(p.im))},"Complex, number":function(p,h){return new r(p.re>0?a(p.re,h):i(p.re,h),p.im>0?a(p.im,h):i(p.im,h))},"Complex, BigNumber":function(p,h){var m=h.toNumber();return new r(p.re>0?a(p.re,m):i(p.re,m),p.im>0?a(p.im,m):i(p.im,m))},BigNumber:function(p){return p.isNegative()?i(p):a(p)},"BigNumber, number | BigNumber":function(p,h){return p.isNegative()?i(p,h):a(p,h)},bigint:d=>d,"bigint, number":(d,p)=>d,"bigint, BigNumber":(d,p)=>d,Fraction:function(p){return p.s<0n?p.ceil():p.floor()},"Fraction, number | BigNumber":function(p,h){return p.s<0n?i(p,h):a(p,h)},"Unit, number, Unit":e.referToSelf(d=>function(p,h,m){var g=p.toNumeric(m);return m.multiply(d(g,h))}),"Unit, BigNumber, Unit":e.referToSelf(d=>(p,h,m)=>d(p,h.toNumber(),m)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(d=>(p,h,m)=>st(p,g=>d(g,h,m),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(d=>(p,h)=>d(p,0,h)),"Array | Matrix":e.referToSelf(d=>p=>st(p,d,!0)),"Array | Matrix, number | BigNumber":e.referToSelf(d=>(p,h)=>st(p,m=>d(m,h),!0)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(d=>(p,h)=>c(n(h),p,d,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(d=>(p,h)=>o(p,0)?s(h.size(),h.storage()):h.storage()==="dense"?c(h,p,d,!0):l(h,p,d,!0))})}),fg="floor",Jz=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],Yz=new Qa(10),Zz=H(fg,["typed","config","round"],t=>{var{typed:e,config:r,round:n}=t;function i(a){var o=Math.floor(a),s=n(a);return o===s?o:$r(a,s,r.relTol,r.absTol)&&!$r(a,o,r.relTol,r.absTol)?s:o}return e(fg,{number:i,"number, number":function(o,s){if(!$e(s))throw new RangeError("number of decimals in function floor must be an integer");if(s<0||s>15)throw new RangeError("number of decimals in floor number must be in range 0 - 15");var u=10**s;return i(o*u)/u}})}),LC=H(fg,Jz,t=>{var{typed:e,config:r,round:n,matrix:i,equalScalar:a,zeros:o,DenseMatrix:s}=t,u=Lr({typed:e,equalScalar:a}),l=pr({typed:e,DenseMatrix:s}),c=hi({typed:e}),f=Zz({typed:e,config:r,round:n});function d(p){var h=(y,N)=>Yn(y,N,r.relTol,r.absTol),m=p.floor(),g=n(p);return m.eq(g)?m:h(p,g)&&!h(p,m)?g:m}return e("floor",{number:f.signatures.number,"number,number":f.signatures["number,number"],Complex:function(h){return h.floor()},"Complex, number":function(h,m){return h.floor(m)},"Complex, BigNumber":function(h,m){return h.floor(m.toNumber())},BigNumber:d,"BigNumber, BigNumber":function(h,m){var g=Yz.pow(m);return d(h.mul(g)).div(g)},bigint:p=>p,"bigint, number":(p,h)=>p,"bigint, BigNumber":(p,h)=>p,Fraction:function(h){return h.floor()},"Fraction, number":function(h,m){return h.floor(m)},"Fraction, BigNumber":function(h,m){return h.floor(m.toNumber())},"Unit, number, Unit":e.referToSelf(p=>function(h,m,g){var y=h.toNumeric(g);return g.multiply(p(y,m))}),"Unit, BigNumber, Unit":e.referToSelf(p=>(h,m,g)=>p(h,m.toNumber(),g)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(p=>(h,m,g)=>st(h,y=>p(y,m,g),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(p=>(h,m)=>p(h,0,m)),"Array | Matrix":e.referToSelf(p=>h=>st(h,p,!0)),"Array, number | BigNumber":e.referToSelf(p=>(h,m)=>st(h,g=>p(g,m),!0)),"SparseMatrix, number | BigNumber":e.referToSelf(p=>(h,m)=>u(h,m,p,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(p=>(h,m)=>c(h,m,p,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(p=>(h,m)=>c(i(m),h,p,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(p=>(h,m)=>a(h,0)?o(m.size(),m.storage()):m.storage()==="dense"?c(m,h,p,!0):l(m,h,p,!0))})}),Xz="matAlgo02xDS0",Qz=["typed","equalScalar"],mi=H(Xz,Qz,t=>{var{typed:e,equalScalar:r}=t;return function(i,a,o,s){var u=i._data,l=i._size,c=i._datatype||i.getDataType(),f=a._values,d=a._index,p=a._ptr,h=a._size,m=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(l.length!==h.length)throw new ht(l.length,h.length);if(l[0]!==h[0]||l[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+h+")");if(!f)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var g=l[0],y=l[1],N,v=r,w=0,x=o;typeof c=="string"&&c===m&&c!=="mixed"&&(N=c,v=e.find(r,[N,N]),w=e.convert(0,N),x=e.find(o,[N,N]));for(var b=[],S=[],C=[],A=0;A<y;A++){C[A]=S.length;for(var E=p[A],D=p[A+1],M=E;M<D;M++){var F=d[M],I=s?x(f[M],u[F][A]):x(u[F][A],f[M]);v(I,w)||(S.push(F),b.push(I))}}return C[y]=S.length,a.createSparseMatrix({values:b,index:S,ptr:C,size:[g,y],datatype:c===i._datatype&&m===a._datatype?N:void 0})}}),e9="matAlgo03xDSf",t9=["typed"],hn=H(e9,t9,t=>{var{typed:e}=t;return function(n,i,a,o){var s=n._data,u=n._size,l=n._datatype||n.getDataType(),c=i._values,f=i._index,d=i._ptr,p=i._size,h=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(u.length!==p.length)throw new ht(u.length,p.length);if(u[0]!==p[0]||u[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+p+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var m=u[0],g=u[1],y,N=0,v=a;typeof l=="string"&&l===h&&l!=="mixed"&&(y=l,N=e.convert(0,y),v=e.find(a,[y,y]));for(var w=[],x=0;x<m;x++)w[x]=[];for(var b=[],S=[],C=0;C<g;C++){for(var A=C+1,E=d[C],D=d[C+1],M=E;M<D;M++){var F=f[M];b[F]=o?v(c[M],s[F][C]):v(s[F][C],c[M]),S[F]=A}for(var I=0;I<m;I++)S[I]===A?w[I][C]=b[I]:w[I][C]=o?v(N,s[I][C]):v(s[I][C],N)}return n.createDenseMatrix({data:w,size:[m,g],datatype:l===n._datatype&&h===i._datatype?y:void 0})}}),r9="matAlgo05xSfSf",n9=["typed","equalScalar"],Ap=H(r9,n9,t=>{var{typed:e,equalScalar:r}=t;return function(i,a,o){var s=i._values,u=i._index,l=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=a._values,p=a._index,h=a._ptr,m=a._size,g=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(c.length!==m.length)throw new ht(c.length,m.length);if(c[0]!==m[0]||c[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+m+")");var y=c[0],N=c[1],v,w=r,x=0,b=o;typeof f=="string"&&f===g&&f!=="mixed"&&(v=f,w=e.find(r,[v,v]),x=e.convert(0,v),b=e.find(o,[v,v]));var S=s&&d?[]:void 0,C=[],A=[],E=S?[]:void 0,D=S?[]:void 0,M=[],F=[],I,P,T,$;for(P=0;P<N;P++){A[P]=C.length;var O=P+1;for(T=l[P],$=l[P+1];T<$;T++)I=u[T],C.push(I),M[I]=O,E&&(E[I]=s[T]);for(T=h[P],$=h[P+1];T<$;T++)I=p[T],M[I]!==O&&C.push(I),F[I]=O,D&&(D[I]=d[T]);if(S)for(T=A[P];T<C.length;){I=C[T];var W=M[I],R=F[I];if(W===O||R===O){var ie=W===O?E[I]:x,te=R===O?D[I]:x,Z=b(ie,te);w(Z,x)?C.splice(T,1):(S.push(Z),T++)}}}return A[N]=C.length,i.createSparseMatrix({values:S,index:C,ptr:A,size:[y,N],datatype:f===i._datatype&&g===a._datatype?v:void 0})}}),i9="matAlgo13xDD",a9=["typed"],o9=H(i9,a9,t=>{var{typed:e}=t;return function(i,a,o){var s=i._data,u=i._size,l=i._datatype,c=a._data,f=a._size,d=a._datatype,p=[];if(u.length!==f.length)throw new ht(u.length,f.length);for(var h=0;h<u.length;h++){if(u[h]!==f[h])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+f+")");p[h]=u[h]}var m,g=o;typeof l=="string"&&l===d&&(m=l,g=e.find(o,[m,m]));var y=p.length>0?r(g,0,p,p[0],s,c):[];return i.createDenseMatrix({data:y,size:p,datatype:m})};function r(n,i,a,o,s,u){var l=[];if(i===a.length-1)for(var c=0;c<o;c++)l[c]=n(s[c],u[c]);else for(var f=0;f<o;f++)l[f]=r(n,i+1,a,a[i+1],s[f],u[f]);return l}});function vr(t,e){if(pa(t.size(),e.size()))return[t,e];var r=Dv(t.size(),e.size());return[t,e].map(n=>s9(n,r))}function s9(t,e){return pa(t.size(),e)?t:t.create(Oo(t.valueOf(),e),t.datatype())}var u9="matrixAlgorithmSuite",l9=["typed","matrix"],$t=H(u9,l9,t=>{var{typed:e,matrix:r}=t,n=o9({typed:e}),i=hi({typed:e});return function(o){var s=o.elop,u=o.SD||o.DS,l;s?(l={"DenseMatrix, DenseMatrix":(p,h)=>n(...vr(p,h),s),"Array, Array":(p,h)=>n(...vr(r(p),r(h)),s).valueOf(),"Array, DenseMatrix":(p,h)=>n(...vr(r(p),h),s),"DenseMatrix, Array":(p,h)=>n(...vr(p,r(h)),s)},o.SS&&(l["SparseMatrix, SparseMatrix"]=(p,h)=>o.SS(...vr(p,h),s,!1)),o.DS&&(l["DenseMatrix, SparseMatrix"]=(p,h)=>o.DS(...vr(p,h),s,!1),l["Array, SparseMatrix"]=(p,h)=>o.DS(...vr(r(p),h),s,!1)),u&&(l["SparseMatrix, DenseMatrix"]=(p,h)=>u(...vr(h,p),s,!0),l["SparseMatrix, Array"]=(p,h)=>u(...vr(r(h),p),s,!0))):(l={"DenseMatrix, DenseMatrix":e.referToSelf(p=>(h,m)=>n(...vr(h,m),p)),"Array, Array":e.referToSelf(p=>(h,m)=>n(...vr(r(h),r(m)),p).valueOf()),"Array, DenseMatrix":e.referToSelf(p=>(h,m)=>n(...vr(r(h),m),p)),"DenseMatrix, Array":e.referToSelf(p=>(h,m)=>n(...vr(h,r(m)),p))},o.SS&&(l["SparseMatrix, SparseMatrix"]=e.referToSelf(p=>(h,m)=>o.SS(...vr(h,m),p,!1))),o.DS&&(l["DenseMatrix, SparseMatrix"]=e.referToSelf(p=>(h,m)=>o.DS(...vr(h,m),p,!1)),l["Array, SparseMatrix"]=e.referToSelf(p=>(h,m)=>o.DS(...vr(r(h),m),p,!1))),u&&(l["SparseMatrix, DenseMatrix"]=e.referToSelf(p=>(h,m)=>u(...vr(m,h),p,!0)),l["SparseMatrix, Array"]=e.referToSelf(p=>(h,m)=>u(...vr(r(m),h),p,!0))));var c=o.scalar||"any",f=o.Ds||o.Ss;f&&(s?(l["DenseMatrix,"+c]=(p,h)=>i(p,h,s,!1),l[c+", DenseMatrix"]=(p,h)=>i(h,p,s,!0),l["Array,"+c]=(p,h)=>i(r(p),h,s,!1).valueOf(),l[c+", Array"]=(p,h)=>i(r(h),p,s,!0).valueOf()):(l["DenseMatrix,"+c]=e.referToSelf(p=>(h,m)=>i(h,m,p,!1)),l[c+", DenseMatrix"]=e.referToSelf(p=>(h,m)=>i(m,h,p,!0)),l["Array,"+c]=e.referToSelf(p=>(h,m)=>i(r(h),m,p,!1).valueOf()),l[c+", Array"]=e.referToSelf(p=>(h,m)=>i(r(m),h,p,!0).valueOf())));var d=o.sS!==void 0?o.sS:o.Ss;return s?(o.Ss&&(l["SparseMatrix,"+c]=(p,h)=>o.Ss(p,h,s,!1)),d&&(l[c+", SparseMatrix"]=(p,h)=>d(h,p,s,!0))):(o.Ss&&(l["SparseMatrix,"+c]=e.referToSelf(p=>(h,m)=>o.Ss(h,m,p,!1))),d&&(l[c+", SparseMatrix"]=e.referToSelf(p=>(h,m)=>d(m,h,p,!0)))),s&&s.signatures&&w2(l,s.signatures),l}}),Hb="mod",c9=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix","concat"],zC=H(Hb,c9,t=>{var{typed:e,config:r,round:n,matrix:i,equalScalar:a,zeros:o,DenseMatrix:s,concat:u}=t,l=LC({typed:e,config:r,round:n,matrix:i,equalScalar:a,zeros:o,DenseMatrix:s}),c=mi({typed:e,equalScalar:a}),f=hn({typed:e}),d=Ap({typed:e,equalScalar:a}),p=Lr({typed:e,equalScalar:a}),h=pr({typed:e,DenseMatrix:s}),m=$t({typed:e,matrix:i,concat:u});return e(Hb,{"number, number":g,"BigNumber, BigNumber":function(N,v){return v.isZero()?N:N.sub(v.mul(l(N.div(v))))},"bigint, bigint":function(N,v){if(v===0n)return N;if(N<0){var w=N%v;return w===0n?w:w+v}return N%v},"Fraction, Fraction":function(N,v){return v.equals(0)?N:N.sub(v.mul(l(N.div(v))))}},m({SS:d,DS:f,SD:c,Ss:p,sS:h}));function g(y,N){return N===0?y:y-N*l(y/N)}}),f9="matAlgo01xDSid",d9=["typed"],oo=H(f9,d9,t=>{var{typed:e}=t;return function(n,i,a,o){var s=n._data,u=n._size,l=n._datatype||n.getDataType(),c=i._values,f=i._index,d=i._ptr,p=i._size,h=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(u.length!==p.length)throw new ht(u.length,p.length);if(u[0]!==p[0]||u[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+p+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var m=u[0],g=u[1],y=typeof l=="string"&&l!=="mixed"&&l===h?l:void 0,N=y?e.find(a,[y,y]):a,v,w,x=[];for(v=0;v<m;v++)x[v]=[];var b=[],S=[];for(w=0;w<g;w++){for(var C=w+1,A=d[w],E=d[w+1],D=A;D<E;D++)v=f[D],b[v]=o?N(c[D],s[v][w]):N(s[v][w],c[D]),S[v]=C;for(v=0;v<m;v++)S[v]===C?x[v][w]=b[v]:x[v][w]=s[v][w]}return n.createDenseMatrix({data:x,size:[m,g],datatype:l===n._datatype&&h===i._datatype?y:void 0})}}),p9="matAlgo04xSidSid",h9=["typed","equalScalar"],Tv=H(p9,h9,t=>{var{typed:e,equalScalar:r}=t;return function(i,a,o){var s=i._values,u=i._index,l=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=a._values,p=a._index,h=a._ptr,m=a._size,g=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(c.length!==m.length)throw new ht(c.length,m.length);if(c[0]!==m[0]||c[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+m+")");var y=c[0],N=c[1],v,w=r,x=0,b=o;typeof f=="string"&&f===g&&f!=="mixed"&&(v=f,w=e.find(r,[v,v]),x=e.convert(0,v),b=e.find(o,[v,v]));var S=s&&d?[]:void 0,C=[],A=[],E=s&&d?[]:void 0,D=s&&d?[]:void 0,M=[],F=[],I,P,T,$,O;for(P=0;P<N;P++){A[P]=C.length;var W=P+1;for($=l[P],O=l[P+1],T=$;T<O;T++)I=u[T],C.push(I),M[I]=W,E&&(E[I]=s[T]);for($=h[P],O=h[P+1],T=$;T<O;T++)if(I=p[T],M[I]===W){if(E){var R=b(E[I],d[T]);w(R,x)?M[I]=null:E[I]=R}}else C.push(I),F[I]=W,D&&(D[I]=d[T]);if(E&&D)for(T=A[P];T<C.length;)I=C[T],M[I]===W?(S[T]=E[I],T++):F[I]===W?(S[T]=D[I],T++):C.splice(T,1)}return A[N]=C.length,i.createSparseMatrix({values:S,index:C,ptr:A,size:[y,N],datatype:f===i._datatype&&g===a._datatype?v:void 0})}}),m9="matAlgo10xSids",g9=["typed","DenseMatrix"],Zo=H(m9,g9,t=>{var{typed:e,DenseMatrix:r}=t;return function(i,a,o,s){var u=i._values,l=i._index,c=i._ptr,f=i._size,d=i._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var p=f[0],h=f[1],m,g=o;typeof d=="string"&&(m=d,a=e.convert(a,m),g=e.find(o,[m,m]));for(var y=[],N=[],v=[],w=0;w<h;w++){for(var x=w+1,b=c[w],S=c[w+1],C=b;C<S;C++){var A=l[C];N[A]=u[C],v[A]=x}for(var E=0;E<p;E++)w===0&&(y[E]=[]),v[E]===x?y[E][w]=s?g(a,N[E]):g(N[E],a):y[E][w]=a}return new r({data:y,size:[p,h],datatype:m})}});function Xo(t,e,r,n){if(!(this instanceof Xo))throw new SyntaxError("Constructor must be called with the new operator");this.fn=t,this.count=e,this.min=r,this.max=n,this.message="Wrong number of arguments in function "+t+" ("+e+" provided, "+r+(n!=null?"-"+n:"")+" expected)",this.stack=new Error().stack}Xo.prototype=new Error;Xo.prototype.constructor=Error;Xo.prototype.name="ArgumentsError";Xo.prototype.isArgumentsError=!0;var Vb="gcd",v9=["typed","config","round","matrix","equalScalar","zeros","BigNumber","DenseMatrix","concat"],zh="number | BigNumber | Fraction | Matrix | Array",y9="".concat(zh,", ").concat(zh,", ...").concat(zh);function Wb(t){return!t.some(e=>Array.isArray(e))}var b9=H(Vb,v9,t=>{var{typed:e,matrix:r,config:n,round:i,equalScalar:a,zeros:o,BigNumber:s,DenseMatrix:u,concat:l}=t,c=zC({typed:e,config:n,round:i,matrix:r,equalScalar:a,zeros:o,DenseMatrix:u,concat:l}),f=oo({typed:e}),d=Tv({typed:e,equalScalar:a}),p=Zo({typed:e,DenseMatrix:u}),h=$t({typed:e,matrix:r,concat:l});return e(Vb,{"number, number":m,"BigNumber, BigNumber":g,"Fraction, Fraction":(y,N)=>y.gcd(N)},h({SS:d,DS:f,Ss:p}),{[y9]:e.referToSelf(y=>(N,v,w)=>{for(var x=y(N,v),b=0;b<w.length;b++)x=y(x,w[b]);return x}),Array:e.referToSelf(y=>N=>{if(N.length===1&&Array.isArray(N[0])&&Wb(N[0]))return y(...N[0]);if(Wb(N))return y(...N);throw new Xo("gcd() supports only 1d matrices!")}),Matrix:e.referToSelf(y=>N=>y(N.toArray()))});function m(y,N){if(!$e(y)||!$e(N))throw new Error("Parameters in function gcd must be integer numbers");for(var v;N!==0;)v=c(y,N),y=N,N=v;return y<0?-y:y}function g(y,N){if(!y.isInt()||!N.isInt())throw new Error("Parameters in function gcd must be integer numbers");for(var v=new s(0);!N.isZero();){var w=c(y,N);y=N,N=w}return y.lt(v)?y.neg():y}}),x9="matAlgo06xS0S0",w9=["typed","equalScalar"],Sp=H(x9,w9,t=>{var{typed:e,equalScalar:r}=t;return function(i,a,o){var s=i._values,u=i._size,l=i._datatype||i._data===void 0?i._datatype:i.getDataType(),c=a._values,f=a._size,d=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(u.length!==f.length)throw new ht(u.length,f.length);if(u[0]!==f[0]||u[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+f+")");var p=u[0],h=u[1],m,g=r,y=0,N=o;typeof l=="string"&&l===d&&l!=="mixed"&&(m=l,g=e.find(r,[m,m]),y=e.convert(0,m),N=e.find(o,[m,m]));for(var v=s&&c?[]:void 0,w=[],x=[],b=v?[]:void 0,S=[],C=[],A=0;A<h;A++){x[A]=w.length;var E=A+1;if(hb(i,A,S,b,C,E,w,N),hb(a,A,S,b,C,E,w,N),b)for(var D=x[A];D<w.length;){var M=w[D];if(C[M]===E){var F=b[M];g(F,y)?w.splice(D,1):(v.push(F),D++)}else w.splice(D,1)}else for(var I=x[A];I<w.length;){var P=w[I];C[P]!==E?w.splice(I,1):I++}}return x[h]=w.length,i.createSparseMatrix({values:v,index:w,ptr:x,size:[p,h],datatype:l===i._datatype&&d===a._datatype?m:void 0})}}),jb="lcm",N9=["typed","matrix","equalScalar","concat"],A9=H(jb,N9,t=>{var{typed:e,matrix:r,equalScalar:n,concat:i}=t,a=mi({typed:e,equalScalar:n}),o=Sp({typed:e,equalScalar:n}),s=Lr({typed:e,equalScalar:n}),u=$t({typed:e,matrix:r,concat:i}),l="number | BigNumber | Fraction | Matrix | Array",c={};return c["".concat(l,", ").concat(l,", ...").concat(l)]=e.referToSelf(d=>(p,h,m)=>{for(var g=d(p,h),y=0;y<m.length;y++)g=d(g,m[y]);return g}),e(jb,{"number, number":aC,"BigNumber, BigNumber":f,"Fraction, Fraction":(d,p)=>d.lcm(p)},u({SS:o,DS:a,Ss:s}),c);function f(d,p){if(!d.isInt()||!p.isInt())throw new Error("Parameters in function lcm must be integer numbers");if(d.isZero())return d;if(p.isZero())return p;for(var h=d.times(p);!p.isZero();){var m=p;p=d.mod(m),d=m}return h.div(d).abs()}});function _v(t,e,r,n){return function(i){if(i>0||r.predictable){if(i<=0)return NaN;var a=i.toString(16),o=a.substring(0,15);return t*(a.length-o.length)+e(+("0x"+o))}return n(i.toNumber())}}var Gb="log10",S9=["typed","config","Complex"],D9=yd(16),E9=H(Gb,S9,t=>{var{typed:e,config:r,Complex:n}=t;function i(o){return o.log().div(Math.LN10)}function a(o){return i(new n(o,0))}return e(Gb,{number:function(s){return s>=0||r.predictable?yd(s):a(s)},bigint:_v(D9,yd,r,a),Complex:i,BigNumber:function(s){return!s.isNegative()||r.predictable?s.log():a(s.toNumber())},"Array | Matrix":e.referToSelf(o=>s=>st(s,o))})}),Kb="log2",C9=["typed","config","Complex"],M9=H(Kb,C9,t=>{var{typed:e,config:r,Complex:n}=t;function i(o){return a(new n(o,0))}return e(Kb,{number:function(s){return s>=0||r.predictable?ng(s):i(s)},bigint:_v(4,ng,r,i),Complex:a,BigNumber:function(s){return!s.isNegative()||r.predictable?s.log(2):i(s.toNumber())},"Array | Matrix":e.referToSelf(o=>s=>st(s,o))});function a(o){var s=Math.sqrt(o.re*o.re+o.im*o.im);return new n(Math.log2?Math.log2(s):Math.log(s)/Math.LN2,Math.atan2(o.im,o.re)/Math.LN2)}}),T9="multiplyScalar",_9=["typed"],O9=H(T9,_9,t=>{var{typed:e}=t;return e("multiplyScalar",{"number, number":Q2,"Complex, Complex":function(n,i){return n.mul(i)},"BigNumber, BigNumber":function(n,i){return n.times(i)},"bigint, bigint":function(n,i){return n*i},"Fraction, Fraction":function(n,i){return n.mul(i)},"number | Fraction | BigNumber | Complex, Unit":(r,n)=>n.multiply(r),"Unit, number | Fraction | BigNumber | Complex | Unit":(r,n)=>r.multiply(n)})}),Jb="multiply",F9=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],B9=H(Jb,F9,t=>{var{typed:e,matrix:r,addScalar:n,multiplyScalar:i,equalScalar:a,dot:o}=t,s=Lr({typed:e,equalScalar:a}),u=hi({typed:e});function l(x,b){switch(x.length){case 1:switch(b.length){case 1:if(x[0]!==b[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(x[0]!==b[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+x[0]+") must match Matrix rows ("+b[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+b.length+" dimensions)")}break;case 2:switch(b.length){case 1:if(x[1]!==b[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+x[1]+") must match Vector length ("+b[0]+")");break;case 2:if(x[1]!==b[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+x[1]+") must match Matrix B rows ("+b[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+b.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+x.length+" dimensions)")}}function c(x,b,S){if(S===0)throw new Error("Cannot multiply two empty vectors");return o(x,b)}function f(x,b){if(b.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return d(x,b)}function d(x,b){var S=x._data,C=x._size,A=x._datatype||x.getDataType(),E=b._data,D=b._size,M=b._datatype||b.getDataType(),F=C[0],I=D[1],P,T=n,$=i;A&&M&&A===M&&typeof A=="string"&&A!=="mixed"&&(P=A,T=e.find(n,[P,P]),$=e.find(i,[P,P]));for(var O=[],W=0;W<I;W++){for(var R=$(S[0],E[0][W]),ie=1;ie<F;ie++)R=T(R,$(S[ie],E[ie][W]));O[W]=R}return x.createDenseMatrix({data:O,size:[I],datatype:A===x._datatype&&M===b._datatype?P:void 0})}var p=e("_multiplyMatrixVector",{"DenseMatrix, any":m,"SparseMatrix, any":N}),h=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":g,"DenseMatrix, SparseMatrix":y,"SparseMatrix, DenseMatrix":v,"SparseMatrix, SparseMatrix":w});function m(x,b){var S=x._data,C=x._size,A=x._datatype||x.getDataType(),E=b._data,D=b._datatype||b.getDataType(),M=C[0],F=C[1],I,P=n,T=i;A&&D&&A===D&&typeof A=="string"&&A!=="mixed"&&(I=A,P=e.find(n,[I,I]),T=e.find(i,[I,I]));for(var $=[],O=0;O<M;O++){for(var W=S[O],R=T(W[0],E[0]),ie=1;ie<F;ie++)R=P(R,T(W[ie],E[ie]));$[O]=R}return x.createDenseMatrix({data:$,size:[M],datatype:A===x._datatype&&D===b._datatype?I:void 0})}function g(x,b){var S=x._data,C=x._size,A=x._datatype||x.getDataType(),E=b._data,D=b._size,M=b._datatype||b.getDataType(),F=C[0],I=C[1],P=D[1],T,$=n,O=i;A&&M&&A===M&&typeof A=="string"&&A!=="mixed"&&A!=="mixed"&&(T=A,$=e.find(n,[T,T]),O=e.find(i,[T,T]));for(var W=[],R=0;R<F;R++){var ie=S[R];W[R]=[];for(var te=0;te<P;te++){for(var Z=O(ie[0],E[0][te]),X=1;X<I;X++)Z=$(Z,O(ie[X],E[X][te]));W[R][te]=Z}}return x.createDenseMatrix({data:W,size:[F,P],datatype:A===x._datatype&&M===b._datatype?T:void 0})}function y(x,b){var S=x._data,C=x._size,A=x._datatype||x.getDataType(),E=b._values,D=b._index,M=b._ptr,F=b._size,I=b._datatype||b._data===void 0?b._datatype:b.getDataType();if(!E)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var P=C[0],T=F[1],$,O=n,W=i,R=a,ie=0;A&&I&&A===I&&typeof A=="string"&&A!=="mixed"&&($=A,O=e.find(n,[$,$]),W=e.find(i,[$,$]),R=e.find(a,[$,$]),ie=e.convert(0,$));for(var te=[],Z=[],X=[],pe=b.createSparseMatrix({values:te,index:Z,ptr:X,size:[P,T],datatype:A===x._datatype&&I===b._datatype?$:void 0}),de=0;de<T;de++){X[de]=Z.length;var G=M[de],V=M[de+1];if(V>G)for(var U=0,K=0;K<P;K++){for(var ae=K+1,B=void 0,q=G;q<V;q++){var j=D[q];U!==ae?(B=W(S[K][j],E[q]),U=ae):B=O(B,W(S[K][j],E[q]))}U===ae&&!R(B,ie)&&(Z.push(K),te.push(B))}}return X[T]=Z.length,pe}function N(x,b){var S=x._values,C=x._index,A=x._ptr,E=x._datatype||x._data===void 0?x._datatype:x.getDataType();if(!S)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var D=b._data,M=b._datatype||b.getDataType(),F=x._size[0],I=b._size[0],P=[],T=[],$=[],O,W=n,R=i,ie=a,te=0;E&&M&&E===M&&typeof E=="string"&&E!=="mixed"&&(O=E,W=e.find(n,[O,O]),R=e.find(i,[O,O]),ie=e.find(a,[O,O]),te=e.convert(0,O));var Z=[],X=[];$[0]=0;for(var pe=0;pe<I;pe++){var de=D[pe];if(!ie(de,te))for(var G=A[pe],V=A[pe+1],U=G;U<V;U++){var K=C[U];X[K]?Z[K]=W(Z[K],R(de,S[U])):(X[K]=!0,T.push(K),Z[K]=R(de,S[U]))}}for(var ae=T.length,B=0;B<ae;B++){var q=T[B];P[B]=Z[q]}return $[1]=T.length,x.createSparseMatrix({values:P,index:T,ptr:$,size:[F,1],datatype:E===x._datatype&&M===b._datatype?O:void 0})}function v(x,b){var S=x._values,C=x._index,A=x._ptr,E=x._datatype||x._data===void 0?x._datatype:x.getDataType();if(!S)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var D=b._data,M=b._datatype||b.getDataType(),F=x._size[0],I=b._size[0],P=b._size[1],T,$=n,O=i,W=a,R=0;E&&M&&E===M&&typeof E=="string"&&E!=="mixed"&&(T=E,$=e.find(n,[T,T]),O=e.find(i,[T,T]),W=e.find(a,[T,T]),R=e.convert(0,T));for(var ie=[],te=[],Z=[],X=x.createSparseMatrix({values:ie,index:te,ptr:Z,size:[F,P],datatype:E===x._datatype&&M===b._datatype?T:void 0}),pe=[],de=[],G=0;G<P;G++){Z[G]=te.length;for(var V=G+1,U=0;U<I;U++){var K=D[U][G];if(!W(K,R))for(var ae=A[U],B=A[U+1],q=ae;q<B;q++){var j=C[q];de[j]!==V?(de[j]=V,te.push(j),pe[j]=O(K,S[q])):pe[j]=$(pe[j],O(K,S[q]))}}for(var oe=Z[G],k=te.length,z=oe;z<k;z++){var Y=te[z];ie[z]=pe[Y]}}return Z[P]=te.length,X}function w(x,b){var S=x._values,C=x._index,A=x._ptr,E=x._datatype||x._data===void 0?x._datatype:x.getDataType(),D=b._values,M=b._index,F=b._ptr,I=b._datatype||b._data===void 0?b._datatype:b.getDataType(),P=x._size[0],T=b._size[1],$=S&&D,O,W=n,R=i;E&&I&&E===I&&typeof E=="string"&&E!=="mixed"&&(O=E,W=e.find(n,[O,O]),R=e.find(i,[O,O]));for(var ie=$?[]:void 0,te=[],Z=[],X=x.createSparseMatrix({values:ie,index:te,ptr:Z,size:[P,T],datatype:E===x._datatype&&I===b._datatype?O:void 0}),pe=$?[]:void 0,de=[],G,V,U,K,ae,B,q,j,oe=0;oe<T;oe++){Z[oe]=te.length;var k=oe+1;for(ae=F[oe],B=F[oe+1],K=ae;K<B;K++)if(j=M[K],$)for(V=A[j],U=A[j+1],G=V;G<U;G++)q=C[G],de[q]!==k?(de[q]=k,te.push(q),pe[q]=R(D[K],S[G])):pe[q]=W(pe[q],R(D[K],S[G]));else for(V=A[j],U=A[j+1],G=V;G<U;G++)q=C[G],de[q]!==k&&(de[q]=k,te.push(q));if($)for(var z=Z[oe],Y=te.length,ne=z;ne<Y;ne++){var se=te[ne];ie[ne]=pe[se]}}return Z[T]=te.length,X}return e(Jb,i,{"Array, Array":e.referTo("Matrix, Matrix",x=>(b,S)=>{l(Ze(b),Ze(S));var C=x(r(b),r(S));return We(C)?C.valueOf():C}),"Matrix, Matrix":function(b,S){var C=b.size(),A=S.size();return l(C,A),C.length===1?A.length===1?c(b,S,C[0]):f(b,S):A.length===1?p(b,S):h(b,S)},"Matrix, Array":e.referTo("Matrix,Matrix",x=>(b,S)=>x(b,r(S))),"Array, Matrix":e.referToSelf(x=>(b,S)=>x(r(b,S.storage()),S)),"SparseMatrix, any":function(b,S){return s(b,S,i,!1)},"DenseMatrix, any":function(b,S){return u(b,S,i,!1)},"any, SparseMatrix":function(b,S){return s(S,b,i,!0)},"any, DenseMatrix":function(b,S){return u(S,b,i,!0)},"Array, any":function(b,S){return u(r(b),S,i,!1).valueOf()},"any, Array":function(b,S){return u(r(S),b,i,!0).valueOf()},"any, any":i,"any, any, ...any":e.referToSelf(x=>(b,S,C)=>{for(var A=x(b,S),E=0;E<C.length;E++)A=x(A,C[E]);return A})})}),Yb="nthRoot",k9=["typed","matrix","equalScalar","BigNumber","concat"],I9=H(Yb,k9,t=>{var{typed:e,matrix:r,equalScalar:n,BigNumber:i,concat:a}=t,o=oo({typed:e}),s=mi({typed:e,equalScalar:n}),u=Sp({typed:e,equalScalar:n}),l=Lr({typed:e,equalScalar:n}),c=$t({typed:e,matrix:r,concat:a});function f(){throw new Error("Complex number not supported in function nthRoot. Use nthRoots instead.")}return e(Yb,{number:vb,"number, number":vb,BigNumber:p=>d(p,new i(2)),"BigNumber, BigNumber":d,Complex:f,"Complex, number":f,Array:e.referTo("DenseMatrix,number",p=>h=>p(r(h),2).valueOf()),DenseMatrix:e.referTo("DenseMatrix,number",p=>h=>p(h,2)),SparseMatrix:e.referTo("SparseMatrix,number",p=>h=>p(h,2)),"SparseMatrix, SparseMatrix":e.referToSelf(p=>(h,m)=>{if(m.density()===1)return u(h,m,p);throw new Error("Root must be non-zero")}),"DenseMatrix, SparseMatrix":e.referToSelf(p=>(h,m)=>{if(m.density()===1)return o(h,m,p,!1);throw new Error("Root must be non-zero")}),"Array, SparseMatrix":e.referTo("DenseMatrix,SparseMatrix",p=>(h,m)=>p(r(h),m)),"number | BigNumber, SparseMatrix":e.referToSelf(p=>(h,m)=>{if(m.density()===1)return l(m,h,p,!0);throw new Error("Root must be non-zero")})},c({scalar:"number | BigNumber",SD:s,Ss:l,sS:!1}));function d(p,h){var m=i.precision,g=i.clone({precision:m+2}),y=new i(0),N=new g(1),v=h.isNegative();if(v&&(h=h.neg()),h.isZero())throw new Error("Root must be non-zero");if(p.isNegative()&&!h.abs().mod(2).equals(1))throw new Error("Root must be odd when a is negative.");if(p.isZero())return v?new g(1/0):0;if(!p.isFinite())return v?y:p;var w=p.abs().pow(N.div(h));return w=p.isNeg()?w.neg():w,new i((v?N.div(w):w).toPrecision(m))}}),Zb="sign",R9=["typed","BigNumber","Fraction","complex"],P9=H(Zb,R9,t=>{var{typed:e,BigNumber:r,complex:n,Fraction:i}=t;return e(Zb,{number:ig,Complex:function(o){return o.im===0?n(ig(o.re)):o.sign()},BigNumber:function(o){return new r(o.cmp(0))},bigint:function(o){return o>0n?1n:o<0n?-1n:0n},Fraction:function(o){return new i(o.s)},"Array | Matrix":e.referToSelf(a=>o=>st(o,a,!0)),Unit:e.referToSelf(a=>o=>{if(!o._isDerived()&&o.units[0].unit.offset!==0)throw new TypeError("sign is ambiguous for units with offset");return e.find(a,o.valueType())(o.value)})})}),$9="sqrt",L9=["config","typed","Complex"],z9=H($9,L9,t=>{var{config:e,typed:r,Complex:n}=t;return r("sqrt",{number:i,Complex:function(o){return o.sqrt()},BigNumber:function(o){return!o.isNegative()||e.predictable?o.sqrt():i(o.toNumber())},Unit:function(o){return o.pow(.5)}});function i(a){return isNaN(a)?NaN:a>=0||e.predictable?Math.sqrt(a):new n(a,0).sqrt()}}),Xb="square",q9=["typed"],U9=H(Xb,q9,t=>{var{typed:e}=t;return e(Xb,{number:oC,Complex:function(n){return n.mul(n)},BigNumber:function(n){return n.times(n)},bigint:function(n){return n*n},Fraction:function(n){return n.mul(n)},Unit:function(n){return n.pow(2)}})}),Qb="subtract",H9=["typed","matrix","equalScalar","subtractScalar","unaryMinus","DenseMatrix","concat"],V9=H(Qb,H9,t=>{var{typed:e,matrix:r,equalScalar:n,subtractScalar:i,unaryMinus:a,DenseMatrix:o,concat:s}=t,u=oo({typed:e}),l=hn({typed:e}),c=Ap({typed:e,equalScalar:n}),f=Zo({typed:e,DenseMatrix:o}),d=pr({typed:e,DenseMatrix:o}),p=$t({typed:e,matrix:r,concat:s});return e(Qb,{"any, any":i},p({elop:i,SS:c,DS:u,SD:l,Ss:d,sS:f}))}),ex="xgcd",W9=["typed","config","matrix","BigNumber"],j9=H(ex,W9,t=>{var{typed:e,config:r,matrix:n,BigNumber:i}=t;return e(ex,{"number, number":function(s,u){var l=sC(s,u);return r.matrix==="Array"?l:n(l)},"BigNumber, BigNumber":a});function a(o,s){var u,l,c,f=new i(0),d=new i(1),p=f,h=d,m=d,g=f;if(!o.isInt()||!s.isInt())throw new Error("Parameters in function xgcd must be integer numbers");for(;!s.isZero();)l=o.div(s).floor(),c=o.mod(s),u=p,p=h.minus(l.times(p)),h=u,u=m,m=g.minus(l.times(m)),g=u,o=s,s=c;var y;return o.lt(f)?y=[o.neg(),h.neg(),g.neg()]:y=[o,o.isZero()?0:h,g],r.matrix==="Array"?y:n(y)}}),tx="invmod",G9=["typed","config","BigNumber","xgcd","equal","smaller","mod","add","isInteger"],K9=H(tx,G9,t=>{var{typed:e,config:r,BigNumber:n,xgcd:i,equal:a,smaller:o,mod:s,add:u,isInteger:l}=t;return e(tx,{"number, number":c,"BigNumber, BigNumber":c});function c(f,d){if(!l(f)||!l(d))throw new Error("Parameters in function invmod must be integer numbers");if(f=s(f,d),a(d,0))throw new Error("Divisor must be non zero");var p=i(f,d);p=p.valueOf();var[h,m]=p;return a(h,n(1))?(m=s(m,d),o(m,n(0))&&(m=u(m,d)),m):NaN}}),J9="matAlgo09xS0Sf",Y9=["typed","equalScalar"],qC=H(J9,Y9,t=>{var{typed:e,equalScalar:r}=t;return function(i,a,o){var s=i._values,u=i._index,l=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=a._values,p=a._index,h=a._ptr,m=a._size,g=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(c.length!==m.length)throw new ht(c.length,m.length);if(c[0]!==m[0]||c[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+m+")");var y=c[0],N=c[1],v,w=r,x=0,b=o;typeof f=="string"&&f===g&&f!=="mixed"&&(v=f,w=e.find(r,[v,v]),x=e.convert(0,v),b=e.find(o,[v,v]));var S=s&&d?[]:void 0,C=[],A=[],E=S?[]:void 0,D=[],M,F,I,P,T;for(F=0;F<N;F++){A[F]=C.length;var $=F+1;if(E)for(P=h[F],T=h[F+1],I=P;I<T;I++)M=p[I],D[M]=$,E[M]=d[I];for(P=l[F],T=l[F+1],I=P;I<T;I++)if(M=u[I],E){var O=D[M]===$?E[M]:x,W=b(s[I],O);w(W,x)||(C.push(M),S.push(W))}else C.push(M)}return A[N]=C.length,i.createSparseMatrix({values:S,index:C,ptr:A,size:[y,N],datatype:f===i._datatype&&g===a._datatype?v:void 0})}}),rx="dotMultiply",Z9=["typed","matrix","equalScalar","multiplyScalar","concat"],X9=H(rx,Z9,t=>{var{typed:e,matrix:r,equalScalar:n,multiplyScalar:i,concat:a}=t,o=mi({typed:e,equalScalar:n}),s=qC({typed:e,equalScalar:n}),u=Lr({typed:e,equalScalar:n}),l=$t({typed:e,matrix:r,concat:a});return e(rx,l({elop:i,SS:s,DS:o,Ss:u}))});function Q9(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitAnd");var r=t.constructor;if(t.isNaN()||e.isNaN())return new r(NaN);if(t.isZero()||e.eq(-1)||t.eq(e))return t;if(e.isZero()||t.eq(-1))return e;if(!t.isFinite()||!e.isFinite()){if(!t.isFinite()&&!e.isFinite())return t.isNegative()===e.isNegative()?t:new r(0);if(!t.isFinite())return e.isNegative()?t:t.isNegative()?new r(0):e;if(!e.isFinite())return t.isNegative()?e:e.isNegative()?new r(0):t}return Ov(t,e,function(n,i){return n&i})}function Sl(t){if(t.isFinite()&&!t.isInteger())throw new Error("Integer expected in function bitNot");var e=t.constructor,r=e.precision;e.config({precision:1e9});var n=t.plus(new e(1));return n.s=-n.s||null,e.config({precision:r}),n}function e7(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitOr");var r=t.constructor;if(t.isNaN()||e.isNaN())return new r(NaN);var n=new r(-1);return t.isZero()||e.eq(n)||t.eq(e)?e:e.isZero()||t.eq(n)?t:!t.isFinite()||!e.isFinite()?!t.isFinite()&&!t.isNegative()&&e.isNegative()||t.isNegative()&&!e.isNegative()&&!e.isFinite()?n:t.isNegative()&&e.isNegative()?t.isFinite()?t:e:t.isFinite()?e:t:Ov(t,e,function(i,a){return i|a})}function Ov(t,e,r){var n=t.constructor,i,a,o=+(t.s<0),s=+(e.s<0);if(o){i=Dc(Sl(t));for(var u=0;u<i.length;++u)i[u]^=1}else i=Dc(t);if(s){a=Dc(Sl(e));for(var l=0;l<a.length;++l)a[l]^=1}else a=Dc(e);var c,f,d;i.length<=a.length?(c=i,f=a,d=o):(c=a,f=i,d=s);var p=c.length,h=f.length,m=r(o,s)^1,g=new n(m^1),y=new n(1),N=new n(2),v=n.precision;for(n.config({precision:1e9});p>0;)r(c[--p],f[--h])===m&&(g=g.plus(y)),y=y.times(N);for(;h>0;)r(d,f[--h])===m&&(g=g.plus(y)),y=y.times(N);return n.config({precision:v}),m===0&&(g.s=-g.s),g}function Dc(t){for(var e=t.d,r=e[0]+"",n=1;n<e.length;++n){for(var i=e[n]+"",a=7-i.length;a--;)i="0"+i;r+=i}for(var o=r.length;r.charAt(o)==="0";)o--;var s=t.e,u=r.slice(0,o+1||1),l=u.length;if(s>0)if(++s>l)for(s-=l;s--;)u+="0";else s<l&&(u=u.slice(0,s)+"."+u.slice(s));for(var c=[0],f=0;f<u.length;){for(var d=c.length;d--;)c[d]*=10;c[0]+=parseInt(u.charAt(f++));for(var p=0;p<c.length;++p)c[p]>1&&((c[p+1]===null||c[p+1]===void 0)&&(c[p+1]=0),c[p+1]+=c[p]>>1,c[p]&=1)}return c.reverse()}function t7(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitXor");var r=t.constructor;if(t.isNaN()||e.isNaN())return new r(NaN);if(t.isZero())return e;if(e.isZero())return t;if(t.eq(e))return new r(0);var n=new r(-1);return t.eq(n)?Sl(e):e.eq(n)?Sl(t):!t.isFinite()||!e.isFinite()?!t.isFinite()&&!e.isFinite()?n:new r(t.isNegative()===e.isNegative()?1/0:-1/0):Ov(t,e,function(i,a){return i^a})}function r7(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function leftShift");var r=t.constructor;return t.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new r(NaN):t.isZero()||e.isZero()?t:!t.isFinite()&&!e.isFinite()?new r(NaN):e.lt(55)?t.times(Math.pow(2,e.toNumber())+""):t.times(new r(2).pow(e))}function n7(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function rightArithShift");var r=t.constructor;return t.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new r(NaN):t.isZero()||e.isZero()?t:e.isFinite()?e.lt(55)?t.div(Math.pow(2,e.toNumber())+"").floor():t.div(new r(2).pow(e)).floor():t.isNegative()?new r(-1):t.isFinite()?new r(0):new r(NaN)}var nx="bitAnd",i7=["typed","matrix","equalScalar","concat"],UC=H(nx,i7,t=>{var{typed:e,matrix:r,equalScalar:n,concat:i}=t,a=mi({typed:e,equalScalar:n}),o=Sp({typed:e,equalScalar:n}),s=Lr({typed:e,equalScalar:n}),u=$t({typed:e,matrix:r,concat:i});return e(nx,{"number, number":lC,"BigNumber, BigNumber":Q9,"bigint, bigint":(l,c)=>l&c},u({SS:o,DS:a,Ss:s}))}),ix="bitNot",a7=["typed"],o7=H(ix,a7,t=>{var{typed:e}=t;return e(ix,{number:cC,BigNumber:Sl,bigint:r=>~r,"Array | Matrix":e.referToSelf(r=>n=>st(n,r))})}),ax="bitOr",s7=["typed","matrix","equalScalar","DenseMatrix","concat"],HC=H(ax,s7,t=>{var{typed:e,matrix:r,equalScalar:n,DenseMatrix:i,concat:a}=t,o=oo({typed:e}),s=Tv({typed:e,equalScalar:n}),u=Zo({typed:e,DenseMatrix:i}),l=$t({typed:e,matrix:r,concat:a});return e(ax,{"number, number":fC,"BigNumber, BigNumber":e7,"bigint, bigint":(c,f)=>c|f},l({SS:s,DS:o,Ss:u}))}),u7="matAlgo07xSSf",l7=["typed","SparseMatrix"],Ri=H(u7,l7,t=>{var{typed:e,SparseMatrix:r}=t;return function(a,o,s){var u=a._size,l=a._datatype||a._data===void 0?a._datatype:a.getDataType(),c=o._size,f=o._datatype||o._data===void 0?o._datatype:o.getDataType();if(u.length!==c.length)throw new ht(u.length,c.length);if(u[0]!==c[0]||u[1]!==c[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+c+")");var d=u[0],p=u[1],h,m=0,g=s;typeof l=="string"&&l===f&&l!=="mixed"&&(h=l,m=e.convert(0,h),g=e.find(s,[h,h]));for(var y=[],N=[],v=new Array(p+1).fill(0),w=[],x=[],b=[],S=[],C=0;C<p;C++){var A=C+1,E=0;n(a,C,b,w,A),n(o,C,S,x,A);for(var D=0;D<d;D++){var M=b[D]===A?w[D]:m,F=S[D]===A?x[D]:m,I=g(M,F);I!==0&&I!==!1&&(N.push(D),y.push(I),E++)}v[C+1]=v[C]+E}return new r({values:y,index:N,ptr:v,size:[d,p],datatype:l===a._datatype&&f===o._datatype?h:void 0})};function n(i,a,o,s,u){for(var l=i._values,c=i._index,f=i._ptr,d=f[a],p=f[a+1];d<p;d++){var h=c[d];o[h]=u,s[h]=l[d]}}}),ox="bitXor",c7=["typed","matrix","DenseMatrix","concat","SparseMatrix"],f7=H(ox,c7,t=>{var{typed:e,matrix:r,DenseMatrix:n,concat:i,SparseMatrix:a}=t,o=hn({typed:e}),s=Ri({typed:e,SparseMatrix:a}),u=pr({typed:e,DenseMatrix:n}),l=$t({typed:e,matrix:r,concat:i});return e(ox,{"number, number":dC,"BigNumber, BigNumber":t7,"bigint, bigint":(c,f)=>c^f},l({SS:s,DS:o,Ss:u}))}),sx="arg",d7=["typed"],p7=H(sx,d7,t=>{var{typed:e}=t;return e(sx,{number:function(n){return Math.atan2(0,n)},BigNumber:function(n){return n.constructor.atan2(0,n)},Complex:function(n){return n.arg()},"Array | Matrix":e.referToSelf(r=>n=>st(n,r))})}),ux="conj",h7=["typed"],m7=H(ux,h7,t=>{var{typed:e}=t;return e(ux,{"number | BigNumber | Fraction":r=>r,Complex:r=>r.conjugate(),"Array | Matrix":e.referToSelf(r=>n=>st(n,r))})}),lx="im",g7=["typed"],v7=H(lx,g7,t=>{var{typed:e}=t;return e(lx,{number:()=>0,"BigNumber | Fraction":r=>r.mul(0),Complex:r=>r.im,"Array | Matrix":e.referToSelf(r=>n=>st(n,r))})}),cx="re",y7=["typed"],b7=H(cx,y7,t=>{var{typed:e}=t;return e(cx,{"number | BigNumber | Fraction":r=>r,Complex:r=>r.re,"Array | Matrix":e.referToSelf(r=>n=>st(n,r))})}),fx="not",x7=["typed"],w7=H(fx,x7,t=>{var{typed:e}=t;return e(fx,{"null | undefined":()=>!0,number:vC,Complex:function(n){return n.re===0&&n.im===0},BigNumber:function(n){return n.isZero()||n.isNaN()},bigint:r=>!r,Unit:e.referToSelf(r=>n=>e.find(r,n.valueType())(n.value)),"Array | Matrix":e.referToSelf(r=>n=>st(n,r))})}),dx="or",N7=["typed","matrix","equalScalar","DenseMatrix","concat"],VC=H(dx,N7,t=>{var{typed:e,matrix:r,equalScalar:n,DenseMatrix:i,concat:a}=t,o=hn({typed:e}),s=Ap({typed:e,equalScalar:n}),u=pr({typed:e,DenseMatrix:i}),l=$t({typed:e,matrix:r,concat:a});return e(dx,{"number, number":ag,"Complex, Complex":function(f,d){return f.re!==0||f.im!==0||d.re!==0||d.im!==0},"BigNumber, BigNumber":function(f,d){return!f.isZero()&&!f.isNaN()||!d.isZero()&&!d.isNaN()},"bigint, bigint":ag,"Unit, Unit":e.referToSelf(c=>(f,d)=>c(f.value||0,d.value||0))},l({SS:s,DS:o,Ss:u}))}),px="xor",A7=["typed","matrix","DenseMatrix","concat","SparseMatrix"],S7=H(px,A7,t=>{var{typed:e,matrix:r,DenseMatrix:n,concat:i,SparseMatrix:a}=t,o=hn({typed:e}),s=Ri({typed:e,SparseMatrix:a}),u=pr({typed:e,DenseMatrix:n}),l=$t({typed:e,matrix:r,concat:i});return e(px,{"number, number":og,"Complex, Complex":function(f,d){return(f.re!==0||f.im!==0)!=(d.re!==0||d.im!==0)},"bigint, bigint":og,"BigNumber, BigNumber":function(f,d){return(!f.isZero()&&!f.isNaN())!=(!d.isZero()&&!d.isNaN())},"Unit, Unit":e.referToSelf(c=>(f,d)=>c(f.value||0,d.value||0))},l({SS:s,DS:o,Ss:u}))}),hx="concat",D7=["typed","matrix","isInteger"],WC=H(hx,D7,t=>{var{typed:e,matrix:r,isInteger:n}=t;return e(hx,{"...Array | Matrix | number | BigNumber":function(a){var o,s=a.length,u=-1,l,c=!1,f=[];for(o=0;o<s;o++){var d=a[o];if(We(d)&&(c=!0),it(d)||ot(d)){if(o!==s-1)throw new Error("Dimension must be specified as last argument");if(l=u,u=d.valueOf(),!n(u))throw new TypeError("Integer number expected for dimension");if(u<0||o>0&&u>l)throw new di(u,l+1)}else{var p=et(d).valueOf(),h=Ze(p);if(f[o]=p,l=u,u=h.length-1,o>0&&u!==l)throw new ht(l+1,u+1)}}if(f.length===0)throw new SyntaxError("At least one matrix expected");for(var m=f.shift();f.length;)m=j2(m,f.shift(),u);return c?r(m):m},"...string":function(a){return a.join("")}})}),mx="column",E7=["typed","Index","matrix","range"],jC=H(mx,E7,t=>{var{typed:e,Index:r,matrix:n,range:i}=t;return e(mx,{"Matrix, number":a,"Array, number":function(s,u){return a(n(et(s)),u).valueOf()}});function a(o,s){if(o.size().length!==2)throw new Error("Only two dimensional matrix is supported");Pt(s,o.size()[1]);var u=i(0,o.size()[0]),l=new r(u,s),c=o.subset(l);return We(c)?c:n([[c]])}}),gx="count",C7=["typed","size","prod"],M7=H(gx,C7,t=>{var{typed:e,size:r,prod:n}=t;return e(gx,{string:function(a){return a.length},"Matrix | Array":function(a){return n(r(a))}})}),vx="cross",T7=["typed","matrix","subtract","multiply"],_7=H(vx,T7,t=>{var{typed:e,matrix:r,subtract:n,multiply:i}=t;return e(vx,{"Matrix, Matrix":function(s,u){return r(a(s.toArray(),u.toArray()))},"Matrix, Array":function(s,u){return r(a(s.toArray(),u))},"Array, Matrix":function(s,u){return r(a(s,u.toArray()))},"Array, Array":a});function a(o,s){var u=Math.max(Ze(o).length,Ze(s).length);o=md(o),s=md(s);var l=Ze(o),c=Ze(s);if(l.length!==1||c.length!==1||l[0]!==3||c[0]!==3)throw new RangeError("Vectors with length 3 expected (Size A = ["+l.join(", ")+"], B = ["+c.join(", ")+"])");var f=[n(i(o[1],s[2]),i(o[2],s[1])),n(i(o[2],s[0]),i(o[0],s[2])),n(i(o[0],s[1]),i(o[1],s[0]))];return u>1?[f]:f}}),yx="diag",O7=["typed","matrix","DenseMatrix","SparseMatrix"],F7=H(yx,O7,t=>{var{typed:e,matrix:r,DenseMatrix:n,SparseMatrix:i}=t;return e(yx,{Array:function(l){return a(l,0,Ze(l),null)},"Array, number":function(l,c){return a(l,c,Ze(l),null)},"Array, BigNumber":function(l,c){return a(l,c.toNumber(),Ze(l),null)},"Array, string":function(l,c){return a(l,0,Ze(l),c)},"Array, number, string":function(l,c,f){return a(l,c,Ze(l),f)},"Array, BigNumber, string":function(l,c,f){return a(l,c.toNumber(),Ze(l),f)},Matrix:function(l){return a(l,0,l.size(),l.storage())},"Matrix, number":function(l,c){return a(l,c,l.size(),l.storage())},"Matrix, BigNumber":function(l,c){return a(l,c.toNumber(),l.size(),l.storage())},"Matrix, string":function(l,c){return a(l,0,l.size(),c)},"Matrix, number, string":function(l,c,f){return a(l,c,l.size(),f)},"Matrix, BigNumber, string":function(l,c,f){return a(l,c.toNumber(),l.size(),f)}});function a(u,l,c,f){if(!$e(l))throw new TypeError("Second parameter in function diag must be an integer");var d=l>0?l:0,p=l<0?-l:0;switch(c.length){case 1:return o(u,l,f,c[0],p,d);case 2:return s(u,l,f,c,p,d)}throw new RangeError("Matrix for function diag must be 2 dimensional")}function o(u,l,c,f,d,p){var h=[f+d,f+p];if(c&&c!=="sparse"&&c!=="dense")throw new TypeError("Unknown matrix type ".concat(c,'"'));var m=c==="sparse"?i.diagonal(h,u,l):n.diagonal(h,u,l);return c!==null?m:m.valueOf()}function s(u,l,c,f,d,p){if(We(u)){var h=u.diagonal(l);return c!==null?c!==h.storage()?r(h,c):h:h.valueOf()}for(var m=Math.min(f[0]-d,f[1]-p),g=[],y=0;y<m;y++)g[y]=u[y+d][y+p];return c!==null?r(g):g}}),B7="filter",k7=["typed"],GC=H(B7,k7,t=>{var{typed:e}=t;return e("filter",{"Array, function":bx,"Matrix, function":function(n,i){return n.create(bx(n.valueOf(),i),n.datatype())},"Array, RegExp":cb,"Matrix, RegExp":function(n,i){return n.create(cb(n.valueOf(),i),n.datatype())}})});function bx(t,e){var r=jo(e,t,"filter");return r.isUnary?lb(t,r.fn):lb(t,function(n,i,a){return r.fn(n,[i],a)})}var xx="flatten",I7=["typed"],R7=H(xx,I7,t=>{var{typed:e}=t;return e(xx,{Array:function(n){return Et(n)},Matrix:function(n){return n.create(Et(n.valueOf(),!0),n.datatype())}})}),dg="forEach",P7=["typed"],KC=H(dg,P7,t=>{var{typed:e}=t;return e(dg,{"Array, function":$7,"Matrix, function":function(n,i){n.forEach(i)}})});function $7(t,e){var r=jo(e,t,dg);K2(t,r.fn,r.isUnary)}var wx="getMatrixDataType",L7=["typed"],z7=H(wx,L7,t=>{var{typed:e}=t;return e(wx,{Array:function(n){return wp(n,It)},Matrix:function(n){return n.getDataType()}})}),Nx="identity",q7=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],U7=H(Nx,q7,t=>{var{typed:e,config:r,matrix:n,BigNumber:i,DenseMatrix:a,SparseMatrix:o}=t;return e(Nx,{"":function(){return r.matrix==="Matrix"?n([]):[]},string:function(c){return n(c)},"number | BigNumber":function(c){return u(c,c,r.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(c,f){return u(c,c,f)},"number | BigNumber, number | BigNumber":function(c,f){return u(c,f,r.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(c,f,d){return u(c,f,d)},Array:function(c){return s(c)},"Array, string":function(c,f){return s(c,f)},Matrix:function(c){return s(c.valueOf(),c.storage())},"Matrix, string":function(c,f){return s(c.valueOf(),f)}});function s(l,c){switch(l.length){case 0:return c?n(c):[];case 1:return u(l[0],l[0],c);case 2:return u(l[0],l[1],c);default:throw new Error("Vector containing two values expected")}}function u(l,c,f){var d=ot(l)||ot(c)?i:null;if(ot(l)&&(l=l.toNumber()),ot(c)&&(c=c.toNumber()),!$e(l)||l<1)throw new Error("Parameters in function identity must be positive integers");if(!$e(c)||c<1)throw new Error("Parameters in function identity must be positive integers");var p=d?new i(1):1,h=d?new d(0):0,m=[l,c];if(f){if(f==="sparse")return o.diagonal(m,p,0,h);if(f==="dense")return a.diagonal(m,p,0,h);throw new TypeError('Unknown matrix type "'.concat(f,'"'))}for(var g=Ks([],m,h),y=l<c?l:c,N=0;N<y;N++)g[N][N]=p;return g}}),Ax="kron",H7=["typed","matrix","multiplyScalar"],V7=H(Ax,H7,t=>{var{typed:e,matrix:r,multiplyScalar:n}=t;return e(Ax,{"Matrix, Matrix":function(o,s){return r(i(o.toArray(),s.toArray()))},"Matrix, Array":function(o,s){return r(i(o.toArray(),s))},"Array, Matrix":function(o,s){return r(i(o,s.toArray()))},"Array, Array":i});function i(a,o){if(Ze(a).length===1&&(a=[a]),Ze(o).length===1&&(o=[o]),Ze(a).length>2||Ze(o).length>2)throw new RangeError("Vectors with dimensions greater then 2 are not supported expected (Size x = "+JSON.stringify(a.length)+", y = "+JSON.stringify(o.length)+")");var s=[],u=[];return a.map(function(l){return o.map(function(c){return u=[],s.push(u),l.map(function(f){return c.map(function(d){return u.push(n(f,d))})})})})&&s}}),qh="map",W7=["typed"],JC=H(qh,W7,t=>{var{typed:e}=t;return e(qh,{"Array, function":n,"Matrix, function":function(a,o){return a.map(o)},"Array|Matrix, Array|Matrix, ...Array|Matrix|function":(i,a,o)=>r([i,a,...o.slice(0,o.length-1)],o[o.length-1])});function r(i,a){if(typeof a!="function")throw new Error("Last argument must be a callback function");var o=i[0].isMatrix,s=Dv(...i.map(w=>w.isMatrix?w.size():Ze(w))),u=o?(w,x)=>w.get(x):Ev,l=o?i.map(w=>w.isMatrix?w.create(Oo(w.toArray(),s),w.datatype()):i[0].create(Oo(w.valueOf(),s))):i.map(w=>w.isMatrix?Oo(w.toArray(),s):Oo(w,s)),c;if(e.isTypedFunction(a)){var f=s.map(()=>0),d=l.map(w=>u(w,f)),p=v(a,d,f,l);c=y(p)}else{var h=i.length,m=N(a,h);c=y(m)}var g=(w,x)=>c([w,...l.slice(1).map(b=>u(b,x))],x);if(o)return l[0].map(g);return n(l[0],g);function y(w){switch(w){case 0:return x=>a(...x);case 1:return(x,b)=>a(...x,b);case 2:return(x,b)=>a(...x,b,...l)}}function N(w,x){return w.length>x+1?2:w.length===x+1?1:0}function v(w,x,b,S){return e.resolve(w,[...x,b,...S])!==null?2:e.resolve(w,[...x,b])!==null?1:(e.resolve(w,x)!==null,0)}}function n(i,a){var o=jo(a,i,qh);return rg(i,o.fn,o.isUnary)}}),Sx="diff",j7=["typed","matrix","subtract","number"],YC=H(Sx,j7,t=>{var{typed:e,matrix:r,subtract:n,number:i}=t;return e(Sx,{"Array | Matrix":function(c){return We(c)?r(o(c.toArray())):o(c)},"Array | Matrix, number":function(c,f){if(!$e(f))throw new RangeError("Dimension must be a whole number");return We(c)?r(a(c.toArray(),f)):a(c,f)},"Array, BigNumber":e.referTo("Array,number",l=>(c,f)=>l(c,i(f))),"Matrix, BigNumber":e.referTo("Matrix,number",l=>(c,f)=>l(c,i(f)))});function a(l,c){if(We(l)&&(l=l.toArray()),!Array.isArray(l))throw RangeError("Array/Matrix does not have that many dimensions");if(c>0){var f=[];return l.forEach(d=>{f.push(a(d,c-1))}),f}else{if(c===0)return o(l);throw RangeError("Cannot have negative dimension")}}function o(l){for(var c=[],f=l.length,d=1;d<f;d++)c.push(s(l[d-1],l[d]));return c}function s(l,c){We(l)&&(l=l.toArray()),We(c)&&(c=c.toArray());var f=Array.isArray(l),d=Array.isArray(c);if(f&&d)return u(l,c);if(!f&&!d)return n(c,l);throw TypeError("Cannot calculate difference between 1 array and 1 non-array")}function u(l,c){if(l.length!==c.length)throw RangeError("Not all sub-arrays have the same length");for(var f=[],d=l.length,p=0;p<d;p++)f.push(s(l[p],c[p]));return f}}),G7="ones",K7=["typed","config","matrix","BigNumber"],J7=H(G7,K7,t=>{var{typed:e,config:r,matrix:n,BigNumber:i}=t;return e("ones",{"":function(){return r.matrix==="Array"?a([]):a([],"default")},"...number | BigNumber | string":function(l){var c=l[l.length-1];if(typeof c=="string"){var f=l.pop();return a(l,f)}else return r.matrix==="Array"?a(l):a(l,"default")},Array:a,Matrix:function(l){var c=l.storage();return a(l.valueOf(),c)},"Array | Matrix, string":function(l,c){return a(l.valueOf(),c)}});function a(u,l){var c=o(u),f=c?new i(1):1;if(s(u),l){var d=n(l);return u.length>0?d.resize(u,f):d}else{var p=[];return u.length>0?Ks(p,u,f):p}}function o(u){var l=!1;return u.forEach(function(c,f,d){ot(c)&&(l=!0,d[f]=c.toNumber())}),l}function s(u){u.forEach(function(l){if(typeof l!="number"||!$e(l)||l<0)throw new Error("Parameters in function ones must be positive integers")})}});function Fv(){throw new Error('No "bignumber" implementation available')}function ZC(){throw new Error('No "fraction" implementation available')}function XC(){throw new Error('No "matrix" implementation available')}var Dx="range",Y7=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq","add","isPositive"],QC=H(Dx,Y7,t=>{var{typed:e,config:r,matrix:n,bignumber:i,smaller:a,smallerEq:o,larger:s,largerEq:u,add:l,isPositive:c}=t;return e(Dx,{string:d,"string, boolean":d,number:function(g){throw new TypeError("Too few arguments to function range(): ".concat(g))},boolean:function(g){throw new TypeError("Unexpected type of argument 1 to function range(): ".concat(g,", number|bigint|BigNumber|Fraction"))},"number, number":function(g,y){return f(p(g,y,1,!1))},"number, number, number":function(g,y,N){return f(p(g,y,N,!1))},"number, number, boolean":function(g,y,N){return f(p(g,y,1,N))},"number, number, number, boolean":function(g,y,N,v){return f(p(g,y,N,v))},"bigint, bigint|number":function(g,y){return f(p(g,y,1n,!1))},"number, bigint":function(g,y){return f(p(BigInt(g),y,1n,!1))},"bigint, bigint|number, bigint|number":function(g,y,N){return f(p(g,y,BigInt(N),!1))},"number, bigint, bigint|number":function(g,y,N){return f(p(BigInt(g),y,BigInt(N),!1))},"bigint, bigint|number, boolean":function(g,y,N){return f(p(g,y,1n,N))},"number, bigint, boolean":function(g,y,N){return f(p(BigInt(g),y,1n,N))},"bigint, bigint|number, bigint|number, boolean":function(g,y,N,v){return f(p(g,y,BigInt(N),v))},"number, bigint, bigint|number, boolean":function(g,y,N,v){return f(p(BigInt(g),y,BigInt(N),v))},"BigNumber, BigNumber":function(g,y){var N=g.constructor;return f(p(g,y,new N(1),!1))},"BigNumber, BigNumber, BigNumber":function(g,y,N){return f(p(g,y,N,!1))},"BigNumber, BigNumber, boolean":function(g,y,N){var v=g.constructor;return f(p(g,y,new v(1),N))},"BigNumber, BigNumber, BigNumber, boolean":function(g,y,N,v){return f(p(g,y,N,v))},"Fraction, Fraction":function(g,y){return f(p(g,y,1,!1))},"Fraction, Fraction, Fraction":function(g,y,N){return f(p(g,y,N,!1))},"Fraction, Fraction, boolean":function(g,y,N){return f(p(g,y,1,N))},"Fraction, Fraction, Fraction, boolean":function(g,y,N,v){return f(p(g,y,N,v))},"Unit, Unit, Unit":function(g,y,N){return f(p(g,y,N,!1))},"Unit, Unit, Unit, boolean":function(g,y,N,v){return f(p(g,y,N,v))}});function f(m){return r.matrix==="Matrix"?n?n(m):XC():m}function d(m,g){var y=h(m);if(!y)throw new SyntaxError('String "'+m+'" is no valid range');return r.number==="BigNumber"?(i===void 0&&Fv(),f(p(i(y.start),i(y.end),i(y.step)))):f(p(y.start,y.end,y.step,g))}function p(m,g,y,N){for(var v=[],w=c(y)?N?o:a:N?u:s,x=m;w(x,g);)v.push(x),x=l(x,y);return v}function h(m){var g=m.split(":"),y=g.map(function(v){return Number(v)}),N=y.some(function(v){return isNaN(v)});if(N)return null;switch(y.length){case 2:return{start:y[0],end:y[1],step:1};case 3:return{start:y[0],end:y[2],step:y[1]};default:return null}}}),Ex="reshape",Z7=["typed","isInteger","matrix"],X7=H(Ex,Z7,t=>{var{typed:e,isInteger:r}=t;return e(Ex,{"Matrix, Array":function(i,a){return i.reshape(a,!0)},"Array, Array":function(i,a){return a.forEach(function(o){if(!r(o))throw new TypeError("Invalid size for dimension: "+o)}),Av(i,a)}})}),Q7="resize",eq=["config","matrix"],tq=H(Q7,eq,t=>{var{config:e,matrix:r}=t;return function(a,o,s){if(arguments.length!==2&&arguments.length!==3)throw new Xo("resize",arguments.length,2,3);if(We(o)&&(o=o.valueOf()),ot(o[0])&&(o=o.map(function(c){return ot(c)?c.toNumber():c})),We(a))return a.resize(o,s,!0);if(typeof a=="string")return n(a,o,s);var u=Array.isArray(a)?!1:e.matrix!=="Array";if(o.length===0){for(;Array.isArray(a);)a=a[0];return et(a)}else{Array.isArray(a)||(a=[a]),a=et(a);var l=Ks(a,o,s);return u?r(l):l}};function n(i,a,o){if(o!==void 0){if(typeof o!="string"||o.length!==1)throw new TypeError("Single character expected as defaultValue")}else o=" ";if(a.length!==1)throw new ht(a.length,1);var s=a[0];if(typeof s!="number"||!$e(s))throw new TypeError("Invalid size, must contain positive integers (size: "+pt(a)+")");if(i.length>s)return i.substring(0,s);if(i.length<s){for(var u=i,l=0,c=s-i.length;l<c;l++)u+=o;return u}else return i}}),Cx="rotate",rq=["typed","multiply","rotationMatrix"],nq=H(Cx,rq,t=>{var{typed:e,multiply:r,rotationMatrix:n}=t;return e(Cx,{"Array , number | BigNumber | Complex | Unit":function(o,s){i(o,2);var u=r(n(s),o);return u.toArray()},"Matrix , number | BigNumber | Complex | Unit":function(o,s){return i(o,2),r(n(s),o)},"Array, number | BigNumber | Complex | Unit, Array | Matrix":function(o,s,u){i(o,3);var l=r(n(s,u),o);return l},"Matrix, number | BigNumber | Complex | Unit, Array | Matrix":function(o,s,u){return i(o,3),r(n(s,u),o)}});function i(a,o){var s=Array.isArray(a)?Ze(a):a.size();if(s.length>2)throw new RangeError("Vector must be of dimensions 1x".concat(o));if(s.length===2&&s[1]!==1)throw new RangeError("Vector must be of dimensions 1x".concat(o));if(s[0]!==o)throw new RangeError("Vector must be of dimensions 1x".concat(o))}}),Mx="rotationMatrix",iq=["typed","config","multiplyScalar","addScalar","unaryMinus","norm","matrix","BigNumber","DenseMatrix","SparseMatrix","cos","sin"],aq=H(Mx,iq,t=>{var{typed:e,config:r,multiplyScalar:n,addScalar:i,unaryMinus:a,norm:o,BigNumber:s,matrix:u,DenseMatrix:l,SparseMatrix:c,cos:f,sin:d}=t;return e(Mx,{"":function(){return r.matrix==="Matrix"?u([]):[]},string:function(v){return u(v)},"number | BigNumber | Complex | Unit":function(v){return p(v,r.matrix==="Matrix"?"dense":void 0)},"number | BigNumber | Complex | Unit, string":function(v,w){return p(v,w)},"number | BigNumber | Complex | Unit, Array":function(v,w){var x=u(w);return h(x),y(v,x,void 0)},"number | BigNumber | Complex | Unit, Matrix":function(v,w){h(w);var x=w.storage()||(r.matrix==="Matrix"?"dense":void 0);return y(v,w,x)},"number | BigNumber | Complex | Unit, Array, string":function(v,w,x){var b=u(w);return h(b),y(v,b,x)},"number | BigNumber | Complex | Unit, Matrix, string":function(v,w,x){return h(w),y(v,w,x)}});function p(N,v){var w=ot(N),x=w?new s(-1):-1,b=f(N),S=d(N),C=[[b,n(x,S)],[S,b]];return g(C,v)}function h(N){var v=N.size();if(v.length<1||v[0]!==3)throw new RangeError("Vector must be of dimensions 1x3")}function m(N){return N.reduce((v,w)=>n(v,w))}function g(N,v){if(v){if(v==="sparse")return new c(N);if(v==="dense")return new l(N);throw new TypeError('Unknown matrix type "'.concat(v,'"'))}return N}function y(N,v,w){var x=o(v);if(x===0)throw new RangeError("Rotation around zero vector");var b=ot(N)?s:null,S=b?new b(1):1,C=b?new b(-1):-1,A=b?new b(v.get([0])/x):v.get([0])/x,E=b?new b(v.get([1])/x):v.get([1])/x,D=b?new b(v.get([2])/x):v.get([2])/x,M=f(N),F=i(S,a(M)),I=d(N),P=i(M,m([A,A,F])),T=i(m([A,E,F]),m([C,D,I])),$=i(m([A,D,F]),m([E,I])),O=i(m([A,E,F]),m([D,I])),W=i(M,m([E,E,F])),R=i(m([E,D,F]),m([C,A,I])),ie=i(m([A,D,F]),m([C,E,I])),te=i(m([E,D,F]),m([A,I])),Z=i(M,m([D,D,F])),X=[[P,T,$],[O,W,R],[ie,te,Z]];return g(X,w)}}),Tx="row",oq=["typed","Index","matrix","range"],eM=H(Tx,oq,t=>{var{typed:e,Index:r,matrix:n,range:i}=t;return e(Tx,{"Matrix, number":a,"Array, number":function(s,u){return a(n(et(s)),u).valueOf()}});function a(o,s){if(o.size().length!==2)throw new Error("Only two dimensional matrix is supported");Pt(s,o.size()[0]);var u=i(0,o.size()[1]),l=new r(s,u),c=o.subset(l);return We(c)?c:n([[c]])}}),_x="size",sq=["typed","config","?matrix"],uq=H(_x,sq,t=>{var{typed:e,config:r,matrix:n}=t;return e(_x,{Matrix:function(a){return a.create(a.size(),"number")},Array:Ze,string:function(a){return r.matrix==="Array"?[a.length]:n([a.length],"dense","number")},"number | Complex | BigNumber | Unit | boolean | null":function(a){return r.matrix==="Array"?[]:n?n([],"dense","number"):XC()}})}),Ox="squeeze",lq=["typed"],cq=H(Ox,lq,t=>{var{typed:e}=t;return e(Ox,{Array:function(n){return md(et(n))},Matrix:function(n){var i=md(n.toArray());return Array.isArray(i)?n.create(i,n.datatype()):i},any:function(n){return et(n)}})}),Fx="subset",fq=["typed","matrix","zeros","add"],tM=H(Fx,fq,t=>{var{typed:e,matrix:r,zeros:n,add:i}=t;return e(Fx,{"Matrix, Index":function(s,u){return Gs(u)?r():(hd(s,u),s.subset(u))},"Array, Index":e.referTo("Matrix, Index",function(o){return function(s,u){var l=o(r(s),u);return u.isScalar()?l:l.valueOf()}}),"Object, Index":pq,"string, Index":dq,"Matrix, Index, any, any":function(s,u,l,c){return Gs(u)?s:(hd(s,u),s.clone().subset(u,a(l,u),c))},"Array, Index, any, any":e.referTo("Matrix, Index, any, any",function(o){return function(s,u,l,c){var f=o(r(s),u,l,c);return f.isMatrix?f.valueOf():f}}),"Array, Index, any":e.referTo("Matrix, Index, any, any",function(o){return function(s,u,l){return o(r(s),u,l,void 0).valueOf()}}),"Matrix, Index, any":e.referTo("Matrix, Index, any, any",function(o){return function(s,u,l){return o(s,u,l,void 0)}}),"string, Index, string":Bx,"string, Index, string, string":Bx,"Object, Index, any":hq});function a(o,s){if(typeof o=="string")throw new Error("can't boradcast a string");if(s._isScalar)return o;var u=s.size();if(u.every(l=>l>0))try{return i(o,n(u))}catch{return o}else return o}});function dq(t,e){if(!hp(e))throw new TypeError("Index expected");if(Gs(e))return"";if(hd(Array.from(t),e),e.size().length!==1)throw new ht(e.size().length,1);var r=t.length;Pt(e.min()[0],r),Pt(e.max()[0],r);var n=e.dimension(0),i="";return n.forEach(function(a){i+=t.charAt(a)}),i}function Bx(t,e,r,n){if(!e||e.isIndex!==!0)throw new TypeError("Index expected");if(Gs(e))return t;if(hd(Array.from(t),e),e.size().length!==1)throw new ht(e.size().length,1);if(n!==void 0){if(typeof n!="string"||n.length!==1)throw new TypeError("Single character expected as defaultValue")}else n=" ";var i=e.dimension(0),a=i.size()[0];if(a!==r.length)throw new ht(i.size()[0],r.length);var o=t.length;Pt(e.min()[0]),Pt(e.max()[0]);for(var s=[],u=0;u<o;u++)s[u]=t.charAt(u);if(i.forEach(function(f,d){s[f]=r.charAt(d[0])}),s.length>o)for(var l=o-1,c=s.length;l<c;l++)s[l]||(s[l]=n);return s.join("")}function pq(t,e){if(!Gs(e)){if(e.size().length!==1)throw new ht(e.size(),1);var r=e.dimension(0);if(typeof r!="string")throw new TypeError("String expected as index to retrieve an object property");return an(t,r)}}function hq(t,e,r){if(Gs(e))return t;if(e.size().length!==1)throw new ht(e.size(),1);var n=e.dimension(0);if(typeof n!="string")throw new TypeError("String expected as index to retrieve an object property");var i=et(t);return Ws(i,n,r),i}var kx="transpose",mq=["typed","matrix"],gq=H(kx,mq,t=>{var{typed:e,matrix:r}=t;return e(kx,{Array:o=>n(r(o)).valueOf(),Matrix:n,any:et});function n(o){var s=o.size(),u;switch(s.length){case 1:u=o.clone();break;case 2:{var l=s[0],c=s[1];if(c===0)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+pt(s)+")");switch(o.storage()){case"dense":u=i(o,l,c);break;case"sparse":u=a(o,l,c);break}}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+pt(s)+")")}return u}function i(o,s,u){for(var l=o._data,c=[],f,d=0;d<u;d++){f=c[d]=[];for(var p=0;p<s;p++)f[p]=et(l[p][d])}return o.createDenseMatrix({data:c,size:[u,s],datatype:o._datatype})}function a(o,s,u){for(var l=o._values,c=o._index,f=o._ptr,d=l?[]:void 0,p=[],h=[],m=[],g=0;g<s;g++)m[g]=0;var y,N,v;for(y=0,N=c.length;y<N;y++)m[c[y]]++;for(var w=0,x=0;x<s;x++)h.push(w),w+=m[x],m[x]=h[x];for(h.push(w),v=0;v<u;v++)for(var b=f[v],S=f[v+1],C=b;C<S;C++){var A=m[c[C]]++;p[A]=v,l&&(d[A]=et(l[C]))}return o.createSparseMatrix({values:d,index:p,ptr:h,size:[u,s],datatype:o._datatype})}}),Ix="ctranspose",vq=["typed","transpose","conj"],yq=H(Ix,vq,t=>{var{typed:e,transpose:r,conj:n}=t;return e(Ix,{any:function(a){return n(r(a))}})}),Rx="zeros",bq=["typed","config","matrix","BigNumber"],xq=H(Rx,bq,t=>{var{typed:e,config:r,matrix:n,BigNumber:i}=t;return e(Rx,{"":function(){return r.matrix==="Array"?a([]):a([],"default")},"...number | BigNumber | string":function(l){var c=l[l.length-1];if(typeof c=="string"){var f=l.pop();return a(l,f)}else return r.matrix==="Array"?a(l):a(l,"default")},Array:a,Matrix:function(l){var c=l.storage();return a(l.valueOf(),c)},"Array | Matrix, string":function(l,c){return a(l.valueOf(),c)}});function a(u,l){var c=o(u),f=c?new i(0):0;if(s(u),l){var d=n(l);return u.length>0?d.resize(u,f):d}else{var p=[];return u.length>0?Ks(p,u,f):p}}function o(u){var l=!1;return u.forEach(function(c,f,d){ot(c)&&(l=!0,d[f]=c.toNumber())}),l}function s(u){u.forEach(function(l){if(typeof l!="number"||!$e(l)||l<0)throw new Error("Parameters in function zeros must be positive integers")})}}),Px="fft",wq=["typed","matrix","addScalar","multiplyScalar","divideScalar","exp","tau","i","dotDivide","conj","pow","ceil","log2"],Nq=H(Px,wq,t=>{var{typed:e,matrix:r,addScalar:n,multiplyScalar:i,divideScalar:a,exp:o,tau:s,i:u,dotDivide:l,conj:c,pow:f,ceil:d,log2:p}=t;return e(Px,{Array:h,Matrix:function(v){return v.create(h(v.valueOf()),v.datatype())}});function h(N){var v=Ze(N);return v.length===1?y(N,v[0]):m(N.map(w=>h(w,v.slice(1))),0)}function m(N,v){var w=Ze(N);if(v!==0)return new Array(w[0]).fill(0).map((b,S)=>m(N[S],v-1));if(w.length===1)return y(N);function x(b){var S=Ze(b);return new Array(S[1]).fill(0).map((C,A)=>new Array(S[0]).fill(0).map((E,D)=>b[D][A]))}return x(m(x(N),1))}function g(N){for(var v=N.length,w=o(a(i(-1,i(u,s)),v)),x=[],b=1-v;b<v;b++)x.push(f(w,a(f(b,2),2)));for(var S=f(2,d(p(v+v-1))),C=[...new Array(v).fill(0).map((T,$)=>i(N[$],x[v-1+$])),...new Array(S-v).fill(0)],A=[...new Array(v+v-1).fill(0).map((T,$)=>a(1,x[$])),...new Array(S-(v+v-1)).fill(0)],E=y(C),D=y(A),M=new Array(S).fill(0).map((T,$)=>i(E[$],D[$])),F=l(c(h(c(M))),S),I=[],P=v-1;P<v+v-1;P++)I.push(i(F[P],x[P]));return I}function y(N){var v=N.length;if(v===1)return[N[0]];if(v%2===0){for(var w=[...y(N.filter((C,A)=>A%2===0)),...y(N.filter((C,A)=>A%2===1))],x=0;x<v/2;x++){var b=w[x],S=i(w[x+v/2],o(i(i(s,u),a(-x,v))));w[x]=n(b,S),w[x+v/2]=n(b,i(-1,S))}return w}else return g(N)}}),$x="ifft",Aq=["typed","fft","dotDivide","conj"],Sq=H($x,Aq,t=>{var{typed:e,fft:r,dotDivide:n,conj:i}=t;return e($x,{"Array | Matrix":function(o){var s=We(o)?o.size():Ze(o);return n(i(r(i(o))),s.reduce((u,l)=>u*l,1))}})});function Dl(t){"@babel/helpers - typeof";return Dl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dl(t)}function Dq(t,e){if(Dl(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Dl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Eq(t){var e=Dq(t,"string");return Dl(e)=="symbol"?e:e+""}function cr(t,e,r){return(e=Eq(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Lx(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Cq(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Lx(Object(r),!0).forEach(function(n){cr(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Lx(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Mq="solveODE",Tq=["typed","add","subtract","multiply","divide","max","map","abs","isPositive","isNegative","larger","smaller","matrix","bignumber","unaryMinus"],_q=H(Mq,Tq,t=>{var{typed:e,add:r,subtract:n,multiply:i,divide:a,max:o,map:s,abs:u,isPositive:l,isNegative:c,larger:f,smaller:d,matrix:p,bignumber:h,unaryMinus:m}=t;function g(C){return function(A,E,D,M){var F=!(E.length===2&&(E.every(b)||E.every(qn)));if(F)throw new Error('"tspan" must be an Array of two numeric values or two units [tStart, tEnd]');var I=E[0],P=E[1],T=f(P,I),$=M.firstStep;if($!==void 0&&!l($))throw new Error('"firstStep" must be positive');var O=M.maxStep;if(O!==void 0&&!l(O))throw new Error('"maxStep" must be positive');var W=M.minStep;if(W&&c(W))throw new Error('"minStep" must be positive or zero');var R=[I,P,$,W,O].filter(L=>L!==void 0);if(!(R.every(b)||R.every(qn)))throw new Error('Inconsistent type of "t" dependant variables');for(var ie=1,te=M.tol?M.tol:1e-4,Z=M.minDelta?M.minDelta:.2,X=M.maxDelta?M.maxDelta:5,pe=M.maxIter?M.maxIter:1e4,de=[I,P,...D,O,W].some(ot),[G,V,U,K]=de?[h(C.a),h(C.c),h(C.b),h(C.bp)]:[C.a,C.c,C.b,C.bp],ae=$?T?$:m($):a(n(P,I),ie),B=[I],q=[D],j=n(U,K),oe=0,k=0,z=w(T),Y=x(T);z(B[oe],P);){var ne=[];ae=Y(B[oe],P,ae),ne.push(A(B[oe],q[oe]));for(var se=1;se<V.length;++se)ne.push(A(r(B[oe],i(V[se],ae)),r(q[oe],i(ae,G[se],ne))));var ue=o(u(s(i(j,ne),L=>qn(L)?L.value:L)));ue<te&&te/ue>1/4&&(B.push(r(B[oe],ae)),q.push(r(q[oe],i(ae,U,ne))),oe++);var ve=.84*(te/ue)**(1/5);if(d(ve,Z)?ve=Z:f(ve,X)&&(ve=X),ve=de?h(ve):ve,ae=i(ae,ve),O&&f(u(ae),O)?ae=T?O:m(O):W&&d(u(ae),W)&&(ae=T?W:m(W)),k++,k>pe)throw new Error("Maximum number of iterations reached, try changing options")}return{t:B,y:q}}}function y(C,A,E,D){var M=[[],[.5],[0,.75],[.2222222222222222,.3333333333333333,.4444444444444444]],F=[null,1/2,3/4,1],I=[2/9,1/3,4/9,0],P=[7/24,1/4,1/3,1/8],T={a:M,c:F,b:I,bp:P};return g(T)(C,A,E,D)}function N(C,A,E,D){var M=[[],[.2],[.075,.225],[.9777777777777777,-3.7333333333333334,3.5555555555555554],[2.9525986892242035,-11.595793324188385,9.822892851699436,-.2908093278463649],[2.8462752525252526,-10.757575757575758,8.906422717743473,.2784090909090909,-.2735313036020583],[.09114583333333333,0,.44923629829290207,.6510416666666666,-.322376179245283,.13095238095238096]],F=[null,1/5,3/10,4/5,8/9,1,1],I=[35/384,0,500/1113,125/192,-2187/6784,11/84,0],P=[5179/57600,0,7571/16695,393/640,-92097/339200,187/2100,1/40],T={a:M,c:F,b:I,bp:P};return g(T)(C,A,E,D)}function v(C,A,E,D){var M=D.method?D.method:"RK45",F={RK23:y,RK45:N};if(M.toUpperCase()in F){var I=Cq({},D);return delete I.method,F[M.toUpperCase()](C,A,E,I)}else{var P=Object.keys(F).map($=>'"'.concat($,'"')),T="".concat(P.slice(0,-1).join(", ")," and ").concat(P.slice(-1));throw new Error('Unavailable method "'.concat(M,'". Available methods are ').concat(T))}}function w(C){return C?d:f}function x(C){var A=C?f:d;return function(E,D,M){var F=r(E,M);return A(F,D)?n(D,E):M}}function b(C){return ot(C)||it(C)}function S(C,A,E,D){var M=v(C,A.toArray(),E.toArray(),D);return{t:p(M.t),y:p(M.y)}}return e("solveODE",{"function, Array, Array, Object":v,"function, Matrix, Matrix, Object":S,"function, Array, Array":(C,A,E)=>v(C,A,E,{}),"function, Matrix, Matrix":(C,A,E)=>S(C,A,E,{}),"function, Array, number | BigNumber | Unit":(C,A,E)=>{var D=v(C,A,[E],{});return{t:D.t,y:D.y.map(M=>M[0])}},"function, Matrix, number | BigNumber | Unit":(C,A,E)=>{var D=v(C,A.toArray(),[E],{});return{t:p(D.t),y:p(D.y.map(M=>M[0]))}},"function, Array, number | BigNumber | Unit, Object":(C,A,E,D)=>{var M=v(C,A,[E],D);return{t:M.t,y:M.y.map(F=>F[0])}},"function, Matrix, number | BigNumber | Unit, Object":(C,A,E,D)=>{var M=v(C,A.toArray(),[E],D);return{t:p(M.t),y:p(M.y.map(F=>F[0]))}}})}),Oq="erf",Fq=["typed"],Bq=H(Oq,Fq,t=>{var{typed:e}=t;return e("name",{number:function(o){var s=Math.abs(o);return s>=Rq?$a(o):s<=kq?$a(o)*r(s):s<=4?$a(o)*(1-n(s)):$a(o)*(1-i(s))},"Array | Matrix":e.referToSelf(a=>o=>st(o,a))});function r(a){var o=a*a,s=Ki[0][4]*o,u=o,l;for(l=0;l<3;l+=1)s=(s+Ki[0][l])*o,u=(u+hs[0][l])*o;return a*(s+Ki[0][3])/(u+hs[0][3])}function n(a){var o=Ki[1][8]*a,s=a,u;for(u=0;u<7;u+=1)o=(o+Ki[1][u])*a,s=(s+hs[1][u])*a;var l=(o+Ki[1][7])/(s+hs[1][7]),c=parseInt(a*16)/16,f=(a-c)*(a+c);return Math.exp(-c*c)*Math.exp(-f)*l}function i(a){var o=1/(a*a),s=Ki[2][5]*o,u=o,l;for(l=0;l<4;l+=1)s=(s+Ki[2][l])*o,u=(u+hs[2][l])*o;var c=o*(s+Ki[2][4])/(u+hs[2][4]);c=(Iq-c)/a,o=parseInt(a*16)/16;var f=(a-o)*(a+o);return Math.exp(-o*o)*Math.exp(-f)*c}}),kq=.46875,Iq=.5641895835477563,Ki=[[3.1611237438705655,113.86415415105016,377.485237685302,3209.3775891384694,.18577770618460315],[.5641884969886701,8.883149794388377,66.11919063714163,298.6351381974001,881.952221241769,1712.0476126340707,2051.0783778260716,1230.3393547979972,21531153547440383e-24],[.30532663496123236,.36034489994980445,.12578172611122926,.016083785148742275,.0006587491615298378,.016315387137302097]],hs=[[23.601290952344122,244.02463793444417,1282.6165260773723,2844.236833439171],[15.744926110709835,117.6939508913125,537.1811018620099,1621.3895745666903,3290.7992357334597,4362.619090143247,3439.3676741437216,1230.3393548037495],[2.568520192289822,1.8729528499234604,.5279051029514285,.06051834131244132,.0023352049762686918]],Rq=Math.pow(2,53),zx="zeta",Pq=["typed","config","multiply","pow","divide","factorial","equal","smallerEq","isNegative","gamma","sin","subtract","add","?Complex","?BigNumber","pi"],$q=H(zx,Pq,t=>{var{typed:e,config:r,multiply:n,pow:i,divide:a,factorial:o,equal:s,smallerEq:u,isNegative:l,gamma:c,sin:f,subtract:d,add:p,Complex:h,BigNumber:m,pi:g}=t;return e(zx,{number:b=>y(b,S=>S,()=>20),BigNumber:b=>y(b,S=>new m(S),()=>Math.abs(Math.log10(r.relTol))),Complex:N});function y(b,S,C){return s(b,0)?S(-.5):s(b,1)?S(NaN):isFinite(b)?v(b,S,C,A=>A):l(b)?S(NaN):S(1)}function N(b){return b.re===0&&b.im===0?new h(-.5):b.re===1?new h(NaN,NaN):b.re===1/0&&b.im===0?new h(1):b.im===1/0||b.re===-1/0?new h(NaN,NaN):v(b,S=>S,S=>Math.round(1.3*15+.9*Math.abs(S.im)),S=>S.re)}function v(b,S,C,A){var E=C(b);if(A(b)>-(E-1)/2)return x(b,S(E),S);var D=n(i(2,b),i(S(g),d(b,1)));return D=n(D,f(n(a(S(g),2),b))),D=n(D,c(d(1,b))),n(D,v(d(1,b),S,C,A))}function w(b,S){for(var C=b,A=b;u(A,S);A=p(A,1)){var E=a(n(o(p(S,d(A,1))),i(4,A)),n(o(d(S,A)),o(n(2,A))));C=p(C,E)}return n(S,C)}function x(b,S,C){for(var A=a(1,n(w(C(0),S),d(1,i(2,d(1,b))))),E=C(0),D=C(1);u(D,S);D=p(D,1))E=p(E,a(n((-1)**(D-1),w(D,S)),i(D,b)));return n(A,E)}}),qx="mode",Lq=["typed","isNaN","isNumeric"],zq=H(qx,Lq,t=>{var{typed:e,isNaN:r,isNumeric:n}=t;return e(qx,{"Array | Matrix":i,"...":function(o){return i(o)}});function i(a){a=Et(a.valueOf());var o=a.length;if(o===0)throw new Error("Cannot calculate mode of an empty array");for(var s={},u=[],l=0,c=0;c<a.length;c++){var f=a[c];if(n(f)&&r(f))throw new Error("Cannot calculate mode of an array containing NaN values");f in s||(s[f]=0),s[f]++,s[f]===l?u.push(f):s[f]>l&&(l=s[f],u=[f])}return u}});function pn(t,e,r){var n;return String(t).includes("Unexpected type")?(n=arguments.length>2?" (type: "+It(r)+", value: "+JSON.stringify(r)+")":" (type: "+t.data.actual+")",new TypeError("Cannot calculate "+e+", unexpected type of argument"+n)):String(t).includes("complex numbers")?(n=arguments.length>2?" (type: "+It(r)+", value: "+JSON.stringify(r)+")":"",new TypeError("Cannot calculate "+e+", no ordering relation is defined for complex numbers"+n)):t}var Ux="prod",qq=["typed","config","multiplyScalar","numeric"],Uq=H(Ux,qq,t=>{var{typed:e,config:r,multiplyScalar:n,numeric:i}=t;return e(Ux,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":function(s,u){throw new Error("prod(A, dim) is not yet supported")},"...":function(s){return a(s)}});function a(o){var s;if(eo(o,function(u){try{s=s===void 0?u:n(s,u)}catch(l){throw pn(l,"prod",u)}}),typeof s=="string"&&(s=i(s,io(s,r))),s===void 0)throw new Error("Cannot calculate prod of an empty array");return s}}),Hx="format",Hq=["typed"],Vq=H(Hx,Hq,t=>{var{typed:e}=t;return e(Hx,{any:pt,"any, Object | function | number | BigNumber":pt})}),Vx="bin",Wq=["typed","format"],jq=H(Vx,Wq,t=>{var{typed:e,format:r}=t;return e(Vx,{"number | BigNumber":function(i){return r(i,{notation:"bin"})},"number | BigNumber, number | BigNumber":function(i,a){return r(i,{notation:"bin",wordSize:a})}})}),Wx="oct",Gq=["typed","format"],Kq=H(Wx,Gq,t=>{var{typed:e,format:r}=t;return e(Wx,{"number | BigNumber":function(i){return r(i,{notation:"oct"})},"number | BigNumber, number | BigNumber":function(i,a){return r(i,{notation:"oct",wordSize:a})}})}),jx="hex",Jq=["typed","format"],Yq=H(jx,Jq,t=>{var{typed:e,format:r}=t;return e(jx,{"number | BigNumber":function(i){return r(i,{notation:"hex"})},"number | BigNumber, number | BigNumber":function(i,a){return r(i,{notation:"hex",wordSize:a})}})}),rM=/\$([\w.]+)/g,Gx="print",Zq=["typed"],nM=H(Gx,Zq,t=>{var{typed:e}=t;return e(Gx,{"string, Object | Array":Kx,"string, Object | Array, number | Object":Kx})});function Kx(t,e,r){return t.replace(rM,function(n,i){var a=i.split("."),o=e[a.shift()];for(o!==void 0&&o.isMatrix&&(o=o.toArray());a.length&&o!==void 0;){var s=a.shift();o=s?o[s]:o+"."}return o!==void 0?Vr(o)?o:pt(o,r):n})}var Jx="to",Xq=["typed","matrix","concat"],Qq=H(Jx,Xq,t=>{var{typed:e,matrix:r,concat:n}=t,i=$t({typed:e,matrix:r,concat:n});return e(Jx,{"Unit, Unit | string":(a,o)=>a.to(o)},i({Ds:!0}))}),Yx="isPrime",eU=["typed"],tU=H(Yx,eU,t=>{var{typed:e}=t;return e(Yx,{number:function(n){if(n<=3)return n>1;if(n%2===0||n%3===0)return!1;for(var i=5;i*i<=n;i+=6)if(n%i===0||n%(i+2)===0)return!1;return!0},bigint:function(n){if(n<=3n)return n>1n;if(n%2n===0n||n%3n===0n)return!1;for(var i=5n;i*i<=n;i+=6n)if(n%i===0n||n%(i+2n)===0n)return!1;return!0},BigNumber:function(n){if(n.lte(3))return n.gt(1);if(n.mod(2).eq(0)||n.mod(3).eq(0))return!1;if(n.lt(Math.pow(2,32))){for(var i=n.toNumber(),a=5;a*a<=i;a+=6)if(i%a===0||i%(a+2)===0)return!1;return!0}function o(N,v,w){for(var x=1;!v.eq(0);)v.mod(2).eq(0)?(v=v.div(2),N=N.mul(N).mod(w)):(v=v.sub(1),x=N.mul(x).mod(w));return x}var s=n.constructor.clone({precision:n.toFixed(0).length*2});n=new s(n);for(var u=0,l=n.sub(1);l.mod(2).eq(0);)l=l.div(2),u+=1;var c=null;if(n.lt("3317044064679887385961981"))c=[2,3,5,7,11,13,17,19,23,29,31,37,41].filter(N=>N<n);else{var f=Math.min(n.toNumber()-2,Math.floor(2*Math.pow(n.toFixed(0).length*Math.log(10),2)));c=[];for(var d=2;d<=f;d+=1)c.push(f)}for(var p=0;p<c.length;p+=1){var h=c[p],m=o(n.sub(n).add(h),l,n);if(!m.eq(1)){for(var g=0,y=m;!y.eq(n.sub(1));g+=1,y=y.mul(y).mod(n))if(g===u-1)return!1}}return!0},"Array | Matrix":e.referToSelf(r=>n=>st(n,r))})}),rU="numeric",nU=["number","?bignumber","?fraction"],iU=H(rU,nU,t=>{var{number:e,bignumber:r,fraction:n}=t,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},a={number:o=>e(o),BigNumber:r?o=>r(o):Fv,bigint:o=>BigInt(o),Fraction:n?o=>n(o):ZC};return function(s){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",l=arguments.length>2?arguments[2]:void 0;if(l!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var c=It(s);if(!(c in i))throw new TypeError("Cannot convert "+s+' of type "'+c+'"; valid input types are '+Object.keys(i).join(", "));if(!(u in a))throw new TypeError("Cannot convert "+s+' to type "'+u+'"; valid output types are '+Object.keys(a).join(", "));return u===c?s:a[u](s)}}),Zx="divideScalar",aU=["typed","numeric"],oU=H(Zx,aU,t=>{var{typed:e,numeric:r}=t;return e(Zx,{"number, number":function(i,a){return i/a},"Complex, Complex":function(i,a){return i.div(a)},"BigNumber, BigNumber":function(i,a){return i.div(a)},"bigint, bigint":function(i,a){return i/a},"Fraction, Fraction":function(i,a){return i.div(a)},"Unit, number | Complex | Fraction | BigNumber | Unit":(n,i)=>n.divide(i),"number | Fraction | Complex | BigNumber, Unit":(n,i)=>i.divideInto(n)})}),Xx="pow",sU=["typed","config","identity","multiply","matrix","inv","fraction","number","Complex"],uU=H(Xx,sU,t=>{var{typed:e,config:r,identity:n,multiply:i,matrix:a,inv:o,number:s,fraction:u,Complex:l}=t;return e(Xx,{"number, number":c,"Complex, Complex":function(h,m){return h.pow(m)},"BigNumber, BigNumber":function(h,m){return m.isInteger()||h>=0||r.predictable?h.pow(m):new l(h.toNumber(),0).pow(m.toNumber(),0)},"bigint, bigint":(p,h)=>p**h,"Fraction, Fraction":function(h,m){var g=h.pow(m);if(g!=null)return g;if(r.predictable)throw new Error("Result of pow is non-rational and cannot be expressed as a fraction");return c(h.valueOf(),m.valueOf())},"Array, number":f,"Array, BigNumber":function(h,m){return f(h,m.toNumber())},"Matrix, number":d,"Matrix, BigNumber":function(h,m){return d(h,m.toNumber())},"Unit, number | BigNumber":function(h,m){return h.pow(m)}});function c(p,h){if(r.predictable&&!$e(h)&&p<0)try{var m=u(h),g=s(m);if((h===g||Math.abs((h-g)/h)<1e-14)&&m.d%2n===1n)return(m.n%2n===0n?1:-1)*Math.pow(-p,h)}catch{}return r.predictable&&(p<-1&&h===1/0||p>-1&&p<0&&h===-1/0)?NaN:$e(h)||p>=0||r.predictable?uC(p,h):p*p<1&&h===1/0||p*p>1&&h===-1/0?0:new l(p,0).pow(h,0)}function f(p,h){if(!$e(h))throw new TypeError("For A^b, b must be an integer (value is "+h+")");var m=Ze(p);if(m.length!==2)throw new Error("For A^b, A must be 2 dimensional (A has "+m.length+" dimensions)");if(m[0]!==m[1])throw new Error("For A^b, A must be square (size is "+m[0]+"x"+m[1]+")");if(h<0)try{return f(o(p),-h)}catch(N){throw N.message==="Cannot calculate inverse, determinant is zero"?new TypeError("For A^b, when A is not invertible, b must be a positive integer (value is "+h+")"):N}for(var g=n(m[0]).valueOf(),y=p;h>=1;)(h&1)===1&&(g=i(y,g)),h>>=1,y=i(y,y);return g}function d(p,h){return a(f(p.valueOf(),h))}}),ms="Number of decimals in function round must be an integer",Qx="round",lU=["typed","config","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],cU=H(Qx,lU,t=>{var{typed:e,config:r,matrix:n,equalScalar:i,zeros:a,BigNumber:o,DenseMatrix:s}=t,u=Lr({typed:e,equalScalar:i}),l=pr({typed:e,DenseMatrix:s}),c=hi({typed:e});function f(d){return Math.abs(Pl(d).exponent)}return e(Qx,{number:function(p){var h=Du(p,f(r.relTol)),m=$r(p,h,r.relTol,r.absTol)?h:p;return Du(m)},"number, number":function(p,h){var m=f(r.relTol);if(h>=m)return Du(p,h);var g=Du(p,m),y=$r(p,g,r.relTol,r.absTol)?g:p;return Du(y,h)},"number, BigNumber":function(p,h){if(!h.isInteger())throw new TypeError(ms);return new o(p).toDecimalPlaces(h.toNumber())},Complex:function(p){return p.round()},"Complex, number":function(p,h){if(h%1)throw new TypeError(ms);return p.round(h)},"Complex, BigNumber":function(p,h){if(!h.isInteger())throw new TypeError(ms);var m=h.toNumber();return p.round(m)},BigNumber:function(p){var h=new o(p).toDecimalPlaces(f(r.relTol)),m=Yn(p,h,r.relTol,r.absTol)?h:p;return m.toDecimalPlaces(0)},"BigNumber, BigNumber":function(p,h){if(!h.isInteger())throw new TypeError(ms);var m=f(r.relTol);if(h>=m)return p.toDecimalPlaces(h.toNumber());var g=p.toDecimalPlaces(m),y=Yn(p,g,r.relTol,r.absTol)?g:p;return y.toDecimalPlaces(h.toNumber())},bigint:d=>d,"bigint, number":(d,p)=>d,"bigint, BigNumber":(d,p)=>d,Fraction:function(p){return p.round()},"Fraction, number":function(p,h){if(h%1)throw new TypeError(ms);return p.round(h)},"Fraction, BigNumber":function(p,h){if(!h.isInteger())throw new TypeError(ms);return p.round(h.toNumber())},"Unit, number, Unit":e.referToSelf(d=>function(p,h,m){var g=p.toNumeric(m);return m.multiply(d(g,h))}),"Unit, BigNumber, Unit":e.referToSelf(d=>(p,h,m)=>d(p,h.toNumber(),m)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(d=>(p,h,m)=>st(p,g=>d(g,h,m),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(d=>(p,h)=>d(p,0,h)),"Array | Matrix":e.referToSelf(d=>p=>st(p,d,!0)),"SparseMatrix, number | BigNumber":e.referToSelf(d=>(p,h)=>u(p,h,d,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(d=>(p,h)=>c(p,h,d,!1)),"Array, number | BigNumber":e.referToSelf(d=>(p,h)=>c(n(p),h,d,!1).valueOf()),"number | Complex | BigNumber | Fraction, SparseMatrix":e.referToSelf(d=>(p,h)=>i(p,0)?a(h.size(),h.storage()):l(h,p,d,!0)),"number | Complex | BigNumber | Fraction, DenseMatrix":e.referToSelf(d=>(p,h)=>i(p,0)?a(h.size(),h.storage()):c(h,p,d,!0)),"number | Complex | BigNumber | Fraction, Array":e.referToSelf(d=>(p,h)=>c(n(h),p,d,!0).valueOf())})}),ew="log",fU=["config","typed","typeOf","divideScalar","Complex"],dU=Math.log(16),pU=H(ew,fU,t=>{var{typed:e,typeOf:r,config:n,divideScalar:i,Complex:a}=t;function o(u){return u.log()}function s(u){return o(new a(u,0))}return e(ew,{number:function(l){return l>=0||n.predictable?gb(l):s(l)},bigint:_v(dU,gb,n,s),Complex:o,BigNumber:function(l){return!l.isNegative()||n.predictable?l.ln():s(l.toNumber())},"any, any":e.referToSelf(u=>(l,c)=>{if(r(l)==="Fraction"&&r(c)==="Fraction"){var f=l.log(c);if(f!==null)return f}return i(u(l),u(c))})})}),tw="log1p",hU=["typed","config","divideScalar","log","Complex"],mU=H(tw,hU,t=>{var{typed:e,config:r,divideScalar:n,log:i,Complex:a}=t;return e(tw,{number:function(u){return u>=-1||r.predictable?d8(u):o(new a(u,0))},Complex:o,BigNumber:function(u){var l=u.plus(1);return!l.isNegative()||r.predictable?l.ln():o(new a(u.toNumber(),0))},"Array | Matrix":e.referToSelf(s=>u=>st(u,s)),"any, any":e.referToSelf(s=>(u,l)=>n(s(u),i(l)))});function o(s){var u=s.re+1;return new a(Math.log(Math.sqrt(u*u+s.im*s.im)),Math.atan2(s.im,u))}}),rw="nthRoots",gU=["config","typed","divideScalar","Complex"],vU=H(rw,gU,t=>{var{typed:e,config:r,divideScalar:n,Complex:i}=t,a=[function(u){return new i(u,0)},function(u){return new i(0,u)},function(u){return new i(-u,0)},function(u){return new i(0,-u)}];function o(s,u){if(u<0)throw new Error("Root must be greater than zero");if(u===0)throw new Error("Root must be non-zero");if(u%1!==0)throw new Error("Root must be an integer");if(s===0||s.abs()===0)return[new i(0,0)];var l=typeof s=="number",c;(l||s.re===0||s.im===0)&&(l?c=2*+(s<0):s.im===0?c=2*+(s.re<0):c=2*+(s.im<0)+1);for(var f=s.arg(),d=s.abs(),p=[],h=Math.pow(d,1/u),m=0;m<u;m++){var g=(c+4*m)/u;if(g===Math.round(g)){p.push(a[g%4](h));continue}p.push(new i({r:h,phi:(f+2*Math.PI*m)/u}))}return p}return e(rw,{Complex:function(u){return o(u,2)},"Complex, number":o})}),nw="dotPow",yU=["typed","equalScalar","matrix","pow","DenseMatrix","concat","SparseMatrix"],bU=H(nw,yU,t=>{var{typed:e,equalScalar:r,matrix:n,pow:i,DenseMatrix:a,concat:o,SparseMatrix:s}=t,u=hn({typed:e}),l=Ri({typed:e,SparseMatrix:s}),c=Lr({typed:e,equalScalar:r}),f=pr({typed:e,DenseMatrix:a}),d=$t({typed:e,matrix:n,concat:o}),p={};for(var h in i.signatures)Object.prototype.hasOwnProperty.call(i.signatures,h)&&!h.includes("Matrix")&&!h.includes("Array")&&(p[h]=i.signatures[h]);var m=e(p);return e(nw,d({elop:m,SS:l,DS:u,Ss:c,sS:f}))}),iw="dotDivide",xU=["typed","matrix","equalScalar","divideScalar","DenseMatrix","concat","SparseMatrix"],wU=H(iw,xU,t=>{var{typed:e,matrix:r,equalScalar:n,divideScalar:i,DenseMatrix:a,concat:o,SparseMatrix:s}=t,u=mi({typed:e,equalScalar:n}),l=hn({typed:e}),c=Ri({typed:e,SparseMatrix:s}),f=Lr({typed:e,equalScalar:n}),d=pr({typed:e,DenseMatrix:a}),p=$t({typed:e,matrix:r,concat:o});return e(iw,p({elop:i,SS:c,DS:l,SD:u,Ss:f,sS:d}))});function $l(t){var{DenseMatrix:e}=t;return function(n,i,a){var o=n.size();if(o.length!==2)throw new RangeError("Matrix must be two dimensional (size: "+pt(o)+")");var s=o[0],u=o[1];if(s!==u)throw new RangeError("Matrix must be square (size: "+pt(o)+")");var l=[];if(We(i)){var c=i.size(),f=i._data;if(c.length===1){if(c[0]!==s)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var d=0;d<s;d++)l[d]=[f[d]];return new e({data:l,size:[s,1],datatype:i._datatype})}if(c.length===2){if(c[0]!==s||c[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(ld(i)){if(a){l=[];for(var p=0;p<s;p++)l[p]=[f[p][0]];return new e({data:l,size:[s,1],datatype:i._datatype})}return i}if(_o(i)){for(var h=0;h<s;h++)l[h]=[0];for(var m=i._values,g=i._index,y=i._ptr,N=y[1],v=y[0];v<N;v++){var w=g[v];l[w][0]=m[v]}return new e({data:l,size:[s,1],datatype:i._datatype})}}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if(Bt(i)){var x=Ze(i);if(x.length===1){if(x[0]!==s)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var b=0;b<s;b++)l[b]=[i[b]];return new e({data:l,size:[s,1]})}if(x.length===2){if(x[0]!==s||x[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var S=0;S<s;S++)l[S]=[i[S][0]];return new e({data:l,size:[s,1]})}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}var aw="lsolve",NU=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],AU=H(aw,NU,t=>{var{typed:e,matrix:r,divideScalar:n,multiplyScalar:i,subtractScalar:a,equalScalar:o,DenseMatrix:s}=t,u=$l({DenseMatrix:s});return e(aw,{"SparseMatrix, Array | Matrix":function(d,p){return c(d,p)},"DenseMatrix, Array | Matrix":function(d,p){return l(d,p)},"Array, Array | Matrix":function(d,p){var h=r(d),m=l(h,p);return m.valueOf()}});function l(f,d){d=u(f,d,!0);for(var p=d._data,h=f._size[0],m=f._size[1],g=[],y=f._data,N=0;N<m;N++){var v=p[N][0]||0,w=void 0;if(o(v,0))w=0;else{var x=y[N][N];if(o(x,0))throw new Error("Linear system cannot be solved since matrix is singular");w=n(v,x);for(var b=N+1;b<h;b++)p[b]=[a(p[b][0]||0,i(w,y[b][N]))]}g[N]=[w]}return new s({data:g,size:[h,1]})}function c(f,d){d=u(f,d,!0);for(var p=d._data,h=f._size[0],m=f._size[1],g=f._values,y=f._index,N=f._ptr,v=[],w=0;w<m;w++){var x=p[w][0]||0;if(o(x,0))v[w]=[0];else{for(var b=0,S=[],C=[],A=N[w],E=N[w+1],D=A;D<E;D++){var M=y[D];M===w?b=g[D]:M>w&&(S.push(g[D]),C.push(M))}if(o(b,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var F=n(x,b),I=0,P=C.length;I<P;I++){var T=C[I];p[T]=[a(p[T][0]||0,i(F,S[I]))]}v[w]=[F]}}return new s({data:v,size:[h,1]})}}),ow="usolve",SU=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],DU=H(ow,SU,t=>{var{typed:e,matrix:r,divideScalar:n,multiplyScalar:i,subtractScalar:a,equalScalar:o,DenseMatrix:s}=t,u=$l({DenseMatrix:s});return e(ow,{"SparseMatrix, Array | Matrix":function(d,p){return c(d,p)},"DenseMatrix, Array | Matrix":function(d,p){return l(d,p)},"Array, Array | Matrix":function(d,p){var h=r(d),m=l(h,p);return m.valueOf()}});function l(f,d){d=u(f,d,!0);for(var p=d._data,h=f._size[0],m=f._size[1],g=[],y=f._data,N=m-1;N>=0;N--){var v=p[N][0]||0,w=void 0;if(o(v,0))w=0;else{var x=y[N][N];if(o(x,0))throw new Error("Linear system cannot be solved since matrix is singular");w=n(v,x);for(var b=N-1;b>=0;b--)p[b]=[a(p[b][0]||0,i(w,y[b][N]))]}g[N]=[w]}return new s({data:g,size:[h,1]})}function c(f,d){d=u(f,d,!0);for(var p=d._data,h=f._size[0],m=f._size[1],g=f._values,y=f._index,N=f._ptr,v=[],w=m-1;w>=0;w--){var x=p[w][0]||0;if(o(x,0))v[w]=[0];else{for(var b=0,S=[],C=[],A=N[w],E=N[w+1],D=E-1;D>=A;D--){var M=y[D];M===w?b=g[D]:M<w&&(S.push(g[D]),C.push(M))}if(o(b,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var F=n(x,b),I=0,P=C.length;I<P;I++){var T=C[I];p[T]=[a(p[T][0],i(F,S[I]))]}v[w]=[F]}}return new s({data:v,size:[h,1]})}}),sw="lsolveAll",EU=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],CU=H(sw,EU,t=>{var{typed:e,matrix:r,divideScalar:n,multiplyScalar:i,subtractScalar:a,equalScalar:o,DenseMatrix:s}=t,u=$l({DenseMatrix:s});return e(sw,{"SparseMatrix, Array | Matrix":function(d,p){return c(d,p)},"DenseMatrix, Array | Matrix":function(d,p){return l(d,p)},"Array, Array | Matrix":function(d,p){var h=r(d),m=l(h,p);return m.map(g=>g.valueOf())}});function l(f,d){for(var p=[u(f,d,!0)._data.map(C=>C[0])],h=f._data,m=f._size[0],g=f._size[1],y=0;y<g;y++)for(var N=p.length,v=0;v<N;v++){var w=p[v];if(o(h[y][y],0))if(o(w[y],0)){if(v===0){var b=[...w];b[y]=1;for(var S=y+1;S<g;S++)b[S]=a(b[S],h[S][y]);p.push(b)}}else{if(v===0)return[];p.splice(v,1),v-=1,N-=1}else{w[y]=n(w[y],h[y][y]);for(var x=y+1;x<g;x++)w[x]=a(w[x],i(w[y],h[x][y]))}}return p.map(C=>new s({data:C.map(A=>[A]),size:[m,1]}))}function c(f,d){for(var p=[u(f,d,!0)._data.map(ie=>ie[0])],h=f._size[0],m=f._size[1],g=f._values,y=f._index,N=f._ptr,v=0;v<m;v++)for(var w=p.length,x=0;x<w;x++){for(var b=p[x],S=[],C=[],A=N[v],E=N[v+1],D=0,M=A;M<E;M++){var F=y[M];F===v?D=g[M]:F>v&&(S.push(g[M]),C.push(F))}if(o(D,0))if(o(b[v],0)){if(x===0){var $=[...b];$[v]=1;for(var O=0,W=C.length;O<W;O++){var R=C[O];$[R]=a($[R],S[O])}p.push($)}}else{if(x===0)return[];p.splice(x,1),x-=1,w-=1}else{b[v]=n(b[v],D);for(var I=0,P=C.length;I<P;I++){var T=C[I];b[T]=a(b[T],i(b[v],S[I]))}}}return p.map(ie=>new s({data:ie.map(te=>[te]),size:[h,1]}))}}),uw="usolveAll",MU=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],TU=H(uw,MU,t=>{var{typed:e,matrix:r,divideScalar:n,multiplyScalar:i,subtractScalar:a,equalScalar:o,DenseMatrix:s}=t,u=$l({DenseMatrix:s});return e(uw,{"SparseMatrix, Array | Matrix":function(d,p){return c(d,p)},"DenseMatrix, Array | Matrix":function(d,p){return l(d,p)},"Array, Array | Matrix":function(d,p){var h=r(d),m=l(h,p);return m.map(g=>g.valueOf())}});function l(f,d){for(var p=[u(f,d,!0)._data.map(C=>C[0])],h=f._data,m=f._size[0],g=f._size[1],y=g-1;y>=0;y--)for(var N=p.length,v=0;v<N;v++){var w=p[v];if(o(h[y][y],0))if(o(w[y],0)){if(v===0){var b=[...w];b[y]=1;for(var S=y-1;S>=0;S--)b[S]=a(b[S],h[S][y]);p.push(b)}}else{if(v===0)return[];p.splice(v,1),v-=1,N-=1}else{w[y]=n(w[y],h[y][y]);for(var x=y-1;x>=0;x--)w[x]=a(w[x],i(w[y],h[x][y]))}}return p.map(C=>new s({data:C.map(A=>[A]),size:[m,1]}))}function c(f,d){for(var p=[u(f,d,!0)._data.map(ie=>ie[0])],h=f._size[0],m=f._size[1],g=f._values,y=f._index,N=f._ptr,v=m-1;v>=0;v--)for(var w=p.length,x=0;x<w;x++){for(var b=p[x],S=[],C=[],A=N[v],E=N[v+1],D=0,M=E-1;M>=A;M--){var F=y[M];F===v?D=g[M]:F<v&&(S.push(g[M]),C.push(F))}if(o(D,0))if(o(b[v],0)){if(x===0){var $=[...b];$[v]=1;for(var O=0,W=C.length;O<W;O++){var R=C[O];$[R]=a($[R],S[O])}p.push($)}}else{if(x===0)return[];p.splice(x,1),x-=1,w-=1}else{b[v]=n(b[v],D);for(var I=0,P=C.length;I<P;I++){var T=C[I];b[T]=a(b[T],i(b[v],S[I]))}}}return p.map(ie=>new s({data:ie.map(te=>[te]),size:[h,1]}))}}),_U="matAlgo08xS0Sid",OU=["typed","equalScalar"],Bv=H(_U,OU,t=>{var{typed:e,equalScalar:r}=t;return function(i,a,o){var s=i._values,u=i._index,l=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=a._values,p=a._index,h=a._ptr,m=a._size,g=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(c.length!==m.length)throw new ht(c.length,m.length);if(c[0]!==m[0]||c[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+m+")");if(!s||!d)throw new Error("Cannot perform operation on Pattern Sparse Matrices");var y=c[0],N=c[1],v,w=r,x=0,b=o;typeof f=="string"&&f===g&&f!=="mixed"&&(v=f,w=e.find(r,[v,v]),x=e.convert(0,v),b=e.find(o,[v,v]));for(var S=[],C=[],A=[],E=[],D=[],M,F,I,P,T=0;T<N;T++){A[T]=C.length;var $=T+1;for(F=l[T],I=l[T+1],M=F;M<I;M++)P=u[M],D[P]=$,E[P]=s[M],C.push(P);for(F=h[T],I=h[T+1],M=F;M<I;M++)P=p[M],D[P]===$&&(E[P]=b(E[P],d[M]));for(M=A[T];M<C.length;){P=C[M];var O=E[P];w(O,x)?C.splice(M,1):(S.push(O),M++)}}return A[N]=C.length,i.createSparseMatrix({values:S,index:C,ptr:A,size:[y,N],datatype:f===i._datatype&&g===a._datatype?v:void 0})}}),kv=H("useMatrixForArrayScalar",["typed","matrix"],t=>{var{typed:e,matrix:r}=t;return{"Array, number":e.referTo("DenseMatrix, number",n=>(i,a)=>n(r(i),a).valueOf()),"Array, BigNumber":e.referTo("DenseMatrix, BigNumber",n=>(i,a)=>n(r(i),a).valueOf()),"number, Array":e.referTo("number, DenseMatrix",n=>(i,a)=>n(i,r(a)).valueOf()),"BigNumber, Array":e.referTo("BigNumber, DenseMatrix",n=>(i,a)=>n(i,r(a)).valueOf())}}),lw="leftShift",FU=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],BU=H(lw,FU,t=>{var{typed:e,matrix:r,equalScalar:n,zeros:i,DenseMatrix:a,concat:o}=t,s=oo({typed:e}),u=mi({typed:e,equalScalar:n}),l=Bv({typed:e,equalScalar:n}),c=Zo({typed:e,DenseMatrix:a}),f=Lr({typed:e,equalScalar:n}),d=hi({typed:e}),p=$t({typed:e,matrix:r,concat:o}),h=kv({typed:e,matrix:r});return e(lw,{"number, number":pC,"BigNumber, BigNumber":r7,"bigint, bigint":(m,g)=>m<<g,"SparseMatrix, number | BigNumber":e.referToSelf(m=>(g,y)=>n(y,0)?g.clone():f(g,y,m,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(m=>(g,y)=>n(y,0)?g.clone():d(g,y,m,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(m=>(g,y)=>n(g,0)?i(y.size(),y.storage()):c(y,g,m,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(m=>(g,y)=>n(g,0)?i(y.size(),y.storage()):d(y,g,m,!0))},h,p({SS:l,DS:s,SD:u}))}),cw="rightArithShift",kU=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],IU=H(cw,kU,t=>{var{typed:e,matrix:r,equalScalar:n,zeros:i,DenseMatrix:a,concat:o}=t,s=oo({typed:e}),u=mi({typed:e,equalScalar:n}),l=Bv({typed:e,equalScalar:n}),c=Zo({typed:e,DenseMatrix:a}),f=Lr({typed:e,equalScalar:n}),d=hi({typed:e}),p=$t({typed:e,matrix:r,concat:o}),h=kv({typed:e,matrix:r});return e(cw,{"number, number":hC,"BigNumber, BigNumber":n7,"bigint, bigint":(m,g)=>m>>g,"SparseMatrix, number | BigNumber":e.referToSelf(m=>(g,y)=>n(y,0)?g.clone():f(g,y,m,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(m=>(g,y)=>n(y,0)?g.clone():d(g,y,m,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(m=>(g,y)=>n(g,0)?i(y.size(),y.storage()):c(y,g,m,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(m=>(g,y)=>n(g,0)?i(y.size(),y.storage()):d(y,g,m,!0))},h,p({SS:l,DS:s,SD:u}))}),fw="rightLogShift",RU=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],PU=H(fw,RU,t=>{var{typed:e,matrix:r,equalScalar:n,zeros:i,DenseMatrix:a,concat:o}=t,s=oo({typed:e}),u=mi({typed:e,equalScalar:n}),l=Bv({typed:e,equalScalar:n}),c=Zo({typed:e,DenseMatrix:a}),f=Lr({typed:e,equalScalar:n}),d=hi({typed:e}),p=$t({typed:e,matrix:r,concat:o}),h=kv({typed:e,matrix:r});return e(fw,{"number, number":mC,"SparseMatrix, number | BigNumber":e.referToSelf(m=>(g,y)=>n(y,0)?g.clone():f(g,y,m,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(m=>(g,y)=>n(y,0)?g.clone():d(g,y,m,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(m=>(g,y)=>n(g,0)?i(y.size(),y.storage()):c(y,g,m,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(m=>(g,y)=>n(g,0)?i(y.size(),y.storage()):d(y,g,m,!0))},h,p({SS:l,DS:s,SD:u}))}),dw="and",$U=["typed","matrix","equalScalar","zeros","not","concat"],iM=H(dw,$U,t=>{var{typed:e,matrix:r,equalScalar:n,zeros:i,not:a,concat:o}=t,s=mi({typed:e,equalScalar:n}),u=Sp({typed:e,equalScalar:n}),l=Lr({typed:e,equalScalar:n}),c=hi({typed:e}),f=$t({typed:e,matrix:r,concat:o});return e(dw,{"number, number":sg,"Complex, Complex":function(p,h){return(p.re!==0||p.im!==0)&&(h.re!==0||h.im!==0)},"BigNumber, BigNumber":function(p,h){return!p.isZero()&&!h.isZero()&&!p.isNaN()&&!h.isNaN()},"bigint, bigint":sg,"Unit, Unit":e.referToSelf(d=>(p,h)=>d(p.value||0,h.value||0)),"SparseMatrix, any":e.referToSelf(d=>(p,h)=>a(h)?i(p.size(),p.storage()):l(p,h,d,!1)),"DenseMatrix, any":e.referToSelf(d=>(p,h)=>a(h)?i(p.size(),p.storage()):c(p,h,d,!1)),"any, SparseMatrix":e.referToSelf(d=>(p,h)=>a(p)?i(p.size(),p.storage()):l(h,p,d,!0)),"any, DenseMatrix":e.referToSelf(d=>(p,h)=>a(p)?i(p.size(),p.storage()):c(h,p,d,!0)),"Array, any":e.referToSelf(d=>(p,h)=>d(r(p),h).valueOf()),"any, Array":e.referToSelf(d=>(p,h)=>d(p,r(h)).valueOf())},f({SS:u,DS:s}))}),Ad="compare",LU=["typed","config","matrix","equalScalar","BigNumber","Fraction","DenseMatrix","concat"],zU=H(Ad,LU,t=>{var{typed:e,config:r,equalScalar:n,matrix:i,BigNumber:a,Fraction:o,DenseMatrix:s,concat:u}=t,l=hn({typed:e}),c=Ap({typed:e,equalScalar:n}),f=pr({typed:e,DenseMatrix:s}),d=$t({typed:e,matrix:i,concat:u}),p=iu({typed:e});return e(Ad,qU({typed:e,config:r}),{"boolean, boolean":function(m,g){return m===g?0:m>g?1:-1},"BigNumber, BigNumber":function(m,g){return Yn(m,g,r.relTol,r.absTol)?new a(0):new a(m.cmp(g))},"bigint, bigint":function(m,g){return m===g?0n:m>g?1n:-1n},"Fraction, Fraction":function(m,g){return new o(m.compare(g))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},p,d({SS:c,DS:l,Ss:f}))}),qU=H(Ad,["typed","config"],t=>{var{typed:e,config:r}=t;return e(Ad,{"number, number":function(i,a){return $r(i,a,r.relTol,r.absTol)?0:i>a?1:-1}})});function Iv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function UU(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var Uh,pw;function HU(){return pw||(pw=1,Uh=function t(e,r){var n=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,i=/(^[ ]*|[ ]*$)/g,a=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,o=/^0x[0-9a-f]+$/i,s=/^0/,u=function(v){return t.insensitive&&(""+v).toLowerCase()||""+v},l=u(e).replace(i,"")||"",c=u(r).replace(i,"")||"",f=l.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),d=c.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),p=parseInt(l.match(o),16)||f.length!==1&&l.match(a)&&Date.parse(l),h=parseInt(c.match(o),16)||p&&c.match(a)&&Date.parse(c)||null,m,g;if(h){if(p<h)return-1;if(p>h)return 1}for(var y=0,N=Math.max(f.length,d.length);y<N;y++){if(m=!(f[y]||"").match(s)&&parseFloat(f[y])||f[y]||0,g=!(d[y]||"").match(s)&&parseFloat(d[y])||d[y]||0,isNaN(m)!==isNaN(g))return isNaN(m)?1:-1;if(typeof m!=typeof g&&(m+="",g+=""),m<g)return-1;if(m>g)return 1}return 0}),Uh}var VU=HU();const gs=Iv(VU);var hw="compareNatural",WU=["typed","compare"],jU=H(hw,WU,t=>{var{typed:e,compare:r}=t,n=r.signatures["boolean,boolean"];return e(hw,{"any, any":i});function i(u,l){var c=It(u),f=It(l),d;if((c==="number"||c==="BigNumber"||c==="Fraction")&&(f==="number"||f==="BigNumber"||f==="Fraction"))return d=r(u,l),d.toString()!=="0"?d>0?1:-1:gs(c,f);var p=["Array","DenseMatrix","SparseMatrix"];if(p.includes(c)||p.includes(f))return d=a(i,u,l),d!==0?d:gs(c,f);if(c!==f)return gs(c,f);if(c==="Complex")return GU(u,l);if(c==="Unit")return u.equalBase(l)?i(u.value,l.value):o(i,u.formatUnits(),l.formatUnits());if(c==="boolean")return n(u,l);if(c==="string")return gs(u,l);if(c==="Object")return s(i,u,l);if(c==="null"||c==="undefined")return 0;throw new TypeError('Unsupported type of value "'+c+'"')}function a(u,l,c){return _o(l)&&_o(c)?o(u,l.toJSON().values,c.toJSON().values):_o(l)?a(u,l.toArray(),c):_o(c)?a(u,l,c.toArray()):ld(l)?a(u,l.toJSON().data,c):ld(c)?a(u,l,c.toJSON().data):Array.isArray(l)?Array.isArray(c)?o(u,l,c):a(u,l,[c]):a(u,[l],c)}function o(u,l,c){for(var f=0,d=Math.min(l.length,c.length);f<d;f++){var p=u(l[f],c[f]);if(p!==0)return p}return l.length>c.length?1:l.length<c.length?-1:0}function s(u,l,c){var f=Object.keys(l),d=Object.keys(c);f.sort(gs),d.sort(gs);var p=o(u,f,d);if(p!==0)return p;for(var h=0;h<f.length;h++){var m=u(l[f[h]],c[d[h]]);if(m!==0)return m}return 0}});function GU(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0}var mw="compareText",KU=["typed","matrix","concat"];eg.signature="any, any";var JU=H(mw,KU,t=>{var{typed:e,matrix:r,concat:n}=t,i=$t({typed:e,matrix:r,concat:n});return e(mw,eg,i({elop:eg,Ds:!0}))}),Sd="equal",YU=["typed","matrix","equalScalar","DenseMatrix","concat","SparseMatrix"],ZU=H(Sd,YU,t=>{var{typed:e,matrix:r,equalScalar:n,DenseMatrix:i,concat:a,SparseMatrix:o}=t,s=hn({typed:e}),u=Ri({typed:e,SparseMatrix:o}),l=pr({typed:e,DenseMatrix:i}),c=$t({typed:e,matrix:r,concat:a});return e(Sd,XU({typed:e,equalScalar:n}),c({elop:n,SS:u,DS:s,Ss:l}))}),XU=H(Sd,["typed","equalScalar"],t=>{var{typed:e,equalScalar:r}=t;return e(Sd,{"any, any":function(i,a){return i===null?a===null:a===null?i===null:i===void 0?a===void 0:a===void 0?i===void 0:r(i,a)}})}),gw="equalText",QU=["typed","compareText","isZero"],eH=H(gw,QU,t=>{var{typed:e,compareText:r,isZero:n}=t;return e(gw,{"any, any":function(a,o){return n(r(a,o))}})}),Dd="smaller",tH=["typed","config","bignumber","matrix","DenseMatrix","concat","SparseMatrix"],rH=H(Dd,tH,t=>{var{typed:e,config:r,bignumber:n,matrix:i,DenseMatrix:a,concat:o,SparseMatrix:s}=t,u=hn({typed:e}),l=Ri({typed:e,SparseMatrix:s}),c=pr({typed:e,DenseMatrix:a}),f=$t({typed:e,matrix:i,concat:o}),d=iu({typed:e});function p(h,m){return h.lt(m)&&!Yn(h,m,r.relTol,r.absTol)}return e(Dd,nH({typed:e,config:r}),{"boolean, boolean":(h,m)=>h<m,"BigNumber, BigNumber":p,"bigint, bigint":(h,m)=>h<m,"Fraction, Fraction":(h,m)=>h.compare(m)===-1,"Fraction, BigNumber":function(m,g){return p(n(m),g)},"BigNumber, Fraction":function(m,g){return p(m,n(g))},"Complex, Complex":function(m,g){throw new TypeError("No ordering relation is defined for complex numbers")}},d,f({SS:l,DS:u,Ss:c}))}),nH=H(Dd,["typed","config"],t=>{var{typed:e,config:r}=t;return e(Dd,{"number, number":function(i,a){return i<a&&!$r(i,a,r.relTol,r.absTol)}})}),Ed="smallerEq",iH=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],aH=H(Ed,iH,t=>{var{typed:e,config:r,matrix:n,DenseMatrix:i,concat:a,SparseMatrix:o}=t,s=hn({typed:e}),u=Ri({typed:e,SparseMatrix:o}),l=pr({typed:e,DenseMatrix:i}),c=$t({typed:e,matrix:n,concat:a}),f=iu({typed:e});return e(Ed,oH({typed:e,config:r}),{"boolean, boolean":(d,p)=>d<=p,"BigNumber, BigNumber":function(p,h){return p.lte(h)||Yn(p,h,r.relTol,r.absTol)},"bigint, bigint":(d,p)=>d<=p,"Fraction, Fraction":(d,p)=>d.compare(p)!==1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},f,c({SS:u,DS:s,Ss:l}))}),oH=H(Ed,["typed","config"],t=>{var{typed:e,config:r}=t;return e(Ed,{"number, number":function(i,a){return i<=a||$r(i,a,r.relTol,r.absTol)}})}),Cd="larger",sH=["typed","config","bignumber","matrix","DenseMatrix","concat","SparseMatrix"],uH=H(Cd,sH,t=>{var{typed:e,config:r,bignumber:n,matrix:i,DenseMatrix:a,concat:o,SparseMatrix:s}=t,u=hn({typed:e}),l=Ri({typed:e,SparseMatrix:s}),c=pr({typed:e,DenseMatrix:a}),f=$t({typed:e,matrix:i,concat:o}),d=iu({typed:e});function p(h,m){return h.gt(m)&&!Yn(h,m,r.relTol,r.absTol)}return e(Cd,lH({typed:e,config:r}),{"boolean, boolean":(h,m)=>h>m,"BigNumber, BigNumber":p,"bigint, bigint":(h,m)=>h>m,"Fraction, Fraction":(h,m)=>h.compare(m)===1,"Fraction, BigNumber":function(m,g){return p(n(m),g)},"BigNumber, Fraction":function(m,g){return p(m,n(g))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},d,f({SS:l,DS:u,Ss:c}))}),lH=H(Cd,["typed","config"],t=>{var{typed:e,config:r}=t;return e(Cd,{"number, number":function(i,a){return i>a&&!$r(i,a,r.relTol,r.absTol)}})}),Md="largerEq",cH=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],fH=H(Md,cH,t=>{var{typed:e,config:r,matrix:n,DenseMatrix:i,concat:a,SparseMatrix:o}=t,s=hn({typed:e}),u=Ri({typed:e,SparseMatrix:o}),l=pr({typed:e,DenseMatrix:i}),c=$t({typed:e,matrix:n,concat:a}),f=iu({typed:e});return e(Md,dH({typed:e,config:r}),{"boolean, boolean":(d,p)=>d>=p,"BigNumber, BigNumber":function(p,h){return p.gte(h)||Yn(p,h,r.relTol,r.absTol)},"bigint, bigint":function(p,h){return p>=h},"Fraction, Fraction":(d,p)=>d.compare(p)!==-1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},f,c({SS:u,DS:s,Ss:l}))}),dH=H(Md,["typed","config"],t=>{var{typed:e,config:r}=t;return e(Md,{"number, number":function(i,a){return i>=a||$r(i,a,r.relTol,r.absTol)}})}),vw="deepEqual",pH=["typed","equal"],hH=H(vw,pH,t=>{var{typed:e,equal:r}=t;return e(vw,{"any, any":function(a,o){return n(a.valueOf(),o.valueOf())}});function n(i,a){if(Array.isArray(i))if(Array.isArray(a)){var o=i.length;if(o!==a.length)return!1;for(var s=0;s<o;s++)if(!n(i[s],a[s]))return!1;return!0}else return!1;else return Array.isArray(a)?!1:r(i,a)}}),Td="unequal",mH=["typed","config","equalScalar","matrix","DenseMatrix","concat","SparseMatrix"],gH=H(Td,mH,t=>{var{typed:e,config:r,equalScalar:n,matrix:i,DenseMatrix:a,concat:o,SparseMatrix:s}=t,u=hn({typed:e}),l=Ri({typed:e,SparseMatrix:s}),c=pr({typed:e,DenseMatrix:a}),f=$t({typed:e,matrix:i,concat:o});return e(Td,vH({typed:e,equalScalar:n}),f({elop:d,SS:l,DS:u,Ss:c}));function d(p,h){return!n(p,h)}}),vH=H(Td,["typed","equalScalar"],t=>{var{typed:e,equalScalar:r}=t;return e(Td,{"any, any":function(i,a){return i===null?a!==null:a===null?i!==null:i===void 0?a!==void 0:a===void 0?i!==void 0:!r(i,a)}})}),yw="partitionSelect",yH=["typed","isNumeric","isNaN","compare"],bH=H(yw,yH,t=>{var{typed:e,isNumeric:r,isNaN:n,compare:i}=t,a=i,o=(l,c)=>-i(l,c);return e(yw,{"Array | Matrix, number":function(c,f){return s(c,f,a)},"Array | Matrix, number, string":function(c,f,d){if(d==="asc")return s(c,f,a);if(d==="desc")return s(c,f,o);throw new Error('Compare string must be "asc" or "desc"')},"Array | Matrix, number, function":s});function s(l,c,f){if(!$e(c)||c<0)throw new Error("k must be a non-negative integer");if(We(l)){var d=l.size();if(d.length>1)throw new Error("Only one dimensional matrices supported");return u(l.valueOf(),c,f)}if(Array.isArray(l))return u(l,c,f)}function u(l,c,f){if(c>=l.length)throw new Error("k out of bounds");for(var d=0;d<l.length;d++)if(r(l[d])&&n(l[d]))return l[d];for(var p=0,h=l.length-1;p<h;){for(var m=p,g=h,y=l[Math.floor(Math.random()*(h-p+1))+p];m<g;)if(f(l[m],y)>=0){var N=l[g];l[g]=l[m],l[m]=N,--g}else++m;f(l[m],y)>0&&--m,c<=m?h=m:p=m+1}return l[c]}}),bw="sort",xH=["typed","matrix","compare","compareNatural"],wH=H(bw,xH,t=>{var{typed:e,matrix:r,compare:n,compareNatural:i}=t,a=n,o=(c,f)=>-n(c,f);return e(bw,{Array:function(f){return u(f),f.sort(a)},Matrix:function(f){return l(f),r(f.toArray().sort(a),f.storage())},"Array, function":function(f,d){return u(f),f.sort(d)},"Matrix, function":function(f,d){return l(f),r(f.toArray().sort(d),f.storage())},"Array, string":function(f,d){return u(f),f.sort(s(d))},"Matrix, string":function(f,d){return l(f),r(f.toArray().sort(s(d)),f.storage())}});function s(c){if(c==="asc")return a;if(c==="desc")return o;if(c==="natural")return i;throw new Error('String "asc", "desc", or "natural" expected')}function u(c){if(Ze(c).length!==1)throw new Error("One dimensional array expected")}function l(c){if(c.size().length!==1)throw new Error("One dimensional matrix expected")}}),xw="max",NH=["typed","config","numeric","larger","isNaN"],aM=H(xw,NH,t=>{var{typed:e,config:r,numeric:n,larger:i,isNaN:a}=t;return e(xw,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":function(l,c){return Np(l,c.valueOf(),o)},"...":function(l){if(tu(l))throw new TypeError("Scalar values expected in function max");return s(l)}});function o(u,l){try{return i(u,l)?u:l}catch(c){throw pn(c,"max",l)}}function s(u){var l;if(eo(u,function(c){try{(a(c)||l===void 0||i(c,l))&&(l=c)}catch(f){throw pn(f,"max",c)}}),l===void 0)throw new Error("Cannot calculate max of an empty array");return typeof l=="string"&&(l=n(l,io(l,r))),l}}),ww="min",AH=["typed","config","numeric","smaller","isNaN"],oM=H(ww,AH,t=>{var{typed:e,config:r,numeric:n,smaller:i,isNaN:a}=t;return e(ww,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":function(l,c){return Np(l,c.valueOf(),o)},"...":function(l){if(tu(l))throw new TypeError("Scalar values expected in function min");return s(l)}});function o(u,l){try{return i(u,l)?u:l}catch(c){throw pn(c,"min",l)}}function s(u){var l;if(eo(u,function(c){try{(a(c)||l===void 0||i(c,l))&&(l=c)}catch(f){throw pn(f,"min",c)}}),l===void 0)throw new Error("Cannot calculate min of an empty array");return typeof l=="string"&&(l=n(l,io(l,r))),l}}),SH="ImmutableDenseMatrix",DH=["smaller","DenseMatrix"],EH=H(SH,DH,t=>{var{smaller:e,DenseMatrix:r}=t;function n(i,a){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(a&&!Vr(a))throw new Error("Invalid datatype: "+a);if(We(i)||Bt(i)){var o=new r(i,a);this._data=o._data,this._size=o._size,this._datatype=o._datatype,this._min=null,this._max=null}else if(i&&Bt(i.data)&&Bt(i.size))this._data=i.data,this._size=i.size,this._datatype=i.datatype,this._min=typeof i.min<"u"?i.min:null,this._max=typeof i.max<"u"?i.max:null;else{if(i)throw new TypeError("Unsupported type of data ("+It(i)+")");this._data=[],this._size=[0],this._datatype=a,this._min=null,this._max=null}}return n.prototype=new r,n.prototype.type="ImmutableDenseMatrix",n.prototype.isImmutableDenseMatrix=!0,n.prototype.subset=function(i){switch(arguments.length){case 1:{var a=r.prototype.subset.call(this,i);return We(a)?new n({data:a._data,size:a._size,datatype:a._datatype}):a}case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},n.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},n.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},n.prototype.clone=function(){return new n({data:et(this._data),size:et(this._size),datatype:this._datatype})},n.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.fromJSON=function(i){return new n(i)},n.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},n.prototype.min=function(){if(this._min===null){var i=null;this.forEach(function(a){(i===null||e(a,i))&&(i=a)}),this._min=i!==null?i:void 0}return this._min},n.prototype.max=function(){if(this._max===null){var i=null;this.forEach(function(a){(i===null||e(i,a))&&(i=a)}),this._max=i!==null?i:void 0}return this._max},n},{isClass:!0}),CH="Index",MH=["ImmutableDenseMatrix","getMatrixDataType"],TH=H(CH,MH,t=>{var{ImmutableDenseMatrix:e,getMatrixDataType:r}=t;function n(a){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._sourceSize=[],this._isScalar=!0;for(var o=0,s=arguments.length;o<s;o++){var u=arguments[o],l=Bt(u),c=We(u),f=typeof u,d=null;if(xv(u))this._dimensions.push(u),this._isScalar=!1;else if(l||c){var p=void 0;r(u)==="boolean"?(l&&(p=i(Nw(u).valueOf())),c&&(p=i(Nw(u._data).valueOf())),d=u.valueOf().length):p=i(u.valueOf()),this._dimensions.push(p);var h=p.size();(h.length!==1||h[0]!==1||d!==null)&&(this._isScalar=!1)}else if(f==="number")this._dimensions.push(i([u]));else if(f==="bigint")this._dimensions.push(i([Number(u)]));else if(f==="string")this._dimensions.push(u);else throw new TypeError("Dimension must be an Array, Matrix, number, bigint, string, or Range");this._sourceSize.push(d)}}n.prototype.type="Index",n.prototype.isIndex=!0;function i(a){for(var o=0,s=a.length;o<s;o++)if(typeof a[o]!="number"||!$e(a[o]))throw new TypeError("Index parameters must be positive integer numbers");return new e(a)}return n.prototype.clone=function(){var a=new n;return a._dimensions=et(this._dimensions),a._isScalar=this._isScalar,a._sourceSize=this._sourceSize,a},n.create=function(a){var o=new n;return n.apply(o,a),o},n.prototype.size=function(){for(var a=[],o=0,s=this._dimensions.length;o<s;o++){var u=this._dimensions[o];a[o]=typeof u=="string"?1:u.size()[0]}return a},n.prototype.max=function(){for(var a=[],o=0,s=this._dimensions.length;o<s;o++){var u=this._dimensions[o];a[o]=typeof u=="string"?u:u.max()}return a},n.prototype.min=function(){for(var a=[],o=0,s=this._dimensions.length;o<s;o++){var u=this._dimensions[o];a[o]=typeof u=="string"?u:u.min()}return a},n.prototype.forEach=function(a){for(var o=0,s=this._dimensions.length;o<s;o++)a(this._dimensions[o],o,this)},n.prototype.dimension=function(a){return typeof a!="number"?null:this._dimensions[a]||null},n.prototype.isObjectProperty=function(){return this._dimensions.length===1&&typeof this._dimensions[0]=="string"},n.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},n.prototype.isScalar=function(){return this._isScalar},n.prototype.toArray=function(){for(var a=[],o=0,s=this._dimensions.length;o<s;o++){var u=this._dimensions[o];a.push(typeof u=="string"?u:u.toArray())}return a},n.prototype.valueOf=n.prototype.toArray,n.prototype.toString=function(){for(var a=[],o=0,s=this._dimensions.length;o<s;o++){var u=this._dimensions[o];typeof u=="string"?a.push(JSON.stringify(u)):a.push(u.toString())}return"["+a.join(", ")+"]"},n.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},n.fromJSON=function(a){return n.create(a.dimensions)},n},{isClass:!0});function Nw(t){var e=[];return t.forEach((r,n)=>{r&&e.push(n)}),e}var _H="FibonacciHeap",OH=["smaller","larger"],FH=H(_H,OH,t=>{var{smaller:e,larger:r}=t,n=1/Math.log((1+Math.sqrt(5))/2);function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}i.prototype.type="FibonacciHeap",i.prototype.isFibonacciHeap=!0,i.prototype.insert=function(c,f){var d={key:c,value:f,degree:0};if(this._minimum){var p=this._minimum;d.left=p,d.right=p.right,p.right=d,d.right.left=d,e(c,p.key)&&(this._minimum=d)}else d.left=d,d.right=d,this._minimum=d;return this._size++,d},i.prototype.size=function(){return this._size},i.prototype.clear=function(){this._minimum=null,this._size=0},i.prototype.isEmpty=function(){return this._size===0},i.prototype.extractMinimum=function(){var c=this._minimum;if(c===null)return c;for(var f=this._minimum,d=c.degree,p=c.child;d>0;){var h=p.right;p.left.right=p.right,p.right.left=p.left,p.left=f,p.right=f.right,f.right=p,p.right.left=p,p.parent=null,p=h,d--}return c.left.right=c.right,c.right.left=c.left,c===c.right?f=null:(f=c.right,f=l(f,this._size)),this._size--,this._minimum=f,c},i.prototype.remove=function(c){this._minimum=a(this._minimum,c,-1),this.extractMinimum()};function a(c,f,d){f.key=d;var p=f.parent;return p&&e(f.key,p.key)&&(o(c,f,p),s(c,p)),e(f.key,c.key)&&(c=f),c}function o(c,f,d){f.left.right=f.right,f.right.left=f.left,d.degree--,d.child===f&&(d.child=f.right),d.degree===0&&(d.child=null),f.left=c,f.right=c.right,c.right=f,f.right.left=f,f.parent=null,f.mark=!1}function s(c,f){var d=f.parent;d&&(f.mark?(o(c,f,d),s(d)):f.mark=!0)}var u=function(f,d){f.left.right=f.right,f.right.left=f.left,f.parent=d,d.child?(f.left=d.child,f.right=d.child.right,d.child.right=f,f.right.left=f):(d.child=f,f.right=f,f.left=f),d.degree++,f.mark=!1};function l(c,f){var d=Math.floor(Math.log(f)*n)+1,p=new Array(d),h=0,m=c;if(m)for(h++,m=m.right;m!==c;)h++,m=m.right;for(var g;h>0;){for(var y=m.degree,N=m.right;g=p[y],!!g;){if(r(m.key,g.key)){var v=g;g=m,m=v}u(g,m),p[y]=null,y++}p[y]=m,m=N,h--}c=null;for(var w=0;w<d;w++)g=p[w],g&&(c?(g.left.right=g.right,g.right.left=g.left,g.left=c,g.right=c.right,c.right=g,g.right.left=g,e(g.key,c.key)&&(c=g)):c=g);return c}return i},{isClass:!0}),BH="Spa",kH=["addScalar","equalScalar","FibonacciHeap"],IH=H(BH,kH,t=>{var{addScalar:e,equalScalar:r,FibonacciHeap:n}=t;function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new n}return i.prototype.type="Spa",i.prototype.isSpa=!0,i.prototype.set=function(a,o){if(this._values[a])this._values[a].value=o;else{var s=this._heap.insert(a,o);this._values[a]=s}},i.prototype.get=function(a){var o=this._values[a];return o?o.value:0},i.prototype.accumulate=function(a,o){var s=this._values[a];s?s.value=e(s.value,o):(s=this._heap.insert(a,o),this._values[a]=s)},i.prototype.forEach=function(a,o,s){var u=this._heap,l=this._values,c=[],f=u.extractMinimum();for(f&&c.push(f);f&&f.key<=o;)f.key>=a&&(r(f.value,0)||s(f.key,f.value,this)),f=u.extractMinimum(),f&&c.push(f);for(var d=0;d<c.length;d++){var p=c[d];f=u.insert(p.key,p.value),l[f.key]=f}},i.prototype.swap=function(a,o){var s=this._values[a],u=this._values[o];if(!s&&u)s=this._heap.insert(a,u.value),this._heap.remove(u),this._values[a]=s,this._values[o]=void 0;else if(s&&!u)u=this._heap.insert(o,s.value),this._heap.remove(s),this._values[o]=u,this._values[a]=void 0;else if(s&&u){var l=s.value;s.value=u.value,u.value=l}},i},{isClass:!0});function RH(t){var e=0,r=1,n=Object.create(null),i=Object.create(null),a=0,o=function(u){var l=i[u];if(l&&(delete n[l],delete i[u],--e,r===l)){if(!e){a=0,r=1;return}for(;!Object.prototype.hasOwnProperty.call(n,++r););}};return t=Math.abs(t),{hit:function(u){var l=i[u],c=++a;if(n[c]=u,i[u]=c,!l)return++e,e<=t?void 0:(u=n[r],o(u),u);if(delete n[l],r===l)for(;!Object.prototype.hasOwnProperty.call(n,++r););},delete:o,clear:function(){e=a=0,r=1,n=Object.create(null),i=Object.create(null)}}}function Ll(t){var{hasher:e,limit:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return r=r??Number.POSITIVE_INFINITY,e=e??JSON.stringify,function n(){typeof n.cache!="object"&&(n.cache={values:new Map,lru:RH(r||Number.POSITIVE_INFINITY)});for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var o=e(i);if(n.cache.values.has(o))return n.cache.lru.hit(o),n.cache.values.get(o);var s=t.apply(t,i);return n.cache.values.set(o,s),n.cache.values.delete(n.cache.lru.hit(o)),s}}var PH=Ll(function(t){return new t(1).exp()},{hasher:Dp}),$H=Ll(function(t){return new t(1).plus(new t(5).sqrt()).div(2)},{hasher:Dp}),Rv=Ll(function(t){return t.acos(-1)},{hasher:Dp}),LH=Ll(function(t){return Rv(t).times(2)},{hasher:Dp});function Dp(t){return t[0].precision}function Aw(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Hh(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Aw(Object(r),!0).forEach(function(n){cr(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Aw(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var zH="Unit",qH=["?on","config","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","abs","fix","round","equal","isNumeric","format","number","Complex","BigNumber","Fraction"],UH=H(zH,qH,t=>{var{on:e,config:r,addScalar:n,subtractScalar:i,multiplyScalar:a,divideScalar:o,pow:s,abs:u,fix:l,round:c,equal:f,isNumeric:d,format:p,number:h,Complex:m,BigNumber:g,Fraction:y}=t,N=h;function v(k,z){if(!(this instanceof v))throw new Error("Constructor must be called with the new operator");if(!(k==null||d(k)||ua(k)))throw new TypeError("First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined");if(this.fixPrefix=!1,this.skipAutomaticSimplification=!0,z===void 0)this.units=[],this.dimensions=W.map(ne=>0);else if(typeof z=="string"){var Y=v.parse(z);this.units=Y.units,this.dimensions=Y.dimensions}else if(qn(z)&&z.value===null)this.fixPrefix=z.fixPrefix,this.skipAutomaticSimplification=z.skipAutomaticSimplification,this.dimensions=z.dimensions.slice(0),this.units=z.units.map(ne=>dr({},ne));else throw new TypeError("Second parameter in Unit constructor must be a string or valueless Unit");this.value=this._normalize(k)}Object.defineProperty(v,"name",{value:"Unit"}),v.prototype.constructor=v,v.prototype.type="Unit",v.prototype.isUnit=!0;var w,x,b;function S(){for(;b===" "||b==="	";)E()}function C(k){return k>="0"&&k<="9"||k==="."}function A(k){return k>="0"&&k<="9"}function E(){x++,b=w.charAt(x)}function D(k){x=k,b=w.charAt(x)}function M(){var k="",z=x;if(b==="+"?E():b==="-"&&(k+=b,E()),!C(b))return D(z),null;if(b==="."){if(k+=b,E(),!A(b))return D(z),null}else{for(;A(b);)k+=b,E();b==="."&&(k+=b,E())}for(;A(b);)k+=b,E();if(b==="E"||b==="e"){var Y="",ne=x;if(Y+=b,E(),(b==="+"||b==="-")&&(Y+=b,E()),!A(b))return D(ne),k;for(k=k+Y;A(b);)k+=b,E()}return k}function F(){for(var k="";A(b)||v.isValidAlpha(b);)k+=b,E();var z=k.charAt(0);return v.isValidAlpha(z)?k:null}function I(k){return b===k?(E(),k):null}v.parse=function(k,z){if(z=z||{},w=k,x=-1,b="",typeof w!="string")throw new TypeError("Invalid argument in Unit.parse, string expected");var Y=new v;Y.units=[];var ne=1,se=!1;E(),S();var ue=M(),ve=null;if(ue){if(r.number==="BigNumber")ve=new g(ue);else if(r.number==="Fraction")try{ve=new y(ue)}catch{ve=parseFloat(ue)}else ve=parseFloat(ue);S(),I("*")?(ne=1,se=!0):I("/")&&(ne=-1,se=!0)}for(var L=[],J=1;;){for(S();b==="(";)L.push(ne),J*=ne,ne=1,E(),S();var re=void 0;if(b){var fe=b;if(re=F(),re===null)throw new SyntaxError('Unexpected "'+fe+'" in "'+w+'" at index '+x.toString())}else break;var he=P(re);if(he===null)throw new SyntaxError('Unit "'+re+'" not found.');var me=ne*J;if(S(),I("^")){S();var Se=M();if(Se===null)throw new SyntaxError('In "'+k+'", "^" must be followed by a floating-point number');me*=Se}Y.units.push({unit:he.unit,prefix:he.prefix,power:me});for(var xe=0;xe<W.length;xe++)Y.dimensions[xe]+=(he.unit.dimensions[xe]||0)*me;for(S();b===")";){if(L.length===0)throw new SyntaxError('Unmatched ")" in "'+w+'" at index '+x.toString());J/=L.pop(),E(),S()}if(se=!1,I("*")?(ne=1,se=!0):I("/")?(ne=-1,se=!0):ne=1,he.unit.base){var Ee=he.unit.base.key;G.auto[Ee]={unit:he.unit,prefix:he.prefix}}}if(S(),b)throw new SyntaxError('Could not parse: "'+k+'"');if(se)throw new SyntaxError('Trailing characters: "'+k+'"');if(L.length!==0)throw new SyntaxError('Unmatched "(" in "'+w+'"');if(Y.units.length===0&&!z.allowNoUnits)throw new SyntaxError('"'+k+'" contains no units');return Y.value=ve!==void 0?Y._normalize(ve):null,Y},v.prototype.clone=function(){var k=new v;k.fixPrefix=this.fixPrefix,k.skipAutomaticSimplification=this.skipAutomaticSimplification,k.value=et(this.value),k.dimensions=this.dimensions.slice(0),k.units=[];for(var z=0;z<this.units.length;z++){k.units[z]={};for(var Y in this.units[z])Ie(this.units[z],Y)&&(k.units[z][Y]=this.units[z][Y])}return k},v.prototype.valueType=function(){return It(this.value)},v.prototype._isDerived=function(){return this.units.length===0?!1:this.units.length>1||Math.abs(this.units[0].power-1)>1e-15},v.prototype._normalize=function(k){if(k==null||this.units.length===0)return k;for(var z=k,Y=v._getNumberConverter(It(k)),ne=0;ne<this.units.length;ne++){var se=Y(this.units[ne].unit.value),ue=Y(this.units[ne].prefix.value),ve=Y(this.units[ne].power);z=a(z,s(a(se,ue),ve))}return z},v.prototype._denormalize=function(k,z){if(k==null||this.units.length===0)return k;for(var Y=k,ne=v._getNumberConverter(It(k)),se=0;se<this.units.length;se++){var ue=ne(this.units[se].unit.value),ve=ne(this.units[se].prefix.value),L=ne(this.units[se].power);Y=o(Y,s(a(ue,ve),L))}return Y};var P=Ll(k=>{if(Ie(X,k)){var z=X[k],Y=z.prefixes[""];return{unit:z,prefix:Y}}for(var ne in X)if(Ie(X,ne)&&K6(k,ne)){var se=X[ne],ue=k.length-ne.length,ve=k.substring(0,ue),L=Ie(se.prefixes,ve)?se.prefixes[ve]:void 0;if(L!==void 0)return{unit:se,prefix:L}}return null},{hasher:k=>k[0],limit:100});v.isValuelessUnit=function(k){return P(k)!==null},v.prototype.hasBase=function(k){if(typeof k=="string"&&(k=R[k]),!k)return!1;for(var z=0;z<W.length;z++)if(Math.abs((this.dimensions[z]||0)-(k.dimensions[z]||0))>1e-12)return!1;return!0},v.prototype.equalBase=function(k){for(var z=0;z<W.length;z++)if(Math.abs((this.dimensions[z]||0)-(k.dimensions[z]||0))>1e-12)return!1;return!0},v.prototype.equals=function(k){return this.equalBase(k)&&f(this.value,k.value)},v.prototype.multiply=function(k){for(var z=this.clone(),Y=qn(k)?k:new v(k),ne=0;ne<W.length;ne++)z.dimensions[ne]=(this.dimensions[ne]||0)+(Y.dimensions[ne]||0);for(var se=0;se<Y.units.length;se++){var ue=Hh({},Y.units[se]);z.units.push(ue)}if(this.value!==null||Y.value!==null){var ve=this.value===null?this._normalize($(Y.value)):this.value,L=Y.value===null?Y._normalize($(this.value)):Y.value;z.value=a(ve,L)}else z.value=null;return qn(k)&&(z.skipAutomaticSimplification=!1),T(z)},v.prototype.divideInto=function(k){return new v(k).divide(this)},v.prototype.divide=function(k){for(var z=this.clone(),Y=qn(k)?k:new v(k),ne=0;ne<W.length;ne++)z.dimensions[ne]=(this.dimensions[ne]||0)-(Y.dimensions[ne]||0);for(var se=0;se<Y.units.length;se++){var ue=Hh(Hh({},Y.units[se]),{},{power:-Y.units[se].power});z.units.push(ue)}if(this.value!==null||Y.value!==null){var ve=this.value===null?this._normalize($(Y.value)):this.value,L=Y.value===null?Y._normalize($(this.value)):Y.value;z.value=o(ve,L)}else z.value=null;return qn(k)&&(z.skipAutomaticSimplification=!1),T(z)},v.prototype.pow=function(k){for(var z=this.clone(),Y=0;Y<W.length;Y++)z.dimensions[Y]=(this.dimensions[Y]||0)*k;for(var ne=0;ne<z.units.length;ne++)z.units[ne].power*=k;return z.value!==null?z.value=s(z.value,k):z.value=null,z.skipAutomaticSimplification=!1,T(z)};function T(k){return k.equalBase(R.NONE)&&k.value!==null&&!r.predictable?k.value:k}function $(k){var z=v._getNumberConverter(It(k));return z(1)}v.prototype.abs=function(){var k=this.clone();if(k.value!==null)if(k._isDerived()||k.units.length===0||k.units[0].unit.offset===0)k.value=u(k.value);else{var z=k._numberConverter(),Y=z(k.units[0].unit.value),ne=z(k.units[0].unit.offset),se=a(Y,ne);k.value=i(u(n(k.value,se)),se)}for(var ue in k.units)(k.units[ue].unit.name==="VA"||k.units[ue].unit.name==="VAR")&&(k.units[ue].unit=X.W);return k},v.prototype.to=function(k){var z=this.value===null?this._normalize(1):this.value,Y;if(typeof k=="string")Y=v.parse(k);else if(qn(k))Y=k.clone();else throw new Error("String or Unit expected as parameter");if(!this.equalBase(Y))throw new Error("Units do not match ('".concat(Y.toString(),"' != '").concat(this.toString(),"')"));if(Y.value!==null)throw new Error("Cannot convert to a unit with a value");if(this.value===null||this._isDerived()||this.units.length===0||Y.units.length===0||this.units[0].unit.offset===Y.units[0].unit.offset)Y.value=et(z);else{var ne=v._getNumberConverter(It(z)),se=this.units[0].unit.value,ue=this.units[0].unit.offset,ve=a(se,ue),L=Y.units[0].unit.value,J=Y.units[0].unit.offset,re=a(L,J);Y.value=n(z,ne(i(ve,re)))}return Y.fixPrefix=!0,Y.skipAutomaticSimplification=!0,Y},v.prototype.toNumber=function(k){return N(this.toNumeric(k))},v.prototype.toNumeric=function(k){var z;return k?z=this.to(k):z=this.clone(),z._isDerived()||z.units.length===0?z._denormalize(z.value):z._denormalize(z.value,z.units[0].prefix.value)},v.prototype.toString=function(){return this.format()},v.prototype.toJSON=function(){return{mathjs:"Unit",value:this._denormalize(this.value),unit:this.units.length>0?this.formatUnits():null,fixPrefix:this.fixPrefix}},v.fromJSON=function(k){var z,Y=new v(k.value,(z=k.unit)!==null&&z!==void 0?z:void 0);return Y.fixPrefix=k.fixPrefix||!1,Y},v.prototype.valueOf=v.prototype.toString,v.prototype.simplify=function(){var k=this.clone(),z=[],Y;for(var ne in V)if(Ie(V,ne)&&k.hasBase(R[ne])){Y=ne;break}if(Y==="NONE")k.units=[];else{var se;if(Y&&Ie(V,Y)&&(se=V[Y]),se)k.units=[{unit:se.unit,prefix:se.prefix,power:1}];else{for(var ue=!1,ve=0;ve<W.length;ve++){var L=W[ve];Math.abs(k.dimensions[ve]||0)>1e-12&&(Ie(V,L)?z.push({unit:V[L].unit,prefix:V[L].prefix,power:k.dimensions[ve]||0}):ue=!0)}z.length<k.units.length&&!ue&&(k.units=z)}}return k},v.prototype.toSI=function(){for(var k=this.clone(),z=[],Y=0;Y<W.length;Y++){var ne=W[Y];if(Math.abs(k.dimensions[Y]||0)>1e-12)if(Ie(G.si,ne))z.push({unit:G.si[ne].unit,prefix:G.si[ne].prefix,power:k.dimensions[Y]||0});else throw new Error("Cannot express custom unit "+ne+" in SI units")}return k.units=z,k.fixPrefix=!0,k.skipAutomaticSimplification=!0,this.value!==null?(k.value=null,this.to(k)):k},v.prototype.formatUnits=function(){for(var k="",z="",Y=0,ne=0,se=0;se<this.units.length;se++)this.units[se].power>0?(Y++,k+=" "+this.units[se].prefix.name+this.units[se].unit.name,Math.abs(this.units[se].power-1)>1e-15&&(k+="^"+this.units[se].power)):this.units[se].power<0&&ne++;if(ne>0)for(var ue=0;ue<this.units.length;ue++)this.units[ue].power<0&&(Y>0?(z+=" "+this.units[ue].prefix.name+this.units[ue].unit.name,Math.abs(this.units[ue].power+1)>1e-15&&(z+="^"+-this.units[ue].power)):(z+=" "+this.units[ue].prefix.name+this.units[ue].unit.name,z+="^"+this.units[ue].power));k=k.substr(1),z=z.substr(1),Y>1&&ne>0&&(k="("+k+")"),ne>1&&Y>0&&(z="("+z+")");var ve=k;return Y>0&&ne>0&&(ve+=" / "),ve+=z,ve},v.prototype.format=function(k){var z=this.skipAutomaticSimplification||this.value===null?this.clone():this.simplify(),Y=!1;typeof z.value<"u"&&z.value!==null&&ua(z.value)&&(Y=Math.abs(z.value.re)<1e-14);for(var ne in z.units)Ie(z.units,ne)&&z.units[ne].unit&&(z.units[ne].unit.name==="VA"&&Y?z.units[ne].unit=X.VAR:z.units[ne].unit.name==="VAR"&&!Y&&(z.units[ne].unit=X.VA));z.units.length===1&&!z.fixPrefix&&Math.abs(z.units[0].power-Math.round(z.units[0].power))<1e-14&&(z.units[0].prefix=z._bestPrefix());var se=z._denormalize(z.value),ue=z.value!==null?p(se,k||{}):"",ve=z.formatUnits();return z.value&&ua(z.value)&&(ue="("+ue+")"),ve.length>0&&ue.length>0&&(ue+=" "),ue+=ve,ue},v.prototype._bestPrefix=function(){if(this.units.length!==1)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");if(Math.abs(this.units[0].power-Math.round(this.units[0].power))>=1e-14)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");var k=this.value!==null?u(this.value):0,z=u(this.units[0].unit.value),Y=this.units[0].prefix;if(k===0)return Y;var ne=this.units[0].power,se=Math.log(k/Math.pow(Y.value*z,ne))/Math.LN10-1.2;if(se>-2.200001&&se<1.800001)return Y;se=Math.abs(se);var ue=this.units[0].unit.prefixes;for(var ve in ue)if(Ie(ue,ve)){var L=ue[ve];if(L.scientific){var J=Math.abs(Math.log(k/Math.pow(L.value*z,ne))/Math.LN10-1.2);(J<se||J===se&&L.name.length<Y.name.length)&&(Y=L,se=J)}}return Y},v.prototype.splitUnit=function(k){for(var z=this.clone(),Y=[],ne=0;ne<k.length&&(z=z.to(k[ne]),ne!==k.length-1);ne++){var se=z.toNumeric(),ue=c(se),ve=void 0,L=f(ue,se);L?ve=ue:ve=l(z.toNumeric());var J=new v(ve,k[ne].toString());Y.push(J),z=i(z,J)}for(var re=0,fe=0;fe<Y.length;fe++)re=n(re,Y[fe].value);return f(re,this.value)&&(z.value=0),Y.push(z),Y};var O={NONE:{"":{name:"",value:1,scientific:!0}},SHORT:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:10,scientific:!1},h:{name:"h",value:100,scientific:!1},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},R:{name:"R",value:1e27,scientific:!0},Q:{name:"Q",value:1e30,scientific:!0},d:{name:"d",value:.1,scientific:!1},c:{name:"c",value:.01,scientific:!1},m:{name:"m",value:.001,scientific:!0},u:{name:"u",value:1e-6,scientific:!0},n:{name:"n",value:1e-9,scientific:!0},p:{name:"p",value:1e-12,scientific:!0},f:{name:"f",value:1e-15,scientific:!0},a:{name:"a",value:1e-18,scientific:!0},z:{name:"z",value:1e-21,scientific:!0},y:{name:"y",value:1e-24,scientific:!0},r:{name:"r",value:1e-27,scientific:!0},q:{name:"q",value:1e-30,scientific:!0}},LONG:{"":{name:"",value:1,scientific:!0},deca:{name:"deca",value:10,scientific:!1},hecto:{name:"hecto",value:100,scientific:!1},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},ronna:{name:"ronna",value:1e27,scientific:!0},quetta:{name:"quetta",value:1e30,scientific:!0},deci:{name:"deci",value:.1,scientific:!1},centi:{name:"centi",value:.01,scientific:!1},milli:{name:"milli",value:.001,scientific:!0},micro:{name:"micro",value:1e-6,scientific:!0},nano:{name:"nano",value:1e-9,scientific:!0},pico:{name:"pico",value:1e-12,scientific:!0},femto:{name:"femto",value:1e-15,scientific:!0},atto:{name:"atto",value:1e-18,scientific:!0},zepto:{name:"zepto",value:1e-21,scientific:!0},yocto:{name:"yocto",value:1e-24,scientific:!0},ronto:{name:"ronto",value:1e-27,scientific:!0},quecto:{name:"quecto",value:1e-30,scientific:!0}},SQUARED:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:100,scientific:!1},h:{name:"h",value:1e4,scientific:!1},k:{name:"k",value:1e6,scientific:!0},M:{name:"M",value:1e12,scientific:!0},G:{name:"G",value:1e18,scientific:!0},T:{name:"T",value:1e24,scientific:!0},P:{name:"P",value:1e30,scientific:!0},E:{name:"E",value:1e36,scientific:!0},Z:{name:"Z",value:1e42,scientific:!0},Y:{name:"Y",value:1e48,scientific:!0},R:{name:"R",value:1e54,scientific:!0},Q:{name:"Q",value:1e60,scientific:!0},d:{name:"d",value:.01,scientific:!1},c:{name:"c",value:1e-4,scientific:!1},m:{name:"m",value:1e-6,scientific:!0},u:{name:"u",value:1e-12,scientific:!0},n:{name:"n",value:1e-18,scientific:!0},p:{name:"p",value:1e-24,scientific:!0},f:{name:"f",value:1e-30,scientific:!0},a:{name:"a",value:1e-36,scientific:!0},z:{name:"z",value:1e-42,scientific:!0},y:{name:"y",value:1e-48,scientific:!0},r:{name:"r",value:1e-54,scientific:!0},q:{name:"q",value:1e-60,scientific:!0}},CUBIC:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:1e3,scientific:!1},h:{name:"h",value:1e6,scientific:!1},k:{name:"k",value:1e9,scientific:!0},M:{name:"M",value:1e18,scientific:!0},G:{name:"G",value:1e27,scientific:!0},T:{name:"T",value:1e36,scientific:!0},P:{name:"P",value:1e45,scientific:!0},E:{name:"E",value:1e54,scientific:!0},Z:{name:"Z",value:1e63,scientific:!0},Y:{name:"Y",value:1e72,scientific:!0},R:{name:"R",value:1e81,scientific:!0},Q:{name:"Q",value:1e90,scientific:!0},d:{name:"d",value:.001,scientific:!1},c:{name:"c",value:1e-6,scientific:!1},m:{name:"m",value:1e-9,scientific:!0},u:{name:"u",value:1e-18,scientific:!0},n:{name:"n",value:1e-27,scientific:!0},p:{name:"p",value:1e-36,scientific:!0},f:{name:"f",value:1e-45,scientific:!0},a:{name:"a",value:1e-54,scientific:!0},z:{name:"z",value:1e-63,scientific:!0},y:{name:"y",value:1e-72,scientific:!0},r:{name:"r",value:1e-81,scientific:!0},q:{name:"q",value:1e-90,scientific:!0}},BINARY_SHORT_SI:{"":{name:"",value:1,scientific:!0},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0}},BINARY_SHORT_IEC:{"":{name:"",value:1,scientific:!0},Ki:{name:"Ki",value:1024,scientific:!0},Mi:{name:"Mi",value:Math.pow(1024,2),scientific:!0},Gi:{name:"Gi",value:Math.pow(1024,3),scientific:!0},Ti:{name:"Ti",value:Math.pow(1024,4),scientific:!0},Pi:{name:"Pi",value:Math.pow(1024,5),scientific:!0},Ei:{name:"Ei",value:Math.pow(1024,6),scientific:!0},Zi:{name:"Zi",value:Math.pow(1024,7),scientific:!0},Yi:{name:"Yi",value:Math.pow(1024,8),scientific:!0}},BINARY_LONG_SI:{"":{name:"",value:1,scientific:!0},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0}},BINARY_LONG_IEC:{"":{name:"",value:1,scientific:!0},kibi:{name:"kibi",value:1024,scientific:!0},mebi:{name:"mebi",value:Math.pow(1024,2),scientific:!0},gibi:{name:"gibi",value:Math.pow(1024,3),scientific:!0},tebi:{name:"tebi",value:Math.pow(1024,4),scientific:!0},pebi:{name:"pebi",value:Math.pow(1024,5),scientific:!0},exi:{name:"exi",value:Math.pow(1024,6),scientific:!0},zebi:{name:"zebi",value:Math.pow(1024,7),scientific:!0},yobi:{name:"yobi",value:Math.pow(1024,8),scientific:!0}},BTU:{"":{name:"",value:1,scientific:!0},MM:{name:"MM",value:1e6,scientific:!0}}};O.SHORTLONG=dr({},O.SHORT,O.LONG),O.BINARY_SHORT=dr({},O.BINARY_SHORT_SI,O.BINARY_SHORT_IEC),O.BINARY_LONG=dr({},O.BINARY_LONG_SI,O.BINARY_LONG_IEC);var W=["MASS","LENGTH","TIME","CURRENT","TEMPERATURE","LUMINOUS_INTENSITY","AMOUNT_OF_SUBSTANCE","ANGLE","BIT"],R={NONE:{dimensions:[0,0,0,0,0,0,0,0,0]},MASS:{dimensions:[1,0,0,0,0,0,0,0,0]},LENGTH:{dimensions:[0,1,0,0,0,0,0,0,0]},TIME:{dimensions:[0,0,1,0,0,0,0,0,0]},CURRENT:{dimensions:[0,0,0,1,0,0,0,0,0]},TEMPERATURE:{dimensions:[0,0,0,0,1,0,0,0,0]},LUMINOUS_INTENSITY:{dimensions:[0,0,0,0,0,1,0,0,0]},AMOUNT_OF_SUBSTANCE:{dimensions:[0,0,0,0,0,0,1,0,0]},FORCE:{dimensions:[1,1,-2,0,0,0,0,0,0]},SURFACE:{dimensions:[0,2,0,0,0,0,0,0,0]},VOLUME:{dimensions:[0,3,0,0,0,0,0,0,0]},ENERGY:{dimensions:[1,2,-2,0,0,0,0,0,0]},POWER:{dimensions:[1,2,-3,0,0,0,0,0,0]},PRESSURE:{dimensions:[1,-1,-2,0,0,0,0,0,0]},ELECTRIC_CHARGE:{dimensions:[0,0,1,1,0,0,0,0,0]},ELECTRIC_CAPACITANCE:{dimensions:[-1,-2,4,2,0,0,0,0,0]},ELECTRIC_POTENTIAL:{dimensions:[1,2,-3,-1,0,0,0,0,0]},ELECTRIC_RESISTANCE:{dimensions:[1,2,-3,-2,0,0,0,0,0]},ELECTRIC_INDUCTANCE:{dimensions:[1,2,-2,-2,0,0,0,0,0]},ELECTRIC_CONDUCTANCE:{dimensions:[-1,-2,3,2,0,0,0,0,0]},MAGNETIC_FLUX:{dimensions:[1,2,-2,-1,0,0,0,0,0]},MAGNETIC_FLUX_DENSITY:{dimensions:[1,0,-2,-1,0,0,0,0,0]},FREQUENCY:{dimensions:[0,0,-1,0,0,0,0,0,0]},ANGLE:{dimensions:[0,0,0,0,0,0,0,1,0]},BIT:{dimensions:[0,0,0,0,0,0,0,0,1]}};for(var ie in R)Ie(R,ie)&&(R[ie].key=ie);var te={},Z={name:"",base:te,value:1,offset:0,dimensions:W.map(k=>0)},X={meter:{name:"meter",base:R.LENGTH,prefixes:O.LONG,value:1,offset:0},inch:{name:"inch",base:R.LENGTH,prefixes:O.NONE,value:.0254,offset:0},foot:{name:"foot",base:R.LENGTH,prefixes:O.NONE,value:.3048,offset:0},yard:{name:"yard",base:R.LENGTH,prefixes:O.NONE,value:.9144,offset:0},mile:{name:"mile",base:R.LENGTH,prefixes:O.NONE,value:1609.344,offset:0},link:{name:"link",base:R.LENGTH,prefixes:O.NONE,value:.201168,offset:0},rod:{name:"rod",base:R.LENGTH,prefixes:O.NONE,value:5.0292,offset:0},chain:{name:"chain",base:R.LENGTH,prefixes:O.NONE,value:20.1168,offset:0},angstrom:{name:"angstrom",base:R.LENGTH,prefixes:O.NONE,value:1e-10,offset:0},m:{name:"m",base:R.LENGTH,prefixes:O.SHORT,value:1,offset:0},in:{name:"in",base:R.LENGTH,prefixes:O.NONE,value:.0254,offset:0},ft:{name:"ft",base:R.LENGTH,prefixes:O.NONE,value:.3048,offset:0},yd:{name:"yd",base:R.LENGTH,prefixes:O.NONE,value:.9144,offset:0},mi:{name:"mi",base:R.LENGTH,prefixes:O.NONE,value:1609.344,offset:0},li:{name:"li",base:R.LENGTH,prefixes:O.NONE,value:.201168,offset:0},rd:{name:"rd",base:R.LENGTH,prefixes:O.NONE,value:5.02921,offset:0},ch:{name:"ch",base:R.LENGTH,prefixes:O.NONE,value:20.1168,offset:0},mil:{name:"mil",base:R.LENGTH,prefixes:O.NONE,value:254e-7,offset:0},m2:{name:"m2",base:R.SURFACE,prefixes:O.SQUARED,value:1,offset:0},sqin:{name:"sqin",base:R.SURFACE,prefixes:O.NONE,value:64516e-8,offset:0},sqft:{name:"sqft",base:R.SURFACE,prefixes:O.NONE,value:.09290304,offset:0},sqyd:{name:"sqyd",base:R.SURFACE,prefixes:O.NONE,value:.83612736,offset:0},sqmi:{name:"sqmi",base:R.SURFACE,prefixes:O.NONE,value:2589988110336e-6,offset:0},sqrd:{name:"sqrd",base:R.SURFACE,prefixes:O.NONE,value:25.29295,offset:0},sqch:{name:"sqch",base:R.SURFACE,prefixes:O.NONE,value:404.6873,offset:0},sqmil:{name:"sqmil",base:R.SURFACE,prefixes:O.NONE,value:64516e-14,offset:0},acre:{name:"acre",base:R.SURFACE,prefixes:O.NONE,value:4046.86,offset:0},hectare:{name:"hectare",base:R.SURFACE,prefixes:O.NONE,value:1e4,offset:0},m3:{name:"m3",base:R.VOLUME,prefixes:O.CUBIC,value:1,offset:0},L:{name:"L",base:R.VOLUME,prefixes:O.SHORT,value:.001,offset:0},l:{name:"l",base:R.VOLUME,prefixes:O.SHORT,value:.001,offset:0},litre:{name:"litre",base:R.VOLUME,prefixes:O.LONG,value:.001,offset:0},cuin:{name:"cuin",base:R.VOLUME,prefixes:O.NONE,value:16387064e-12,offset:0},cuft:{name:"cuft",base:R.VOLUME,prefixes:O.NONE,value:.028316846592,offset:0},cuyd:{name:"cuyd",base:R.VOLUME,prefixes:O.NONE,value:.764554857984,offset:0},teaspoon:{name:"teaspoon",base:R.VOLUME,prefixes:O.NONE,value:5e-6,offset:0},tablespoon:{name:"tablespoon",base:R.VOLUME,prefixes:O.NONE,value:15e-6,offset:0},drop:{name:"drop",base:R.VOLUME,prefixes:O.NONE,value:5e-8,offset:0},gtt:{name:"gtt",base:R.VOLUME,prefixes:O.NONE,value:5e-8,offset:0},minim:{name:"minim",base:R.VOLUME,prefixes:O.NONE,value:61611519921875e-21,offset:0},fluiddram:{name:"fluiddram",base:R.VOLUME,prefixes:O.NONE,value:36966911953125e-19,offset:0},fluidounce:{name:"fluidounce",base:R.VOLUME,prefixes:O.NONE,value:295735295625e-16,offset:0},gill:{name:"gill",base:R.VOLUME,prefixes:O.NONE,value:.00011829411825,offset:0},cc:{name:"cc",base:R.VOLUME,prefixes:O.NONE,value:1e-6,offset:0},cup:{name:"cup",base:R.VOLUME,prefixes:O.NONE,value:.0002365882365,offset:0},pint:{name:"pint",base:R.VOLUME,prefixes:O.NONE,value:.000473176473,offset:0},quart:{name:"quart",base:R.VOLUME,prefixes:O.NONE,value:.000946352946,offset:0},gallon:{name:"gallon",base:R.VOLUME,prefixes:O.NONE,value:.003785411784,offset:0},beerbarrel:{name:"beerbarrel",base:R.VOLUME,prefixes:O.NONE,value:.117347765304,offset:0},oilbarrel:{name:"oilbarrel",base:R.VOLUME,prefixes:O.NONE,value:.158987294928,offset:0},hogshead:{name:"hogshead",base:R.VOLUME,prefixes:O.NONE,value:.238480942392,offset:0},g:{name:"g",base:R.MASS,prefixes:O.SHORT,value:.001,offset:0},gram:{name:"gram",base:R.MASS,prefixes:O.LONG,value:.001,offset:0},ton:{name:"ton",base:R.MASS,prefixes:O.SHORT,value:907.18474,offset:0},t:{name:"t",base:R.MASS,prefixes:O.SHORT,value:1e3,offset:0},tonne:{name:"tonne",base:R.MASS,prefixes:O.LONG,value:1e3,offset:0},grain:{name:"grain",base:R.MASS,prefixes:O.NONE,value:6479891e-11,offset:0},dram:{name:"dram",base:R.MASS,prefixes:O.NONE,value:.0017718451953125,offset:0},ounce:{name:"ounce",base:R.MASS,prefixes:O.NONE,value:.028349523125,offset:0},poundmass:{name:"poundmass",base:R.MASS,prefixes:O.NONE,value:.45359237,offset:0},hundredweight:{name:"hundredweight",base:R.MASS,prefixes:O.NONE,value:45.359237,offset:0},stick:{name:"stick",base:R.MASS,prefixes:O.NONE,value:.115,offset:0},stone:{name:"stone",base:R.MASS,prefixes:O.NONE,value:6.35029318,offset:0},gr:{name:"gr",base:R.MASS,prefixes:O.NONE,value:6479891e-11,offset:0},dr:{name:"dr",base:R.MASS,prefixes:O.NONE,value:.0017718451953125,offset:0},oz:{name:"oz",base:R.MASS,prefixes:O.NONE,value:.028349523125,offset:0},lbm:{name:"lbm",base:R.MASS,prefixes:O.NONE,value:.45359237,offset:0},cwt:{name:"cwt",base:R.MASS,prefixes:O.NONE,value:45.359237,offset:0},s:{name:"s",base:R.TIME,prefixes:O.SHORT,value:1,offset:0},min:{name:"min",base:R.TIME,prefixes:O.NONE,value:60,offset:0},h:{name:"h",base:R.TIME,prefixes:O.NONE,value:3600,offset:0},second:{name:"second",base:R.TIME,prefixes:O.LONG,value:1,offset:0},sec:{name:"sec",base:R.TIME,prefixes:O.LONG,value:1,offset:0},minute:{name:"minute",base:R.TIME,prefixes:O.NONE,value:60,offset:0},hour:{name:"hour",base:R.TIME,prefixes:O.NONE,value:3600,offset:0},day:{name:"day",base:R.TIME,prefixes:O.NONE,value:86400,offset:0},week:{name:"week",base:R.TIME,prefixes:O.NONE,value:7*86400,offset:0},month:{name:"month",base:R.TIME,prefixes:O.NONE,value:2629800,offset:0},year:{name:"year",base:R.TIME,prefixes:O.NONE,value:31557600,offset:0},decade:{name:"decade",base:R.TIME,prefixes:O.NONE,value:315576e3,offset:0},century:{name:"century",base:R.TIME,prefixes:O.NONE,value:315576e4,offset:0},millennium:{name:"millennium",base:R.TIME,prefixes:O.NONE,value:315576e5,offset:0},hertz:{name:"Hertz",base:R.FREQUENCY,prefixes:O.LONG,value:1,offset:0,reciprocal:!0},Hz:{name:"Hz",base:R.FREQUENCY,prefixes:O.SHORT,value:1,offset:0,reciprocal:!0},rad:{name:"rad",base:R.ANGLE,prefixes:O.SHORT,value:1,offset:0},radian:{name:"radian",base:R.ANGLE,prefixes:O.LONG,value:1,offset:0},deg:{name:"deg",base:R.ANGLE,prefixes:O.SHORT,value:null,offset:0},degree:{name:"degree",base:R.ANGLE,prefixes:O.LONG,value:null,offset:0},grad:{name:"grad",base:R.ANGLE,prefixes:O.SHORT,value:null,offset:0},gradian:{name:"gradian",base:R.ANGLE,prefixes:O.LONG,value:null,offset:0},cycle:{name:"cycle",base:R.ANGLE,prefixes:O.NONE,value:null,offset:0},arcsec:{name:"arcsec",base:R.ANGLE,prefixes:O.NONE,value:null,offset:0},arcmin:{name:"arcmin",base:R.ANGLE,prefixes:O.NONE,value:null,offset:0},A:{name:"A",base:R.CURRENT,prefixes:O.SHORT,value:1,offset:0},ampere:{name:"ampere",base:R.CURRENT,prefixes:O.LONG,value:1,offset:0},K:{name:"K",base:R.TEMPERATURE,prefixes:O.SHORT,value:1,offset:0},degC:{name:"degC",base:R.TEMPERATURE,prefixes:O.SHORT,value:1,offset:273.15},degF:{name:"degF",base:R.TEMPERATURE,prefixes:O.SHORT,value:new y(5,9),offset:459.67},degR:{name:"degR",base:R.TEMPERATURE,prefixes:O.SHORT,value:new y(5,9),offset:0},kelvin:{name:"kelvin",base:R.TEMPERATURE,prefixes:O.LONG,value:1,offset:0},celsius:{name:"celsius",base:R.TEMPERATURE,prefixes:O.LONG,value:1,offset:273.15},fahrenheit:{name:"fahrenheit",base:R.TEMPERATURE,prefixes:O.LONG,value:new y(5,9),offset:459.67},rankine:{name:"rankine",base:R.TEMPERATURE,prefixes:O.LONG,value:new y(5,9),offset:0},mol:{name:"mol",base:R.AMOUNT_OF_SUBSTANCE,prefixes:O.SHORT,value:1,offset:0},mole:{name:"mole",base:R.AMOUNT_OF_SUBSTANCE,prefixes:O.LONG,value:1,offset:0},cd:{name:"cd",base:R.LUMINOUS_INTENSITY,prefixes:O.SHORT,value:1,offset:0},candela:{name:"candela",base:R.LUMINOUS_INTENSITY,prefixes:O.LONG,value:1,offset:0},N:{name:"N",base:R.FORCE,prefixes:O.SHORT,value:1,offset:0},newton:{name:"newton",base:R.FORCE,prefixes:O.LONG,value:1,offset:0},dyn:{name:"dyn",base:R.FORCE,prefixes:O.SHORT,value:1e-5,offset:0},dyne:{name:"dyne",base:R.FORCE,prefixes:O.LONG,value:1e-5,offset:0},lbf:{name:"lbf",base:R.FORCE,prefixes:O.NONE,value:4.4482216152605,offset:0},poundforce:{name:"poundforce",base:R.FORCE,prefixes:O.NONE,value:4.4482216152605,offset:0},kip:{name:"kip",base:R.FORCE,prefixes:O.LONG,value:4448.2216,offset:0},kilogramforce:{name:"kilogramforce",base:R.FORCE,prefixes:O.NONE,value:9.80665,offset:0},J:{name:"J",base:R.ENERGY,prefixes:O.SHORT,value:1,offset:0},joule:{name:"joule",base:R.ENERGY,prefixes:O.LONG,value:1,offset:0},erg:{name:"erg",base:R.ENERGY,prefixes:O.SHORTLONG,value:1e-7,offset:0},Wh:{name:"Wh",base:R.ENERGY,prefixes:O.SHORT,value:3600,offset:0},BTU:{name:"BTU",base:R.ENERGY,prefixes:O.BTU,value:1055.05585262,offset:0},eV:{name:"eV",base:R.ENERGY,prefixes:O.SHORT,value:1602176565e-28,offset:0},electronvolt:{name:"electronvolt",base:R.ENERGY,prefixes:O.LONG,value:1602176565e-28,offset:0},W:{name:"W",base:R.POWER,prefixes:O.SHORT,value:1,offset:0},watt:{name:"watt",base:R.POWER,prefixes:O.LONG,value:1,offset:0},hp:{name:"hp",base:R.POWER,prefixes:O.NONE,value:745.6998715386,offset:0},VAR:{name:"VAR",base:R.POWER,prefixes:O.SHORT,value:m.I,offset:0},VA:{name:"VA",base:R.POWER,prefixes:O.SHORT,value:1,offset:0},Pa:{name:"Pa",base:R.PRESSURE,prefixes:O.SHORT,value:1,offset:0},psi:{name:"psi",base:R.PRESSURE,prefixes:O.NONE,value:6894.75729276459,offset:0},atm:{name:"atm",base:R.PRESSURE,prefixes:O.NONE,value:101325,offset:0},bar:{name:"bar",base:R.PRESSURE,prefixes:O.SHORTLONG,value:1e5,offset:0},torr:{name:"torr",base:R.PRESSURE,prefixes:O.NONE,value:133.322,offset:0},mmHg:{name:"mmHg",base:R.PRESSURE,prefixes:O.NONE,value:133.322,offset:0},mmH2O:{name:"mmH2O",base:R.PRESSURE,prefixes:O.NONE,value:9.80665,offset:0},cmH2O:{name:"cmH2O",base:R.PRESSURE,prefixes:O.NONE,value:98.0665,offset:0},coulomb:{name:"coulomb",base:R.ELECTRIC_CHARGE,prefixes:O.LONG,value:1,offset:0},C:{name:"C",base:R.ELECTRIC_CHARGE,prefixes:O.SHORT,value:1,offset:0},farad:{name:"farad",base:R.ELECTRIC_CAPACITANCE,prefixes:O.LONG,value:1,offset:0},F:{name:"F",base:R.ELECTRIC_CAPACITANCE,prefixes:O.SHORT,value:1,offset:0},volt:{name:"volt",base:R.ELECTRIC_POTENTIAL,prefixes:O.LONG,value:1,offset:0},V:{name:"V",base:R.ELECTRIC_POTENTIAL,prefixes:O.SHORT,value:1,offset:0},ohm:{name:"ohm",base:R.ELECTRIC_RESISTANCE,prefixes:O.SHORTLONG,value:1,offset:0},henry:{name:"henry",base:R.ELECTRIC_INDUCTANCE,prefixes:O.LONG,value:1,offset:0},H:{name:"H",base:R.ELECTRIC_INDUCTANCE,prefixes:O.SHORT,value:1,offset:0},siemens:{name:"siemens",base:R.ELECTRIC_CONDUCTANCE,prefixes:O.LONG,value:1,offset:0},S:{name:"S",base:R.ELECTRIC_CONDUCTANCE,prefixes:O.SHORT,value:1,offset:0},weber:{name:"weber",base:R.MAGNETIC_FLUX,prefixes:O.LONG,value:1,offset:0},Wb:{name:"Wb",base:R.MAGNETIC_FLUX,prefixes:O.SHORT,value:1,offset:0},tesla:{name:"tesla",base:R.MAGNETIC_FLUX_DENSITY,prefixes:O.LONG,value:1,offset:0},T:{name:"T",base:R.MAGNETIC_FLUX_DENSITY,prefixes:O.SHORT,value:1,offset:0},b:{name:"b",base:R.BIT,prefixes:O.BINARY_SHORT,value:1,offset:0},bits:{name:"bits",base:R.BIT,prefixes:O.BINARY_LONG,value:1,offset:0},B:{name:"B",base:R.BIT,prefixes:O.BINARY_SHORT,value:8,offset:0},bytes:{name:"bytes",base:R.BIT,prefixes:O.BINARY_LONG,value:8,offset:0}},pe={meters:"meter",inches:"inch",feet:"foot",yards:"yard",miles:"mile",links:"link",rods:"rod",chains:"chain",angstroms:"angstrom",lt:"l",litres:"litre",liter:"litre",liters:"litre",teaspoons:"teaspoon",tablespoons:"tablespoon",minims:"minim",fldr:"fluiddram",fluiddrams:"fluiddram",floz:"fluidounce",fluidounces:"fluidounce",gi:"gill",gills:"gill",cp:"cup",cups:"cup",pt:"pint",pints:"pint",qt:"quart",quarts:"quart",gal:"gallon",gallons:"gallon",bbl:"beerbarrel",beerbarrels:"beerbarrel",obl:"oilbarrel",oilbarrels:"oilbarrel",hogsheads:"hogshead",gtts:"gtt",grams:"gram",tons:"ton",tonnes:"tonne",grains:"grain",drams:"dram",ounces:"ounce",poundmasses:"poundmass",hundredweights:"hundredweight",sticks:"stick",lb:"lbm",lbs:"lbm",kips:"kip",kgf:"kilogramforce",acres:"acre",hectares:"hectare",sqfeet:"sqft",sqyard:"sqyd",sqmile:"sqmi",sqmiles:"sqmi",mmhg:"mmHg",mmh2o:"mmH2O",cmh2o:"cmH2O",seconds:"second",secs:"second",minutes:"minute",mins:"minute",hours:"hour",hr:"hour",hrs:"hour",days:"day",weeks:"week",months:"month",years:"year",decades:"decade",centuries:"century",millennia:"millennium",hertz:"hertz",radians:"radian",degrees:"degree",gradians:"gradian",cycles:"cycle",arcsecond:"arcsec",arcseconds:"arcsec",arcminute:"arcmin",arcminutes:"arcmin",BTUs:"BTU",watts:"watt",joules:"joule",amperes:"ampere",amps:"ampere",amp:"ampere",coulombs:"coulomb",volts:"volt",ohms:"ohm",farads:"farad",webers:"weber",teslas:"tesla",electronvolts:"electronvolt",moles:"mole",bit:"bits",byte:"bytes"};function de(k){if(k.number==="BigNumber"){var z=Rv(g);X.rad.value=new g(1),X.deg.value=z.div(180),X.grad.value=z.div(200),X.cycle.value=z.times(2),X.arcsec.value=z.div(648e3),X.arcmin.value=z.div(10800)}else X.rad.value=1,X.deg.value=Math.PI/180,X.grad.value=Math.PI/200,X.cycle.value=Math.PI*2,X.arcsec.value=Math.PI/648e3,X.arcmin.value=Math.PI/10800;X.radian.value=X.rad.value,X.degree.value=X.deg.value,X.gradian.value=X.grad.value}de(r),e&&e("config",function(k,z){k.number!==z.number&&de(k)});var G={si:{NONE:{unit:Z,prefix:O.NONE[""]},LENGTH:{unit:X.m,prefix:O.SHORT[""]},MASS:{unit:X.g,prefix:O.SHORT.k},TIME:{unit:X.s,prefix:O.SHORT[""]},CURRENT:{unit:X.A,prefix:O.SHORT[""]},TEMPERATURE:{unit:X.K,prefix:O.SHORT[""]},LUMINOUS_INTENSITY:{unit:X.cd,prefix:O.SHORT[""]},AMOUNT_OF_SUBSTANCE:{unit:X.mol,prefix:O.SHORT[""]},ANGLE:{unit:X.rad,prefix:O.SHORT[""]},BIT:{unit:X.bits,prefix:O.SHORT[""]},FORCE:{unit:X.N,prefix:O.SHORT[""]},ENERGY:{unit:X.J,prefix:O.SHORT[""]},POWER:{unit:X.W,prefix:O.SHORT[""]},PRESSURE:{unit:X.Pa,prefix:O.SHORT[""]},ELECTRIC_CHARGE:{unit:X.C,prefix:O.SHORT[""]},ELECTRIC_CAPACITANCE:{unit:X.F,prefix:O.SHORT[""]},ELECTRIC_POTENTIAL:{unit:X.V,prefix:O.SHORT[""]},ELECTRIC_RESISTANCE:{unit:X.ohm,prefix:O.SHORT[""]},ELECTRIC_INDUCTANCE:{unit:X.H,prefix:O.SHORT[""]},ELECTRIC_CONDUCTANCE:{unit:X.S,prefix:O.SHORT[""]},MAGNETIC_FLUX:{unit:X.Wb,prefix:O.SHORT[""]},MAGNETIC_FLUX_DENSITY:{unit:X.T,prefix:O.SHORT[""]},FREQUENCY:{unit:X.Hz,prefix:O.SHORT[""]}}};G.cgs=JSON.parse(JSON.stringify(G.si)),G.cgs.LENGTH={unit:X.m,prefix:O.SHORT.c},G.cgs.MASS={unit:X.g,prefix:O.SHORT[""]},G.cgs.FORCE={unit:X.dyn,prefix:O.SHORT[""]},G.cgs.ENERGY={unit:X.erg,prefix:O.NONE[""]},G.us=JSON.parse(JSON.stringify(G.si)),G.us.LENGTH={unit:X.ft,prefix:O.NONE[""]},G.us.MASS={unit:X.lbm,prefix:O.NONE[""]},G.us.TEMPERATURE={unit:X.degF,prefix:O.NONE[""]},G.us.FORCE={unit:X.lbf,prefix:O.NONE[""]},G.us.ENERGY={unit:X.BTU,prefix:O.BTU[""]},G.us.POWER={unit:X.hp,prefix:O.NONE[""]},G.us.PRESSURE={unit:X.psi,prefix:O.NONE[""]},G.auto=JSON.parse(JSON.stringify(G.si));var V=G.auto;v.setUnitSystem=function(k){if(Ie(G,k))V=G[k];else throw new Error("Unit system "+k+" does not exist. Choices are: "+Object.keys(G).join(", "))},v.getUnitSystem=function(){for(var k in G)if(Ie(G,k)&&G[k]===V)return k},v.typeConverters={BigNumber:function(z){return z!=null&&z.isFraction?new g(String(z.n)).div(String(z.d)).times(String(z.s)):new g(z+"")},Fraction:function(z){return new y(z)},Complex:function(z){return z},number:function(z){return z!=null&&z.isFraction?h(z):z}},v.prototype._numberConverter=function(){var k=v.typeConverters[this.valueType()];if(k)return k;throw new TypeError('Unsupported Unit value type "'+this.valueType()+'"')},v._getNumberConverter=function(k){if(!v.typeConverters[k])throw new TypeError('Unsupported type "'+k+'"');return v.typeConverters[k]};for(var U in X)if(Ie(X,U)){var K=X[U];K.dimensions=K.base.dimensions}for(var ae in pe)if(Ie(pe,ae)){var B=X[pe[ae]],q={};for(var j in B)Ie(B,j)&&(q[j]=B[j]);q.name=ae,X[ae]=q}v.isValidAlpha=function(z){return/^[a-zA-Z]$/.test(z)};function oe(k){for(var z=0;z<k.length;z++){if(b=k.charAt(z),z===0&&!v.isValidAlpha(b))throw new Error('Invalid unit name (must begin with alpha character): "'+k+'"');if(z>0&&!(v.isValidAlpha(b)||A(b)))throw new Error('Invalid unit name (only alphanumeric characters are allowed): "'+k+'"')}}return v.createUnit=function(k,z){if(typeof k!="object")throw new TypeError("createUnit expects first parameter to be of type 'Object'");if(z&&z.override){for(var Y in k)if(Ie(k,Y)&&v.deleteUnit(Y),k[Y].aliases)for(var ne=0;ne<k[Y].aliases.length;ne++)v.deleteUnit(k[Y].aliases[ne])}var se;for(var ue in k)Ie(k,ue)&&(se=v.createUnitSingle(ue,k[ue]));return se},v.createUnitSingle=function(k,z){if((typeof z>"u"||z===null)&&(z={}),typeof k!="string")throw new TypeError("createUnitSingle expects first parameter to be of type 'string'");if(Ie(X,k))throw new Error('Cannot create unit "'+k+'": a unit with that name already exists');oe(k);var Y=null,ne=[],se=0,ue,ve,L;if(z&&z.type==="Unit")Y=z.clone();else if(typeof z=="string")z!==""&&(ue=z);else if(typeof z=="object")ue=z.definition,ve=z.prefixes,se=z.offset,L=z.baseName,z.aliases&&(ne=z.aliases.valueOf());else throw new TypeError('Cannot create unit "'+k+'" from "'+z.toString()+'": expecting "string" or "Unit" or "Object"');if(ne){for(var J=0;J<ne.length;J++)if(Ie(X,ne[J]))throw new Error('Cannot create alias "'+ne[J]+'": a unit with that name already exists')}if(ue&&typeof ue=="string"&&!Y)try{Y=v.parse(ue,{allowNoUnits:!0})}catch(ge){throw ge.message='Could not create unit "'+k+'" from "'+ue+'": '+ge.message,ge}else ue&&ue.type==="Unit"&&(Y=ue.clone());ne=ne||[],se=se||0,ve&&ve.toUpperCase?ve=O[ve.toUpperCase()]||O.NONE:ve=O.NONE;var re={};if(Y){re={name:k,value:Y.value,dimensions:Y.dimensions.slice(0),prefixes:ve,offset:se};var Se=!1;for(var xe in R)if(Ie(R,xe)){for(var Ee=!0,we=0;we<W.length;we++)if(Math.abs((re.dimensions[we]||0)-(R[xe].dimensions[we]||0))>1e-12){Ee=!1;break}if(Ee){Se=!0,re.base=R[xe];break}}if(!Se){L=L||k+"_STUFF";var nt={dimensions:Y.dimensions.slice(0)};nt.key=L,R[L]=nt,V[L]={unit:re,prefix:O.NONE[""]},re.base=R[L]}}else{if(L=L||k+"_STUFF",W.indexOf(L)>=0)throw new Error('Cannot create new base unit "'+k+'": a base unit with that name already exists (and cannot be overridden)');W.push(L);for(var fe in R)Ie(R,fe)&&(R[fe].dimensions[W.length-1]=0);for(var he={dimensions:[]},me=0;me<W.length;me++)he.dimensions[me]=0;he.dimensions[W.length-1]=1,he.key=L,R[L]=he,re={name:k,value:1,dimensions:R[L].dimensions.slice(0),prefixes:ve,offset:se,base:R[L]},V[L]={unit:re,prefix:O.NONE[""]}}v.UNITS[k]=re;for(var ke=0;ke<ne.length;ke++){var Xe=ne[ke],_={};for(var ee in re)Ie(re,ee)&&(_[ee]=re[ee]);_.name=Xe,v.UNITS[Xe]=_}return delete P.cache,new v(null,k)},v.deleteUnit=function(k){delete v.UNITS[k],delete P.cache},v.PREFIXES=O,v.BASE_DIMENSIONS=W,v.BASE_UNITS=R,v.UNIT_SYSTEMS=G,v.UNITS=X,v},{isClass:!0}),Sw="unit",HH=["typed","Unit"],VH=H(Sw,HH,t=>{var{typed:e,Unit:r}=t;return e(Sw,{Unit:function(i){return i.clone()},string:function(i){return r.isValuelessUnit(i)?new r(null,i):r.parse(i,{allowNoUnits:!0})},"number | BigNumber | Fraction | Complex, string | Unit":function(i,a){return new r(i,a)},"number | BigNumber | Fraction":function(i){return new r(i)},"Array | Matrix":e.referToSelf(n=>i=>st(i,n))})}),Dw="sparse",WH=["typed","SparseMatrix"],jH=H(Dw,WH,t=>{var{typed:e,SparseMatrix:r}=t;return e(Dw,{"":function(){return new r([])},string:function(i){return new r([],i)},"Array | Matrix":function(i){return new r(i)},"Array | Matrix, string":function(i,a){return new r(i,a)}})}),Ew="createUnit",GH=["typed","Unit"],KH=H(Ew,GH,t=>{var{typed:e,Unit:r}=t;return e(Ew,{"Object, Object":function(i,a){return r.createUnit(i,a)},Object:function(i){return r.createUnit(i,{})},"string, Unit | string | Object, Object":function(i,a,o){var s={};return s[i]=a,r.createUnit(s,o)},"string, Unit | string | Object":function(i,a){var o={};return o[i]=a,r.createUnit(o,{})},string:function(i){var a={};return a[i]={},r.createUnit(a,{})}})}),Cw="acos",JH=["typed","config","Complex"],YH=H(Cw,JH,t=>{var{typed:e,config:r,Complex:n}=t;return e(Cw,{number:function(a){return a>=-1&&a<=1||r.predictable?Math.acos(a):new n(a,0).acos()},Complex:function(a){return a.acos()},BigNumber:function(a){return a.acos()}})}),Mw="acosh",ZH=["typed","config","Complex"],XH=H(Mw,ZH,t=>{var{typed:e,config:r,Complex:n}=t;return e(Mw,{number:function(a){return a>=1||r.predictable?xC(a):a<=-1?new n(Math.log(Math.sqrt(a*a-1)-a),Math.PI):new n(a,0).acosh()},Complex:function(a){return a.acosh()},BigNumber:function(a){return a.acosh()}})}),Tw="acot",QH=["typed","BigNumber"],eV=H(Tw,QH,t=>{var{typed:e,BigNumber:r}=t;return e(Tw,{number:wC,Complex:function(i){return i.acot()},BigNumber:function(i){return new r(1).div(i).atan()}})}),_w="acoth",tV=["typed","config","Complex","BigNumber"],rV=H(_w,tV,t=>{var{typed:e,config:r,Complex:n,BigNumber:i}=t;return e(_w,{number:function(o){return o>=1||o<=-1||r.predictable?NC(o):new n(o,0).acoth()},Complex:function(o){return o.acoth()},BigNumber:function(o){return new i(1).div(o).atanh()}})}),Ow="acsc",nV=["typed","config","Complex","BigNumber"],iV=H(Ow,nV,t=>{var{typed:e,config:r,Complex:n,BigNumber:i}=t;return e(Ow,{number:function(o){return o<=-1||o>=1||r.predictable?AC(o):new n(o,0).acsc()},Complex:function(o){return o.acsc()},BigNumber:function(o){return new i(1).div(o).asin()}})}),Fw="acsch",aV=["typed","BigNumber"],oV=H(Fw,aV,t=>{var{typed:e,BigNumber:r}=t;return e(Fw,{number:SC,Complex:function(i){return i.acsch()},BigNumber:function(i){return new r(1).div(i).asinh()}})}),Bw="asec",sV=["typed","config","Complex","BigNumber"],uV=H(Bw,sV,t=>{var{typed:e,config:r,Complex:n,BigNumber:i}=t;return e(Bw,{number:function(o){return o<=-1||o>=1||r.predictable?DC(o):new n(o,0).asec()},Complex:function(o){return o.asec()},BigNumber:function(o){return new i(1).div(o).acos()}})}),kw="asech",lV=["typed","config","Complex","BigNumber"],cV=H(kw,lV,t=>{var{typed:e,config:r,Complex:n,BigNumber:i}=t;return e(kw,{number:function(o){if(o<=1&&o>=-1||r.predictable){var s=1/o;if(s>0||r.predictable)return EC(o);var u=Math.sqrt(s*s-1);return new n(Math.log(u-s),Math.PI)}return new n(o,0).asech()},Complex:function(o){return o.asech()},BigNumber:function(o){return new i(1).div(o).acosh()}})}),Iw="asin",fV=["typed","config","Complex"],dV=H(Iw,fV,t=>{var{typed:e,config:r,Complex:n}=t;return e(Iw,{number:function(a){return a>=-1&&a<=1||r.predictable?Math.asin(a):new n(a,0).asin()},Complex:function(a){return a.asin()},BigNumber:function(a){return a.asin()}})}),pV="asinh",hV=["typed"],mV=H(pV,hV,t=>{var{typed:e}=t;return e("asinh",{number:CC,Complex:function(n){return n.asinh()},BigNumber:function(n){return n.asinh()}})}),gV="atan",vV=["typed"],yV=H(gV,vV,t=>{var{typed:e}=t;return e("atan",{number:function(n){return Math.atan(n)},Complex:function(n){return n.atan()},BigNumber:function(n){return n.atan()}})}),Rw="atan2",bV=["typed","matrix","equalScalar","BigNumber","DenseMatrix","concat"],xV=H(Rw,bV,t=>{var{typed:e,matrix:r,equalScalar:n,BigNumber:i,DenseMatrix:a,concat:o}=t,s=mi({typed:e,equalScalar:n}),u=hn({typed:e}),l=qC({typed:e,equalScalar:n}),c=Lr({typed:e,equalScalar:n}),f=pr({typed:e,DenseMatrix:a}),d=$t({typed:e,matrix:r,concat:o});return e(Rw,{"number, number":Math.atan2,"BigNumber, BigNumber":(p,h)=>i.atan2(p,h)},d({scalar:"number | BigNumber",SS:l,DS:u,SD:s,Ss:c,sS:f}))}),Pw="atanh",wV=["typed","config","Complex"],NV=H(Pw,wV,t=>{var{typed:e,config:r,Complex:n}=t;return e(Pw,{number:function(a){return a<=1&&a>=-1||r.predictable?MC(a):new n(a,0).atanh()},Complex:function(a){return a.atanh()},BigNumber:function(a){return a.atanh()}})}),au=H("trigUnit",["typed"],t=>{var{typed:e}=t;return{Unit:e.referToSelf(r=>n=>{if(!n.hasBase(n.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return e.find(r,n.valueType())(n.value)})}}),$w="cos",AV=["typed"],SV=H($w,AV,t=>{var{typed:e}=t,r=au({typed:e});return e($w,{number:Math.cos,"Complex | BigNumber":n=>n.cos()},r)}),Lw="cosh",DV=["typed"],EV=H(Lw,DV,t=>{var{typed:e}=t;return e(Lw,{number:w8,"Complex | BigNumber":r=>r.cosh()})}),zw="cot",CV=["typed","BigNumber"],MV=H(zw,CV,t=>{var{typed:e,BigNumber:r}=t,n=au({typed:e});return e(zw,{number:TC,Complex:i=>i.cot(),BigNumber:i=>new r(1).div(i.tan())},n)}),qw="coth",TV=["typed","BigNumber"],_V=H(qw,TV,t=>{var{typed:e,BigNumber:r}=t;return e(qw,{number:_C,Complex:n=>n.coth(),BigNumber:n=>new r(1).div(n.tanh())})}),Uw="csc",OV=["typed","BigNumber"],FV=H(Uw,OV,t=>{var{typed:e,BigNumber:r}=t,n=au({typed:e});return e(Uw,{number:OC,Complex:i=>i.csc(),BigNumber:i=>new r(1).div(i.sin())},n)}),Hw="csch",BV=["typed","BigNumber"],kV=H(Hw,BV,t=>{var{typed:e,BigNumber:r}=t;return e(Hw,{number:FC,Complex:n=>n.csch(),BigNumber:n=>new r(1).div(n.sinh())})}),Vw="sec",IV=["typed","BigNumber"],RV=H(Vw,IV,t=>{var{typed:e,BigNumber:r}=t,n=au({typed:e});return e(Vw,{number:BC,Complex:i=>i.sec(),BigNumber:i=>new r(1).div(i.cos())},n)}),Ww="sech",PV=["typed","BigNumber"],$V=H(Ww,PV,t=>{var{typed:e,BigNumber:r}=t;return e(Ww,{number:kC,Complex:n=>n.sech(),BigNumber:n=>new r(1).div(n.cosh())})}),jw="sin",LV=["typed"],zV=H(jw,LV,t=>{var{typed:e}=t,r=au({typed:e});return e(jw,{number:Math.sin,"Complex | BigNumber":n=>n.sin()},r)}),Gw="sinh",qV=["typed"],UV=H(Gw,qV,t=>{var{typed:e}=t;return e(Gw,{number:IC,"Complex | BigNumber":r=>r.sinh()})}),Kw="tan",HV=["typed"],VV=H(Kw,HV,t=>{var{typed:e}=t,r=au({typed:e});return e(Kw,{number:Math.tan,"Complex | BigNumber":n=>n.tan()},r)}),WV="tanh",jV=["typed"],GV=H(WV,jV,t=>{var{typed:e}=t;return e("tanh",{number:A8,"Complex | BigNumber":r=>r.tanh()})}),Jw="setCartesian",KV=["typed","size","subset","compareNatural","Index","DenseMatrix"],JV=H(Jw,KV,t=>{var{typed:e,size:r,subset:n,compareNatural:i,Index:a,DenseMatrix:o}=t;return e(Jw,{"Array | Matrix, Array | Matrix":function(u,l){var c=[];if(n(r(u),new a(0))!==0&&n(r(l),new a(0))!==0){var f=Et(Array.isArray(u)?u:u.toArray()).sort(i),d=Et(Array.isArray(l)?l:l.toArray()).sort(i);c=[];for(var p=0;p<f.length;p++)for(var h=0;h<d.length;h++)c.push([f[p],d[h]])}return Array.isArray(u)&&Array.isArray(l)?c:new o(c)}})}),Yw="setDifference",YV=["typed","size","subset","compareNatural","Index","DenseMatrix"],ZV=H(Yw,YV,t=>{var{typed:e,size:r,subset:n,compareNatural:i,Index:a,DenseMatrix:o}=t;return e(Yw,{"Array | Matrix, Array | Matrix":function(u,l){var c;if(n(r(u),new a(0))===0)c=[];else{if(n(r(l),new a(0))===0)return Et(u.toArray());var f=Js(Et(Array.isArray(u)?u:u.toArray()).sort(i)),d=Js(Et(Array.isArray(l)?l:l.toArray()).sort(i));c=[];for(var p,h=0;h<f.length;h++){p=!1;for(var m=0;m<d.length;m++)if(i(f[h].value,d[m].value)===0&&f[h].identifier===d[m].identifier){p=!0;break}p||c.push(f[h])}}return Array.isArray(u)&&Array.isArray(l)?gd(c):new o(gd(c))}})}),Zw="setDistinct",XV=["typed","size","subset","compareNatural","Index","DenseMatrix"],QV=H(Zw,XV,t=>{var{typed:e,size:r,subset:n,compareNatural:i,Index:a,DenseMatrix:o}=t;return e(Zw,{"Array | Matrix":function(u){var l;if(n(r(u),new a(0))===0)l=[];else{var c=Et(Array.isArray(u)?u:u.toArray()).sort(i);l=[],l.push(c[0]);for(var f=1;f<c.length;f++)i(c[f],c[f-1])!==0&&l.push(c[f])}return Array.isArray(u)?l:new o(l)}})}),Xw="setIntersect",eW=["typed","size","subset","compareNatural","Index","DenseMatrix"],tW=H(Xw,eW,t=>{var{typed:e,size:r,subset:n,compareNatural:i,Index:a,DenseMatrix:o}=t;return e(Xw,{"Array | Matrix, Array | Matrix":function(u,l){var c;if(n(r(u),new a(0))===0||n(r(l),new a(0))===0)c=[];else{var f=Js(Et(Array.isArray(u)?u:u.toArray()).sort(i)),d=Js(Et(Array.isArray(l)?l:l.toArray()).sort(i));c=[];for(var p=0;p<f.length;p++)for(var h=0;h<d.length;h++)if(i(f[p].value,d[h].value)===0&&f[p].identifier===d[h].identifier){c.push(f[p]);break}}return Array.isArray(u)&&Array.isArray(l)?gd(c):new o(gd(c))}})}),Qw="setIsSubset",rW=["typed","size","subset","compareNatural","Index"],nW=H(Qw,rW,t=>{var{typed:e,size:r,subset:n,compareNatural:i,Index:a}=t;return e(Qw,{"Array | Matrix, Array | Matrix":function(s,u){if(n(r(s),new a(0))===0)return!0;if(n(r(u),new a(0))===0)return!1;for(var l=Js(Et(Array.isArray(s)?s:s.toArray()).sort(i)),c=Js(Et(Array.isArray(u)?u:u.toArray()).sort(i)),f,d=0;d<l.length;d++){f=!1;for(var p=0;p<c.length;p++)if(i(l[d].value,c[p].value)===0&&l[d].identifier===c[p].identifier){f=!0;break}if(f===!1)return!1}return!0}})}),eN="setMultiplicity",iW=["typed","size","subset","compareNatural","Index"],aW=H(eN,iW,t=>{var{typed:e,size:r,subset:n,compareNatural:i,Index:a}=t;return e(eN,{"number | BigNumber | Fraction | Complex, Array | Matrix":function(s,u){if(n(r(u),new a(0))===0)return 0;for(var l=Et(Array.isArray(u)?u:u.toArray()),c=0,f=0;f<l.length;f++)i(l[f],s)===0&&c++;return c}})}),tN="setPowerset",oW=["typed","size","subset","compareNatural","Index"],sW=H(tN,oW,t=>{var{typed:e,size:r,subset:n,compareNatural:i,Index:a}=t;return e(tN,{"Array | Matrix":function(l){if(n(r(l),new a(0))===0)return[];for(var c=Et(Array.isArray(l)?l:l.toArray()).sort(i),f=[],d=0;d.toString(2).length<=c.length;)f.push(o(c,d.toString(2).split("").reverse())),d++;return s(f)}});function o(u,l){for(var c=[],f=0;f<l.length;f++)l[f]==="1"&&c.push(u[f]);return c}function s(u){for(var l=[],c=u.length-1;c>0;c--)for(var f=0;f<c;f++)u[f].length>u[f+1].length&&(l=u[f],u[f]=u[f+1],u[f+1]=l);return u}}),rN="setSize",uW=["typed","compareNatural"],lW=H(rN,uW,t=>{var{typed:e,compareNatural:r}=t;return e(rN,{"Array | Matrix":function(i){return Array.isArray(i)?Et(i).length:Et(i.toArray()).length},"Array | Matrix, boolean":function(i,a){if(a===!1||i.length===0)return Array.isArray(i)?Et(i).length:Et(i.toArray()).length;for(var o=Et(Array.isArray(i)?i:i.toArray()).sort(r),s=1,u=1;u<o.length;u++)r(o[u],o[u-1])!==0&&s++;return s}})}),nN="setSymDifference",cW=["typed","size","concat","subset","setDifference","Index"],fW=H(nN,cW,t=>{var{typed:e,size:r,concat:n,subset:i,setDifference:a,Index:o}=t;return e(nN,{"Array | Matrix, Array | Matrix":function(u,l){if(i(r(u),new o(0))===0)return Et(l);if(i(r(l),new o(0))===0)return Et(u);var c=Et(u),f=Et(l);return n(a(c,f),a(f,c))}})}),iN="setUnion",dW=["typed","size","concat","subset","setIntersect","setSymDifference","Index"],pW=H(iN,dW,t=>{var{typed:e,size:r,concat:n,subset:i,setIntersect:a,setSymDifference:o,Index:s}=t;return e(iN,{"Array | Matrix, Array | Matrix":function(l,c){if(i(r(l),new s(0))===0)return Et(c);if(i(r(c),new s(0))===0)return Et(l);var f=Et(l),d=Et(c);return n(o(f,d),a(f,d))}})}),aN="add",hW=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],mW=H(aN,hW,t=>{var{typed:e,matrix:r,addScalar:n,equalScalar:i,DenseMatrix:a,SparseMatrix:o,concat:s}=t,u=oo({typed:e}),l=Tv({typed:e,equalScalar:i}),c=Zo({typed:e,DenseMatrix:a}),f=$t({typed:e,matrix:r,concat:s});return e(aN,{"any, any":n,"any, any, ...any":e.referToSelf(d=>(p,h,m)=>{for(var g=d(p,h),y=0;y<m.length;y++)g=d(g,m[y]);return g})},f({elop:n,DS:u,SS:l,Ss:c}))}),oN="hypot",gW=["typed","abs","addScalar","divideScalar","multiplyScalar","sqrt","smaller","isPositive"],vW=H(oN,gW,t=>{var{typed:e,abs:r,addScalar:n,divideScalar:i,multiplyScalar:a,sqrt:o,smaller:s,isPositive:u}=t;return e(oN,{"... number | BigNumber":l,Array:l,Matrix:c=>l(Et(c.toArray(),!0))});function l(c){for(var f=0,d=0,p=0;p<c.length;p++){if(ua(c[p]))throw new TypeError("Unexpected type of argument to hypot");var h=r(c[p]);s(d,h)?(f=a(f,a(i(d,h),i(d,h))),f=n(f,1),d=h):f=n(f,u(h)?a(i(h,d),i(h,d)):h)}return a(d,o(f))}}),sN="norm",yW=["typed","abs","add","pow","conj","sqrt","multiply","equalScalar","larger","smaller","matrix","ctranspose","eigs"],bW=H(sN,yW,t=>{var{typed:e,abs:r,add:n,pow:i,conj:a,sqrt:o,multiply:s,equalScalar:u,larger:l,smaller:c,matrix:f,ctranspose:d,eigs:p}=t;return e(sN,{number:Math.abs,Complex:function(C){return C.abs()},BigNumber:function(C){return C.abs()},boolean:function(C){return Math.abs(C)},Array:function(C){return b(f(C),2)},Matrix:function(C){return b(C,2)},"Array, number | BigNumber | string":function(C,A){return b(f(C),A)},"Matrix, number | BigNumber | string":function(C,A){return b(C,A)}});function h(S){var C=0;return S.forEach(function(A){var E=r(A);l(E,C)&&(C=E)},!0),C}function m(S){var C;return S.forEach(function(A){var E=r(A);(!C||c(E,C))&&(C=E)},!0),C||0}function g(S,C){if(C===Number.POSITIVE_INFINITY||C==="inf")return h(S);if(C===Number.NEGATIVE_INFINITY||C==="-inf")return m(S);if(C==="fro")return b(S,2);if(typeof C=="number"&&!isNaN(C)){if(!u(C,0)){var A=0;return S.forEach(function(E){A=n(i(r(E),C),A)},!0),i(A,1/C)}return Number.POSITIVE_INFINITY}throw new Error("Unsupported parameter value")}function y(S){var C=0;return S.forEach(function(A,E){C=n(C,s(A,a(A)))}),r(o(C))}function N(S){var C=[],A=0;return S.forEach(function(E,D){var M=D[1],F=n(C[M]||0,r(E));l(F,A)&&(A=F),C[M]=F},!0),A}function v(S){var C=S.size();if(C[0]!==C[1])throw new RangeError("Invalid matrix dimensions");var A=d(S),E=s(A,S),D=p(E).values.toArray(),M=D[D.length-1];return r(o(M))}function w(S){var C=[],A=0;return S.forEach(function(E,D){var M=D[0],F=n(C[M]||0,r(E));l(F,A)&&(A=F),C[M]=F},!0),A}function x(S,C){if(C===1)return N(S);if(C===Number.POSITIVE_INFINITY||C==="inf")return w(S);if(C==="fro")return y(S);if(C===2)return v(S);throw new Error("Unsupported parameter value "+C)}function b(S,C){var A=S.size();if(A.length===1)return g(S,C);if(A.length===2){if(A[0]&&A[1])return x(S,C);throw new RangeError("Invalid matrix dimensions")}}}),uN="dot",xW=["typed","addScalar","multiplyScalar","conj","size"],wW=H(uN,xW,t=>{var{typed:e,addScalar:r,multiplyScalar:n,conj:i,size:a}=t;return e(uN,{"Array | DenseMatrix, Array | DenseMatrix":s,"SparseMatrix, SparseMatrix":u});function o(c,f){var d=l(c),p=l(f),h,m;if(d.length===1)h=d[0];else if(d.length===2&&d[1]===1)h=d[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+d.join(", ")+")");if(p.length===1)m=p[0];else if(p.length===2&&p[1]===1)m=p[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+p.join(", ")+")");if(h!==m)throw new RangeError("Vectors must have equal length ("+h+" != "+m+")");if(h===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return h}function s(c,f){var d=o(c,f),p=We(c)?c._data:c,h=We(c)?c._datatype||c.getDataType():void 0,m=We(f)?f._data:f,g=We(f)?f._datatype||f.getDataType():void 0,y=l(c).length===2,N=l(f).length===2,v=r,w=n;if(h&&g&&h===g&&typeof h=="string"&&h!=="mixed"){var x=h;v=e.find(r,[x,x]),w=e.find(n,[x,x])}if(!y&&!N){for(var b=w(i(p[0]),m[0]),S=1;S<d;S++)b=v(b,w(i(p[S]),m[S]));return b}if(!y&&N){for(var C=w(i(p[0]),m[0][0]),A=1;A<d;A++)C=v(C,w(i(p[A]),m[A][0]));return C}if(y&&!N){for(var E=w(i(p[0][0]),m[0]),D=1;D<d;D++)E=v(E,w(i(p[D][0]),m[D]));return E}if(y&&N){for(var M=w(i(p[0][0]),m[0][0]),F=1;F<d;F++)M=v(M,w(i(p[F][0]),m[F][0]));return M}}function u(c,f){o(c,f);for(var d=c._index,p=c._values,h=f._index,m=f._values,g=0,y=r,N=n,v=0,w=0;v<d.length&&w<h.length;){var x=d[v],b=h[w];if(x<b){v++;continue}if(x>b){w++;continue}x===b&&(g=y(g,N(p[v],m[w])),v++,w++)}return g}function l(c){return We(c)?c.size():a(c)}}),NW="trace",AW=["typed","matrix","add"],SW=H(NW,AW,t=>{var{typed:e,matrix:r,add:n}=t;return e("trace",{Array:function(s){return i(r(s))},SparseMatrix:a,DenseMatrix:i,any:et});function i(o){var s=o._size,u=o._data;switch(s.length){case 1:if(s[0]===1)return et(u[0]);throw new RangeError("Matrix must be square (size: "+pt(s)+")");case 2:{var l=s[0],c=s[1];if(l===c){for(var f=0,d=0;d<l;d++)f=n(f,u[d][d]);return f}else throw new RangeError("Matrix must be square (size: "+pt(s)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+pt(s)+")")}}function a(o){var s=o._values,u=o._index,l=o._ptr,c=o._size,f=c[0],d=c[1];if(f===d){var p=0;if(s.length>0)for(var h=0;h<d;h++)for(var m=l[h],g=l[h+1],y=m;y<g;y++){var N=u[y];if(N===h){p=n(p,s[y]);break}if(N>h)break}return p}throw new RangeError("Matrix must be square (size: "+pt(c)+")")}}),lN="index",DW=["typed","Index"],EW=H(lN,DW,t=>{var{typed:e,Index:r}=t;return e(lN,{"...number | string | BigNumber | Range | Array | Matrix":function(i){var a=i.map(function(s){return ot(s)?s.toNumber():Bt(s)||We(s)?s.map(function(u){return ot(u)?u.toNumber():u}):s}),o=new r;return r.apply(o,a),o}})}),sM=new Set(["end"]),CW="Node",MW=["mathWithTransform"],TW=H(CW,MW,t=>{var{mathWithTransform:e}=t;function r(i){for(var a of[...sM])if(i.has(a))throw new Error('Scope contains an illegal symbol, "'+a+'" is a reserved keyword')}class n{get type(){return"Node"}get isNode(){return!0}evaluate(a){return this.compile().evaluate(a)}compile(){var a=this._compile(e,{}),o={},s=null;function u(l){var c=Bs(l);return r(c),a(c,o,s)}return{evaluate:u}}_compile(a,o){throw new Error("Method _compile must be implemented by type "+this.type)}forEach(a){throw new Error("Cannot run forEach on a Node interface")}map(a){throw new Error("Cannot run map on a Node interface")}_ifNode(a){if(!Ot(a))throw new TypeError("Callback function must return a Node");return a}traverse(a){a(this,null,null);function o(s,u){s.forEach(function(l,c,f){u(l,c,f),o(l,u)})}o(this,a)}transform(a){function o(s,u,l){var c=a(s,u,l);return c!==s?c:s.map(o)}return o(this,null,null)}filter(a){var o=[];return this.traverse(function(s,u,l){a(s,u,l)&&o.push(s)}),o}clone(){throw new Error("Cannot clone a Node interface")}cloneDeep(){return this.map(function(a){return a.cloneDeep()})}equals(a){return a?this.type===a.type&&pa(this,a):!1}toString(a){var o=this._getCustomString(a);return typeof o<"u"?o:this._toString(a)}_toString(){throw new Error("_toString not implemented for "+this.type)}toJSON(){throw new Error("Cannot serialize object: toJSON not implemented by "+this.type)}toHTML(a){var o=this._getCustomString(a);return typeof o<"u"?o:this._toHTML(a)}_toHTML(){throw new Error("_toHTML not implemented for "+this.type)}toTex(a){var o=this._getCustomString(a);return typeof o<"u"?o:this._toTex(a)}_toTex(a){throw new Error("_toTex not implemented for "+this.type)}_getCustomString(a){if(a&&typeof a=="object")switch(typeof a.handler){case"object":case"undefined":return;case"function":return a.handler(this,a);default:throw new TypeError("Object or function expected as callback")}}getIdentifier(){return this.type}getContent(){return this}}return n},{isClass:!0,isNode:!0});function mn(t){return t&&t.isIndexError?new di(t.index+1,t.min+1,t.max!==void 0?t.max+1:void 0):t}function uM(t){var{subset:e}=t;return function(n,i){try{if(Array.isArray(n))return e(n,i);if(n&&typeof n.subset=="function")return n.subset(i);if(typeof n=="string")return e(n,i);if(typeof n=="object"){if(!i.isObjectProperty())throw new TypeError("Cannot apply a numeric index as object property");return an(n,i.getObjectProperty())}else throw new TypeError("Cannot apply index: unsupported type of object")}catch(a){throw mn(a)}}}var Ec="AccessorNode",_W=["subset","Node"],OW=H(Ec,_W,t=>{var{subset:e,Node:r}=t,n=uM({subset:e});function i(o){return!(Wo(o)||zn(o)||wt(o)||Za(o)||gp(o)||da(o)||xr(o))}class a extends r{constructor(s,u){if(super(),!Ot(s))throw new TypeError('Node expected for parameter "object"');if(!eu(u))throw new TypeError('IndexNode expected for parameter "index"');this.object=s,this.index=u}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return Ec}get isAccessorNode(){return!0}_compile(s,u){var l=this.object._compile(s,u),c=this.index._compile(s,u);if(this.index.isObjectProperty()){var f=this.index.getObjectProperty();return function(p,h,m){return an(l(p,h,m),f)}}else return function(p,h,m){var g=l(p,h,m),y=c(p,h,g);return n(g,y)}}forEach(s){s(this.object,"object",this),s(this.index,"index",this)}map(s){return new a(this._ifNode(s(this.object,"object",this)),this._ifNode(s(this.index,"index",this)))}clone(){return new a(this.object,this.index)}_toString(s){var u=this.object.toString(s);return i(this.object)&&(u="("+u+")"),u+this.index.toString(s)}_toHTML(s){var u=this.object.toHTML(s);return i(this.object)&&(u='<span class="math-parenthesis math-round-parenthesis">(</span>'+u+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u+this.index.toHTML(s)}_toTex(s){var u=this.object.toTex(s);return i(this.object)&&(u="\\left(' + object + '\\right)"),u+this.index.toTex(s)}toJSON(){return{mathjs:Ec,object:this.object,index:this.index}}static fromJSON(s){return new a(s.object,s.index)}}return cr(a,"name",Ec),a},{isClass:!0,isNode:!0}),Cc="ArrayNode",FW=["Node"],BW=H(Cc,FW,t=>{var{Node:e}=t;class r extends e{constructor(i){if(super(),this.items=i||[],!Array.isArray(this.items)||!this.items.every(Ot))throw new TypeError("Array containing Nodes expected")}get type(){return Cc}get isArrayNode(){return!0}_compile(i,a){var o=Ga(this.items,function(l){return l._compile(i,a)}),s=i.config.matrix!=="Array";if(s){var u=i.matrix;return function(c,f,d){return u(Ga(o,function(p){return p(c,f,d)}))}}else return function(c,f,d){return Ga(o,function(p){return p(c,f,d)})}}forEach(i){for(var a=0;a<this.items.length;a++){var o=this.items[a];i(o,"items["+a+"]",this)}}map(i){for(var a=[],o=0;o<this.items.length;o++)a[o]=this._ifNode(i(this.items[o],"items["+o+"]",this));return new r(a)}clone(){return new r(this.items.slice(0))}_toString(i){var a=this.items.map(function(o){return o.toString(i)});return"["+a.join(", ")+"]"}toJSON(){return{mathjs:Cc,items:this.items}}static fromJSON(i){return new r(i.items)}_toHTML(i){var a=this.items.map(function(o){return o.toHTML(i)});return'<span class="math-parenthesis math-square-parenthesis">[</span>'+a.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(i){function a(o,s){var u=o.some(zn)&&!o.every(zn),l=s||u,c=l?"&":"\\\\",f=o.map(function(d){return d.items?a(d.items,!s):d.toTex(i)}).join(c);return u||!l||l&&!s?"\\begin{bmatrix}"+f+"\\end{bmatrix}":f}return a(this.items,!1)}}return cr(r,"name",Cc),r},{isClass:!0,isNode:!0});function kW(t){var{subset:e,matrix:r}=t;return function(i,a,o){try{if(Array.isArray(i)){var s=r(i).subset(a,o).valueOf();return s.forEach((u,l)=>{i[l]=u}),i}else{if(i&&typeof i.subset=="function")return i.subset(a,o);if(typeof i=="string")return e(i,a,o);if(typeof i=="object"){if(!a.isObjectProperty())throw TypeError("Cannot apply a numeric index as object property");return Ws(i,a.getObjectProperty(),o),i}else throw new TypeError("Cannot apply index: unsupported type of object")}}catch(u){throw mn(u)}}}var ni=[{AssignmentNode:{},FunctionAssignmentNode:{}},{ConditionalNode:{latexLeftParens:!1,latexRightParens:!1,latexParens:!1}},{"OperatorNode:or":{op:"or",associativity:"left",associativeWith:[]}},{"OperatorNode:xor":{op:"xor",associativity:"left",associativeWith:[]}},{"OperatorNode:and":{op:"and",associativity:"left",associativeWith:[]}},{"OperatorNode:bitOr":{op:"|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitXor":{op:"^|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitAnd":{op:"&",associativity:"left",associativeWith:[]}},{"OperatorNode:equal":{op:"==",associativity:"left",associativeWith:[]},"OperatorNode:unequal":{op:"!=",associativity:"left",associativeWith:[]},"OperatorNode:smaller":{op:"<",associativity:"left",associativeWith:[]},"OperatorNode:larger":{op:">",associativity:"left",associativeWith:[]},"OperatorNode:smallerEq":{op:"<=",associativity:"left",associativeWith:[]},"OperatorNode:largerEq":{op:">=",associativity:"left",associativeWith:[]},RelationalNode:{associativity:"left",associativeWith:[]}},{"OperatorNode:leftShift":{op:"<<",associativity:"left",associativeWith:[]},"OperatorNode:rightArithShift":{op:">>",associativity:"left",associativeWith:[]},"OperatorNode:rightLogShift":{op:">>>",associativity:"left",associativeWith:[]}},{"OperatorNode:to":{op:"to",associativity:"left",associativeWith:[]}},{RangeNode:{}},{"OperatorNode:add":{op:"+",associativity:"left",associativeWith:["OperatorNode:add","OperatorNode:subtract"]},"OperatorNode:subtract":{op:"-",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{op:"*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]},"OperatorNode:divide":{op:"/",associativity:"left",associativeWith:[],latexLeftParens:!1,latexRightParens:!1,latexParens:!1},"OperatorNode:dotMultiply":{op:".*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","OperatorNode:dotMultiply","OperatorNode:doDivide"]},"OperatorNode:dotDivide":{op:"./",associativity:"left",associativeWith:[]},"OperatorNode:mod":{op:"mod",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]}},{"OperatorNode:unaryPlus":{op:"+",associativity:"right"},"OperatorNode:unaryMinus":{op:"-",associativity:"right"},"OperatorNode:bitNot":{op:"~",associativity:"right"},"OperatorNode:not":{op:"not",associativity:"right"}},{"OperatorNode:pow":{op:"^",associativity:"right",associativeWith:[],latexRightParens:!1},"OperatorNode:dotPow":{op:".^",associativity:"right",associativeWith:[]}},{"OperatorNode:factorial":{op:"!",associativity:"left"}},{"OperatorNode:ctranspose":{op:"'",associativity:"left"}}];function Mc(t,e){if(!e||e!=="auto")return t;for(var r=t;da(r);)r=r.content;return r}function kt(t,e,r,n){var i=t;e!=="keep"&&(i=t.getContent());for(var a=i.getIdentifier(),o=null,s=0;s<ni.length;s++)if(a in ni[s]){o=s;break}if(a==="OperatorNode:multiply"&&i.implicit&&r!=="show"){var u=Mc(i.args[0],e);!(wt(u)&&n&&n.getIdentifier()==="OperatorNode:divide"&&Gm(Mc(n.args[0],e)))&&!(u.getIdentifier()==="OperatorNode:divide"&&Gm(Mc(u.args[0],e))&&wt(Mc(u.args[1])))&&(o+=1)}return o}function Eu(t,e){var r=t;e!=="keep"&&(r=t.getContent());var n=r.getIdentifier(),i=kt(r,e);if(i===null)return null;var a=ni[i][n];if(Ie(a,"associativity")){if(a.associativity==="left")return"left";if(a.associativity==="right")return"right";throw Error("'"+n+"' has the invalid associativity '"+a.associativity+"'.")}return null}function Vh(t,e,r){var n=r!=="keep"?t.getContent():t,i=r!=="keep"?t.getContent():e,a=n.getIdentifier(),o=i.getIdentifier(),s=kt(n,r);if(s===null)return null;var u=ni[s][a];if(Ie(u,"associativeWith")&&u.associativeWith instanceof Array){for(var l=0;l<u.associativeWith.length;l++)if(u.associativeWith[l]===o)return!0;return!1}return null}function IW(t){var e="OperatorNode:"+t;for(var r of ni)if(e in r)return r[e].op;return null}var Tc="AssignmentNode",RW=["subset","?matrix","Node"],PW=H(Tc,RW,t=>{var{subset:e,matrix:r,Node:n}=t,i=uM({subset:e}),a=kW({subset:e,matrix:r});function o(u,l,c){l||(l="keep");var f=kt(u,l,c),d=kt(u.value,l,c);return l==="all"||d!==null&&d<=f}class s extends n{constructor(l,c,f){if(super(),this.object=l,this.index=f?c:null,this.value=f||c,!xr(l)&&!Wo(l))throw new TypeError('SymbolNode or AccessorNode expected as "object"');if(xr(l)&&l.name==="end")throw new Error('Cannot assign to symbol "end"');if(this.index&&!eu(this.index))throw new TypeError('IndexNode expected as "index"');if(!Ot(this.value))throw new TypeError('Node expected as "value"')}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return Tc}get isAssignmentNode(){return!0}_compile(l,c){var f=this.object._compile(l,c),d=this.index?this.index._compile(l,c):null,p=this.value._compile(l,c),h=this.object.name;if(this.index)if(this.index.isObjectProperty()){var m=this.index.getObjectProperty();return function(w,x,b){var S=f(w,x,b),C=p(w,x,b);return Ws(S,m,C),C}}else{if(xr(this.object))return function(w,x,b){var S=f(w,x,b),C=p(w,x,b),A=d(w,x,S);return w.set(h,a(S,A,C)),C};var g=this.object.object._compile(l,c);if(this.object.index.isObjectProperty()){var y=this.object.index.getObjectProperty();return function(w,x,b){var S=g(w,x,b),C=an(S,y),A=d(w,x,C),E=p(w,x,b);return Ws(S,y,a(C,A,E)),E}}else{var N=this.object.index._compile(l,c);return function(w,x,b){var S=g(w,x,b),C=N(w,x,S),A=i(S,C),E=d(w,x,A),D=p(w,x,b);return a(S,C,a(A,E,D)),D}}}else{if(!xr(this.object))throw new TypeError("SymbolNode expected as object");return function(w,x,b){var S=p(w,x,b);return w.set(h,S),S}}}forEach(l){l(this.object,"object",this),this.index&&l(this.index,"index",this),l(this.value,"value",this)}map(l){var c=this._ifNode(l(this.object,"object",this)),f=this.index?this._ifNode(l(this.index,"index",this)):null,d=this._ifNode(l(this.value,"value",this));return new s(c,f,d)}clone(){return new s(this.object,this.index,this.value)}_toString(l){var c=this.object.toString(l),f=this.index?this.index.toString(l):"",d=this.value.toString(l);return o(this,l&&l.parenthesis,l&&l.implicit)&&(d="("+d+")"),c+f+" = "+d}toJSON(){return{mathjs:Tc,object:this.object,index:this.index,value:this.value}}static fromJSON(l){return new s(l.object,l.index,l.value)}_toHTML(l){var c=this.object.toHTML(l),f=this.index?this.index.toHTML(l):"",d=this.value.toHTML(l);return o(this,l&&l.parenthesis,l&&l.implicit)&&(d='<span class="math-paranthesis math-round-parenthesis">(</span>'+d+'<span class="math-paranthesis math-round-parenthesis">)</span>'),c+f+'<span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+d}_toTex(l){var c=this.object.toTex(l),f=this.index?this.index.toTex(l):"",d=this.value.toTex(l);return o(this,l&&l.parenthesis,l&&l.implicit)&&(d="\\left(".concat(d,"\\right)")),c+f+"="+d}}return cr(s,"name",Tc),s},{isClass:!0,isNode:!0}),_c="BlockNode",$W=["ResultSet","Node"],LW=H(_c,$W,t=>{var{ResultSet:e,Node:r}=t;class n extends r{constructor(a){if(super(),!Array.isArray(a))throw new Error("Array expected");this.blocks=a.map(function(o){var s=o&&o.node,u=o&&o.visible!==void 0?o.visible:!0;if(!Ot(s))throw new TypeError('Property "node" must be a Node');if(typeof u!="boolean")throw new TypeError('Property "visible" must be a boolean');return{node:s,visible:u}})}get type(){return _c}get isBlockNode(){return!0}_compile(a,o){var s=Ga(this.blocks,function(u){return{evaluate:u.node._compile(a,o),visible:u.visible}});return function(l,c,f){var d=[];return V2(s,function(h){var m=h.evaluate(l,c,f);h.visible&&d.push(m)}),new e(d)}}forEach(a){for(var o=0;o<this.blocks.length;o++)a(this.blocks[o].node,"blocks["+o+"].node",this)}map(a){for(var o=[],s=0;s<this.blocks.length;s++){var u=this.blocks[s],l=this._ifNode(a(u.node,"blocks["+s+"].node",this));o[s]={node:l,visible:u.visible}}return new n(o)}clone(){var a=this.blocks.map(function(o){return{node:o.node,visible:o.visible}});return new n(a)}_toString(a){return this.blocks.map(function(o){return o.node.toString(a)+(o.visible?"":";")}).join(`
`)}toJSON(){return{mathjs:_c,blocks:this.blocks}}static fromJSON(a){return new n(a.blocks)}_toHTML(a){return this.blocks.map(function(o){return o.node.toHTML(a)+(o.visible?"":'<span class="math-separator">;</span>')}).join('<span class="math-separator"><br /></span>')}_toTex(a){return this.blocks.map(function(o){return o.node.toTex(a)+(o.visible?"":";")}).join(`\\;\\;
`)}}return cr(n,"name",_c),n},{isClass:!0,isNode:!0}),Oc="ConditionalNode",zW=["Node"],qW=H(Oc,zW,t=>{var{Node:e}=t;function r(i){if(typeof i=="number"||typeof i=="boolean"||typeof i=="string")return!!i;if(i){if(ot(i))return!i.isZero();if(ua(i))return!!(i.re||i.im);if(qn(i))return!!i.value}if(i==null)return!1;throw new TypeError('Unsupported type of condition "'+It(i)+'"')}class n extends e{constructor(a,o,s){if(super(),!Ot(a))throw new TypeError("Parameter condition must be a Node");if(!Ot(o))throw new TypeError("Parameter trueExpr must be a Node");if(!Ot(s))throw new TypeError("Parameter falseExpr must be a Node");this.condition=a,this.trueExpr=o,this.falseExpr=s}get type(){return Oc}get isConditionalNode(){return!0}_compile(a,o){var s=this.condition._compile(a,o),u=this.trueExpr._compile(a,o),l=this.falseExpr._compile(a,o);return function(f,d,p){return r(s(f,d,p))?u(f,d,p):l(f,d,p)}}forEach(a){a(this.condition,"condition",this),a(this.trueExpr,"trueExpr",this),a(this.falseExpr,"falseExpr",this)}map(a){return new n(this._ifNode(a(this.condition,"condition",this)),this._ifNode(a(this.trueExpr,"trueExpr",this)),this._ifNode(a(this.falseExpr,"falseExpr",this)))}clone(){return new n(this.condition,this.trueExpr,this.falseExpr)}_toString(a){var o=a&&a.parenthesis?a.parenthesis:"keep",s=kt(this,o,a&&a.implicit),u=this.condition.toString(a),l=kt(this.condition,o,a&&a.implicit);(o==="all"||this.condition.type==="OperatorNode"||l!==null&&l<=s)&&(u="("+u+")");var c=this.trueExpr.toString(a),f=kt(this.trueExpr,o,a&&a.implicit);(o==="all"||this.trueExpr.type==="OperatorNode"||f!==null&&f<=s)&&(c="("+c+")");var d=this.falseExpr.toString(a),p=kt(this.falseExpr,o,a&&a.implicit);return(o==="all"||this.falseExpr.type==="OperatorNode"||p!==null&&p<=s)&&(d="("+d+")"),u+" ? "+c+" : "+d}toJSON(){return{mathjs:Oc,condition:this.condition,trueExpr:this.trueExpr,falseExpr:this.falseExpr}}static fromJSON(a){return new n(a.condition,a.trueExpr,a.falseExpr)}_toHTML(a){var o=a&&a.parenthesis?a.parenthesis:"keep",s=kt(this,o,a&&a.implicit),u=this.condition.toHTML(a),l=kt(this.condition,o,a&&a.implicit);(o==="all"||this.condition.type==="OperatorNode"||l!==null&&l<=s)&&(u='<span class="math-parenthesis math-round-parenthesis">(</span>'+u+'<span class="math-parenthesis math-round-parenthesis">)</span>');var c=this.trueExpr.toHTML(a),f=kt(this.trueExpr,o,a&&a.implicit);(o==="all"||this.trueExpr.type==="OperatorNode"||f!==null&&f<=s)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>');var d=this.falseExpr.toHTML(a),p=kt(this.falseExpr,o,a&&a.implicit);return(o==="all"||this.falseExpr.type==="OperatorNode"||p!==null&&p<=s)&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u+'<span class="math-operator math-conditional-operator">?</span>'+c+'<span class="math-operator math-conditional-operator">:</span>'+d}_toTex(a){return"\\begin{cases} {"+this.trueExpr.toTex(a)+"}, &\\quad{\\text{if }\\;"+this.condition.toTex(a)+"}\\\\{"+this.falseExpr.toTex(a)+"}, &\\quad{\\text{otherwise}}\\end{cases}"}}return cr(n,"name",Oc),n},{isClass:!0,isNode:!0}),Wh,cN;function UW(){if(cN)return Wh;cN=1;var t=Object.assign||function(i){for(var a=1;a<arguments.length;a++){var o=arguments[a];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}return i},e={"{":"\\{","}":"\\}","\\":"\\textbackslash{}","#":"\\#",$:"\\$","%":"\\%","&":"\\&","^":"\\textasciicircum{}",_:"\\_","~":"\\textasciitilde{}"},r={"":"\\--","":"\\---"," ":"~","	":"\\qquad{}","\r\n":"\\newline{}","\n":"\\newline{}"},n=function(a,o){return t({},a,o)};return Wh=function(i){for(var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=a.preserveFormatting,s=o===void 0?!1:o,u=a.escapeMapFn,l=u===void 0?n:u,c=String(i),f="",d=l(t({},e),s?t({},r):{}),p=Object.keys(d),h=function(){var g=!1;p.forEach(function(y,N){g||c.length>=y.length&&c.slice(0,y.length)===y&&(f+=d[p[N]],c=c.slice(y.length,c.length),g=!0)}),g||(f+=c.slice(0,1),c=c.slice(1,c.length))};c;)h();return f},Wh}var HW=UW();const VW=Iv(HW);var pg={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},St={transpose:"^\\top",ctranspose:"^H",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"\\~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},fN={abs:{1:"\\left|${args[0]}\\right|"},add:{2:"\\left(${args[0]}".concat(St.add,"${args[1]}\\right)")},cbrt:{1:"\\sqrt[3]{${args[0]}}"},ceil:{1:"\\left\\lceil${args[0]}\\right\\rceil"},cube:{1:"\\left(${args[0]}\\right)^3"},divide:{2:"\\frac{${args[0]}}{${args[1]}}"},dotDivide:{2:"\\left(${args[0]}".concat(St.dotDivide,"${args[1]}\\right)")},dotMultiply:{2:"\\left(${args[0]}".concat(St.dotMultiply,"${args[1]}\\right)")},dotPow:{2:"\\left(${args[0]}".concat(St.dotPow,"${args[1]}\\right)")},exp:{1:"\\exp\\left(${args[0]}\\right)"},expm1:"\\left(e".concat(St.pow,"{${args[0]}}-1\\right)"),fix:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},floor:{1:"\\left\\lfloor${args[0]}\\right\\rfloor"},fraction:{2:"\\frac{${args[0]}}{${args[1]}}"},gcd:"\\gcd\\left(${args}\\right)",hypot:"\\hypot\\left(${args}\\right)",log:{1:"\\ln\\left(${args[0]}\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}\\right)"},log10:{1:"\\log_{10}\\left(${args[0]}\\right)"},log1p:{1:"\\ln\\left(${args[0]}+1\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}+1\\right)"},log2:"\\log_{2}\\left(${args[0]}\\right)",mod:{2:"\\left(${args[0]}".concat(St.mod,"${args[1]}\\right)")},multiply:{2:"\\left(${args[0]}".concat(St.multiply,"${args[1]}\\right)")},norm:{1:"\\left\\|${args[0]}\\right\\|",2:void 0},nthRoot:{2:"\\sqrt[${args[1]}]{${args[0]}}"},nthRoots:{2:"\\{y : y^${args[1]} = {${args[0]}}\\}"},pow:{2:"\\left(${args[0]}\\right)".concat(St.pow,"{${args[1]}}")},round:{1:"\\left\\lfloor${args[0]}\\right\\rceil",2:void 0},sign:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},sqrt:{1:"\\sqrt{${args[0]}}"},square:{1:"\\left(${args[0]}\\right)^2"},subtract:{2:"\\left(${args[0]}".concat(St.subtract,"${args[1]}\\right)")},unaryMinus:{1:"".concat(St.unaryMinus,"\\left(${args[0]}\\right)")},unaryPlus:{1:"".concat(St.unaryPlus,"\\left(${args[0]}\\right)")},bitAnd:{2:"\\left(${args[0]}".concat(St.bitAnd,"${args[1]}\\right)")},bitNot:{1:St.bitNot+"\\left(${args[0]}\\right)"},bitOr:{2:"\\left(${args[0]}".concat(St.bitOr,"${args[1]}\\right)")},bitXor:{2:"\\left(${args[0]}".concat(St.bitXor,"${args[1]}\\right)")},leftShift:{2:"\\left(${args[0]}".concat(St.leftShift,"${args[1]}\\right)")},rightArithShift:{2:"\\left(${args[0]}".concat(St.rightArithShift,"${args[1]}\\right)")},rightLogShift:{2:"\\left(${args[0]}".concat(St.rightLogShift,"${args[1]}\\right)")},bellNumbers:{1:"\\mathrm{B}_{${args[0]}}"},catalan:{1:"\\mathrm{C}_{${args[0]}}"},stirlingS2:{2:"\\mathrm{S}\\left(${args}\\right)"},arg:{1:"\\arg\\left(${args[0]}\\right)"},conj:{1:"\\left(${args[0]}\\right)^*"},im:{1:"\\Im\\left\\lbrace${args[0]}\\right\\rbrace"},re:{1:"\\Re\\left\\lbrace${args[0]}\\right\\rbrace"},and:{2:"\\left(${args[0]}".concat(St.and,"${args[1]}\\right)")},not:{1:St.not+"\\left(${args[0]}\\right)"},or:{2:"\\left(${args[0]}".concat(St.or,"${args[1]}\\right)")},xor:{2:"\\left(${args[0]}".concat(St.xor,"${args[1]}\\right)")},cross:{2:"\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)"},ctranspose:{1:"\\left(${args[0]}\\right)".concat(St.ctranspose)},det:{1:"\\det\\left(${args[0]}\\right)"},dot:{2:"\\left(${args[0]}\\cdot${args[1]}\\right)"},expm:{1:"\\exp\\left(${args[0]}\\right)"},inv:{1:"\\left(${args[0]}\\right)^{-1}"},pinv:{1:"\\left(${args[0]}\\right)^{+}"},sqrtm:{1:"{${args[0]}}".concat(St.pow,"{\\frac{1}{2}}")},trace:{1:"\\mathrm{tr}\\left(${args[0]}\\right)"},transpose:{1:"\\left(${args[0]}\\right)".concat(St.transpose)},combinations:{2:"\\binom{${args[0]}}{${args[1]}}"},combinationsWithRep:{2:"\\left(\\!\\!{\\binom{${args[0]}}{${args[1]}}}\\!\\!\\right)"},factorial:{1:"\\left(${args[0]}\\right)".concat(St.factorial)},gamma:{1:"\\Gamma\\left(${args[0]}\\right)"},lgamma:{1:"\\ln\\Gamma\\left(${args[0]}\\right)"},equal:{2:"\\left(${args[0]}".concat(St.equal,"${args[1]}\\right)")},larger:{2:"\\left(${args[0]}".concat(St.larger,"${args[1]}\\right)")},largerEq:{2:"\\left(${args[0]}".concat(St.largerEq,"${args[1]}\\right)")},smaller:{2:"\\left(${args[0]}".concat(St.smaller,"${args[1]}\\right)")},smallerEq:{2:"\\left(${args[0]}".concat(St.smallerEq,"${args[1]}\\right)")},unequal:{2:"\\left(${args[0]}".concat(St.unequal,"${args[1]}\\right)")},erf:{1:"erf\\left(${args[0]}\\right)"},max:"\\max\\left(${args}\\right)",min:"\\min\\left(${args}\\right)",variance:"\\mathrm{Var}\\left(${args}\\right)",acos:{1:"\\cos^{-1}\\left(${args[0]}\\right)"},acosh:{1:"\\cosh^{-1}\\left(${args[0]}\\right)"},acot:{1:"\\cot^{-1}\\left(${args[0]}\\right)"},acoth:{1:"\\coth^{-1}\\left(${args[0]}\\right)"},acsc:{1:"\\csc^{-1}\\left(${args[0]}\\right)"},acsch:{1:"\\mathrm{csch}^{-1}\\left(${args[0]}\\right)"},asec:{1:"\\sec^{-1}\\left(${args[0]}\\right)"},asech:{1:"\\mathrm{sech}^{-1}\\left(${args[0]}\\right)"},asin:{1:"\\sin^{-1}\\left(${args[0]}\\right)"},asinh:{1:"\\sinh^{-1}\\left(${args[0]}\\right)"},atan:{1:"\\tan^{-1}\\left(${args[0]}\\right)"},atan2:{2:"\\mathrm{atan2}\\left(${args}\\right)"},atanh:{1:"\\tanh^{-1}\\left(${args[0]}\\right)"},cos:{1:"\\cos\\left(${args[0]}\\right)"},cosh:{1:"\\cosh\\left(${args[0]}\\right)"},cot:{1:"\\cot\\left(${args[0]}\\right)"},coth:{1:"\\coth\\left(${args[0]}\\right)"},csc:{1:"\\csc\\left(${args[0]}\\right)"},csch:{1:"\\mathrm{csch}\\left(${args[0]}\\right)"},sec:{1:"\\sec\\left(${args[0]}\\right)"},sech:{1:"\\mathrm{sech}\\left(${args[0]}\\right)"},sin:{1:"\\sin\\left(${args[0]}\\right)"},sinh:{1:"\\sinh\\left(${args[0]}\\right)"},tan:{1:"\\tan\\left(${args[0]}\\right)"},tanh:{1:"\\tanh\\left(${args[0]}\\right)"},to:{2:"\\left(${args[0]}".concat(St.to,"${args[1]}\\right)")},numeric:function(e,r){return e.args[0].toTex()},number:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},string:{0:'\\mathtt{""}',1:"\\mathrm{string}\\left(${args[0]}\\right)"},bignumber:{0:"0",1:"\\left(${args[0]}\\right)"},bigint:{0:"0",1:"\\left(${args[0]}\\right)"},complex:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)+".concat(pg.i,"\\cdot\\left(${args[1]}\\right)\\right)")},matrix:{0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},sparse:{0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},unit:{1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"}},WW="\\mathrm{${name}}\\left(${args}\\right)",dN={deg:"^\\circ"};function hg(t){return VW(t,{preserveFormatting:!0})}function lM(t,e){return e=typeof e>"u"?!1:e,e?Ie(dN,t)?dN[t]:"\\mathrm{"+hg(t)+"}":Ie(pg,t)?pg[t]:hg(t)}var Fc="ConstantNode",jW=["Node"],GW=H(Fc,jW,t=>{var{Node:e}=t;class r extends e{constructor(i){super(),this.value=i}get type(){return Fc}get isConstantNode(){return!0}_compile(i,a){var o=this.value;return function(){return o}}forEach(i){}map(i){return this.clone()}clone(){return new r(this.value)}_toString(i){return pt(this.value,i)}_toHTML(i){var a=this._toString(i);switch(It(this.value)){case"number":case"bigint":case"BigNumber":case"Fraction":return'<span class="math-number">'+a+"</span>";case"string":return'<span class="math-string">'+a+"</span>";case"boolean":return'<span class="math-boolean">'+a+"</span>";case"null":return'<span class="math-null-symbol">'+a+"</span>";case"undefined":return'<span class="math-undefined">'+a+"</span>";default:return'<span class="math-symbol">'+a+"</span>"}}toJSON(){return{mathjs:Fc,value:this.value}}static fromJSON(i){return new r(i.value)}_toTex(i){var a=this._toString(i),o=It(this.value);switch(o){case"string":return"\\mathtt{"+hg(a)+"}";case"number":case"BigNumber":{var s=o==="BigNumber"?this.value.isFinite():isFinite(this.value);if(!s)return this.value.valueOf()<0?"-\\infty":"\\infty";var u=a.toLowerCase().indexOf("e");return u!==-1?a.substring(0,u)+"\\cdot10^{"+a.substring(u+1)+"}":a}case"bigint":return a.toString();case"Fraction":return this.value.toLatex();default:return a}}}return cr(r,"name",Fc),r},{isClass:!0,isNode:!0}),Bc="FunctionAssignmentNode",KW=["typed","Node"],JW=H(Bc,KW,t=>{var{typed:e,Node:r}=t;function n(a,o,s){var u=kt(a,o,s),l=kt(a.expr,o,s);return o==="all"||l!==null&&l<=u}class i extends r{constructor(o,s,u){if(super(),typeof o!="string")throw new TypeError('String expected for parameter "name"');if(!Array.isArray(s))throw new TypeError('Array containing strings or objects expected for parameter "params"');if(!Ot(u))throw new TypeError('Node expected for parameter "expr"');if(sM.has(o))throw new Error('Illegal function name, "'+o+'" is a reserved keyword');var l=new Set;for(var c of s){var f=typeof c=="string"?c:c.name;if(l.has(f))throw new Error('Duplicate parameter name "'.concat(f,'"'));l.add(f)}this.name=o,this.params=s.map(function(d){return d&&d.name||d}),this.types=s.map(function(d){return d&&d.type||"any"}),this.expr=u}get type(){return Bc}get isFunctionAssignmentNode(){return!0}_compile(o,s){var u=Object.create(s);V2(this.params,function(h){u[h]=!0});var l=this.expr._compile(o,u),c=this.name,f=this.params,d=fb(this.types,","),p=c+"("+fb(this.params,", ")+")";return function(m,g,y){var N={};N[d]=function(){for(var w=Object.create(g),x=0;x<f.length;x++)w[f[x]]=arguments[x];return l(m,w,y)};var v=e(c,N);return v.syntax=p,m.set(c,v),v}}forEach(o){o(this.expr,"expr",this)}map(o){var s=this._ifNode(o(this.expr,"expr",this));return new i(this.name,this.params.slice(0),s)}clone(){return new i(this.name,this.params.slice(0),this.expr)}_toString(o){var s=o&&o.parenthesis?o.parenthesis:"keep",u=this.expr.toString(o);return n(this,s,o&&o.implicit)&&(u="("+u+")"),this.name+"("+this.params.join(", ")+") = "+u}toJSON(){var o=this.types;return{mathjs:Bc,name:this.name,params:this.params.map(function(s,u){return{name:s,type:o[u]}}),expr:this.expr}}static fromJSON(o){return new i(o.name,o.params,o.expr)}_toHTML(o){for(var s=o&&o.parenthesis?o.parenthesis:"keep",u=[],l=0;l<this.params.length;l++)u.push('<span class="math-symbol math-parameter">'+Hn(this.params[l])+"</span>");var c=this.expr.toHTML(o);return n(this,s,o&&o.implicit)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),'<span class="math-function">'+Hn(this.name)+'</span><span class="math-parenthesis math-round-parenthesis">(</span>'+u.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-round-parenthesis">)</span><span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+c}_toTex(o){var s=o&&o.parenthesis?o.parenthesis:"keep",u=this.expr.toTex(o);return n(this,s,o&&o.implicit)&&(u="\\left(".concat(u,"\\right)")),"\\mathrm{"+this.name+"}\\left("+this.params.map(lM).join(",")+"\\right)="+u}}return cr(i,"name",Bc),i},{isClass:!0,isNode:!0}),kc="IndexNode",YW=["Node","size"],ZW=H(kc,YW,t=>{var{Node:e,size:r}=t;class n extends e{constructor(a,o){if(super(),this.dimensions=a,this.dotNotation=o||!1,!Array.isArray(a)||!a.every(Ot))throw new TypeError('Array containing Nodes expected for parameter "dimensions"');if(this.dotNotation&&!this.isObjectProperty())throw new Error("dotNotation only applicable for object properties")}get type(){return kc}get isIndexNode(){return!0}_compile(a,o){var s=Ga(this.dimensions,function(l,c){var f=l.filter(h=>h.isSymbolNode&&h.name==="end").length>0;if(f){var d=Object.create(o);d.end=!0;var p=l._compile(a,d);return function(m,g,y){if(!We(y)&&!Bt(y)&&!Vr(y))throw new TypeError('Cannot resolve "end": context must be a Matrix, Array, or string but is '+It(y));var N=r(y).valueOf(),v=Object.create(g);return v.end=N[c],p(m,v,y)}}else return l._compile(a,o)}),u=an(a,"index");return function(c,f,d){var p=Ga(s,function(h){return h(c,f,d)});return u(...p)}}forEach(a){for(var o=0;o<this.dimensions.length;o++)a(this.dimensions[o],"dimensions["+o+"]",this)}map(a){for(var o=[],s=0;s<this.dimensions.length;s++)o[s]=this._ifNode(a(this.dimensions[s],"dimensions["+s+"]",this));return new n(o,this.dotNotation)}clone(){return new n(this.dimensions.slice(0),this.dotNotation)}isObjectProperty(){return this.dimensions.length===1&&wt(this.dimensions[0])&&typeof this.dimensions[0].value=="string"}getObjectProperty(){return this.isObjectProperty()?this.dimensions[0].value:null}_toString(a){return this.dotNotation?"."+this.getObjectProperty():"["+this.dimensions.join(", ")+"]"}toJSON(){return{mathjs:kc,dimensions:this.dimensions,dotNotation:this.dotNotation}}static fromJSON(a){return new n(a.dimensions,a.dotNotation)}_toHTML(a){for(var o=[],s=0;s<this.dimensions.length;s++)o[s]=this.dimensions[s].toHTML();return this.dotNotation?'<span class="math-operator math-accessor-operator">.</span><span class="math-symbol math-property">'+Hn(this.getObjectProperty())+"</span>":'<span class="math-parenthesis math-square-parenthesis">[</span>'+o.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(a){var o=this.dimensions.map(function(s){return s.toTex(a)});return this.dotNotation?"."+this.getObjectProperty():"_{"+o.join(",")+"}"}}return cr(n,"name",kc),n},{isClass:!0,isNode:!0}),Ic="ObjectNode",XW=["Node"],QW=H(Ic,XW,t=>{var{Node:e}=t;class r extends e{constructor(i){if(super(),this.properties=i||{},i&&(typeof i!="object"||!Object.keys(i).every(function(a){return Ot(i[a])})))throw new TypeError("Object containing Nodes expected")}get type(){return Ic}get isObjectNode(){return!0}_compile(i,a){var o={};for(var s in this.properties)if(Ie(this.properties,s)){var u=Ss(s),l=JSON.parse(u),c=an(this.properties,s);o[l]=c._compile(i,a)}return function(d,p,h){var m={};for(var g in o)Ie(o,g)&&(m[g]=o[g](d,p,h));return m}}forEach(i){for(var a in this.properties)Ie(this.properties,a)&&i(this.properties[a],"properties["+Ss(a)+"]",this)}map(i){var a={};for(var o in this.properties)Ie(this.properties,o)&&(a[o]=this._ifNode(i(this.properties[o],"properties["+Ss(o)+"]",this)));return new r(a)}clone(){var i={};for(var a in this.properties)Ie(this.properties,a)&&(i[a]=this.properties[a]);return new r(i)}_toString(i){var a=[];for(var o in this.properties)Ie(this.properties,o)&&a.push(Ss(o)+": "+this.properties[o].toString(i));return"{"+a.join(", ")+"}"}toJSON(){return{mathjs:Ic,properties:this.properties}}static fromJSON(i){return new r(i.properties)}_toHTML(i){var a=[];for(var o in this.properties)Ie(this.properties,o)&&a.push('<span class="math-symbol math-property">'+Hn(o)+'</span><span class="math-operator math-assignment-operator math-property-assignment-operator math-binary-operator">:</span>'+this.properties[o].toHTML(i));return'<span class="math-parenthesis math-curly-parenthesis">{</span>'+a.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-curly-parenthesis">}</span>'}_toTex(i){var a=[];for(var o in this.properties)Ie(this.properties,o)&&a.push("\\mathbf{"+o+":} & "+this.properties[o].toTex(i)+"\\\\");var s="\\left\\{\\begin{array}{ll}"+a.join(`
`)+"\\end{array}\\right\\}";return s}}return cr(r,"name",Ic),r},{isClass:!0,isNode:!0});function ku(t,e){return new g2(t,new pp(e),new Set(Object.keys(e)))}var Rc="OperatorNode",ej=["Node"],tj=H(Rc,ej,t=>{var{Node:e}=t;function r(a,o){var s=a;if(o==="auto")for(;da(s);)s=s.content;return wt(s)?!0:ir(s)?r(s.args[0],o):!1}function n(a,o,s,u,l){var c=kt(a,o,s),f=Eu(a,o);if(o==="all"||u.length>2&&a.getIdentifier()!=="OperatorNode:add"&&a.getIdentifier()!=="OperatorNode:multiply")return u.map(function(E){switch(E.getContent().type){case"ArrayNode":case"ConstantNode":case"SymbolNode":case"ParenthesisNode":return!1;default:return!0}});var d;switch(u.length){case 0:d=[];break;case 1:{var p=kt(u[0],o,s,a);if(l&&p!==null){var h,m;if(o==="keep"?(h=u[0].getIdentifier(),m=a.getIdentifier()):(h=u[0].getContent().getIdentifier(),m=a.getContent().getIdentifier()),ni[c][m].latexLeftParens===!1){d=[!1];break}if(ni[p][h].latexParens===!1){d=[!1];break}}if(p===null){d=[!1];break}if(p<=c){d=[!0];break}d=[!1]}break;case 2:{var g,y=kt(u[0],o,s,a),N=Vh(a,u[0],o);y===null?g=!1:y===c&&f==="right"&&!N||y<c?g=!0:g=!1;var v,w=kt(u[1],o,s,a),x=Vh(a,u[1],o);if(w===null?v=!1:w===c&&f==="left"&&!x||w<c?v=!0:v=!1,l){var b,S,C;o==="keep"?(b=a.getIdentifier(),S=a.args[0].getIdentifier(),C=a.args[1].getIdentifier()):(b=a.getContent().getIdentifier(),S=a.args[0].getContent().getIdentifier(),C=a.args[1].getContent().getIdentifier()),y!==null&&(ni[c][b].latexLeftParens===!1&&(g=!1),ni[y][S].latexParens===!1&&(g=!1)),w!==null&&(ni[c][b].latexRightParens===!1&&(v=!1),ni[w][C].latexParens===!1&&(v=!1))}d=[g,v]}break;default:(a.getIdentifier()==="OperatorNode:add"||a.getIdentifier()==="OperatorNode:multiply")&&(d=u.map(function(E){var D=kt(E,o,s,a),M=Vh(a,E,o),F=Eu(E,o);return D===null?!1:c===D&&f===F&&!M?!0:D<c}));break}if(u.length>=2&&a.getIdentifier()==="OperatorNode:multiply"&&a.implicit&&o!=="all"&&s==="hide")for(var A=1;A<d.length;++A)r(u[A],o)&&!d[A-1]&&(o!=="keep"||!da(u[A-1]))&&(d[A]=!0);return d}class i extends e{constructor(o,s,u,l,c){if(super(),typeof o!="string")throw new TypeError('string expected for parameter "op"');if(typeof s!="string")throw new TypeError('string expected for parameter "fn"');if(!Array.isArray(u)||!u.every(Ot))throw new TypeError('Array containing Nodes expected for parameter "args"');this.implicit=l===!0,this.isPercentage=c===!0,this.op=o,this.fn=s,this.args=u||[]}get type(){return Rc}get isOperatorNode(){return!0}_compile(o,s){if(typeof this.fn!="string"||!bv(o,this.fn))throw o[this.fn]?new Error('No access to function "'+this.fn+'"'):new Error("Function "+this.fn+' missing in provided namespace "math"');var u=an(o,this.fn),l=Ga(this.args,function(h){return h._compile(o,s)});if(typeof u=="function"&&u.rawArgs===!0){var c=this.args;return function(m,g,y){return u(c,o,ku(m,g))}}else if(l.length===1){var f=l[0];return function(m,g,y){return u(f(m,g,y))}}else if(l.length===2){var d=l[0],p=l[1];return function(m,g,y){return u(d(m,g,y),p(m,g,y))}}else return function(m,g,y){return u.apply(null,Ga(l,function(N){return N(m,g,y)}))}}forEach(o){for(var s=0;s<this.args.length;s++)o(this.args[s],"args["+s+"]",this)}map(o){for(var s=[],u=0;u<this.args.length;u++)s[u]=this._ifNode(o(this.args[u],"args["+u+"]",this));return new i(this.op,this.fn,s,this.implicit,this.isPercentage)}clone(){return new i(this.op,this.fn,this.args.slice(0),this.implicit,this.isPercentage)}isUnary(){return this.args.length===1}isBinary(){return this.args.length===2}_toString(o){var s=o&&o.parenthesis?o.parenthesis:"keep",u=o&&o.implicit?o.implicit:"hide",l=this.args,c=n(this,s,u,l,!1);if(l.length===1){var f=Eu(this,s),d=l[0].toString(o);c[0]&&(d="("+d+")");var p=/[a-zA-Z]+/.test(this.op);return f==="right"?this.op+(p?" ":"")+d:f==="left"?d+(p?" ":"")+this.op:d+this.op}else if(l.length===2){var h=l[0].toString(o),m=l[1].toString(o);return c[0]&&(h="("+h+")"),c[1]&&(m="("+m+")"),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&u==="hide"?h+" "+m:h+" "+this.op+" "+m}else if(l.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var g=l.map(function(y,N){return y=y.toString(o),c[N]&&(y="("+y+")"),y});return this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&u==="hide"?g.join(" "):g.join(" "+this.op+" ")}else return this.fn+"("+this.args.join(", ")+")"}toJSON(){return{mathjs:Rc,op:this.op,fn:this.fn,args:this.args,implicit:this.implicit,isPercentage:this.isPercentage}}static fromJSON(o){return new i(o.op,o.fn,o.args,o.implicit,o.isPercentage)}_toHTML(o){var s=o&&o.parenthesis?o.parenthesis:"keep",u=o&&o.implicit?o.implicit:"hide",l=this.args,c=n(this,s,u,l,!1);if(l.length===1){var f=Eu(this,s),d=l[0].toHTML(o);return c[0]&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>'),f==="right"?'<span class="math-operator math-unary-operator math-lefthand-unary-operator">'+Hn(this.op)+"</span>"+d:d+'<span class="math-operator math-unary-operator math-righthand-unary-operator">'+Hn(this.op)+"</span>"}else if(l.length===2){var p=l[0].toHTML(o),h=l[1].toHTML(o);return c[0]&&(p='<span class="math-parenthesis math-round-parenthesis">(</span>'+p+'<span class="math-parenthesis math-round-parenthesis">)</span>'),c[1]&&(h='<span class="math-parenthesis math-round-parenthesis">(</span>'+h+'<span class="math-parenthesis math-round-parenthesis">)</span>'),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&u==="hide"?p+'<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'+h:p+'<span class="math-operator math-binary-operator math-explicit-binary-operator">'+Hn(this.op)+"</span>"+h}else{var m=l.map(function(g,y){return g=g.toHTML(o),c[y]&&(g='<span class="math-parenthesis math-round-parenthesis">(</span>'+g+'<span class="math-parenthesis math-round-parenthesis">)</span>'),g});return l.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")?this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&u==="hide"?m.join('<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'):m.join('<span class="math-operator math-binary-operator math-explicit-binary-operator">'+Hn(this.op)+"</span>"):'<span class="math-function">'+Hn(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+m.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}}_toTex(o){var s=o&&o.parenthesis?o.parenthesis:"keep",u=o&&o.implicit?o.implicit:"hide",l=this.args,c=n(this,s,u,l,!0),f=St[this.fn];if(f=typeof f>"u"?this.op:f,l.length===1){var d=Eu(this,s),p=l[0].toTex(o);return c[0]&&(p="\\left(".concat(p,"\\right)")),d==="right"?f+p:p+f}else if(l.length===2){var h=l[0],m=h.toTex(o);c[0]&&(m="\\left(".concat(m,"\\right)"));var g=l[1],y=g.toTex(o);c[1]&&(y="\\left(".concat(y,"\\right)"));var N;switch(s==="keep"?N=h.getIdentifier():N=h.getContent().getIdentifier(),this.getIdentifier()){case"OperatorNode:divide":return f+"{"+m+"}{"+y+"}";case"OperatorNode:pow":switch(m="{"+m+"}",y="{"+y+"}",N){case"ConditionalNode":case"OperatorNode:divide":m="\\left(".concat(m,"\\right)")}break;case"OperatorNode:multiply":if(this.implicit&&u==="hide")return m+"~"+y}return m+f+y}else if(l.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var v=l.map(function(w,x){return w=w.toTex(o),c[x]&&(w="\\left(".concat(w,"\\right)")),w});return this.getIdentifier()==="OperatorNode:multiply"&&this.implicit&&u==="hide"?v.join("~"):v.join(f)}else return"\\mathrm{"+this.fn+"}\\left("+l.map(function(w){return w.toTex(o)}).join(",")+"\\right)"}getIdentifier(){return this.type+":"+this.fn}}return cr(i,"name",Rc),i},{isClass:!0,isNode:!0}),Pc="ParenthesisNode",rj=["Node"],nj=H(Pc,rj,t=>{var{Node:e}=t;class r extends e{constructor(i){if(super(),!Ot(i))throw new TypeError('Node expected for parameter "content"');this.content=i}get type(){return Pc}get isParenthesisNode(){return!0}_compile(i,a){return this.content._compile(i,a)}getContent(){return this.content.getContent()}forEach(i){i(this.content,"content",this)}map(i){var a=i(this.content,"content",this);return new r(a)}clone(){return new r(this.content)}_toString(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?"("+this.content.toString(i)+")":this.content.toString(i)}toJSON(){return{mathjs:Pc,content:this.content}}static fromJSON(i){return new r(i.content)}_toHTML(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?'<span class="math-parenthesis math-round-parenthesis">(</span>'+this.content.toHTML(i)+'<span class="math-parenthesis math-round-parenthesis">)</span>':this.content.toHTML(i)}_toTex(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?"\\left(".concat(this.content.toTex(i),"\\right)"):this.content.toTex(i)}}return cr(r,"name",Pc),r},{isClass:!0,isNode:!0}),$c="RangeNode",ij=["Node"],aj=H($c,ij,t=>{var{Node:e}=t;function r(i,a,o){var s=kt(i,a,o),u={},l=kt(i.start,a,o);if(u.start=l!==null&&l<=s||a==="all",i.step){var c=kt(i.step,a,o);u.step=c!==null&&c<=s||a==="all"}var f=kt(i.end,a,o);return u.end=f!==null&&f<=s||a==="all",u}class n extends e{constructor(a,o,s){if(super(),!Ot(a))throw new TypeError("Node expected");if(!Ot(o))throw new TypeError("Node expected");if(s&&!Ot(s))throw new TypeError("Node expected");if(arguments.length>3)throw new Error("Too many arguments");this.start=a,this.end=o,this.step=s||null}get type(){return $c}get isRangeNode(){return!0}needsEnd(){var a=this.filter(function(o){return xr(o)&&o.name==="end"});return a.length>0}_compile(a,o){var s=a.range,u=this.start._compile(a,o),l=this.end._compile(a,o);if(this.step){var c=this.step._compile(a,o);return function(d,p,h){return s(u(d,p,h),l(d,p,h),c(d,p,h))}}else return function(d,p,h){return s(u(d,p,h),l(d,p,h))}}forEach(a){a(this.start,"start",this),a(this.end,"end",this),this.step&&a(this.step,"step",this)}map(a){return new n(this._ifNode(a(this.start,"start",this)),this._ifNode(a(this.end,"end",this)),this.step&&this._ifNode(a(this.step,"step",this)))}clone(){return new n(this.start,this.end,this.step&&this.step)}_toString(a){var o=a&&a.parenthesis?a.parenthesis:"keep",s=r(this,o,a&&a.implicit),u,l=this.start.toString(a);if(s.start&&(l="("+l+")"),u=l,this.step){var c=this.step.toString(a);s.step&&(c="("+c+")"),u+=":"+c}var f=this.end.toString(a);return s.end&&(f="("+f+")"),u+=":"+f,u}toJSON(){return{mathjs:$c,start:this.start,end:this.end,step:this.step}}static fromJSON(a){return new n(a.start,a.end,a.step)}_toHTML(a){var o=a&&a.parenthesis?a.parenthesis:"keep",s=r(this,o,a&&a.implicit),u,l=this.start.toHTML(a);if(s.start&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u=l,this.step){var c=this.step.toHTML(a);s.step&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u+='<span class="math-operator math-range-operator">:</span>'+c}var f=this.end.toHTML(a);return s.end&&(f='<span class="math-parenthesis math-round-parenthesis">(</span>'+f+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u+='<span class="math-operator math-range-operator">:</span>'+f,u}_toTex(a){var o=a&&a.parenthesis?a.parenthesis:"keep",s=r(this,o,a&&a.implicit),u=this.start.toTex(a);if(s.start&&(u="\\left(".concat(u,"\\right)")),this.step){var l=this.step.toTex(a);s.step&&(l="\\left(".concat(l,"\\right)")),u+=":"+l}var c=this.end.toTex(a);return s.end&&(c="\\left(".concat(c,"\\right)")),u+=":"+c,u}}return cr(n,"name",$c),n},{isClass:!0,isNode:!0}),Lc="RelationalNode",oj=["Node"],sj=H(Lc,oj,t=>{var{Node:e}=t,r={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="};class n extends e{constructor(a,o){if(super(),!Array.isArray(a))throw new TypeError("Parameter conditionals must be an array");if(!Array.isArray(o))throw new TypeError("Parameter params must be an array");if(a.length!==o.length-1)throw new TypeError("Parameter params must contain exactly one more element than parameter conditionals");this.conditionals=a,this.params=o}get type(){return Lc}get isRelationalNode(){return!0}_compile(a,o){var s=this,u=this.params.map(l=>l._compile(a,o));return function(c,f,d){for(var p,h=u[0](c,f,d),m=0;m<s.conditionals.length;m++){p=h,h=u[m+1](c,f,d);var g=an(a,s.conditionals[m]);if(!g(p,h))return!1}return!0}}forEach(a){this.params.forEach((o,s)=>a(o,"params["+s+"]",this),this)}map(a){return new n(this.conditionals.slice(),this.params.map((o,s)=>this._ifNode(a(o,"params["+s+"]",this)),this))}clone(){return new n(this.conditionals,this.params)}_toString(a){for(var o=a&&a.parenthesis?a.parenthesis:"keep",s=kt(this,o,a&&a.implicit),u=this.params.map(function(f,d){var p=kt(f,o,a&&a.implicit);return o==="all"||p!==null&&p<=s?"("+f.toString(a)+")":f.toString(a)}),l=u[0],c=0;c<this.conditionals.length;c++)l+=" "+r[this.conditionals[c]],l+=" "+u[c+1];return l}toJSON(){return{mathjs:Lc,conditionals:this.conditionals,params:this.params}}static fromJSON(a){return new n(a.conditionals,a.params)}_toHTML(a){for(var o=a&&a.parenthesis?a.parenthesis:"keep",s=kt(this,o,a&&a.implicit),u=this.params.map(function(f,d){var p=kt(f,o,a&&a.implicit);return o==="all"||p!==null&&p<=s?'<span class="math-parenthesis math-round-parenthesis">(</span>'+f.toHTML(a)+'<span class="math-parenthesis math-round-parenthesis">)</span>':f.toHTML(a)}),l=u[0],c=0;c<this.conditionals.length;c++)l+='<span class="math-operator math-binary-operator math-explicit-binary-operator">'+Hn(r[this.conditionals[c]])+"</span>"+u[c+1];return l}_toTex(a){for(var o=a&&a.parenthesis?a.parenthesis:"keep",s=kt(this,o,a&&a.implicit),u=this.params.map(function(f,d){var p=kt(f,o,a&&a.implicit);return o==="all"||p!==null&&p<=s?"\\left("+f.toTex(a)+"\right)":f.toTex(a)}),l=u[0],c=0;c<this.conditionals.length;c++)l+=St[this.conditionals[c]]+u[c+1];return l}}return cr(n,"name",Lc),n},{isClass:!0,isNode:!0}),uj="SymbolNode",lj=["math","?Unit","Node"],cj=H(uj,lj,t=>{var{math:e,Unit:r,Node:n}=t;function i(o){return r?r.isValuelessUnit(o):!1}class a extends n{constructor(s){if(super(),typeof s!="string")throw new TypeError('String expected for parameter "name"');this.name=s}get type(){return"SymbolNode"}get isSymbolNode(){return!0}_compile(s,u){var l=this.name;if(u[l]===!0)return function(f,d,p){return an(d,l)};if(l in s)return function(f,d,p){return f.has(l)?f.get(l):an(s,l)};var c=i(l);return function(f,d,p){return f.has(l)?f.get(l):c?new r(null,l):a.onUndefinedSymbol(l)}}forEach(s){}map(s){return this.clone()}static onUndefinedSymbol(s){throw new Error("Undefined symbol "+s)}clone(){return new a(this.name)}_toString(s){return this.name}_toHTML(s){var u=Hn(this.name);return u==="true"||u==="false"?'<span class="math-symbol math-boolean">'+u+"</span>":u==="i"?'<span class="math-symbol math-imaginary-symbol">'+u+"</span>":u==="Infinity"?'<span class="math-symbol math-infinity-symbol">'+u+"</span>":u==="NaN"?'<span class="math-symbol math-nan-symbol">'+u+"</span>":u==="null"?'<span class="math-symbol math-null-symbol">'+u+"</span>":u==="undefined"?'<span class="math-symbol math-undefined-symbol">'+u+"</span>":'<span class="math-symbol">'+u+"</span>"}toJSON(){return{mathjs:"SymbolNode",name:this.name}}static fromJSON(s){return new a(s.name)}_toTex(s){var u=!1;typeof e[this.name]>"u"&&i(this.name)&&(u=!0);var l=lM(this.name,u);return l[0]==="\\"?l:" "+l}}return a},{isClass:!0,isNode:!0}),zc="FunctionNode",fj=["math","Node","SymbolNode"],dj=H(zc,fj,t=>{var e,{math:r,Node:n,SymbolNode:i}=t,a=u=>pt(u,{truncate:78});function o(u,l,c){for(var f="",d=/\$(?:\{([a-z_][a-z_0-9]*)(?:\[([0-9]+)\])?\}|\$)/gi,p=0,h;(h=d.exec(u))!==null;)if(f+=u.substring(p,h.index),p=h.index,h[0]==="$$")f+="$",p++;else{p+=h[0].length;var m=l[h[1]];if(!m)throw new ReferenceError("Template: Property "+h[1]+" does not exist.");if(h[2]===void 0)switch(typeof m){case"string":f+=m;break;case"object":if(Ot(m))f+=m.toTex(c);else if(Array.isArray(m))f+=m.map(function(g,y){if(Ot(g))return g.toTex(c);throw new TypeError("Template: "+h[1]+"["+y+"] is not a Node.")}).join(",");else throw new TypeError("Template: "+h[1]+" has to be a Node, String or array of Nodes");break;default:throw new TypeError("Template: "+h[1]+" has to be a Node, String or array of Nodes")}else if(Ot(m[h[2]]&&m[h[2]]))f+=m[h[2]].toTex(c);else throw new TypeError("Template: "+h[1]+"["+h[2]+"] is not a Node.")}return f+=u.slice(p),f}class s extends n{constructor(l,c){if(super(),typeof l=="string"&&(l=new i(l)),!Ot(l))throw new TypeError('Node expected as parameter "fn"');if(!Array.isArray(c)||!c.every(Ot))throw new TypeError('Array containing Nodes expected for parameter "args"');this.fn=l,this.args=c||[]}get name(){return this.fn.name||""}get type(){return zc}get isFunctionNode(){return!0}_compile(l,c){var f=this.args.map(C=>C._compile(l,c));if(xr(this.fn)){var d=this.fn.name;if(c[d]){var y=this.args;return function(A,E,D){var M=an(E,d);if(typeof M!="function")throw new TypeError("Argument '".concat(d,"' was not a function; received: ").concat(a(M)));if(M.rawArgs)return M(y,l,ku(A,E));var F=f.map(I=>I(A,E,D));return M.apply(M,F)}}else{var p=d in l?an(l,d):void 0,h=typeof p=="function"&&p.rawArgs===!0,m=C=>{var A;if(C.has(d))A=C.get(d);else if(d in l)A=an(l,d);else return s.onUndefinedFunction(d);if(typeof A=="function")return A;throw new TypeError("'".concat(d,`' is not a function; its value is:
  `).concat(a(A)))};if(h){var g=this.args;return function(A,E,D){var M=m(A);if(M.rawArgs===!0)return M(g,l,ku(A,E));var F=f.map(I=>I(A,E,D));return M(...F)}}else switch(f.length){case 0:return function(A,E,D){var M=m(A);return M()};case 1:return function(A,E,D){var M=m(A),F=f[0];return M(F(A,E,D))};case 2:return function(A,E,D){var M=m(A),F=f[0],I=f[1];return M(F(A,E,D),I(A,E,D))};default:return function(A,E,D){var M=m(A),F=f.map(I=>I(A,E,D));return M(...F)}}}}else if(Wo(this.fn)&&eu(this.fn.index)&&this.fn.index.isObjectProperty()){var N=this.fn.object._compile(l,c),v=this.fn.index.getObjectProperty(),w=this.args;return function(A,E,D){var M=N(A,E,D),F=L$(M,v);if(F!=null&&F.rawArgs)return F(w,l,ku(A,E));var I=f.map(P=>P(A,E,D));return F.apply(M,I)}}else{var x=this.fn.toString(),b=this.fn._compile(l,c),S=this.args;return function(A,E,D){var M=b(A,E,D);if(typeof M!="function")throw new TypeError("Expression '".concat(x,"' did not evaluate to a function; value is:")+`
  `.concat(a(M)));if(M.rawArgs)return M(S,l,ku(A,E));var F=f.map(I=>I(A,E,D));return M.apply(M,F)}}}forEach(l){l(this.fn,"fn",this);for(var c=0;c<this.args.length;c++)l(this.args[c],"args["+c+"]",this)}map(l){for(var c=this._ifNode(l(this.fn,"fn",this)),f=[],d=0;d<this.args.length;d++)f[d]=this._ifNode(l(this.args[d],"args["+d+"]",this));return new s(c,f)}clone(){return new s(this.fn,this.args.slice(0))}toString(l){var c,f=this.fn.toString(l);return l&&typeof l.handler=="object"&&Ie(l.handler,f)&&(c=l.handler[f](this,l)),typeof c<"u"?c:super.toString(l)}_toString(l){var c=this.args.map(function(d){return d.toString(l)}),f=Rl(this.fn)?"("+this.fn.toString(l)+")":this.fn.toString(l);return f+"("+c.join(", ")+")"}toJSON(){return{mathjs:zc,fn:this.fn,args:this.args}}_toHTML(l){var c=this.args.map(function(f){return f.toHTML(l)});return'<span class="math-function">'+Hn(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+c.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}toTex(l){var c;return l&&typeof l.handler=="object"&&Ie(l.handler,this.name)&&(c=l.handler[this.name](this,l)),typeof c<"u"?c:super.toTex(l)}_toTex(l){var c=this.args.map(function(p){return p.toTex(l)}),f;fN[this.name]&&(f=fN[this.name]),r[this.name]&&(typeof r[this.name].toTex=="function"||typeof r[this.name].toTex=="object"||typeof r[this.name].toTex=="string")&&(f=r[this.name].toTex);var d;switch(typeof f){case"function":d=f(this,l);break;case"string":d=o(f,this,l);break;case"object":switch(typeof f[c.length]){case"function":d=f[c.length](this,l);break;case"string":d=o(f[c.length],this,l);break}}return typeof d<"u"?d:o(WW,this,l)}getIdentifier(){return this.type+":"+this.name}}return e=s,cr(s,"name",zc),cr(s,"onUndefinedFunction",function(u){throw new Error("Undefined function "+u)}),cr(s,"fromJSON",function(u){return new e(u.fn,u.args)}),s},{isClass:!0,isNode:!0}),pN="parse",pj=["typed","numeric","config","AccessorNode","ArrayNode","AssignmentNode","BlockNode","ConditionalNode","ConstantNode","FunctionAssignmentNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","RangeNode","RelationalNode","SymbolNode"],hj=H(pN,pj,t=>{var{typed:e,numeric:r,config:n,AccessorNode:i,ArrayNode:a,AssignmentNode:o,BlockNode:s,ConditionalNode:u,ConstantNode:l,FunctionAssignmentNode:c,FunctionNode:f,IndexNode:d,ObjectNode:p,OperatorNode:h,ParenthesisNode:m,RangeNode:g,RelationalNode:y,SymbolNode:N}=t,v=e(pN,{string:function(ee){return ie(ee,{})},"Array | Matrix":function(ee){return w(ee,{})},"string, Object":function(ee,ge){var Ne=ge.nodes!==void 0?ge.nodes:{};return ie(ee,Ne)},"Array | Matrix, Object":w});function w(_){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ge=ee.nodes!==void 0?ee.nodes:{};return st(_,function(Ne){if(typeof Ne!="string")throw new TypeError("String expected");return ie(Ne,ge)})}var x={NULL:0,DELIMITER:1,NUMBER:2,SYMBOL:3,UNKNOWN:4},b={",":!0,"(":!0,")":!0,"[":!0,"]":!0,"{":!0,"}":!0,'"':!0,"'":!0,";":!0,"+":!0,"-":!0,"*":!0,".*":!0,"/":!0,"./":!0,"%":!0,"^":!0,".^":!0,"~":!0,"!":!0,"&":!0,"|":!0,"^|":!0,"=":!0,":":!0,"?":!0,"==":!0,"!=":!0,"<":!0,">":!0,"<=":!0,">=":!0,"<<":!0,">>":!0,">>>":!0},S={mod:!0,to:!0,in:!0,and:!0,xor:!0,or:!0,not:!0},C={true:!0,false:!1,null:null,undefined:void 0},A=["NaN","Infinity"],E={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function D(){return{extraNodes:{},expression:"",comment:"",index:0,token:"",tokenType:x.NULL,nestingLevel:0,conditionalLevel:null}}function M(_,ee){return _.expression.substr(_.index,ee)}function F(_){return M(_,1)}function I(_){_.index++}function P(_){return _.expression.charAt(_.index-1)}function T(_){return _.expression.charAt(_.index+1)}function $(_){for(_.tokenType=x.NULL,_.token="",_.comment="";;){if(F(_)==="#")for(;F(_)!==`
`&&F(_)!=="";)_.comment+=F(_),I(_);if(v.isWhitespace(F(_),_.nestingLevel))I(_);else break}if(F(_)===""){_.tokenType=x.DELIMITER;return}if(F(_)===`
`&&!_.nestingLevel){_.tokenType=x.DELIMITER,_.token=F(_),I(_);return}var ee=F(_),ge=M(_,2),Ne=M(_,3);if(Ne.length===3&&b[Ne]){_.tokenType=x.DELIMITER,_.token=Ne,I(_),I(_),I(_);return}if(ge.length===2&&b[ge]){_.tokenType=x.DELIMITER,_.token=ge,I(_),I(_);return}if(b[ee]){_.tokenType=x.DELIMITER,_.token=ee,I(_);return}if(v.isDigitDot(ee)){_.tokenType=x.NUMBER;var qe=M(_,2);if(qe==="0b"||qe==="0o"||qe==="0x"){for(_.token+=F(_),I(_),_.token+=F(_),I(_);v.isHexDigit(F(_));)_.token+=F(_),I(_);if(F(_)===".")for(_.token+=".",I(_);v.isHexDigit(F(_));)_.token+=F(_),I(_);else if(F(_)==="i")for(_.token+="i",I(_);v.isDigit(F(_));)_.token+=F(_),I(_);return}if(F(_)==="."){if(_.token+=F(_),I(_),!v.isDigit(F(_))){_.tokenType=x.DELIMITER;return}}else{for(;v.isDigit(F(_));)_.token+=F(_),I(_);v.isDecimalMark(F(_),T(_))&&(_.token+=F(_),I(_))}for(;v.isDigit(F(_));)_.token+=F(_),I(_);if(F(_)==="E"||F(_)==="e"){if(v.isDigit(T(_))||T(_)==="-"||T(_)==="+"){if(_.token+=F(_),I(_),(F(_)==="+"||F(_)==="-")&&(_.token+=F(_),I(_)),!v.isDigit(F(_)))throw ke(_,'Digit expected, got "'+F(_)+'"');for(;v.isDigit(F(_));)_.token+=F(_),I(_);if(v.isDecimalMark(F(_),T(_)))throw ke(_,'Digit expected, got "'+F(_)+'"')}else if(v.isDecimalMark(T(_),_.expression.charAt(_.index+2)))throw I(_),ke(_,'Digit expected, got "'+F(_)+'"')}return}if(v.isAlpha(F(_),P(_),T(_))){for(;v.isAlpha(F(_),P(_),T(_))||v.isDigit(F(_));)_.token+=F(_),I(_);Ie(S,_.token)?_.tokenType=x.DELIMITER:_.tokenType=x.SYMBOL;return}for(_.tokenType=x.UNKNOWN;F(_)!=="";)_.token+=F(_),I(_);throw ke(_,'Syntax error in part "'+_.token+'"')}function O(_){do $(_);while(_.token===`
`)}function W(_){_.nestingLevel++}function R(_){_.nestingLevel--}v.isAlpha=function(ee,ge,Ne){return v.isValidLatinOrGreek(ee)||v.isValidMathSymbol(ee,Ne)||v.isValidMathSymbol(ge,ee)},v.isValidLatinOrGreek=function(ee){return/^[a-zA-Z_$\u00C0-\u02AF\u0370-\u03FF\u2100-\u214F]$/.test(ee)},v.isValidMathSymbol=function(ee,ge){return/^[\uD835]$/.test(ee)&&/^[\uDC00-\uDFFF]$/.test(ge)&&/^[^\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]$/.test(ge)},v.isWhitespace=function(ee,ge){return ee===" "||ee==="	"||ee===`
`&&ge>0},v.isDecimalMark=function(ee,ge){return ee==="."&&ge!=="/"&&ge!=="*"&&ge!=="^"},v.isDigitDot=function(ee){return ee>="0"&&ee<="9"||ee==="."},v.isDigit=function(ee){return ee>="0"&&ee<="9"},v.isHexDigit=function(ee){return ee>="0"&&ee<="9"||ee>="a"&&ee<="f"||ee>="A"&&ee<="F"};function ie(_,ee){var ge=D();dr(ge,{expression:_,extraNodes:ee}),$(ge);var Ne=te(ge);if(ge.token!=="")throw ge.tokenType===x.DELIMITER?Xe(ge,"Unexpected operator "+ge.token):ke(ge,'Unexpected part "'+ge.token+'"');return Ne}function te(_){var ee,ge=[],Ne;for(_.token!==""&&_.token!==`
`&&_.token!==";"&&(ee=Z(_),_.comment&&(ee.comment=_.comment));_.token===`
`||_.token===";";)ge.length===0&&ee&&(Ne=_.token!==";",ge.push({node:ee,visible:Ne})),$(_),_.token!==`
`&&_.token!==";"&&_.token!==""&&(ee=Z(_),_.comment&&(ee.comment=_.comment),Ne=_.token!==";",ge.push({node:ee,visible:Ne}));return ge.length>0?new s(ge):(ee||(ee=new l(void 0),_.comment&&(ee.comment=_.comment)),ee)}function Z(_){var ee,ge,Ne,qe,Qe=X(_);if(_.token==="="){if(xr(Qe))return ee=Qe.name,O(_),Ne=Z(_),new o(new N(ee),Ne);if(Wo(Qe))return O(_),Ne=Z(_),new o(Qe.object,Qe.index,Ne);if(Za(Qe)&&xr(Qe.fn)&&(qe=!0,ge=[],ee=Qe.name,Qe.args.forEach(function(nr,du){xr(nr)?ge[du]=nr.name:qe=!1}),qe))return O(_),Ne=Z(_),new c(ee,ge,Ne);throw ke(_,"Invalid left hand side of assignment operator =")}return Qe}function X(_){for(var ee=pe(_);_.token==="?";){var ge=_.conditionalLevel;_.conditionalLevel=_.nestingLevel,O(_);var Ne=ee,qe=Z(_);if(_.token!==":")throw ke(_,"False part of conditional expression expected");_.conditionalLevel=null,O(_);var Qe=Z(_);ee=new u(Ne,qe,Qe),_.conditionalLevel=ge}return ee}function pe(_){for(var ee=de(_);_.token==="or";)O(_),ee=new h("or","or",[ee,de(_)]);return ee}function de(_){for(var ee=G(_);_.token==="xor";)O(_),ee=new h("xor","xor",[ee,G(_)]);return ee}function G(_){for(var ee=V(_);_.token==="and";)O(_),ee=new h("and","and",[ee,V(_)]);return ee}function V(_){for(var ee=U(_);_.token==="|";)O(_),ee=new h("|","bitOr",[ee,U(_)]);return ee}function U(_){for(var ee=K(_);_.token==="^|";)O(_),ee=new h("^|","bitXor",[ee,K(_)]);return ee}function K(_){for(var ee=ae(_);_.token==="&";)O(_),ee=new h("&","bitAnd",[ee,ae(_)]);return ee}function ae(_){for(var ee=[B(_)],ge=[],Ne={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallerEq",">=":"largerEq"};Ie(Ne,_.token);){var qe={name:_.token,fn:Ne[_.token]};ge.push(qe),O(_),ee.push(B(_))}return ee.length===1?ee[0]:ee.length===2?new h(ge[0].name,ge[0].fn,ee):new y(ge.map(Qe=>Qe.fn),ee)}function B(_){var ee,ge,Ne,qe;ee=q(_);for(var Qe={"<<":"leftShift",">>":"rightArithShift",">>>":"rightLogShift"};Ie(Qe,_.token);)ge=_.token,Ne=Qe[ge],O(_),qe=[ee,q(_)],ee=new h(ge,Ne,qe);return ee}function q(_){var ee,ge,Ne,qe;ee=j(_);for(var Qe={to:"to",in:"to"};Ie(Qe,_.token);)ge=_.token,Ne=Qe[ge],O(_),ge==="in"&&"])},;".includes(_.token)?ee=new h("*","multiply",[ee,new N("in")],!0):(qe=[ee,j(_)],ee=new h(ge,Ne,qe));return ee}function j(_){var ee,ge=[];if(_.token===":"?ee=new l(1):ee=oe(_),_.token===":"&&_.conditionalLevel!==_.nestingLevel){for(ge.push(ee);_.token===":"&&ge.length<3;)O(_),_.token===")"||_.token==="]"||_.token===","||_.token===""?ge.push(new N("end")):ge.push(oe(_));ge.length===3?ee=new g(ge[0],ge[2],ge[1]):ee=new g(ge[0],ge[1])}return ee}function oe(_){var ee,ge,Ne,qe;ee=k(_);for(var Qe={"+":"add","-":"subtract"};Ie(Qe,_.token);){ge=_.token,Ne=Qe[ge],O(_);var nr=k(_);nr.isPercentage?qe=[ee,new h("*","multiply",[ee,nr])]:qe=[ee,nr],ee=new h(ge,Ne,qe)}return ee}function k(_){var ee,ge,Ne,qe;ee=z(_),ge=ee;for(var Qe={"*":"multiply",".*":"dotMultiply","/":"divide","./":"dotDivide","%":"mod",mod:"mod"};Ie(Qe,_.token);)if(Ne=_.token,qe=Qe[Ne],O(_),Ne==="%"&&_.tokenType===x.DELIMITER&&_.token!=="(")if(_.token!==""&&Qe[_.token]){var nr=new h("/","divide",[ee,new l(100)],!1,!0);Ne=_.token,qe=Qe[Ne],O(_),ge=z(_),ee=new h(Ne,qe,[nr,ge])}else ee=new h("/","divide",[ee,new l(100)],!1,!0);else ge=z(_),ee=new h(Ne,qe,[ee,ge]);return ee}function z(_){var ee,ge;for(ee=Y(_),ge=ee;_.tokenType===x.SYMBOL||_.token==="in"&&wt(ee)||_.token==="in"&&ir(ee)&&ee.fn==="unaryMinus"&&wt(ee.args[0])||_.tokenType===x.NUMBER&&!wt(ge)&&(!ir(ge)||ge.op==="!")||_.token==="(";)ge=Y(_),ee=new h("*","multiply",[ee,ge],!0);return ee}function Y(_){for(var ee=ne(_),ge=ee,Ne=[];_.token==="/"&&Gm(ge);)if(Ne.push(dr({},_)),O(_),_.tokenType===x.NUMBER)if(Ne.push(dr({},_)),O(_),_.tokenType===x.SYMBOL||_.token==="("||_.token==="in")dr(_,Ne.pop()),Ne.pop(),ge=ne(_),ee=new h("/","divide",[ee,ge]);else{Ne.pop(),dr(_,Ne.pop());break}else{dr(_,Ne.pop());break}return ee}function ne(_){var ee,ge,Ne,qe={"-":"unaryMinus","+":"unaryPlus","~":"bitNot",not:"not"};return Ie(qe,_.token)?(Ne=qe[_.token],ee=_.token,O(_),ge=[ne(_)],new h(ee,Ne,ge)):se(_)}function se(_){var ee,ge,Ne,qe;return ee=ue(_),(_.token==="^"||_.token===".^")&&(ge=_.token,Ne=ge==="^"?"pow":"dotPow",O(_),qe=[ee,ne(_)],ee=new h(ge,Ne,qe)),ee}function ue(_){var ee,ge,Ne,qe;ee=ve(_);for(var Qe={"!":"factorial","'":"ctranspose"};Ie(Qe,_.token);)ge=_.token,Ne=Qe[ge],$(_),qe=[ee],ee=new h(ge,Ne,qe),ee=J(_,ee);return ee}function ve(_){var ee=[];if(_.tokenType===x.SYMBOL&&Ie(_.extraNodes,_.token)){var ge=_.extraNodes[_.token];if($(_),_.token==="("){if(ee=[],W(_),$(_),_.token!==")")for(ee.push(Z(_));_.token===",";)$(_),ee.push(Z(_));if(_.token!==")")throw ke(_,"Parenthesis ) expected");R(_),$(_)}return new ge(ee)}return L(_)}function L(_){var ee,ge;return _.tokenType===x.SYMBOL||_.tokenType===x.DELIMITER&&_.token in S?(ge=_.token,$(_),Ie(C,ge)?ee=new l(C[ge]):A.includes(ge)?ee=new l(r(ge,"number")):ee=new N(ge),ee=J(_,ee),ee):re(_)}function J(_,ee,ge){for(var Ne;_.token==="("||_.token==="["||_.token===".";)if(Ne=[],_.token==="(")if(xr(ee)||Wo(ee)){if(W(_),$(_),_.token!==")")for(Ne.push(Z(_));_.token===",";)$(_),Ne.push(Z(_));if(_.token!==")")throw ke(_,"Parenthesis ) expected");R(_),$(_),ee=new f(ee,Ne)}else return ee;else if(_.token==="["){if(W(_),$(_),_.token!=="]")for(Ne.push(Z(_));_.token===",";)$(_),Ne.push(Z(_));if(_.token!=="]")throw ke(_,"Parenthesis ] expected");R(_),$(_),ee=new i(ee,new d(Ne))}else{$(_);var qe=_.tokenType===x.SYMBOL||_.tokenType===x.DELIMITER&&_.token in S;if(!qe)throw ke(_,"Property name expected after dot");Ne.push(new l(_.token)),$(_);var Qe=!0;ee=new i(ee,new d(Ne,Qe))}return ee}function re(_){var ee,ge;return _.token==='"'||_.token==="'"?(ge=fe(_,_.token),ee=new l(ge),ee=J(_,ee),ee):he(_)}function fe(_,ee){for(var ge="";F(_)!==""&&F(_)!==ee;)if(F(_)==="\\"){I(_);var Ne=F(_),qe=E[Ne];if(qe!==void 0)ge+=qe,_.index+=1;else if(Ne==="u"){var Qe=_.expression.slice(_.index+1,_.index+5);if(/^[0-9A-Fa-f]{4}$/.test(Qe))ge+=String.fromCharCode(parseInt(Qe,16)),_.index+=5;else throw ke(_,"Invalid unicode character \\u".concat(Qe))}else throw ke(_,"Bad escape character \\".concat(Ne))}else ge+=F(_),I(_);if($(_),_.token!==ee)throw ke(_,"End of string ".concat(ee," expected"));return $(_),ge}function he(_){var ee,ge,Ne,qe;if(_.token==="["){if(W(_),$(_),_.token!=="]"){var Qe=me(_);if(_.token===";"){for(Ne=1,ge=[Qe];_.token===";";)$(_),_.token!=="]"&&(ge[Ne]=me(_),Ne++);if(_.token!=="]")throw ke(_,"End of matrix ] expected");R(_),$(_),qe=ge[0].items.length;for(var nr=1;nr<Ne;nr++)if(ge[nr].items.length!==qe)throw Xe(_,"Column dimensions mismatch ("+ge[nr].items.length+" !== "+qe+")");ee=new a(ge)}else{if(_.token!=="]")throw ke(_,"End of matrix ] expected");R(_),$(_),ee=Qe}}else R(_),$(_),ee=new a([]);return J(_,ee)}return Se(_)}function me(_){for(var ee=[Z(_)],ge=1;_.token===",";)$(_),_.token!=="]"&&_.token!==";"&&(ee[ge]=Z(_),ge++);return new a(ee)}function Se(_){if(_.token==="{"){W(_);var ee,ge={};do if($(_),_.token!=="}"){if(_.token==='"'||_.token==="'")ee=fe(_,_.token);else if(_.tokenType===x.SYMBOL||_.tokenType===x.DELIMITER&&_.token in S)ee=_.token,$(_);else throw ke(_,"Symbol or string expected as object key");if(_.token!==":")throw ke(_,"Colon : expected after object key");$(_),ge[ee]=Z(_)}while(_.token===",");if(_.token!=="}")throw ke(_,"Comma , or bracket } expected after object value");R(_),$(_);var Ne=new p(ge);return Ne=J(_,Ne),Ne}return xe(_)}function xe(_){var ee;if(_.tokenType===x.NUMBER){ee=_.token,$(_);var ge=io(ee,n),Ne=r(ee,ge);return new l(Ne)}return Ee(_)}function Ee(_){var ee;if(_.token==="("){if(W(_),$(_),ee=Z(_),_.token!==")")throw ke(_,"Parenthesis ) expected");return R(_),$(_),ee=new m(ee),ee=J(_,ee),ee}return we(_)}function we(_){throw _.token===""?ke(_,"Unexpected end of expression"):ke(_,"Value expected")}function nt(_){return _.index-_.token.length+1}function ke(_,ee){var ge=nt(_),Ne=new SyntaxError(ee+" (char "+ge+")");return Ne.char=ge,Ne}function Xe(_,ee){var ge=nt(_),Ne=new SyntaxError(ee+" (char "+ge+")");return Ne.char=ge,Ne}return e.addConversion({from:"string",to:"Node",convert:v}),v}),hN="compile",mj=["typed","parse"],gj=H(hN,mj,t=>{var{typed:e,parse:r}=t;return e(hN,{string:function(i){return r(i).compile()},"Array | Matrix":function(i){return st(i,function(a){return r(a).compile()})}})}),mN="evaluate",vj=["typed","parse"],yj=H(mN,vj,t=>{var{typed:e,parse:r}=t;return e(mN,{string:function(i){var a=wl();return r(i).compile().evaluate(a)},"string, Map | Object":function(i,a){return r(i).compile().evaluate(a)},"Array | Matrix":function(i){var a=wl();return st(i,function(o){return r(o).compile().evaluate(a)})},"Array | Matrix, Map | Object":function(i,a){return st(i,function(o){return r(o).compile().evaluate(a)})}})}),bj="Parser",xj=["evaluate","parse"],wj=H(bj,xj,t=>{var{evaluate:e,parse:r}=t;function n(){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");Object.defineProperty(this,"scope",{value:wl(),writable:!1})}n.prototype.type="Parser",n.prototype.isParser=!0,n.prototype.evaluate=function(a){return e(a,this.scope)},n.prototype.get=function(a){if(this.scope.has(a))return this.scope.get(a)},n.prototype.getAll=function(){return H$(this.scope)},n.prototype.getAllAsMap=function(){return this.scope};function i(a){if(a.length===0)return!1;for(var o=0;o<a.length;o++){var s=a.charAt(o-1),u=a.charAt(o),l=a.charAt(o+1),c=r.isAlpha(u,s,l)||o>0&&r.isDigit(u);if(!c)return!1}return!0}return n.prototype.set=function(a,o){if(!i(a))throw new Error("Invalid variable name: '".concat(a,"'. Variable names must follow the specified rules."));return this.scope.set(a,o),o},n.prototype.remove=function(a){this.scope.delete(a)},n.prototype.clear=function(){this.scope.clear()},n},{isClass:!0}),gN="parser",Nj=["typed","Parser"],Aj=H(gN,Nj,t=>{var{typed:e,Parser:r}=t;return e(gN,{"":function(){return new r}})}),vN="lup",Sj=["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtractScalar","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],Dj=H(vN,Sj,t=>{var{typed:e,matrix:r,abs:n,addScalar:i,divideScalar:a,multiplyScalar:o,subtractScalar:s,larger:u,equalScalar:l,unaryMinus:c,DenseMatrix:f,SparseMatrix:d,Spa:p}=t;return e(vN,{DenseMatrix:function(y){return h(y)},SparseMatrix:function(y){return m(y)},Array:function(y){var N=r(y),v=h(N);return{L:v.L.valueOf(),U:v.U.valueOf(),p:v.p}}});function h(g){var y=g._size[0],N=g._size[1],v=Math.min(y,N),w=et(g._data),x=[],b=[y,v],S=[],C=[v,N],A,E,D,M=[];for(A=0;A<y;A++)M[A]=A;for(E=0;E<N;E++){if(E>0)for(A=0;A<y;A++){var F=Math.min(A,E),I=0;for(D=0;D<F;D++)I=i(I,o(w[A][D],w[D][E]));w[A][E]=s(w[A][E],I)}var P=E,T=0,$=0;for(A=E;A<y;A++){var O=w[A][E],W=n(O);u(W,T)&&(P=A,T=W,$=O)}if(E!==P&&(M[E]=[M[P],M[P]=M[E]][0],f._swapRows(E,P,w)),E<y)for(A=E+1;A<y;A++){var R=w[A][E];l(R,0)||(w[A][E]=a(w[A][E],$))}}for(E=0;E<N;E++)for(A=0;A<y;A++){if(E===0&&(A<N&&(S[A]=[]),x[A]=[]),A<E){A<N&&(S[A][E]=w[A][E]),E<y&&(x[A][E]=0);continue}if(A===E){A<N&&(S[A][E]=w[A][E]),E<y&&(x[A][E]=1);continue}A<N&&(S[A][E]=0),E<y&&(x[A][E]=w[A][E])}var ie=new f({data:x,size:b}),te=new f({data:S,size:C}),Z=[];for(A=0,v=M.length;A<v;A++)Z[M[A]]=A;return{L:ie,U:te,p:Z,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}function m(g){var y=g._size[0],N=g._size[1],v=Math.min(y,N),w=g._values,x=g._index,b=g._ptr,S=[],C=[],A=[],E=[y,v],D=[],M=[],F=[],I=[v,N],P,T,$,O=[],W=[];for(P=0;P<y;P++)O[P]=P,W[P]=P;var R=function(Z,X){var pe=W[Z],de=W[X];O[pe]=X,O[de]=Z,W[Z]=de,W[X]=pe},ie=function(){var Z=new p;T<y&&(A.push(S.length),S.push(1),C.push(T)),F.push(D.length);var X=b[T],pe=b[T+1];for($=X;$<pe;$++)P=x[$],Z.set(O[P],w[$]);T>0&&Z.forEach(0,T-1,function(U,K){d._forEachRow(U,S,C,A,function(ae,B){ae>U&&Z.accumulate(ae,c(o(B,K)))})});var de=T,G=Z.get(T),V=n(G);Z.forEach(T+1,y-1,function(U,K){var ae=n(K);u(ae,V)&&(de=U,V=ae,G=K)}),T!==de&&(d._swapRows(T,de,E[1],S,C,A),d._swapRows(T,de,I[1],D,M,F),Z.swap(T,de),R(T,de)),Z.forEach(0,y-1,function(U,K){U<=T?(D.push(K),M.push(U)):(K=a(K,G),l(K,0)||(S.push(K),C.push(U)))})};for(T=0;T<N;T++)ie();return F.push(D.length),A.push(S.length),{L:new d({values:S,index:C,ptr:A,size:E}),U:new d({values:D,index:M,ptr:F,size:I}),p:O,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}}),yN="qr",Ej=["typed","matrix","zeros","identity","isZero","equal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtractScalar","complex"],Cj=H(yN,Ej,t=>{var{typed:e,matrix:r,zeros:n,identity:i,isZero:a,equal:o,sign:s,sqrt:u,conj:l,unaryMinus:c,addScalar:f,divideScalar:d,multiplyScalar:p,subtractScalar:h,complex:m}=t;return dr(e(yN,{DenseMatrix:function(w){return y(w)},SparseMatrix:function(w){return N()},Array:function(w){var x=r(w),b=y(x);return{Q:b.Q.valueOf(),R:b.R.valueOf()}}}),{_denseQRimpl:g});function g(v){var w=v._size[0],x=v._size[1],b=i([w],"dense"),S=b._data,C=v.clone(),A=C._data,E,D,M,F=n([w],"");for(M=0;M<Math.min(x,w);++M){var I=A[M][M],P=c(o(I,0)?1:s(I)),T=l(P),$=0;for(E=M;E<w;E++)$=f($,p(A[E][M],l(A[E][M])));var O=p(P,u($));if(!a(O)){var W=h(I,O);for(F[M]=1,E=M+1;E<w;E++)F[E]=d(A[E][M],W);var R=c(l(d(W,O))),ie=void 0;for(D=M;D<x;D++){for(ie=0,E=M;E<w;E++)ie=f(ie,p(l(F[E]),A[E][D]));for(ie=p(ie,R),E=M;E<w;E++)A[E][D]=p(h(A[E][D],p(F[E],ie)),T)}for(E=0;E<w;E++){for(ie=0,D=M;D<w;D++)ie=f(ie,p(S[E][D],F[D]));for(ie=p(ie,R),D=M;D<w;++D)S[E][D]=d(h(S[E][D],p(ie,l(F[D]))),T)}}}return{Q:b,R:C,toString:function(){return"Q: "+this.Q.toString()+`
R: `+this.R.toString()}}}function y(v){var w=g(v),x=w.R._data;if(v._data.length>0)for(var b=x[0][0].type==="Complex"?m(0):0,S=0;S<x.length;++S)for(var C=0;C<S&&C<(x[0]||[]).length;++C)x[S][C]=b;return w}function N(v){throw new Error("qr not implemented for sparse matrices yet")}});function Mj(t,e,r,n){t._values;for(var i=t._index,a=t._ptr,o=t._size,s=t._datatype,u=o[0],l=o[1],c=null,f=[],d=[],p=0,h=0;h<l;h++){d[h]=p;for(var m=r?r[h]:h,g=a[m],y=a[m+1],N=g;N<y;N++){var v=i[N];f[p]=v,p++}}return d[l]=p,t.createSparseMatrix({values:c,index:f,ptr:d,size:[u,l],datatype:s})}function cM(t,e,r,n,i,a,o){var s=0;for(r[o]=t;s>=0;){var u=r[o+s],l=r[n+u];l===-1?(s--,a[e++]=u):(r[n+u]=r[i+l],++s,r[o+s]=l)}return e}function Tj(t,e){if(!t)return null;var r=0,n,i=[],a=[],o=0,s=e,u=2*e;for(n=0;n<e;n++)a[o+n]=-1;for(n=e-1;n>=0;n--)t[n]!==-1&&(a[s+n]=a[o+t[n]],a[o+t[n]]=n);for(n=0;n<e;n++)t[n]===-1&&(r=cM(n,r,a,o,s,i,u));return i}function _j(t,e){if(!t)return null;var r=t._index,n=t._ptr,i=t._size,a=i[0],o=i[1],s=[],u=[],l=0,c=o,f,d;for(f=0;f<a;f++)u[c+f]=-1;for(var p=0;p<o;p++){s[p]=-1,u[l+p]=-1;for(var h=n[p],m=n[p+1],g=h;g<m;g++){var y=r[g];for(f=u[c+y];f!==-1&&f<p;f=d)d=u[l+f],u[l+f]=p,d===-1&&(s[f]=p);u[c+y]=p}}return s}function Oj(t,e,r){for(var n=t._values,i=t._index,a=t._ptr,o=t._size,s=o[1],u=0,l=0;l<s;l++){var c=a[l];for(a[l]=u;c<a[l+1];c++)e(i[c],l,n?n[c]:1,r)&&(i[u]=i[c],n&&(n[u]=n[c]),u++)}return a[s]=u,i.splice(u,i.length-u),n&&n.splice(u,n.length-u),u}function Fa(t){return-t-2}var Fj="csAmd",Bj=["add","multiply","transpose"],kj=H(Fj,Bj,t=>{var{add:e,multiply:r,transpose:n}=t;return function(c,f){if(!f||c<=0||c>3)return null;var d=f._size,p=d[0],h=d[1],m=0,g=Math.max(16,10*Math.sqrt(h));g=Math.min(h-2,g);var y=i(c,f,p,h,g);Oj(y,u,null);for(var N=y._index,v=y._ptr,w=v[h],x=[],b=[],S=0,C=h+1,A=2*(h+1),E=3*(h+1),D=4*(h+1),M=5*(h+1),F=6*(h+1),I=7*(h+1),P=x,T=a(h,v,b,S,E,P,A,I,C,F,D,M),$=o(h,v,b,M,D,F,g,C,E,P,A),O=0,W,R,ie,te,Z,X,pe,de,G,V,U,K,ae,B,q,j;$<h;){for(ie=-1;O<h&&(ie=b[E+O])===-1;O++);b[A+ie]!==-1&&(P[b[A+ie]]=-1),b[E+O]=b[A+ie];var oe=b[D+ie],k=b[C+ie];$+=k;var z=0;b[C+ie]=-k;var Y=v[ie],ne=oe===0?Y:w,se=ne;for(te=1;te<=oe+1;te++){for(te>oe?(X=ie,pe=Y,de=b[S+ie]-oe):(X=N[Y++],pe=v[X],de=b[S+X]),Z=1;Z<=de;Z++)W=N[pe++],!((G=b[C+W])<=0)&&(z+=G,b[C+W]=-G,N[se++]=W,b[A+W]!==-1&&(P[b[A+W]]=P[W]),P[W]!==-1?b[A+P[W]]=b[A+W]:b[E+b[M+W]]=b[A+W]);X!==ie&&(v[X]=Fa(ie),b[F+X]=0)}for(oe!==0&&(w=se),b[M+ie]=z,v[ie]=ne,b[S+ie]=se-ne,b[D+ie]=-2,T=s(T,m,b,F,h),V=ne;V<se;V++)if(W=N[V],!((U=b[D+W])<=0)){G=-b[C+W];var ue=T-G;for(Y=v[W],K=v[W]+U-1;Y<=K;Y++)X=N[Y],b[F+X]>=T?b[F+X]-=G:b[F+X]!==0&&(b[F+X]=b[M+X]+ue)}for(V=ne;V<se;V++){for(W=N[V],K=v[W],ae=K+b[D+W]-1,B=K,q=0,j=0,Y=K;Y<=ae;Y++)if(X=N[Y],b[F+X]!==0){var ve=b[F+X]-T;ve>0?(j+=ve,N[B++]=X,q+=X):(v[X]=Fa(ie),b[F+X]=0)}b[D+W]=B-K+1;var L=B,J=K+b[S+W];for(Y=ae+1;Y<J;Y++){R=N[Y];var re=b[C+R];re<=0||(j+=re,N[B++]=R,q+=R)}j===0?(v[W]=Fa(ie),G=-b[C+W],z-=G,k+=G,$+=G,b[C+W]=0,b[D+W]=-1):(b[M+W]=Math.min(b[M+W],j),N[B]=N[L],N[L]=N[K],N[K]=ie,b[S+W]=B-K+1,q=(q<0?-q:q)%h,b[A+W]=b[I+q],b[I+q]=W,P[W]=q)}for(b[M+ie]=z,m=Math.max(m,z),T=s(T+m,m,b,F,h),V=ne;V<se;V++)if(W=N[V],!(b[C+W]>=0))for(q=P[W],W=b[I+q],b[I+q]=-1;W!==-1&&b[A+W]!==-1;W=b[A+W],T++){for(de=b[S+W],U=b[D+W],Y=v[W]+1;Y<=v[W]+de-1;Y++)b[F+N[Y]]=T;var fe=W;for(R=b[A+W];R!==-1;){var he=b[S+R]===de&&b[D+R]===U;for(Y=v[R]+1;he&&Y<=v[R]+de-1;Y++)b[F+N[Y]]!==T&&(he=0);he?(v[R]=Fa(W),b[C+W]+=b[C+R],b[C+R]=0,b[D+R]=-1,R=b[A+R],b[A+fe]=R):(fe=R,R=b[A+R])}}for(Y=ne,V=ne;V<se;V++)W=N[V],!((G=-b[C+W])<=0)&&(b[C+W]=G,j=b[M+W]+z-G,j=Math.min(j,h-$-G),b[E+j]!==-1&&(P[b[E+j]]=W),b[A+W]=b[E+j],P[W]=-1,b[E+j]=W,O=Math.min(O,j),b[M+W]=j,N[Y++]=W);b[C+ie]=k,(b[S+ie]=Y-ne)===0&&(v[ie]=-1,b[F+ie]=0),oe!==0&&(w=Y)}for(W=0;W<h;W++)v[W]=Fa(v[W]);for(R=0;R<=h;R++)b[E+R]=-1;for(R=h;R>=0;R--)b[C+R]>0||(b[A+R]=b[E+v[R]],b[E+v[R]]=R);for(X=h;X>=0;X--)b[C+X]<=0||v[X]!==-1&&(b[A+X]=b[E+v[X]],b[E+v[X]]=X);for(ie=0,W=0;W<=h;W++)v[W]===-1&&(ie=cM(W,ie,b,E,A,x,F));return x.splice(x.length-1,1),x};function i(l,c,f,d,p){var h=n(c);if(l===1&&d===f)return e(c,h);if(l===2){for(var m=h._index,g=h._ptr,y=0,N=0;N<f;N++){var v=g[N];if(g[N]=y,!(g[N+1]-v>p))for(var w=g[N+1];v<w;v++)m[y++]=m[v]}return g[f]=y,c=n(h),r(h,c)}return r(h,c)}function a(l,c,f,d,p,h,m,g,y,N,v,w){for(var x=0;x<l;x++)f[d+x]=c[x+1]-c[x];f[d+l]=0;for(var b=0;b<=l;b++)f[p+b]=-1,h[b]=-1,f[m+b]=-1,f[g+b]=-1,f[y+b]=1,f[N+b]=1,f[v+b]=0,f[w+b]=f[d+b];var S=s(0,0,f,N,l);return f[v+l]=-2,c[l]=-1,f[N+l]=0,S}function o(l,c,f,d,p,h,m,g,y,N,v){for(var w=0,x=0;x<l;x++){var b=f[d+x];if(b===0)f[p+x]=-2,w++,c[x]=-1,f[h+x]=0;else if(b>m)f[g+x]=0,f[p+x]=-1,w++,c[x]=Fa(l),f[g+l]++;else{var S=f[y+b];S!==-1&&(N[S]=x),f[v+x]=f[y+b],f[y+b]=x}}return w}function s(l,c,f,d,p){if(l<2||l+c<0){for(var h=0;h<p;h++)f[d+h]!==0&&(f[d+h]=1);l=2}return l}function u(l,c){return l!==c}});function Ij(t,e,r,n,i,a,o){var s,u,l=0,c;if(t<=e||r[n+e]<=r[i+t])return-1;r[i+t]=r[n+e];var f=r[a+t];if(r[a+t]=e,f===-1)l=1,c=t;else{for(l=2,c=f;c!==r[o+c];c=r[o+c]);for(s=f;s!==c;s=u)u=r[o+s],r[o+s]=c}return{jleaf:l,q:c}}var Rj="csCounts",Pj=["transpose"],$j=H(Rj,Pj,t=>{var{transpose:e}=t;return function(r,n,i,a){if(!r||!n||!i)return null;var o=r._size,s=o[0],u=o[1],l,c,f,d,p,h,m,g=4*u+(a?u+s+1:0),y=[],N=0,v=u,w=2*u,x=3*u,b=4*u,S=5*u+1;for(f=0;f<g;f++)y[f]=-1;var C=[],A=e(r),E=A._index,D=A._ptr;for(f=0;f<u;f++)for(c=i[f],C[c]=y[x+c]===-1?1:0;c!==-1&&y[x+c]===-1;c=n[c])y[x+c]=f;if(a){for(f=0;f<u;f++)y[i[f]]=f;for(l=0;l<s;l++){for(f=u,h=D[l],m=D[l+1],p=h;p<m;p++)f=Math.min(f,y[E[p]]);y[S+l]=y[b+f],y[b+f]=l}}for(l=0;l<u;l++)y[N+l]=l;for(f=0;f<u;f++){for(c=i[f],n[c]!==-1&&C[n[c]]--,d=a?y[b+f]:c;d!==-1;d=a?y[S+d]:-1)for(p=D[d];p<D[d+1];p++){l=E[p];var M=Ij(l,c,y,x,v,w,N);M.jleaf>=1&&C[c]++,M.jleaf===2&&C[M.q]--}n[c]!==-1&&(y[N+c]=n[c])}for(c=0;c<u;c++)n[c]!==-1&&(C[n[c]]+=C[c]);return C}}),Lj="csSqr",zj=["add","multiply","transpose"],qj=H(Lj,zj,t=>{var{add:e,multiply:r,transpose:n}=t,i=kj({add:e,multiply:r,transpose:n}),a=$j({transpose:n});return function(u,l,c){var f=l._ptr,d=l._size,p=d[1],h,m={};if(m.q=i(u,l),u&&!m.q)return null;if(c){var g=u?Mj(l,null,m.q):l;m.parent=_j(g);var y=Tj(m.parent,p);if(m.cp=a(g,m.parent,y,1),g&&m.parent&&m.cp&&o(g,m))for(m.unz=0,h=0;h<p;h++)m.unz+=m.cp[h]}else m.unz=4*f[p]+p,m.lnz=m.unz;return m};function o(s,u){var l=s._ptr,c=s._index,f=s._size,d=f[0],p=f[1];u.pinv=[],u.leftmost=[];var h=u.parent,m=u.pinv,g=u.leftmost,y=[],N=0,v=d,w=d+p,x=d+2*p,b,S,C,A,E;for(S=0;S<p;S++)y[v+S]=-1,y[w+S]=-1,y[x+S]=0;for(b=0;b<d;b++)g[b]=-1;for(S=p-1;S>=0;S--)for(A=l[S],E=l[S+1],C=A;C<E;C++)g[c[C]]=S;for(b=d-1;b>=0;b--)m[b]=-1,S=g[b],S!==-1&&(y[x+S]++===0&&(y[w+S]=b),y[N+b]=y[v+S],y[v+S]=b);for(u.lnz=0,u.m2=d,S=0;S<p;S++)if(b=y[v+S],u.lnz++,b<0&&(b=u.m2++),m[b]=S,!(--x[S]<=0)){u.lnz+=y[x+S];var D=h[S];D!==-1&&(y[x+D]===0&&(y[w+D]=y[w+S]),y[N+y[w+S]]=y[v+D],y[v+D]=y[N+b],y[x+D]+=y[x+S])}for(b=0;b<d;b++)m[b]<0&&(m[b]=S++);return!0}});function mg(t,e){return t[e]<0}function fM(t,e){t[e]=Fa(t[e])}function bN(t){return t<0?Fa(t):t}function Uj(t,e,r,n,i){var a=e._index,o=e._ptr,s=e._size,u=s[1],l,c,f,d=0;for(n[0]=t;d>=0;){t=n[d];var p=i?i[t]:t;mg(o,t)||(fM(o,t),n[u+d]=p<0?0:bN(o[p]));var h=1;for(c=n[u+d],f=p<0?0:bN(o[p+1]);c<f;c++)if(l=a[c],!mg(o,l)){n[u+d]=c,n[++d]=l,h=0;break}h&&(d--,n[--r]=t)}return r}function Hj(t,e,r,n,i){var a=t._ptr,o=t._size,s=e._index,u=e._ptr,l=o[1],c,f,d,p=l;for(f=u[r],d=u[r+1],c=f;c<d;c++){var h=s[c];mg(a,h)||(p=Uj(h,t,p,n,i))}for(c=p;c<l;c++)fM(a,n[c]);return p}var Vj="csSpsolve",Wj=["divideScalar","multiply","subtract"],jj=H(Vj,Wj,t=>{var{divideScalar:e,multiply:r,subtract:n}=t;return function(a,o,s,u,l,c,f){var d=a._values,p=a._index,h=a._ptr,m=a._size,g=m[1],y=o._values,N=o._index,v=o._ptr,w,x,b,S,C=Hj(a,o,s,u,c);for(w=C;w<g;w++)l[u[w]]=0;for(x=v[s],b=v[s+1],w=x;w<b;w++)l[N[w]]=y[w];for(var A=C;A<g;A++){var E=u[A],D=c?c[E]:E;if(!(D<0))for(x=h[D],b=h[D+1],l[E]=e(l[E],d[f?x:b-1]),w=f?x+1:x,S=f?b:b-1;w<S;w++){var M=p[w];l[M]=n(l[M],r(d[w],l[E]))}}return C}}),Gj="csLu",Kj=["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],Jj=H(Gj,Kj,t=>{var{abs:e,divideScalar:r,multiply:n,subtract:i,larger:a,largerEq:o,SparseMatrix:s}=t,u=jj({divideScalar:r,multiply:n,subtract:i});return function(c,f,d){if(!c)return null;var p=c._size,h=p[1],m,g=100,y=100;f&&(m=f.q,g=f.lnz||g,y=f.unz||y);var N=[],v=[],w=[],x=new s({values:N,index:v,ptr:w,size:[h,h]}),b=[],S=[],C=[],A=new s({values:b,index:S,ptr:C,size:[h,h]}),E=[],D,M,F=[],I=[];for(D=0;D<h;D++)F[D]=0,E[D]=-1,w[D+1]=0;g=0,y=0;for(var P=0;P<h;P++){w[P]=g,C[P]=y;var T=m?m[P]:P,$=u(x,c,T,I,F,E,1),O=-1,W=-1;for(M=$;M<h;M++)if(D=I[M],E[D]<0){var R=e(F[D]);a(R,W)&&(W=R,O=D)}else S[y]=E[D],b[y++]=F[D];if(O===-1||W<=0)return null;E[T]<0&&o(e(F[T]),n(W,d))&&(O=T);var ie=F[O];for(S[y]=P,b[y++]=ie,E[O]=P,v[g]=O,N[g++]=1,M=$;M<h;M++)D=I[M],E[D]<0&&(v[g]=D,N[g++]=r(F[D],ie)),F[D]=0}for(w[h]=g,C[h]=y,M=0;M<g;M++)v[M]=E[v[M]];return N.splice(g,N.length-g),v.splice(g,v.length-g),b.splice(y,b.length-y),S.splice(y,S.length-y),{L:x,U:A,pinv:E}}}),xN="slu",Yj=["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],Zj=H(xN,Yj,t=>{var{typed:e,abs:r,add:n,multiply:i,transpose:a,divideScalar:o,subtract:s,larger:u,largerEq:l,SparseMatrix:c}=t,f=qj({add:n,multiply:i,transpose:a}),d=Jj({abs:r,divideScalar:o,multiply:i,subtract:s,larger:u,largerEq:l,SparseMatrix:c});return e(xN,{"SparseMatrix, number, number":function(h,m,g){if(!$e(m)||m<0||m>3)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(g<0||g>1)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var y=f(m,h,!1),N=d(h,y,g);return{L:N.L,U:N.U,p:N.pinv,q:y.q,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
p: `+this.p.toString()+(this.q?`
q: `+this.q.toString():"")+`
`}}}})});function wN(t,e){var r,n=e.length,i=[];if(t)for(r=0;r<n;r++)i[t[r]]=e[r];else for(r=0;r<n;r++)i[r]=e[r];return i}var NN="lusolve",Xj=["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],Qj=H(NN,Xj,t=>{var{typed:e,matrix:r,lup:n,slu:i,usolve:a,lsolve:o,DenseMatrix:s}=t,u=$l({DenseMatrix:s});return e(NN,{"Array, Array | Matrix":function(d,p){d=r(d);var h=n(d),m=c(h.L,h.U,h.p,null,p);return m.valueOf()},"DenseMatrix, Array | Matrix":function(d,p){var h=n(d);return c(h.L,h.U,h.p,null,p)},"SparseMatrix, Array | Matrix":function(d,p){var h=n(d);return c(h.L,h.U,h.p,null,p)},"SparseMatrix, Array | Matrix, number, number":function(d,p,h,m){var g=i(d,h,m);return c(g.L,g.U,g.p,g.q,p)},"Object, Array | Matrix":function(d,p){return c(d.L,d.U,d.p,d.q,p)}});function l(f){if(We(f))return f;if(Bt(f))return r(f);throw new TypeError("Invalid Matrix LU decomposition")}function c(f,d,p,h,m){f=l(f),d=l(d),p&&(m=u(f,m,!0),m._data=wN(p,m._data));var g=o(f,m),y=a(d,g);return h&&(y._data=wN(h,y._data)),y}}),AN="polynomialRoot",eG=["typed","isZero","equalScalar","add","subtract","multiply","divide","sqrt","unaryMinus","cbrt","typeOf","im","re"],tG=H(AN,eG,t=>{var{typed:e,isZero:r,equalScalar:n,add:i,subtract:a,multiply:o,divide:s,sqrt:u,unaryMinus:l,cbrt:c,typeOf:f,im:d,re:p}=t;return e(AN,{"number|Complex, ...number|Complex":(h,m)=>{for(var g=[h,...m];g.length>0&&r(g[g.length-1]);)g.pop();if(g.length<2)throw new RangeError("Polynomial [".concat(h,", ").concat(m,"] must have a non-zero non-constant coefficient"));switch(g.length){case 2:return[l(s(g[0],g[1]))];case 3:{var[y,N,v]=g,w=o(2,v),x=o(N,N),b=o(4,v,y);if(n(x,b))return[s(l(N),w)];var S=u(a(x,b));return[s(a(S,N),w),s(a(l(S),N),w)]}case 4:{var[C,A,E,D]=g,M=l(o(3,D)),F=o(E,E),I=o(3,D,A),P=i(o(2,E,E,E),o(27,D,D,C)),T=o(9,D,E,A);if(n(F,I)&&n(P,T))return[s(E,M)];var $=a(F,I),O=a(P,T),W=i(o(18,D,E,A,C),o(E,E,A,A)),R=i(o(4,E,E,E,C),o(4,D,A,A,A),o(27,D,D,C,C));if(n(W,R))return[s(a(o(4,D,E,A),i(o(9,D,D,C),o(E,E,E))),o(D,$)),s(a(o(9,D,C),o(E,A)),o(2,$))];var ie;n(F,I)?ie=O:ie=s(i(O,u(a(o(O,O),o(4,$,$,$)))),2);var te=!0,Z=c(ie,te).toArray().map(X=>s(i(E,X,s($,X)),M));return Z.map(X=>f(X)==="Complex"&&n(p(X),p(X)+d(X))?p(X):X)}default:throw new RangeError("only implemented for cubic or lower-order polynomials, not ".concat(g))}}})}),rG="Help",nG=["evaluate"],iG=H(rG,nG,t=>{var{evaluate:e}=t;function r(n){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(!n)throw new Error('Argument "doc" missing');this.doc=n}return r.prototype.type="Help",r.prototype.isHelp=!0,r.prototype.toString=function(){var n=this.doc||{},i=`
`;if(n.name&&(i+="Name: "+n.name+`

`),n.category&&(i+="Category: "+n.category+`

`),n.description&&(i+=`Description:
    `+n.description+`

`),n.syntax&&(i+=`Syntax:
    `+n.syntax.join(`
    `)+`

`),n.examples){i+=`Examples:
`;for(var a=!1,o=e("config()"),s={config:f=>(a=!0,e("config(newConfig)",{newConfig:f}))},u=0;u<n.examples.length;u++){var l=n.examples[u];i+="    "+l+`
`;var c=void 0;try{c=e(l,s)}catch(f){c=f}c!==void 0&&!y2(c)&&(i+="        "+pt(c,{precision:14})+`
`)}i+=`
`,a&&e("config(originalConfig)",{originalConfig:o})}return n.mayThrow&&n.mayThrow.length&&(i+="Throws: "+n.mayThrow.join(", ")+`

`),n.seealso&&n.seealso.length&&(i+="See also: "+n.seealso.join(", ")+`
`),i},r.prototype.toJSON=function(){var n=et(this.doc);return n.mathjs="Help",n},r.fromJSON=function(n){var i={};return Object.keys(n).filter(a=>a!=="mathjs").forEach(a=>{i[a]=n[a]}),new r(i)},r.prototype.valueOf=r.prototype.toString,r},{isClass:!0}),aG="Chain",oG=["?on","math","typed"],sG=H(aG,oG,t=>{var{on:e,math:r,typed:n}=t;function i(l){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");x2(l)?this.value=l.value:this.value=l}i.prototype.type="Chain",i.prototype.isChain=!0,i.prototype.done=function(){return this.value},i.prototype.valueOf=function(){return this.value},i.prototype.toString=function(){return pt(this.value)},i.prototype.toJSON=function(){return{mathjs:"Chain",value:this.value}},i.fromJSON=function(l){return new i(l.value)};function a(l,c){typeof c=="function"&&(i.prototype[l]=s(c))}function o(l,c){n8(i.prototype,l,function(){var d=c();if(typeof d=="function")return s(d)})}function s(l){return function(){if(arguments.length===0)return new i(l(this.value));for(var c=[this.value],f=0;f<arguments.length;f++)c[f+1]=arguments[f];if(n.isTypedFunction(l)){var d=n.resolve(l,c);if(d.params.length===1)throw new Error("chain function "+l.name+" cannot match rest parameter between chain value and additional arguments.");return new i(d.implementation.apply(l,c))}return new i(l.apply(l,c))}}i.createProxy=function(l,c){if(typeof l=="string")a(l,c);else{var f=function(h){Ie(l,h)&&u[h]===void 0&&o(h,()=>l[h])};for(var d in l)f(d)}};var u={expression:!0,docs:!0,type:!0,classes:!0,json:!0,error:!0,isChain:!0};return i.createProxy(r),e&&e("import",function(l,c,f){f||o(l,c)}),i},{isClass:!0}),SN={name:"e",category:"Constants",syntax:["e"],description:"Euler's number, the base of the natural logarithm. Approximately equal to 2.71828",examples:["e","e ^ 2","exp(2)","log(e)"],seealso:["exp"]},uG={name:"false",category:"Constants",syntax:["false"],description:"Boolean value false",examples:["false"],seealso:["true"]},lG={name:"i",category:"Constants",syntax:["i"],description:"Imaginary unit, defined as i*i=-1. A complex number is described as a + b*i, where a is the real part, and b is the imaginary part.",examples:["i","i * i","sqrt(-1)"],seealso:[]},cG={name:"Infinity",category:"Constants",syntax:["Infinity"],description:"Infinity, a number which is larger than the maximum number that can be handled by a floating point number.",examples:["Infinity","1 / 0"],seealso:[]},fG={name:"LN10",category:"Constants",syntax:["LN10"],description:"Returns the natural logarithm of 10, approximately equal to 2.302",examples:["LN10","log(10)"],seealso:[]},dG={name:"LN2",category:"Constants",syntax:["LN2"],description:"Returns the natural logarithm of 2, approximately equal to 0.693",examples:["LN2","log(2)"],seealso:[]},pG={name:"LOG10E",category:"Constants",syntax:["LOG10E"],description:"Returns the base-10 logarithm of E, approximately equal to 0.434",examples:["LOG10E","log(e, 10)"],seealso:[]},hG={name:"LOG2E",category:"Constants",syntax:["LOG2E"],description:"Returns the base-2 logarithm of E, approximately equal to 1.442",examples:["LOG2E","log(e, 2)"],seealso:[]},mG={name:"NaN",category:"Constants",syntax:["NaN"],description:"Not a number",examples:["NaN","0 / 0"],seealso:[]},gG={name:"null",category:"Constants",syntax:["null"],description:"Value null",examples:["null"],seealso:["true","false"]},vG={name:"phi",category:"Constants",syntax:["phi"],description:"Phi is the golden ratio. Two quantities are in the golden ratio if their ratio is the same as the ratio of their sum to the larger of the two quantities. Phi is defined as `(1 + sqrt(5)) / 2` and is approximately 1.618034...",examples:["phi"],seealso:[]},DN={name:"pi",category:"Constants",syntax:["pi"],description:"The number pi is a mathematical constant that is the ratio of a circle's circumference to its diameter, and is approximately equal to 3.14159",examples:["pi","sin(pi/2)"],seealso:["tau"]},yG={name:"SQRT1_2",category:"Constants",syntax:["SQRT1_2"],description:"Returns the square root of 1/2, approximately equal to 0.707",examples:["SQRT1_2","sqrt(1/2)"],seealso:[]},bG={name:"SQRT2",category:"Constants",syntax:["SQRT2"],description:"Returns the square root of 2, approximately equal to 1.414",examples:["SQRT2","sqrt(2)"],seealso:[]},xG={name:"tau",category:"Constants",syntax:["tau"],description:"Tau is the ratio constant of a circle's circumference to radius, equal to 2 * pi, approximately 6.2832.",examples:["tau","2 * pi"],seealso:["pi"]},wG={name:"true",category:"Constants",syntax:["true"],description:"Boolean value true",examples:["true"],seealso:["false"]},NG={name:"version",category:"Constants",syntax:["version"],description:"A string with the version number of math.js",examples:["version"],seealso:[]},AG={name:"bignumber",category:"Construction",syntax:["bignumber(x)"],description:"Create a big number from a number or string.",examples:["0.1 + 0.2","bignumber(0.1) + bignumber(0.2)",'bignumber("7.2")','bignumber("7.2e500")',"bignumber([0.1, 0.2, 0.3])"],seealso:["boolean","bigint","complex","fraction","index","matrix","string","unit"]},SG={name:"bigint",category:"Construction",syntax:["bigint(x)"],description:"Create a bigint, an integer with an arbitrary number of digits, from a number or string.",examples:["123123123123123123 # a large number will lose digits",'bigint("123123123123123123")','bignumber(["1", "3", "5"])'],seealso:["boolean","bignumber","number","complex","fraction","index","matrix","string","unit"]},DG={name:"boolean",category:"Construction",syntax:["x","boolean(x)"],description:"Convert a string or number into a boolean.",examples:["boolean(0)","boolean(1)","boolean(3)",'boolean("true")','boolean("false")',"boolean([1, 0, 1, 1])"],seealso:["bignumber","complex","index","matrix","number","string","unit"]},EG={name:"complex",category:"Construction",syntax:["complex()","complex(re, im)","complex(string)"],description:"Create a complex number.",examples:["complex()","complex(2, 3)",'complex("7 - 2i")'],seealso:["bignumber","boolean","index","matrix","number","string","unit"]},CG={name:"createUnit",category:"Construction",syntax:["createUnit(definitions)","createUnit(name, definition)"],description:"Create a user-defined unit and register it with the Unit type.",examples:['createUnit("foo")','createUnit("knot", {definition: "0.514444444 m/s", aliases: ["knots", "kt", "kts"]})','createUnit("mph", "1 mile/hour")'],seealso:["unit","splitUnit"]},MG={name:"fraction",category:"Construction",syntax:["fraction(num)","fraction(matrix)","fraction(num,den)","fraction({n: num, d: den})"],description:"Create a fraction from a number or from integer numerator and denominator.",examples:["fraction(0.125)","fraction(1, 3) + fraction(2, 5)","fraction({n: 333, d: 53})","fraction([sqrt(9), sqrt(10), sqrt(11)])"],seealso:["bignumber","boolean","complex","index","matrix","string","unit"]},TG={name:"index",category:"Construction",syntax:["[start]","[start:end]","[start:step:end]","[start1, start 2, ...]","[start1:end1, start2:end2, ...]","[start1:step1:end1, start2:step2:end2, ...]"],description:"Create an index to get or replace a subset of a matrix",examples:["A = [1, 2, 3; 4, 5, 6]","A[1, :]","A[1, 2] = 50","A[1:2, 1:2] = 1","B = [1, 2, 3]","B[B>1 and B<3]"],seealso:["bignumber","boolean","complex","matrix","number","range","string","unit"]},_G={name:"matrix",category:"Construction",syntax:["[]","[a1, b1, ...; a2, b2, ...]","matrix()",'matrix("dense")',"matrix([...])"],description:"Create a matrix.",examples:["[]","[1, 2, 3]","[1, 2, 3; 4, 5, 6]","matrix()","matrix([3, 4])",'matrix([3, 4; 5, 6], "sparse")','matrix([3, 4; 5, 6], "sparse", "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","sparse"]},OG={name:"number",category:"Construction",syntax:["x","number(x)","number(unit, valuelessUnit)"],description:"Create a number or convert a string or boolean into a number.",examples:["2","2e3","4.05","number(2)",'number("7.2")',"number(true)","number([true, false, true, true])",'number(unit("52cm"), "m")'],seealso:["bignumber","bigint","boolean","complex","fraction","index","matrix","string","unit"]},FG={name:"sparse",category:"Construction",syntax:["sparse()","sparse([a1, b1, ...; a1, b2, ...])",'sparse([a1, b1, ...; a1, b2, ...], "number")'],description:"Create a sparse matrix.",examples:["sparse()","sparse([3, 4; 5, 6])",'sparse([3, 0; 5, 0], "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","matrix"]},BG={name:"splitUnit",category:"Construction",syntax:["splitUnit(unit: Unit, parts: Unit[])"],description:"Split a unit in an array of units whose sum is equal to the original unit.",examples:['splitUnit(1 m, ["feet", "inch"])'],seealso:["unit","createUnit"]},kG={name:"string",category:"Construction",syntax:['"text"',"string(x)"],description:"Create a string or convert a value to a string",examples:['"Hello World!"',"string(4.2)","string(3 + 2i)"],seealso:["bignumber","boolean","complex","index","matrix","number","unit"]},IG={name:"unit",category:"Construction",syntax:["value unit","unit(value, unit)","unit(string)"],description:"Create a unit.",examples:["5.5 mm","3 inch",'unit(7.1, "kilogram")','unit("23 deg")'],seealso:["bignumber","boolean","complex","index","matrix","number","string"]},RG={name:"config",category:"Core",syntax:["config()","config(options)"],description:"Get configuration or change configuration.",examples:["config()","1/3 + 1/4",'config({number: "Fraction"})',"1/3 + 1/4"],seealso:[]},PG={name:"import",category:"Core",syntax:["import(functions)","import(functions, options)"],description:"Import functions or constants from an object.",examples:["import({myFn: f(x)=x^2, myConstant: 32 })","myFn(2)","myConstant"],seealso:[]},$G={name:"typed",category:"Core",syntax:["typed(signatures)","typed(name, signatures)"],description:"Create a typed function.",examples:['double = typed({ "number": f(x)=x+x, "string": f(x)=concat(x,x) })',"double(2)",'double("hello")'],seealso:[]},LG={name:"derivative",category:"Algebra",syntax:["derivative(expr, variable)","derivative(expr, variable, {simplify: boolean})"],description:"Takes the derivative of an expression expressed in parser Nodes. The derivative will be taken over the supplied variable in the second parameter. If there are multiple variables in the expression, it will return a partial derivative.",examples:['derivative("2x^3", "x")','derivative("2x^3", "x", {simplify: false})','derivative("2x^2 + 3x + 4", "x")','derivative("sin(2x)", "x")','f = parse("x^2 + x")','x = parse("x")',"df = derivative(f, x)","df.evaluate({x: 3})"],seealso:["simplify","parse","evaluate"]},zG={name:"leafCount",category:"Algebra",syntax:["leafCount(expr)"],description:"Computes the number of leaves in the parse tree of the given expression",examples:['leafCount("e^(i*pi)-1")','leafCount(parse("{a: 22/7, b: 10^(1/2)}"))'],seealso:["simplify"]},qG={name:"lsolve",category:"Algebra",syntax:["x=lsolve(L, b)"],description:"Finds one solution of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolveAll","lup","lusolve","usolve","matrix","sparse"]},UG={name:"lsolveAll",category:"Algebra",syntax:["x=lsolveAll(L, b)"],description:"Finds all solutions of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolve","lup","lusolve","usolve","matrix","sparse"]},HG={name:"lup",category:"Algebra",syntax:["lup(m)"],description:"Calculate the Matrix LU decomposition with partial pivoting. Matrix A is decomposed in three matrices (L, U, P) where P * A = L * U",examples:["lup([[2, 1], [1, 4]])","lup(matrix([[2, 1], [1, 4]]))","lup(sparse([[2, 1], [1, 4]]))"],seealso:["lusolve","lsolve","usolve","matrix","sparse","slu","qr"]},VG={name:"lusolve",category:"Algebra",syntax:["x=lusolve(A, b)","x=lusolve(lu, b)"],description:"Solves the linear system A * x = b where A is an [n x n] matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lusolve(a, b)"],seealso:["lup","slu","lsolve","usolve","matrix","sparse"]},WG={name:"polynomialRoot",category:"Algebra",syntax:["x=polynomialRoot(-6, 3)","x=polynomialRoot(4, -4, 1)","x=polynomialRoot(-8, 12, -6, 1)"],description:"Finds the roots of a univariate polynomial given by its coefficients starting from constant, linear, and so on, increasing in degree.",examples:["a = polynomialRoot(-6, 11, -6, 1)"],seealso:["cbrt","sqrt"]},jG={name:"qr",category:"Algebra",syntax:["qr(A)"],description:"Calculates the Matrix QR decomposition. Matrix `A` is decomposed in two matrices (`Q`, `R`) where `Q` is an orthogonal matrix and `R` is an upper triangular matrix.",examples:["qr([[1, -1,  4], [1,  4, -2], [1,  4,  2], [1,  -1, 0]])"],seealso:["lup","slu","matrix"]},GG={name:"rationalize",category:"Algebra",syntax:["rationalize(expr)","rationalize(expr, scope)","rationalize(expr, scope, detailed)"],description:"Transform a rationalizable expression in a rational fraction. If rational fraction is one variable polynomial then converts the numerator and denominator in canonical form, with decreasing exponents, returning the coefficients of numerator.",examples:['rationalize("2x/y - y/(x+1)")','rationalize("2x/y - y/(x+1)", true)'],seealso:["simplify"]},KG={name:"resolve",category:"Algebra",syntax:["resolve(node, scope)"],description:"Recursively substitute variables in an expression tree.",examples:['resolve(parse("1 + x"), { x: 7 })','resolve(parse("size(text)"), { text: "Hello World" })','resolve(parse("x + y"), { x: parse("3z") })','resolve(parse("3x"), { x: parse("y+z"), z: parse("w^y") })'],seealso:["simplify","evaluate"],mayThrow:["ReferenceError"]},JG={name:"simplify",category:"Algebra",syntax:["simplify(expr)","simplify(expr, rules)"],description:"Simplify an expression tree.",examples:['simplify("3 + 2 / 4")','simplify("2x + x")','f = parse("x * (x + 2 + x)")',"simplified = simplify(f)","simplified.evaluate({x: 2})"],seealso:["simplifyCore","derivative","evaluate","parse","rationalize","resolve"]},YG={name:"simplifyConstant",category:"Algebra",syntax:["simplifyConstant(expr)","simplifyConstant(expr, options)"],description:"Replace constant subexpressions of node with their values.",examples:['simplifyConstant("(3-3)*x")','simplifyConstant(parse("z-cos(tau/8)"))'],seealso:["simplify","simplifyCore","evaluate"]},ZG={name:"simplifyCore",category:"Algebra",syntax:["simplifyCore(node)"],description:"Perform simple one-pass simplifications on an expression tree.",examples:['simplifyCore(parse("0*x"))','simplifyCore(parse("(x+0)*2"))'],seealso:["simplify","simplifyConstant","evaluate"]},XG={name:"slu",category:"Algebra",syntax:["slu(A, order, threshold)"],description:"Calculate the Matrix LU decomposition with full pivoting. Matrix A is decomposed in two matrices (L, U) and two permutation vectors (pinv, q) where P * A * Q = L * U",examples:["slu(sparse([4.5, 0, 3.2, 0; 3.1, 2.9, 0, 0.9; 0, 1.7, 3, 0; 3.5, 0.4, 0, 1]), 1, 0.001)"],seealso:["lusolve","lsolve","usolve","matrix","sparse","lup","qr"]},QG={name:"symbolicEqual",category:"Algebra",syntax:["symbolicEqual(expr1, expr2)","symbolicEqual(expr1, expr2, options)"],description:"Returns true if the difference of the expressions simplifies to 0",examples:['symbolicEqual("x*y","y*x")','symbolicEqual("abs(x^2)", "x^2")','symbolicEqual("abs(x)", "x", {context: {abs: {trivial: true}}})'],seealso:["simplify","evaluate"]},eK={name:"usolve",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds one solution of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolveAll","lup","lusolve","lsolve","matrix","sparse"]},tK={name:"usolveAll",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds all solutions of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolve","lup","lusolve","lsolve","matrix","sparse"]},rK={name:"abs",category:"Arithmetic",syntax:["abs(x)"],description:"Compute the absolute value.",examples:["abs(3.5)","abs(-4.2)"],seealso:["sign"]},nK={name:"add",category:"Operators",syntax:["x + y","add(x, y)"],description:"Add two values.",examples:["a = 2.1 + 3.6","a - 3.6","3 + 2i","3 cm + 2 inch",'"2.3" + "4"'],seealso:["subtract"]},iK={name:"cbrt",category:"Arithmetic",syntax:["cbrt(x)","cbrt(x, allRoots)"],description:"Compute the cubic root value. If x = y * y * y, then y is the cubic root of x. When `x` is a number or complex number, an optional second argument `allRoots` can be provided to return all three cubic roots. If not provided, the principal root is returned",examples:["cbrt(64)","cube(4)","cbrt(-8)","cbrt(2 + 3i)","cbrt(8i)","cbrt(8i, true)","cbrt(27 m^3)"],seealso:["square","sqrt","cube","multiply"]},aK={name:"ceil",category:"Arithmetic",syntax:["ceil(x)","ceil(x, n)","ceil(unit, valuelessUnit)","ceil(unit, n, valuelessUnit)"],description:"Round a value towards plus infinity. If x is complex, both real and imaginary part are rounded towards plus infinity.",examples:["ceil(3.2)","ceil(3.8)","ceil(-4.2)","ceil(3.241cm, cm)","ceil(3.241cm, 2, cm)"],seealso:["floor","fix","round"]},oK={name:"cube",category:"Arithmetic",syntax:["cube(x)"],description:"Compute the cube of a value. The cube of x is x * x * x.",examples:["cube(2)","2^3","2 * 2 * 2"],seealso:["multiply","square","pow"]},sK={name:"divide",category:"Operators",syntax:["x / y","divide(x, y)"],description:"Divide two values.",examples:["a = 2 / 3","a * 3","4.5 / 2","3 + 4 / 2","(3 + 4) / 2","18 km / 4.5"],seealso:["multiply"]},uK={name:"dotDivide",category:"Operators",syntax:["x ./ y","dotDivide(x, y)"],description:"Divide two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a ./ b"],seealso:["multiply","dotMultiply","divide"]},lK={name:"dotMultiply",category:"Operators",syntax:["x .* y","dotMultiply(x, y)"],description:"Multiply two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a .* b"],seealso:["multiply","divide","dotDivide"]},cK={name:"dotPow",category:"Operators",syntax:["x .^ y","dotPow(x, y)"],description:"Calculates the power of x to y element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","a .^ 2"],seealso:["pow"]},fK={name:"exp",category:"Arithmetic",syntax:["exp(x)"],description:"Calculate the exponent of a value.",examples:["exp(1.3)","e ^ 1.3","log(exp(1.3))","x = 2.4","(exp(i*x) == cos(x) + i*sin(x))   # Euler's formula"],seealso:["expm","expm1","pow","log"]},dK={name:"expm",category:"Arithmetic",syntax:["exp(x)"],description:"Compute the matrix exponential, expm(A) = e^A. The matrix must be square. Not to be confused with exp(a), which performs element-wise exponentiation.",examples:["expm([[0,2],[0,0]])"],seealso:["exp"]},pK={name:"expm1",category:"Arithmetic",syntax:["expm1(x)"],description:"Calculate the value of subtracting 1 from the exponential value.",examples:["expm1(2)","pow(e, 2) - 1","log(expm1(2) + 1)"],seealso:["exp","pow","log"]},hK={name:"fix",category:"Arithmetic",syntax:["fix(x)","fix(x, n)","fix(unit, valuelessUnit)","fix(unit, n, valuelessUnit)"],description:"Round a value towards zero. If x is complex, both real and imaginary part are rounded towards zero.",examples:["fix(3.2)","fix(3.8)","fix(-4.2)","fix(-4.8)","fix(3.241cm, cm)","fix(3.241cm, 2, cm)"],seealso:["ceil","floor","round"]},mK={name:"floor",category:"Arithmetic",syntax:["floor(x)","floor(x, n)","floor(unit, valuelessUnit)","floor(unit, n, valuelessUnit)"],description:"Round a value towards minus infinity.If x is complex, both real and imaginary part are rounded towards minus infinity.",examples:["floor(3.2)","floor(3.8)","floor(-4.2)","floor(3.241cm, cm)","floor(3.241cm, 2, cm)"],seealso:["ceil","fix","round"]},gK={name:"gcd",category:"Arithmetic",syntax:["gcd(a, b)","gcd(a, b, c, ...)"],description:"Compute the greatest common divisor.",examples:["gcd(8, 12)","gcd(-4, 6)","gcd(25, 15, -10)"],seealso:["lcm","xgcd"]},vK={name:"hypot",category:"Arithmetic",syntax:["hypot(a, b, c, ...)","hypot([a, b, c, ...])"],description:"Calculate the hypotenuse of a list with values.",examples:["hypot(3, 4)","sqrt(3^2 + 4^2)","hypot(-2)","hypot([3, 4, 5])"],seealso:["abs","norm"]},yK={name:"invmod",category:"Arithmetic",syntax:["invmod(a, b)"],description:"Calculate the (modular) multiplicative inverse of a modulo b. Solution to the equation ax  1 (mod b)",examples:["invmod(8, 12)","invmod(7, 13)","invmod(15151, 15122)"],seealso:["gcd","xgcd"]},bK={name:"lcm",category:"Arithmetic",syntax:["lcm(x, y)"],description:"Compute the least common multiple.",examples:["lcm(4, 6)","lcm(6, 21)","lcm(6, 21, 5)"],seealso:["gcd"]},xK={name:"log",category:"Arithmetic",syntax:["log(x)","log(x, base)"],description:"Compute the logarithm of a value. If no base is provided, the natural logarithm of x is calculated. If base if provided, the logarithm is calculated for the specified base. log(x, base) is defined as log(x) / log(base).",examples:["log(3.5)","a = log(2.4)","exp(a)","10 ^ 4","log(10000, 10)","log(10000) / log(10)","b = log(1024, 2)","2 ^ b"],seealso:["exp","log1p","log2","log10"]},wK={name:"log10",category:"Arithmetic",syntax:["log10(x)"],description:"Compute the 10-base logarithm of a value.",examples:["log10(0.00001)","log10(10000)","10 ^ 4","log(10000) / log(10)","log(10000, 10)"],seealso:["exp","log"]},NK={name:"log1p",category:"Arithmetic",syntax:["log1p(x)","log1p(x, base)"],description:"Calculate the logarithm of a `value+1`",examples:["log1p(2.5)","exp(log1p(1.4))","pow(10, 4)","log1p(9999, 10)","log1p(9999) / log(10)"],seealso:["exp","log","log2","log10"]},AK={name:"log2",category:"Arithmetic",syntax:["log2(x)"],description:"Calculate the 2-base of a value. This is the same as calculating `log(x, 2)`.",examples:["log2(0.03125)","log2(16)","log2(16) / log2(2)","pow(2, 4)"],seealso:["exp","log1p","log","log10"]},SK={name:"mod",category:"Operators",syntax:["x % y","x mod y","mod(x, y)"],description:"Calculates the modulus, the remainder of an integer division.",examples:["7 % 3","11 % 2","10 mod 4","isOdd(x) = x % 2","isOdd(2)","isOdd(3)"],seealso:["divide"]},DK={name:"multiply",category:"Operators",syntax:["x * y","multiply(x, y)"],description:"multiply two values.",examples:["a = 2.1 * 3.4","a / 3.4","2 * 3 + 4","2 * (3 + 4)","3 * 2.1 km"],seealso:["divide"]},EK={name:"norm",category:"Arithmetic",syntax:["norm(x)","norm(x, p)"],description:"Calculate the norm of a number, vector or matrix.",examples:["abs(-3.5)","norm(-3.5)","norm(3 - 4i)","norm([1, 2, -3], Infinity)","norm([1, 2, -3], -Infinity)","norm([3, 4], 2)","norm([[1, 2], [3, 4]], 1)",'norm([[1, 2], [3, 4]], "inf")','norm([[1, 2], [3, 4]], "fro")']},CK={name:"nthRoot",category:"Arithmetic",syntax:["nthRoot(a)","nthRoot(a, root)"],description:'Calculate the nth root of a value. The principal nth root of a positive real number A, is the positive real solution of the equation "x^root = A".',examples:["4 ^ 3","nthRoot(64, 3)","nthRoot(9, 2)","sqrt(9)"],seealso:["nthRoots","pow","sqrt"]},MK={name:"nthRoots",category:"Arithmetic",syntax:["nthRoots(A)","nthRoots(A, root)"],description:'Calculate the nth roots of a value. An nth root of a positive real number A, is a positive real solution of the equation "x^root = A". This function returns an array of complex values.',examples:["nthRoots(1)","nthRoots(1, 3)"],seealso:["sqrt","pow","nthRoot"]},TK={name:"pow",category:"Operators",syntax:["x ^ y","pow(x, y)"],description:"Calculates the power of x to y, x^y.",examples:["2^3","2*2*2","1 + e ^ (pi * i)","pow([[1, 2], [4, 3]], 2)","pow([[1, 2], [4, 3]], -1)"],seealso:["multiply","nthRoot","nthRoots","sqrt"]},_K={name:"round",category:"Arithmetic",syntax:["round(x)","round(x, n)","round(unit, valuelessUnit)","round(unit, n, valuelessUnit)"],description:"round a value towards the nearest integer.If x is complex, both real and imaginary part are rounded towards the nearest integer. When n is specified, the value is rounded to n decimals.",examples:["round(3.2)","round(3.8)","round(-4.2)","round(-4.8)","round(pi, 3)","round(123.45678, 2)","round(3.241cm, 2, cm)","round([3.2, 3.8, -4.7])"],seealso:["ceil","floor","fix"]},OK={name:"sign",category:"Arithmetic",syntax:["sign(x)"],description:"Compute the sign of a value. The sign of a value x is 1 when x>0, -1 when x<0, and 0 when x=0.",examples:["sign(3.5)","sign(-4.2)","sign(0)"],seealso:["abs"]},FK={name:"sqrt",category:"Arithmetic",syntax:["sqrt(x)"],description:"Compute the square root value. If x = y * y, then y is the square root of x.",examples:["sqrt(25)","5 * 5","sqrt(-1)"],seealso:["square","sqrtm","multiply","nthRoot","nthRoots","pow"]},BK={name:"sqrtm",category:"Arithmetic",syntax:["sqrtm(x)"],description:"Calculate the principal square root of a square matrix. The principal square root matrix `X` of another matrix `A` is such that `X * X = A`.",examples:["sqrtm([[33, 24], [48, 57]])"],seealso:["sqrt","abs","square","multiply"]},kK={name:"sylvester",category:"Algebra",syntax:["sylvester(A,B,C)"],description:"Solves the real-valued Sylvester equation AX+XB=C for X",examples:["sylvester([[-1, -2], [1, 1]], [[-2, 1], [-1, 2]], [[-3, 2], [3, 0]])","A = [[-1, -2], [1, 1]]; B = [[2, -1], [1, -2]]; C = [[-3, 2], [3, 0]]","sylvester(A, B, C)"],seealso:["schur","lyap"]},IK={name:"schur",category:"Algebra",syntax:["schur(A)"],description:"Performs a real Schur decomposition of the real matrix A = UTU'",examples:["schur([[1, 0], [-4, 3]])","A = [[1, 0], [-4, 3]]","schur(A)"],seealso:["lyap","sylvester"]},RK={name:"lyap",category:"Algebra",syntax:["lyap(A,Q)"],description:"Solves the Continuous-time Lyapunov equation AP+PA'+Q=0 for P",examples:["lyap([[-2, 0], [1, -4]], [[3, 1], [1, 3]])","A = [[-2, 0], [1, -4]]","Q = [[3, 1], [1, 3]]","lyap(A,Q)"],seealso:["schur","sylvester"]},PK={name:"square",category:"Arithmetic",syntax:["square(x)"],description:"Compute the square of a value. The square of x is x * x.",examples:["square(3)","sqrt(9)","3^2","3 * 3"],seealso:["multiply","pow","sqrt","cube"]},$K={name:"subtract",category:"Operators",syntax:["x - y","subtract(x, y)"],description:"subtract two values.",examples:["a = 5.3 - 2","a + 2","2/3 - 1/6","2 * 3 - 3","2.1 km - 500m"],seealso:["add"]},LK={name:"unaryMinus",category:"Operators",syntax:["-x","unaryMinus(x)"],description:"Inverse the sign of a value. Converts booleans and strings to numbers.",examples:["-4.5","-(-5.6)",'-"22"'],seealso:["add","subtract","unaryPlus"]},zK={name:"unaryPlus",category:"Operators",syntax:["+x","unaryPlus(x)"],description:"Converts booleans and strings to numbers.",examples:["+true",'+"2"'],seealso:["add","subtract","unaryMinus"]},qK={name:"xgcd",category:"Arithmetic",syntax:["xgcd(a, b)"],description:"Calculate the extended greatest common divisor for two values. The result is an array [d, x, y] with 3 entries, where d is the greatest common divisor, and d = x * a + y * b.",examples:["xgcd(8, 12)","gcd(8, 12)","xgcd(36163, 21199)"],seealso:["gcd","lcm"]},UK={name:"bitAnd",category:"Bitwise",syntax:["x & y","bitAnd(x, y)"],description:"Bitwise AND operation. Performs the logical AND operation on each pair of the corresponding bits of the two given values by multiplying them. If both bits in the compared position are 1, the bit in the resulting binary representation is 1, otherwise, the result is 0",examples:["5 & 3","bitAnd(53, 131)","[1, 12, 31] & 42"],seealso:["bitNot","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},HK={name:"bitNot",category:"Bitwise",syntax:["~x","bitNot(x)"],description:"Bitwise NOT operation. Performs a logical negation on each bit of the given value. Bits that are 0 become 1, and those that are 1 become 0.",examples:["~1","~2","bitNot([2, -3, 4])"],seealso:["bitAnd","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},VK={name:"bitOr",category:"Bitwise",syntax:["x | y","bitOr(x, y)"],description:"Bitwise OR operation. Performs the logical inclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if the first bit is 1 or the second bit is 1 or both bits are 1, otherwise, the result is 0.",examples:["5 | 3","bitOr([1, 2, 3], 4)"],seealso:["bitAnd","bitNot","bitXor","leftShift","rightArithShift","rightLogShift"]},WK={name:"bitXor",category:"Bitwise",syntax:["bitXor(x, y)"],description:"Bitwise XOR operation, exclusive OR. Performs the logical exclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if only the first bit is 1 or only the second bit is 1, but will be 0 if both are 0 or both are 1.",examples:["bitOr(1, 2)","bitXor([2, 3, 4], 4)"],seealso:["bitAnd","bitNot","bitOr","leftShift","rightArithShift","rightLogShift"]},jK={name:"leftShift",category:"Bitwise",syntax:["x << y","leftShift(x, y)"],description:"Bitwise left logical shift of a value x by y number of bits.",examples:["4 << 1","8 >> 1"],seealso:["bitAnd","bitNot","bitOr","bitXor","rightArithShift","rightLogShift"]},GK={name:"rightArithShift",category:"Bitwise",syntax:["x >> y","rightArithShift(x, y)"],description:"Bitwise right arithmetic shift of a value x by y number of bits.",examples:["8 >> 1","4 << 1","-12 >> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightLogShift"]},KK={name:"rightLogShift",category:"Bitwise",syntax:["x >>> y","rightLogShift(x, y)"],description:"Bitwise right logical shift of a value x by y number of bits.",examples:["8 >>> 1","4 << 1","-12 >>> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightArithShift"]},JK={name:"bellNumbers",category:"Combinatorics",syntax:["bellNumbers(n)"],description:"The Bell Numbers count the number of partitions of a set. A partition is a pairwise disjoint subset of S whose union is S. `bellNumbers` only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["bellNumbers(3)","bellNumbers(8)"],seealso:["stirlingS2"]},YK={name:"catalan",category:"Combinatorics",syntax:["catalan(n)"],description:"The Catalan Numbers enumerate combinatorial structures of many different types. catalan only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["catalan(3)","catalan(8)"],seealso:["bellNumbers"]},ZK={name:"composition",category:"Combinatorics",syntax:["composition(n, k)"],description:"The composition counts of n into k parts. composition only takes integer arguments. The following condition must be enforced: k <= n.",examples:["composition(5, 3)"],seealso:["combinations"]},XK={name:"stirlingS2",category:"Combinatorics",syntax:["stirlingS2(n, k)"],description:"he Stirling numbers of the second kind, counts the number of ways to partition a set of n labelled objects into k nonempty unlabelled subsets. `stirlingS2` only takes integer arguments. The following condition must be enforced: k <= n. If n = k or k = 1, then s(n,k) = 1.",examples:["stirlingS2(5, 3)"],seealso:["bellNumbers"]},QK={name:"arg",category:"Complex",syntax:["arg(x)"],description:"Compute the argument of a complex value. If x = a+bi, the argument is computed as atan2(b, a).",examples:["arg(2 + 2i)","atan2(3, 2)","arg(2 + 3i)"],seealso:["re","im","conj","abs"]},eJ={name:"conj",category:"Complex",syntax:["conj(x)"],description:"Compute the complex conjugate of a complex value. If x = a+bi, the complex conjugate is a-bi.",examples:["conj(2 + 3i)","conj(2 - 3i)","conj(-5.2i)"],seealso:["re","im","abs","arg"]},tJ={name:"im",category:"Complex",syntax:["im(x)"],description:"Get the imaginary part of a complex number.",examples:["im(2 + 3i)","re(2 + 3i)","im(-5.2i)","im(2.4)"],seealso:["re","conj","abs","arg"]},rJ={name:"re",category:"Complex",syntax:["re(x)"],description:"Get the real part of a complex number.",examples:["re(2 + 3i)","im(2 + 3i)","re(-5.2i)","re(2.4)"],seealso:["im","conj","abs","arg"]},nJ={name:"evaluate",category:"Expression",syntax:["evaluate(expression)","evaluate(expression, scope)","evaluate([expr1, expr2, expr3, ...])","evaluate([expr1, expr2, expr3, ...], scope)"],description:"Evaluate an expression or an array with expressions.",examples:['evaluate("2 + 3")','evaluate("sqrt(16)")','evaluate("2 inch to cm")','evaluate("sin(x * pi)", { "x": 1/2 })','evaluate(["width=2", "height=4","width*height"])'],seealso:["parser","parse","compile"]},iJ={name:"parser",category:"Expression",syntax:["parser()"],description:"Create a parser object that keeps a context of variables and their values, allowing the evaluation of expressions in that context.",examples:["myParser = parser()",'myParser.evaluate("sqrt(3^2 + 4^2)")','myParser.set("x", 3)','myParser.evaluate("y = x + 3")','myParser.evaluate(["y = x + 3", "y = y + 1"])','myParser.get("y")'],seealso:["evaluate","parse","compile"]},aJ={name:"parse",category:"Expression",syntax:["parse(expr)","parse(expr, options)","parse([expr1, expr2, expr3, ...])","parse([expr1, expr2, expr3, ...], options)"],description:"Parse an expression. Returns a node tree, which can be evaluated by invoking node.evaluate() or transformed into a functional object via node.compile().",examples:['node1 = parse("sqrt(3^2 + 4^2)")',"node1.evaluate()","code1 = node1.compile()","code1.evaluate()","scope = {a: 3, b: 4}",'node2 = parse("a * b")',"node2.evaluate(scope)","code2 = node2.compile()","code2.evaluate(scope)"],seealso:["parser","evaluate","compile"]},oJ={name:"compile",category:"Expression",syntax:["compile(expr) ","compile([expr1, expr2, expr3, ...])"],description:"Parse and compile an expression. Returns a an object with a function evaluate([scope]) to evaluate the compiled expression.",examples:['code1 = compile("sqrt(3^2 + 4^2)")',"code1.evaluate() ",'code2 = compile("a * b")',"code2.evaluate({a: 3, b: 4})"],seealso:["parser","parse","evaluate"]},sJ={name:"help",category:"Expression",syntax:["help(object)","help(string)"],description:"Display documentation on a function or data type.",examples:["help(sqrt)",'help("complex")'],seealso:[]},uJ={name:"distance",category:"Geometry",syntax:["distance([x1, y1], [x2, y2])","distance([[x1, y1], [x2, y2]])"],description:"Calculates the Euclidean distance between two points.",examples:["distance([0,0], [4,4])","distance([[0,0], [4,4]])"],seealso:[]},lJ={name:"intersect",category:"Geometry",syntax:["intersect(expr1, expr2, expr3, expr4)","intersect(expr1, expr2, expr3)"],description:"Computes the intersection point of lines and/or planes.",examples:["intersect([0, 0], [10, 10], [10, 0], [0, 10])","intersect([1, 0, 1],  [4, -2, 2], [1, 1, 1, 6])"],seealso:[]},cJ={name:"and",category:"Logical",syntax:["x and y","and(x, y)"],description:"Logical and. Test whether two values are both defined with a nonzero/nonempty value.",examples:["true and false","true and true","2 and 4"],seealso:["not","or","xor"]},fJ={name:"not",category:"Logical",syntax:["not x","not(x)"],description:"Logical not. Flips the boolean value of given argument.",examples:["not true","not false","not 2","not 0"],seealso:["and","or","xor"]},dJ={name:"or",category:"Logical",syntax:["x or y","or(x, y)"],description:"Logical or. Test if at least one value is defined with a nonzero/nonempty value.",examples:["true or false","false or false","0 or 4"],seealso:["not","and","xor"]},pJ={name:"xor",category:"Logical",syntax:["x xor y","xor(x, y)"],description:"Logical exclusive or, xor. Test whether one and only one value is defined with a nonzero/nonempty value.",examples:["true xor false","false xor false","true xor true","0 xor 4"],seealso:["not","and","or"]},hJ={name:"mapSlices",category:"Matrix",syntax:["mapSlices(A, dim, callback)"],description:"Generate a matrix one dimension less than A by applying callback to each slice of A along dimension dim.",examples:["A = [[1, 2], [3, 4]]","mapSlices(A, 1, sum)","mapSlices(A, 2, prod)"],seealso:["map","forEach"]},mJ={name:"column",category:"Matrix",syntax:["column(x, index)"],description:"Return a column from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","column(A, 1)","column(A, 2)"],seealso:["row","matrixFromColumns"]},gJ={name:"concat",category:"Matrix",syntax:["concat(A, B, C, ...)","concat(A, B, C, ..., dim)"],description:"Concatenate matrices. By default, the matrices are concatenated by the last dimension. The dimension on which to concatenate can be provided as last argument.",examples:["A = [1, 2; 5, 6]","B = [3, 4; 7, 8]","concat(A, B)","concat(A, B, 1)","concat(A, B, 2)"],seealso:["det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},vJ={name:"count",category:"Matrix",syntax:["count(x)"],description:"Count the number of elements of a matrix, array or string.",examples:["a = [1, 2; 3, 4; 5, 6]","count(a)","size(a)",'count("hello world")'],seealso:["size"]},yJ={name:"cross",category:"Matrix",syntax:["cross(A, B)"],description:"Calculate the cross product for two vectors in three dimensional space.",examples:["cross([1, 1, 0],  [0, 1, 1])","cross([3, -3, 1], [4, 9, 2])","cross([2, 3, 4],  [5, 6, 7])"],seealso:["multiply","dot"]},bJ={name:"ctranspose",category:"Matrix",syntax:["x'","ctranspose(x)"],description:"Complex Conjugate and Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","ctranspose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},xJ={name:"det",category:"Matrix",syntax:["det(x)"],description:"Calculate the determinant of a matrix",examples:["det([1, 2; 3, 4])","det([-2, 2, 3; -1, 1, 3; 2, 0, -1])"],seealso:["concat","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},wJ={name:"diag",category:"Matrix",syntax:["diag(x)","diag(x, k)"],description:"Create a diagonal matrix or retrieve the diagonal of a matrix. When x is a vector, a matrix with the vector values on the diagonal will be returned. When x is a matrix, a vector with the diagonal values of the matrix is returned. When k is provided, the k-th diagonal will be filled in or retrieved, if k is positive, the values are placed on the super diagonal. When k is negative, the values are placed on the sub diagonal.",examples:["diag(1:3)","diag(1:3, 1)","a = [1, 2, 3; 4, 5, 6; 7, 8, 9]","diag(a)"],seealso:["concat","det","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},NJ={name:"diff",category:"Matrix",syntax:["diff(arr)","diff(arr, dim)"],description:["Create a new matrix or array with the difference of the passed matrix or array.","Dim parameter is optional and used to indicate the dimension of the array/matrix to apply the difference","If no dimension parameter is passed it is assumed as dimension 0","Dimension is zero-based in javascript and one-based in the parser","Arrays must be 'rectangular' meaning arrays like [1, 2]","If something is passed as a matrix it will be returned as a matrix but other than that all matrices are converted to arrays"],examples:["A = [1, 2, 4, 7, 0]","diff(A)","diff(A, 1)","B = [[1, 2], [3, 4]]","diff(B)","diff(B, 1)","diff(B, 2)","diff(B, bignumber(2))","diff([[1, 2], matrix([3, 4])], 2)"],seealso:["subtract","partitionSelect"]},AJ={name:"dot",category:"Matrix",syntax:["dot(A, B)","A * B"],description:"Calculate the dot product of two vectors. The dot product of A = [a1, a2, a3, ..., an] and B = [b1, b2, b3, ..., bn] is defined as dot(A, B) = a1 * b1 + a2 * b2 + a3 * b3 + ... + an * bn",examples:["dot([2, 4, 1], [2, 2, 3])","[2, 4, 1] * [2, 2, 3]"],seealso:["multiply","cross"]},SJ={name:"eigs",category:"Matrix",syntax:["eigs(x)"],description:"Calculate the eigenvalues and optionally eigenvectors of a square matrix",examples:["eigs([[5, 2.3], [2.3, 1]])","eigs([[1, 2, 3], [4, 5, 6], [7, 8, 9]], { precision: 1e-6, eigenvectors: false })"],seealso:["inv"]},DJ={name:"filter",category:"Matrix",syntax:["filter(x, test)"],description:"Filter items in a matrix.",examples:["isPositive(x) = x > 0","filter([6, -2, -1, 4, 3], isPositive)","filter([6, -2, 0, 1, 0], x != 0)"],seealso:["sort","map","forEach"]},EJ={name:"flatten",category:"Matrix",syntax:["flatten(x)"],description:"Flatten a multi dimensional matrix into a single dimensional matrix.",examples:["a = [1, 2, 3; 4, 5, 6]","size(a)","b = flatten(a)","size(b)"],seealso:["concat","resize","size","squeeze"]},CJ={name:"forEach",category:"Matrix",syntax:["forEach(x, callback)"],description:"Iterates over all elements of a matrix/array, and executes the given callback function.",examples:["numberOfPets = {}","addPet(n) = numberOfPets[n] = (numberOfPets[n] ? numberOfPets[n]:0 ) + 1;",'forEach(["Dog","Cat","Cat"], addPet)',"numberOfPets"],seealso:["map","sort","filter"]},MJ={name:"getMatrixDataType",category:"Matrix",syntax:["getMatrixDataType(x)"],description:'Find the data type of all elements in a matrix or array, for example "number" if all items are a number and "Complex" if all values are complex numbers. If a matrix contains more than one data type, it will return "mixed".',examples:["getMatrixDataType([1, 2, 3])","getMatrixDataType([[5 cm], [2 inch]])",'getMatrixDataType([1, "text"])',"getMatrixDataType([1, bignumber(4)])"],seealso:["matrix","sparse","typeOf"]},TJ={name:"identity",category:"Matrix",syntax:["identity(n)","identity(m, n)","identity([m, n])"],description:"Returns the identity matrix with size m-by-n. The matrix has ones on the diagonal and zeros elsewhere.",examples:["identity(3)","identity(3, 5)","a = [1, 2, 3; 4, 5, 6]","identity(size(a))"],seealso:["concat","det","diag","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},_J={name:"inv",category:"Matrix",syntax:["inv(x)"],description:"Calculate the inverse of a matrix",examples:["inv([1, 2; 3, 4])","inv(4)","1 / 4"],seealso:["concat","det","diag","identity","ones","range","size","squeeze","subset","trace","transpose","zeros"]},OJ={name:"pinv",category:"Matrix",syntax:["pinv(x)"],description:"Calculate the MoorePenrose inverse of a matrix",examples:["pinv([1, 2; 3, 4])","pinv([[1, 0], [0, 1], [0, 1]])","pinv(4)"],seealso:["inv"]},FJ={name:"kron",category:"Matrix",syntax:["kron(x, y)"],description:"Calculates the Kronecker product of 2 matrices or vectors.",examples:["kron([[1, 0], [0, 1]], [[1, 2], [3, 4]])","kron([1,1], [2,3,4])"],seealso:["multiply","dot","cross"]},BJ={name:"map",category:"Matrix",syntax:["map(x, callback)","map(x, y, ..., callback)"],description:"Create a new matrix or array with the results of the callback function executed on each entry of the matrix/array or the matrices/arrays.",examples:["map([1, 2, 3], square)","map([1, 2], [3, 4], f(a,b) = a + b)"],seealso:["filter","forEach"]},kJ={name:"matrixFromColumns",category:"Matrix",syntax:["matrixFromColumns(...arr)","matrixFromColumns(row1, row2)","matrixFromColumns(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual columns.",examples:["matrixFromColumns([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromRows","matrixFromFunction","zeros"]},IJ={name:"matrixFromFunction",category:"Matrix",syntax:["matrixFromFunction(size, fn)","matrixFromFunction(size, fn, format)","matrixFromFunction(size, fn, format, datatype)","matrixFromFunction(size, format, fn)","matrixFromFunction(size, format, datatype, fn)"],description:"Create a matrix by evaluating a generating function at each index.",examples:["f(I) = I[1] - I[2]","matrixFromFunction([3,3], f)","g(I) = I[1] - I[2] == 1 ? 4 : 0",'matrixFromFunction([100, 100], "sparse", g)',"matrixFromFunction([5], random)"],seealso:["matrix","matrixFromRows","matrixFromColumns","zeros"]},RJ={name:"matrixFromRows",category:"Matrix",syntax:["matrixFromRows(...arr)","matrixFromRows(row1, row2)","matrixFromRows(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual rows.",examples:["matrixFromRows([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromColumns","matrixFromFunction","zeros"]},PJ={name:"ones",category:"Matrix",syntax:["ones(m)","ones(m, n)","ones(m, n, p, ...)","ones([m])","ones([m, n])","ones([m, n, p, ...])"],description:"Create a matrix containing ones.",examples:["ones(3)","ones(3, 5)","ones([2,3]) * 4.5","a = [1, 2, 3; 4, 5, 6]","ones(size(a))"],seealso:["concat","det","diag","identity","inv","range","size","squeeze","subset","trace","transpose","zeros"]},$J={name:"partitionSelect",category:"Matrix",syntax:["partitionSelect(x, k)","partitionSelect(x, k, compare)"],description:"Partition-based selection of an array or 1D matrix. Will find the kth smallest value, and mutates the input array. Uses Quickselect.",examples:["partitionSelect([5, 10, 1], 2)",'partitionSelect(["C", "B", "A", "D"], 1, compareText)',"arr = [5, 2, 1]","partitionSelect(arr, 0) # returns 1, arr is now: [1, 2, 5]","arr","partitionSelect(arr, 1, 'desc') # returns 2, arr is now: [5, 2, 1]","arr"],seealso:["sort"]},LJ={name:"range",category:"Type",syntax:["start:end","start:step:end","range(start, end)","range(start, end, step)","range(string)"],description:"Create a range. Lower bound of the range is included, upper bound is excluded.",examples:["1:5","3:-1:-3","range(3, 7)","range(0, 12, 2)",'range("4:10")',"range(1m, 1m, 3m)","a = [1, 2, 3, 4; 5, 6, 7, 8]","a[1:2, 1:2]"],seealso:["concat","det","diag","identity","inv","ones","size","squeeze","subset","trace","transpose","zeros"]},zJ={name:"reshape",category:"Matrix",syntax:["reshape(x, sizes)"],description:"Reshape a multi dimensional array to fit the specified dimensions.",examples:["reshape([1, 2, 3, 4, 5, 6], [2, 3])","reshape([[1, 2], [3, 4]], [1, 4])","reshape([[1, 2], [3, 4]], [4])","reshape([1, 2, 3, 4], [-1, 2])"],seealso:["size","squeeze","resize"]},qJ={name:"resize",category:"Matrix",syntax:["resize(x, size)","resize(x, size, defaultValue)"],description:"Resize a matrix.",examples:["resize([1,2,3,4,5], [3])","resize([1,2,3], [5])","resize([1,2,3], [5], -1)","resize(2, [2, 3])",'resize("hello", [8], "!")'],seealso:["size","subset","squeeze","reshape"]},UJ={name:"rotate",category:"Matrix",syntax:["rotate(w, theta)","rotate(w, theta, v)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotate([1, 0], pi / 2)",'rotate(matrix([1, 0]), unit("35deg"))','rotate([1, 0, 0], unit("90deg"), [0, 0, 1])','rotate(matrix([1, 0, 0]), unit("90deg"), matrix([0, 0, 1]))'],seealso:["matrix","rotationMatrix"]},HJ={name:"rotationMatrix",category:"Matrix",syntax:["rotationMatrix(theta)","rotationMatrix(theta, v)","rotationMatrix(theta, v, format)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotationMatrix(pi / 2)",'rotationMatrix(unit("45deg"), [0, 0, 1])','rotationMatrix(1, matrix([0, 0, 1]), "sparse")'],seealso:["cos","sin"]},VJ={name:"row",category:"Matrix",syntax:["row(x, index)"],description:"Return a row from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","row(A, 1)","row(A, 2)"],seealso:["column","matrixFromRows"]},WJ={name:"size",category:"Matrix",syntax:["size(x)"],description:"Calculate the size of a matrix.",examples:["size(2.3)",'size("hello world")',"a = [1, 2; 3, 4; 5, 6]","size(a)","size(1:6)"],seealso:["concat","count","det","diag","identity","inv","ones","range","squeeze","subset","trace","transpose","zeros"]},jJ={name:"sort",category:"Matrix",syntax:["sort(x)","sort(x, compare)"],description:'Sort the items in a matrix. Compare can be a string "asc", "desc", "natural", or a custom sort function.',examples:["sort([5, 10, 1])",'sort(["C", "B", "A", "D"], "natural")',"sortByLength(a, b) = size(a)[1] - size(b)[1]",'sort(["Langdon", "Tom", "Sara"], sortByLength)','sort(["10", "1", "2"], "natural")'],seealso:["map","filter","forEach"]},GJ={name:"squeeze",category:"Matrix",syntax:["squeeze(x)"],description:"Remove inner and outer singleton dimensions from a matrix.",examples:["a = zeros(3,2,1)","size(squeeze(a))","b = zeros(1,1,3)","size(squeeze(b))"],seealso:["concat","det","diag","identity","inv","ones","range","size","subset","trace","transpose","zeros"]},KJ={name:"subset",category:"Matrix",syntax:["value(index)","value(index) = replacement","subset(value, [index])","subset(value, [index], replacement)"],description:"Get or set a subset of the entries of a matrix or characters of a string. Indexes are one-based. There should be one index specification for each dimension of the target. Each specification can be a single index, a list of indices, or a range in colon notation `l:u`. In a range, both the lower bound l and upper bound u are included; and if a bound is omitted it defaults to the most extreme valid value. The cartesian product of the indices specified in each dimension determines the target of the operation.",examples:["d = [1, 2; 3, 4]","e = []","e[1, 1:2] = [5, 6]","e[2, :] = [7, 8]","f = d * e","f[2, 1]","f[:, 1]","f[[1,2], [1,3]] = [9, 10; 11, 12]","f"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","trace","transpose","zeros"]},JJ={name:"trace",category:"Matrix",syntax:["trace(A)"],description:"Calculate the trace of a matrix: the sum of the elements on the main diagonal of a square matrix.",examples:["A = [1, 2, 3; -1, 2, 3; 2, 0, 3]","trace(A)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","transpose","zeros"]},YJ={name:"transpose",category:"Matrix",syntax:["x'","transpose(x)"],description:"Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","transpose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},ZJ={name:"zeros",category:"Matrix",syntax:["zeros(m)","zeros(m, n)","zeros(m, n, p, ...)","zeros([m])","zeros([m, n])","zeros([m, n, p, ...])"],description:"Create a matrix containing zeros.",examples:["zeros(3)","zeros(3, 5)","a = [1, 2, 3; 4, 5, 6]","zeros(size(a))"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose"]},XJ={name:"fft",category:"Matrix",syntax:["fft(x)"],description:"Calculate N-dimensional Fourier transform",examples:["fft([[1, 0], [1, 0]])"],seealso:["ifft"]},QJ={name:"ifft",category:"Matrix",syntax:["ifft(x)"],description:"Calculate N-dimensional inverse Fourier transform",examples:["ifft([[2, 2], [0, 0]])"],seealso:["fft"]},eY={name:"combinations",category:"Probability",syntax:["combinations(n, k)"],description:"Compute the number of combinations of n items taken k at a time",examples:["combinations(7, 5)"],seealso:["combinationsWithRep","permutations","factorial"]},tY={name:"combinationsWithRep",category:"Probability",syntax:["combinationsWithRep(n, k)"],description:"Compute the number of combinations of n items taken k at a time with replacements.",examples:["combinationsWithRep(7, 5)"],seealso:["combinations","permutations","factorial"]},rY={name:"factorial",category:"Probability",syntax:["n!","factorial(n)"],description:"Compute the factorial of a value",examples:["5!","5 * 4 * 3 * 2 * 1","3!"],seealso:["combinations","combinationsWithRep","permutations","gamma"]},nY={name:"gamma",category:"Probability",syntax:["gamma(n)"],description:"Compute the gamma function. For small values, the Lanczos approximation is used, and for large values the extended Stirling approximation.",examples:["gamma(4)","3!","gamma(1/2)","sqrt(pi)"],seealso:["factorial"]},iY={name:"lgamma",category:"Probability",syntax:["lgamma(n)"],description:"Logarithm of the gamma function for real, positive numbers and complex numbers, using Lanczos approximation for numbers and Stirling series for complex numbers.",examples:["lgamma(4)","lgamma(1/2)","lgamma(i)","lgamma(complex(1.1, 2))"],seealso:["gamma"]},aY={name:"kldivergence",category:"Probability",syntax:["kldivergence(x, y)"],description:"Calculate the Kullback-Leibler (KL) divergence  between two distributions.",examples:["kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])"],seealso:[]},oY={name:"multinomial",category:"Probability",syntax:["multinomial(A)"],description:"Multinomial Coefficients compute the number of ways of picking a1, a2, ..., ai unordered outcomes from `n` possibilities. multinomial takes one array of integers as an argument. The following condition must be enforced: every ai > 0.",examples:["multinomial([1, 2, 1])"],seealso:["combinations","factorial"]},sY={name:"permutations",category:"Probability",syntax:["permutations(n)","permutations(n, k)"],description:"Compute the number of permutations of n items taken k at a time",examples:["permutations(5)","permutations(5, 3)"],seealso:["combinations","combinationsWithRep","factorial"]},uY={name:"pickRandom",category:"Probability",syntax:["pickRandom(array)","pickRandom(array, number)","pickRandom(array, weights)","pickRandom(array, number, weights)","pickRandom(array, weights, number)"],description:"Pick a random entry from a given array.",examples:["pickRandom(0:10)","pickRandom([1, 3, 1, 6])","pickRandom([1, 3, 1, 6], 2)","pickRandom([1, 3, 1, 6], [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], 2, [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], [2, 3, 2, 1], 2)"],seealso:["random","randomInt"]},lY={name:"random",category:"Probability",syntax:["random()","random(max)","random(min, max)","random(size)","random(size, max)","random(size, min, max)"],description:"Return a random number.",examples:["random()","random(10, 20)","random([2, 3])"],seealso:["pickRandom","randomInt"]},cY={name:"randomInt",category:"Probability",syntax:["randomInt(max)","randomInt(min, max)","randomInt(size)","randomInt(size, max)","randomInt(size, min, max)"],description:"Return a random integer number",examples:["randomInt(10, 20)","randomInt([2, 3], 10)"],seealso:["pickRandom","random"]},fY={name:"compare",category:"Relational",syntax:["compare(x, y)"],description:"Compare two values. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compare(2, 3)","compare(3, 2)","compare(2, 2)","compare(5cm, 40mm)","compare(2, [1, 2, 3])"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compareNatural","compareText"]},dY={name:"compareNatural",category:"Relational",syntax:["compareNatural(x, y)"],description:"Compare two values of any type in a deterministic, natural way. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compareNatural(2, 3)","compareNatural(3, 2)","compareNatural(2, 2)","compareNatural(5cm, 40mm)",'compareNatural("2", "10")',"compareNatural(2 + 3i, 2 + 4i)","compareNatural([1, 2, 4], [1, 2, 3])","compareNatural([1, 5], [1, 2, 3])","compareNatural([1, 2], [1, 2])","compareNatural({a: 2}, {a: 4})"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare","compareText"]},pY={name:"compareText",category:"Relational",syntax:["compareText(x, y)"],description:"Compare two strings lexically. Comparison is case sensitive. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:['compareText("B", "A")','compareText("A", "B")','compareText("A", "A")','compareText("2", "10")','compare("2", "10")',"compare(2, 10)",'compareNatural("2", "10")','compareText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural"]},hY={name:"deepEqual",category:"Relational",syntax:["deepEqual(x, y)"],description:"Check equality of two matrices element wise. Returns true if the size of both matrices is equal and when and each of the elements are equal.",examples:["deepEqual([1,3,4], [1,3,4])","deepEqual([1,3,4], [1,3])"],seealso:["equal","unequal","smaller","larger","smallerEq","largerEq","compare"]},mY={name:"equal",category:"Relational",syntax:["x == y","equal(x, y)"],description:"Check equality of two values. Returns true if the values are equal, and false if not.",examples:["2+2 == 3","2+2 == 4","a = 3.2","b = 6-2.8","a == b","50cm == 0.5m"],seealso:["unequal","smaller","larger","smallerEq","largerEq","compare","deepEqual","equalText"]},gY={name:"equalText",category:"Relational",syntax:["equalText(x, y)"],description:"Check equality of two strings. Comparison is case sensitive. Returns true if the values are equal, and false if not.",examples:['equalText("Hello", "Hello")','equalText("a", "A")','equal("2e3", "2000")','equalText("2e3", "2000")','equalText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural","compareText","equal"]},vY={name:"larger",category:"Relational",syntax:["x > y","larger(x, y)"],description:"Check if value x is larger than y. Returns true if x is larger than y, and false if not. Comparing a value with NaN returns false.",examples:["2 > 3","5 > 2*2","a = 3.3","b = 6-2.8","(a > b)","(b < a)","5 cm > 2 inch"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare"]},yY={name:"largerEq",category:"Relational",syntax:["x >= y","largerEq(x, y)"],description:"Check if value x is larger or equal to y. Returns true if x is larger or equal to y, and false if not.",examples:["2 >= 1+1","2 > 1+1","a = 3.2","b = 6-2.8","(a >= b)"],seealso:["equal","unequal","smallerEq","smaller","compare"]},bY={name:"smaller",category:"Relational",syntax:["x < y","smaller(x, y)"],description:"Check if value x is smaller than value y. Returns true if x is smaller than y, and false if not. Comparing a value with NaN returns false.",examples:["2 < 3","5 < 2*2","a = 3.3","b = 6-2.8","(a < b)","5 cm < 2 inch"],seealso:["equal","unequal","larger","smallerEq","largerEq","compare"]},xY={name:"smallerEq",category:"Relational",syntax:["x <= y","smallerEq(x, y)"],description:"Check if value x is smaller or equal to value y. Returns true if x is smaller than y, and false if not.",examples:["2 <= 1+1","2 < 1+1","a = 3.2","b = 6-2.8","(a <= b)"],seealso:["equal","unequal","larger","smaller","largerEq","compare"]},wY={name:"unequal",category:"Relational",syntax:["x != y","unequal(x, y)"],description:"Check unequality of two values. Returns true if the values are unequal, and false if they are equal.",examples:["2+2 != 3","2+2 != 4","a = 3.2","b = 6-2.8","a != b","50cm != 0.5m","5 cm != 2 inch"],seealso:["equal","smaller","larger","smallerEq","largerEq","compare","deepEqual"]},NY={name:"setCartesian",category:"Set",syntax:["setCartesian(set1, set2)"],description:"Create the cartesian product of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays and the values will be sorted in ascending order before the operation.",examples:["setCartesian([1, 2], [3, 4])"],seealso:["setUnion","setIntersect","setDifference","setPowerset"]},AY={name:"setDifference",category:"Set",syntax:["setDifference(set1, set2)"],description:"Create the difference of two (multi)sets: every element of set1, that is not the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setDifference([1, 2, 3, 4], [3, 4, 5, 6])","setDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setSymDifference"]},SY={name:"setDistinct",category:"Set",syntax:["setDistinct(set)"],description:"Collect the distinct elements of a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setDistinct([1, 1, 1, 2, 2, 3])"],seealso:["setMultiplicity"]},DY={name:"setIntersect",category:"Set",syntax:["setIntersect(set1, set2)"],description:"Create the intersection of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIntersect([1, 2, 3, 4], [3, 4, 5, 6])","setIntersect([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setDifference"]},EY={name:"setIsSubset",category:"Set",syntax:["setIsSubset(set1, set2)"],description:"Check whether a (multi)set is a subset of another (multi)set: every element of set1 is the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIsSubset([1, 2], [3, 4, 5, 6])","setIsSubset([3, 4], [3, 4, 5, 6])"],seealso:["setUnion","setIntersect","setDifference"]},CY={name:"setMultiplicity",category:"Set",syntax:["setMultiplicity(element, set)"],description:"Count the multiplicity of an element in a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setMultiplicity(1, [1, 2, 2, 4])","setMultiplicity(2, [1, 2, 2, 4])"],seealso:["setDistinct","setSize"]},MY={name:"setPowerset",category:"Set",syntax:["setPowerset(set)"],description:"Create the powerset of a (multi)set: the powerset contains very possible subsets of a (multi)set. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setPowerset([1, 2, 3])"],seealso:["setCartesian"]},TY={name:"setSize",category:"Set",syntax:["setSize(set)","setSize(set, unique)"],description:'Count the number of elements of a (multi)set. When the second parameter "unique" is true, count only the unique values. A multi-dimension array will be converted to a single-dimension array before the operation.',examples:["setSize([1, 2, 2, 4])","setSize([1, 2, 2, 4], true)"],seealso:["setUnion","setIntersect","setDifference"]},_Y={name:"setSymDifference",category:"Set",syntax:["setSymDifference(set1, set2)"],description:"Create the symmetric difference of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setSymDifference([1, 2, 3, 4], [3, 4, 5, 6])","setSymDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setDifference"]},OY={name:"setUnion",category:"Set",syntax:["setUnion(set1, set2)"],description:"Create the union of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setUnion([1, 2, 3, 4], [3, 4, 5, 6])","setUnion([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setIntersect","setDifference"]},FY={name:"zpk2tf",category:"Signal",syntax:["zpk2tf(z, p, k)"],description:"Compute the transfer function of a zero-pole-gain model.",examples:["zpk2tf([1, 2], [-1, -2], 1)","zpk2tf([1, 2], [-1, -2])","zpk2tf([1 - 3i, 2 + 2i], [-1, -2])"],seealso:[]},BY={name:"freqz",category:"Signal",syntax:["freqz(b, a)","freqz(b, a, w)"],description:"Calculates the frequency response of a filter given its numerator and denominator coefficients.",examples:["freqz([1, 2], [1, 2, 3])","freqz([1, 2], [1, 2, 3], [0, 1])","freqz([1, 2], [1, 2, 3], 512)"],seealso:[]},kY={name:"erf",category:"Special",syntax:["erf(x)"],description:"Compute the erf function of a value using a rational Chebyshev approximations for different intervals of x",examples:["erf(0.2)","erf(-0.5)","erf(4)"],seealso:[]},IY={name:"zeta",category:"Special",syntax:["zeta(s)"],description:"Compute the Riemann Zeta Function using an infinite series and Riemann's Functional Equation for the entire complex plane",examples:["zeta(0.2)","zeta(-0.5)","zeta(4)"],seealso:[]},RY={name:"mad",category:"Statistics",syntax:["mad(a, b, c, ...)","mad(A)"],description:"Compute the median absolute deviation of a matrix or a list with values. The median absolute deviation is defined as the median of the absolute deviations from the median.",examples:["mad(10, 20, 30)","mad([1, 2, 3])"],seealso:["mean","median","std","abs"]},PY={name:"max",category:"Statistics",syntax:["max(a, b, c, ...)","max(A)","max(A, dimension)"],description:"Compute the maximum value of a list of values. If any NaN values are found, the function yields the last NaN in the input.",examples:["max(2, 3, 4, 1)","max([2, 3, 4, 1])","max([2, 5; 4, 3])","max([2, 5; 4, 3], 1)","max([2, 5; 4, 3], 2)","max(2.7, 7.1, -4.5, 2.0, 4.1)","min(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["mean","median","min","prod","std","sum","variance"]},$Y={name:"mean",category:"Statistics",syntax:["mean(a, b, c, ...)","mean(A)","mean(A, dimension)"],description:"Compute the arithmetic mean of a list of values.",examples:["mean(2, 3, 4, 1)","mean([2, 3, 4, 1])","mean([2, 5; 4, 3])","mean([2, 5; 4, 3], 1)","mean([2, 5; 4, 3], 2)","mean([1.0, 2.7, 3.2, 4.0])"],seealso:["max","median","min","prod","std","sum","variance"]},LY={name:"median",category:"Statistics",syntax:["median(a, b, c, ...)","median(A)"],description:"Compute the median of all values. The values are sorted and the middle value is returned. In case of an even number of values, the average of the two middle values is returned.",examples:["median(5, 2, 7)","median([3, -1, 5, 7])"],seealso:["max","mean","min","prod","std","sum","variance","quantileSeq"]},zY={name:"min",category:"Statistics",syntax:["min(a, b, c, ...)","min(A)","min(A, dimension)"],description:"Compute the minimum value of a list of values. If any NaN values are found, the function yields the last NaN in the input.",examples:["min(2, 3, 4, 1)","min([2, 3, 4, 1])","min([2, 5; 4, 3])","min([2, 5; 4, 3], 1)","min([2, 5; 4, 3], 2)","min(2.7, 7.1, -4.5, 2.0, 4.1)","max(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["max","mean","median","prod","std","sum","variance"]},qY={name:"mode",category:"Statistics",syntax:["mode(a, b, c, ...)","mode(A)","mode(A, a, b, B, c, ...)"],description:"Computes the mode of all values as an array. In case mode being more than one, multiple values are returned in an array.",examples:["mode(2, 1, 4, 3, 1)","mode([1, 2.7, 3.2, 4, 2.7])","mode(1, 4, 6, 1, 6)"],seealso:["max","mean","min","median","prod","std","sum","variance"]},UY={name:"prod",category:"Statistics",syntax:["prod(a, b, c, ...)","prod(A)"],description:"Compute the product of all values.",examples:["prod(2, 3, 4)","prod([2, 3, 4])","prod([2, 5; 4, 3])"],seealso:["max","mean","min","median","min","std","sum","variance"]},HY={name:"quantileSeq",category:"Statistics",syntax:["quantileSeq(A, prob[, sorted])","quantileSeq(A, [prob1, prob2, ...][, sorted])","quantileSeq(A, N[, sorted])"],description:`Compute the prob order quantile of a matrix or a list with values. The sequence is sorted and the middle value is returned. Supported types of sequence values are: Number, BigNumber, Unit Supported types of probability are: Number, BigNumber. 

In case of a (multi dimensional) array or matrix, the prob order quantile of all elements will be calculated.`,examples:["quantileSeq([3, -1, 5, 7], 0.5)","quantileSeq([3, -1, 5, 7], [1/3, 2/3])","quantileSeq([3, -1, 5, 7], 2)","quantileSeq([-1, 3, 5, 7], 0.5, true)"],seealso:["mean","median","min","max","prod","std","sum","variance"]},VY={name:"std",category:"Statistics",syntax:["std(a, b, c, ...)","std(A)","std(A, dimension)","std(A, normalization)","std(A, dimension, normalization)"],description:'Compute the standard deviation of all values, defined as std(A) = sqrt(variance(A)). Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["std(2, 4, 6)","std([2, 4, 6, 8])",'std([2, 4, 6, 8], "uncorrected")','std([2, 4, 6, 8], "biased")',"std([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","prod","sum","variance"]},WY={name:"cumsum",category:"Statistics",syntax:["cumsum(a, b, c, ...)","cumsum(A)"],description:"Compute the cumulative sum of all values.",examples:["cumsum(2, 3, 4, 1)","cumsum([2, 3, 4, 1])","cumsum([1, 2; 3, 4])","cumsum([1, 2; 3, 4], 1)","cumsum([1, 2; 3, 4], 2)"],seealso:["max","mean","median","min","prod","std","sum","variance"]},jY={name:"sum",category:"Statistics",syntax:["sum(a, b, c, ...)","sum(A)","sum(A, dimension)"],description:"Compute the sum of all values.",examples:["sum(2, 3, 4, 1)","sum([2, 3, 4, 1])","sum([2, 5; 4, 3])"],seealso:["max","mean","median","min","prod","std","variance"]},GY={name:"variance",category:"Statistics",syntax:["variance(a, b, c, ...)","variance(A)","variance(A, dimension)","variance(A, normalization)","variance(A, dimension, normalization)"],description:'Compute the variance of all values. Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["variance(2, 4, 6)","variance([2, 4, 6, 8])",'variance([2, 4, 6, 8], "uncorrected")','variance([2, 4, 6, 8], "biased")',"variance([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","std","sum"]},KY={name:"corr",category:"Statistics",syntax:["corr(A,B)"],description:"Compute the correlation coefficient of a two list with values, For matrices, the matrix correlation coefficient is calculated.",examples:["corr([2, 4, 6, 8],[1, 2, 3, 6])","corr(matrix([[1, 2.2, 3, 4.8, 5], [1, 2, 3, 4, 5]]), matrix([[4, 5.3, 6.6, 7, 8], [1, 2, 3, 4, 5]]))"],seealso:["max","mean","min","median","min","prod","std","sum"]},JY={name:"acos",category:"Trigonometry",syntax:["acos(x)"],description:"Compute the inverse cosine of a value in radians.",examples:["acos(0.5)","acos(cos(2.3))"],seealso:["cos","atan","asin"]},YY={name:"acosh",category:"Trigonometry",syntax:["acosh(x)"],description:"Calculate the hyperbolic arccos of a value, defined as `acosh(x) = ln(sqrt(x^2 - 1) + x)`.",examples:["acosh(1.5)"],seealso:["cosh","asinh","atanh"]},ZY={name:"acot",category:"Trigonometry",syntax:["acot(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acot(0.5)","acot(cot(0.5))","acot(2)"],seealso:["cot","atan"]},XY={name:"acoth",category:"Trigonometry",syntax:["acoth(x)"],description:"Calculate the inverse hyperbolic tangent of a value, defined as `acoth(x) = (ln((x+1)/x) + ln(x/(x-1))) / 2`.",examples:["acoth(2)","acoth(0.5)"],seealso:["acsch","asech"]},QY={name:"acsc",category:"Trigonometry",syntax:["acsc(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acsc(2)","acsc(csc(0.5))","acsc(0.5)"],seealso:["csc","asin","asec"]},eZ={name:"acsch",category:"Trigonometry",syntax:["acsch(x)"],description:"Calculate the inverse hyperbolic cosecant of a value, defined as `acsch(x) = ln(1/x + sqrt(1/x^2 + 1))`.",examples:["acsch(0.5)"],seealso:["asech","acoth"]},tZ={name:"asec",category:"Trigonometry",syntax:["asec(x)"],description:"Calculate the inverse secant of a value.",examples:["asec(0.5)","asec(sec(0.5))","asec(2)"],seealso:["acos","acot","acsc"]},rZ={name:"asech",category:"Trigonometry",syntax:["asech(x)"],description:"Calculate the inverse secant of a value.",examples:["asech(0.5)"],seealso:["acsch","acoth"]},nZ={name:"asin",category:"Trigonometry",syntax:["asin(x)"],description:"Compute the inverse sine of a value in radians.",examples:["asin(0.5)","asin(sin(0.5))"],seealso:["sin","acos","atan"]},iZ={name:"asinh",category:"Trigonometry",syntax:["asinh(x)"],description:"Calculate the hyperbolic arcsine of a value, defined as `asinh(x) = ln(x + sqrt(x^2 + 1))`.",examples:["asinh(0.5)"],seealso:["acosh","atanh"]},aZ={name:"atan",category:"Trigonometry",syntax:["atan(x)"],description:"Compute the inverse tangent of a value in radians.",examples:["atan(0.5)","atan(tan(0.5))"],seealso:["tan","acos","asin"]},oZ={name:"atan2",category:"Trigonometry",syntax:["atan2(y, x)"],description:"Computes the principal value of the arc tangent of y/x in radians.",examples:["atan2(2, 2) / pi","angle = 60 deg in rad","x = cos(angle)","y = sin(angle)","atan2(y, x)"],seealso:["sin","cos","tan"]},sZ={name:"atanh",category:"Trigonometry",syntax:["atanh(x)"],description:"Calculate the hyperbolic arctangent of a value, defined as `atanh(x) = ln((1 + x)/(1 - x)) / 2`.",examples:["atanh(0.5)"],seealso:["acosh","asinh"]},uZ={name:"cos",category:"Trigonometry",syntax:["cos(x)"],description:"Compute the cosine of x in radians.",examples:["cos(2)","cos(pi / 4) ^ 2","cos(180 deg)","cos(60 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["acos","sin","tan"]},lZ={name:"cosh",category:"Trigonometry",syntax:["cosh(x)"],description:"Compute the hyperbolic cosine of x in radians.",examples:["cosh(0.5)"],seealso:["sinh","tanh","coth"]},cZ={name:"cot",category:"Trigonometry",syntax:["cot(x)"],description:"Compute the cotangent of x in radians. Defined as 1/tan(x)",examples:["cot(2)","1 / tan(2)"],seealso:["sec","csc","tan"]},fZ={name:"coth",category:"Trigonometry",syntax:["coth(x)"],description:"Compute the hyperbolic cotangent of x in radians.",examples:["coth(2)","1 / tanh(2)"],seealso:["sech","csch","tanh"]},dZ={name:"csc",category:"Trigonometry",syntax:["csc(x)"],description:"Compute the cosecant of x in radians. Defined as 1/sin(x)",examples:["csc(2)","1 / sin(2)"],seealso:["sec","cot","sin"]},pZ={name:"csch",category:"Trigonometry",syntax:["csch(x)"],description:"Compute the hyperbolic cosecant of x in radians. Defined as 1/sinh(x)",examples:["csch(2)","1 / sinh(2)"],seealso:["sech","coth","sinh"]},hZ={name:"sec",category:"Trigonometry",syntax:["sec(x)"],description:"Compute the secant of x in radians. Defined as 1/cos(x)",examples:["sec(2)","1 / cos(2)"],seealso:["cot","csc","cos"]},mZ={name:"sech",category:"Trigonometry",syntax:["sech(x)"],description:"Compute the hyperbolic secant of x in radians. Defined as 1/cosh(x)",examples:["sech(2)","1 / cosh(2)"],seealso:["coth","csch","cosh"]},gZ={name:"sin",category:"Trigonometry",syntax:["sin(x)"],description:"Compute the sine of x in radians.",examples:["sin(2)","sin(pi / 4) ^ 2","sin(90 deg)","sin(30 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["asin","cos","tan"]},vZ={name:"sinh",category:"Trigonometry",syntax:["sinh(x)"],description:"Compute the hyperbolic sine of x in radians.",examples:["sinh(0.5)"],seealso:["cosh","tanh"]},yZ={name:"tan",category:"Trigonometry",syntax:["tan(x)"],description:"Compute the tangent of x in radians.",examples:["tan(0.5)","sin(0.5) / cos(0.5)","tan(pi / 4)","tan(45 deg)"],seealso:["atan","sin","cos"]},bZ={name:"tanh",category:"Trigonometry",syntax:["tanh(x)"],description:"Compute the hyperbolic tangent of x in radians.",examples:["tanh(0.5)","sinh(0.5) / cosh(0.5)"],seealso:["sinh","cosh"]},xZ={name:"to",category:"Units",syntax:["x to unit","to(x, unit)"],description:"Change the unit of a value.",examples:["5 inch to cm","3.2kg to g","16 bytes in bits"],seealso:[]},wZ={name:"bin",category:"Utils",syntax:["bin(value)"],description:"Format a number as binary",examples:["bin(2)"],seealso:["oct","hex"]},NZ={name:"clone",category:"Utils",syntax:["clone(x)"],description:"Clone a variable. Creates a copy of primitive variables, and a deep copy of matrices",examples:["clone(3.5)","clone(2 - 4i)","clone(45 deg)","clone([1, 2; 3, 4])",'clone("hello world")'],seealso:[]},AZ={name:"format",category:"Utils",syntax:["format(value)","format(value, precision)"],description:"Format a value of any type as string.",examples:["format(2.3)","format(3 - 4i)","format([])","format(pi, 3)"],seealso:["print"]},SZ={name:"hasNumericValue",category:"Utils",syntax:["hasNumericValue(x)"],description:"Test whether a value is an numeric value. In case of a string, true is returned if the string contains a numeric value.",examples:["hasNumericValue(2)",'hasNumericValue("2")','isNumeric("2")',"hasNumericValue(0)","hasNumericValue(bignumber(500))","hasNumericValue(fraction(0.125))","hasNumericValue(2 + 3i)",'hasNumericValue([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","isNumeric"]},DZ={name:"hex",category:"Utils",syntax:["hex(value)"],description:"Format a number as hexadecimal",examples:["hex(240)"],seealso:["bin","oct"]},EZ={name:"isInteger",category:"Utils",syntax:["isInteger(x)"],description:"Test whether a value is an integer number.",examples:["isInteger(2)","isInteger(3.5)","isInteger([3, 0.5, -2])"],seealso:["isNegative","isNumeric","isPositive","isZero"]},CZ={name:"isNaN",category:"Utils",syntax:["isNaN(x)"],description:"Test whether a value is NaN (not a number)",examples:["isNaN(2)","isNaN(0 / 0)","isNaN(NaN)","isNaN(Infinity)"],seealso:["isNegative","isNumeric","isPositive","isZero"]},MZ={name:"isNegative",category:"Utils",syntax:["isNegative(x)"],description:"Test whether a value is negative: smaller than zero.",examples:["isNegative(2)","isNegative(0)","isNegative(-4)","isNegative([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isPositive","isZero"]},TZ={name:"isNumeric",category:"Utils",syntax:["isNumeric(x)"],description:"Test whether a value is a numeric value. Returns true when the input is a number, BigNumber, Fraction, or boolean.",examples:["isNumeric(2)",'isNumeric("2")','hasNumericValue("2")',"isNumeric(0)","isNumeric(bignumber(500))","isNumeric(fraction(0.125))","isNumeric(2 + 3i)",'isNumeric([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","hasNumericValue"]},_Z={name:"isPositive",category:"Utils",syntax:["isPositive(x)"],description:"Test whether a value is positive: larger than zero.",examples:["isPositive(2)","isPositive(0)","isPositive(-4)","isPositive([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},OZ={name:"isPrime",category:"Utils",syntax:["isPrime(x)"],description:"Test whether a value is prime: has no divisors other than itself and one.",examples:["isPrime(3)","isPrime(-2)","isPrime([2, 17, 100])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},FZ={name:"isZero",category:"Utils",syntax:["isZero(x)"],description:"Test whether a value is zero.",examples:["isZero(2)","isZero(0)","isZero(-4)","isZero([3, 0, -2, 0])"],seealso:["isInteger","isNumeric","isNegative","isPositive"]},BZ={name:"numeric",category:"Utils",syntax:["numeric(x)"],description:"Convert a numeric input to a specific numeric type: number, BigNumber, bigint, or Fraction.",examples:['numeric("4")','numeric("4", "number")','numeric("4", "bigint")','numeric("4", "BigNumber")','numeric("4", "Fraction")','numeric(4, "Fraction")','numeric(fraction(2, 5), "number")'],seealso:["number","bigint","fraction","bignumber","string","format"]},kZ={name:"oct",category:"Utils",syntax:["oct(value)"],description:"Format a number as octal",examples:["oct(56)"],seealso:["bin","hex"]},IZ={name:"print",category:"Utils",syntax:["print(template, values)","print(template, values, precision)"],description:"Interpolate values into a string template.",examples:['print("Lucy is $age years old", {age: 5})','print("The value of pi is $pi", {pi: pi}, 3)','print("Hello, $user.name!", {user: {name: "John"}})','print("Values: $1, $2, $3", [6, 9, 4])'],seealso:["format"]},RZ={name:"typeOf",category:"Utils",syntax:["typeOf(x)"],description:"Get the type of a variable.",examples:["typeOf(3.5)","typeOf(2 - 4i)","typeOf(45 deg)",'typeOf("hello world")'],seealso:["getMatrixDataType"]},PZ={name:"solveODE",category:"Numeric",syntax:["solveODE(func, tspan, y0)","solveODE(func, tspan, y0, options)"],description:"Numerical Integration of Ordinary Differential Equations.",examples:["f(t,y) = y","tspan = [0, 4]","solveODE(f, tspan, 1)","solveODE(f, tspan, [1, 2])",'solveODE(f, tspan, 1, { method:"RK23", maxStep:0.1 })'],seealso:["derivative","simplifyCore"]},$Z={bignumber:AG,bigint:SG,boolean:DG,complex:EG,createUnit:CG,fraction:MG,index:TG,matrix:_G,number:OG,sparse:FG,splitUnit:BG,string:kG,unit:IG,e:SN,E:SN,false:uG,i:lG,Infinity:cG,LN2:dG,LN10:fG,LOG2E:hG,LOG10E:pG,NaN:mG,null:gG,pi:DN,PI:DN,phi:vG,SQRT1_2:yG,SQRT2:bG,tau:xG,true:wG,version:NG,speedOfLight:{description:"Speed of light in vacuum",examples:["speedOfLight"]},gravitationConstant:{description:"Newtonian constant of gravitation",examples:["gravitationConstant"]},planckConstant:{description:"Planck constant",examples:["planckConstant"]},reducedPlanckConstant:{description:"Reduced Planck constant",examples:["reducedPlanckConstant"]},magneticConstant:{description:"Magnetic constant (vacuum permeability)",examples:["magneticConstant"]},electricConstant:{description:"Electric constant (vacuum permeability)",examples:["electricConstant"]},vacuumImpedance:{description:"Characteristic impedance of vacuum",examples:["vacuumImpedance"]},coulomb:{description:"Coulomb's constant",examples:["coulomb"]},elementaryCharge:{description:"Elementary charge",examples:["elementaryCharge"]},bohrMagneton:{description:"Bohr magneton",examples:["bohrMagneton"]},conductanceQuantum:{description:"Conductance quantum",examples:["conductanceQuantum"]},inverseConductanceQuantum:{description:"Inverse conductance quantum",examples:["inverseConductanceQuantum"]},magneticFluxQuantum:{description:"Magnetic flux quantum",examples:["magneticFluxQuantum"]},nuclearMagneton:{description:"Nuclear magneton",examples:["nuclearMagneton"]},klitzing:{description:"Von Klitzing constant",examples:["klitzing"]},bohrRadius:{description:"Bohr radius",examples:["bohrRadius"]},classicalElectronRadius:{description:"Classical electron radius",examples:["classicalElectronRadius"]},electronMass:{description:"Electron mass",examples:["electronMass"]},fermiCoupling:{description:"Fermi coupling constant",examples:["fermiCoupling"]},fineStructure:{description:"Fine-structure constant",examples:["fineStructure"]},hartreeEnergy:{description:"Hartree energy",examples:["hartreeEnergy"]},protonMass:{description:"Proton mass",examples:["protonMass"]},deuteronMass:{description:"Deuteron Mass",examples:["deuteronMass"]},neutronMass:{description:"Neutron mass",examples:["neutronMass"]},quantumOfCirculation:{description:"Quantum of circulation",examples:["quantumOfCirculation"]},rydberg:{description:"Rydberg constant",examples:["rydberg"]},thomsonCrossSection:{description:"Thomson cross section",examples:["thomsonCrossSection"]},weakMixingAngle:{description:"Weak mixing angle",examples:["weakMixingAngle"]},efimovFactor:{description:"Efimov factor",examples:["efimovFactor"]},atomicMass:{description:"Atomic mass constant",examples:["atomicMass"]},avogadro:{description:"Avogadro's number",examples:["avogadro"]},boltzmann:{description:"Boltzmann constant",examples:["boltzmann"]},faraday:{description:"Faraday constant",examples:["faraday"]},firstRadiation:{description:"First radiation constant",examples:["firstRadiation"]},loschmidt:{description:"Loschmidt constant at T=273.15 K and p=101.325 kPa",examples:["loschmidt"]},gasConstant:{description:"Gas constant",examples:["gasConstant"]},molarPlanckConstant:{description:"Molar Planck constant",examples:["molarPlanckConstant"]},molarVolume:{description:"Molar volume of an ideal gas at T=273.15 K and p=101.325 kPa",examples:["molarVolume"]},sackurTetrode:{description:"Sackur-Tetrode constant at T=1 K and p=101.325 kPa",examples:["sackurTetrode"]},secondRadiation:{description:"Second radiation constant",examples:["secondRadiation"]},stefanBoltzmann:{description:"Stefan-Boltzmann constant",examples:["stefanBoltzmann"]},wienDisplacement:{description:"Wien displacement law constant",examples:["wienDisplacement"]},molarMass:{description:"Molar mass constant",examples:["molarMass"]},molarMassC12:{description:"Molar mass constant of carbon-12",examples:["molarMassC12"]},gravity:{description:"Standard acceleration of gravity (standard acceleration of free-fall on Earth)",examples:["gravity"]},planckLength:{description:"Planck length",examples:["planckLength"]},planckMass:{description:"Planck mass",examples:["planckMass"]},planckTime:{description:"Planck time",examples:["planckTime"]},planckCharge:{description:"Planck charge",examples:["planckCharge"]},planckTemperature:{description:"Planck temperature",examples:["planckTemperature"]},derivative:LG,lsolve:qG,lsolveAll:UG,lup:HG,lusolve:VG,leafCount:zG,polynomialRoot:WG,resolve:KG,simplify:JG,simplifyConstant:YG,simplifyCore:ZG,symbolicEqual:QG,rationalize:GG,slu:XG,usolve:eK,usolveAll:tK,qr:jG,abs:rK,add:nK,cbrt:iK,ceil:aK,cube:oK,divide:sK,dotDivide:uK,dotMultiply:lK,dotPow:cK,exp:fK,expm:dK,expm1:pK,fix:hK,floor:mK,gcd:gK,hypot:vK,lcm:bK,log:xK,log2:AK,log1p:NK,log10:wK,mod:SK,multiply:DK,norm:EK,nthRoot:CK,nthRoots:MK,pow:TK,round:_K,sign:OK,sqrt:FK,sqrtm:BK,square:PK,subtract:$K,unaryMinus:LK,unaryPlus:zK,xgcd:qK,invmod:yK,bitAnd:UK,bitNot:HK,bitOr:VK,bitXor:WK,leftShift:jK,rightArithShift:GK,rightLogShift:KK,bellNumbers:JK,catalan:YK,composition:ZK,stirlingS2:XK,config:RG,import:PG,typed:$G,arg:QK,conj:eJ,re:rJ,im:tJ,evaluate:nJ,help:sJ,parse:aJ,parser:iJ,compile:oJ,distance:uJ,intersect:lJ,and:cJ,not:fJ,or:dJ,xor:pJ,mapSlices:hJ,concat:gJ,count:vJ,cross:yJ,column:mJ,ctranspose:bJ,det:xJ,diag:wJ,diff:NJ,dot:AJ,getMatrixDataType:MJ,identity:TJ,filter:DJ,flatten:EJ,forEach:CJ,inv:_J,pinv:OJ,eigs:SJ,kron:FJ,matrixFromFunction:IJ,matrixFromRows:RJ,matrixFromColumns:kJ,map:BJ,ones:PJ,partitionSelect:$J,range:LJ,resize:qJ,reshape:zJ,rotate:UJ,rotationMatrix:HJ,row:VJ,size:WJ,sort:jJ,squeeze:GJ,subset:KJ,trace:JJ,transpose:YJ,zeros:ZJ,fft:XJ,ifft:QJ,sylvester:kK,schur:IK,lyap:RK,solveODE:PZ,combinations:eY,combinationsWithRep:tY,factorial:rY,gamma:nY,kldivergence:aY,lgamma:iY,multinomial:oY,permutations:sY,pickRandom:uY,random:lY,randomInt:cY,compare:fY,compareNatural:dY,compareText:pY,deepEqual:hY,equal:mY,equalText:gY,larger:vY,largerEq:yY,smaller:bY,smallerEq:xY,unequal:wY,setCartesian:NY,setDifference:AY,setDistinct:SY,setIntersect:DY,setIsSubset:EY,setMultiplicity:CY,setPowerset:MY,setSize:TY,setSymDifference:_Y,setUnion:OY,zpk2tf:FY,freqz:BY,erf:kY,zeta:IY,cumsum:WY,mad:RY,max:PY,mean:$Y,median:LY,min:zY,mode:qY,prod:UY,quantileSeq:HY,std:VY,sum:jY,variance:GY,corr:KY,acos:JY,acosh:YY,acot:ZY,acoth:XY,acsc:QY,acsch:eZ,asec:tZ,asech:rZ,asin:nZ,asinh:iZ,atan:aZ,atanh:sZ,atan2:oZ,cos:uZ,cosh:lZ,cot:cZ,coth:fZ,csc:dZ,csch:pZ,sec:hZ,sech:mZ,sin:gZ,sinh:vZ,tan:yZ,tanh:bZ,to:xZ,clone:NZ,format:AZ,bin:wZ,oct:kZ,hex:DZ,isNaN:CZ,isInteger:EZ,isNegative:MZ,isNumeric:TZ,hasNumericValue:SZ,isPositive:_Z,isPrime:OZ,isZero:FZ,print:IZ,typeOf:RZ,numeric:BZ},EN="help",LZ=["typed","mathWithTransform","Help"],zZ=H(EN,LZ,t=>{var{typed:e,mathWithTransform:r,Help:n}=t;return e(EN,{any:function(a){var o,s=a;if(typeof a!="string"){for(o in r)if(Ie(r,o)&&a===r[o]){s=o;break}}var u=an($Z,s);if(!u){var l=typeof s=="function"?s.name:s;throw new Error('No documentation found on "'+l+'"')}return new n(u)}})}),CN="chain",qZ=["typed","Chain"],UZ=H(CN,qZ,t=>{var{typed:e,Chain:r}=t;return e(CN,{"":function(){return new r},any:function(i){return new r(i)}})}),MN="det",HZ=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],VZ=H(MN,HZ,t=>{var{typed:e,matrix:r,subtractScalar:n,multiply:i,divideScalar:a,isZero:o,unaryMinus:s}=t;return e(MN,{any:function(c){return et(c)},"Array | Matrix":function(c){var f;switch(We(c)?f=c.size():Array.isArray(c)?(c=r(c),f=c.size()):f=[],f.length){case 0:return et(c);case 1:if(f[0]===1)return et(c.valueOf()[0]);if(f[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+pt(f)+")");case 2:{var d=f[0],p=f[1];if(d===p)return u(c.clone().valueOf(),d);if(p===0)return 1;throw new RangeError("Matrix must be square (size: "+pt(f)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+pt(f)+")")}}});function u(l,c,f){if(c===1)return et(l[0][0]);if(c===2)return n(i(l[0][0],l[1][1]),i(l[1][0],l[0][1]));for(var d=!1,p=new Array(c).fill(0).map((S,C)=>C),h=0;h<c;h++){var m=p[h];if(o(l[m][h])){var g=void 0;for(g=h+1;g<c;g++)if(!o(l[p[g]][h])){m=p[g],p[g]=p[h],p[h]=m,d=!d;break}if(g===c)return l[m][h]}for(var y=l[m][h],N=h===0?1:l[p[h-1]][h-1],v=h+1;v<c;v++)for(var w=p[v],x=h+1;x<c;x++)l[w][x]=a(n(i(l[w][x],y),i(l[w][h],l[m][x])),N)}var b=l[p[c-1]][c-1];return d?s(b):b}}),TN="inv",WZ=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],jZ=H(TN,WZ,t=>{var{typed:e,matrix:r,divideScalar:n,addScalar:i,multiply:a,unaryMinus:o,det:s,identity:u,abs:l}=t;return e(TN,{"Array | Matrix":function(d){var p=We(d)?d.size():Ze(d);switch(p.length){case 1:if(p[0]===1)return We(d)?r([n(1,d.valueOf()[0])]):[n(1,d[0])];throw new RangeError("Matrix must be square (size: "+pt(p)+")");case 2:{var h=p[0],m=p[1];if(h===m)return We(d)?r(c(d.valueOf(),h,m),d.storage()):c(d,h,m);throw new RangeError("Matrix must be square (size: "+pt(p)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+pt(p)+")")}},any:function(d){return n(1,d)}});function c(f,d,p){var h,m,g,y,N;if(d===1){if(y=f[0][0],y===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(1,y)]]}else if(d===2){var v=s(f);if(v===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(f[1][1],v),n(o(f[0][1]),v)],[n(o(f[1][0]),v),n(f[0][0],v)]]}else{var w=f.concat();for(h=0;h<d;h++)w[h]=w[h].concat();for(var x=u(d).valueOf(),b=0;b<p;b++){var S=l(w[b][b]),C=b;for(h=b+1;h<d;)l(w[h][b])>S&&(S=l(w[h][b]),C=h),h++;if(S===0)throw Error("Cannot calculate inverse, determinant is zero");h=C,h!==b&&(N=w[b],w[b]=w[h],w[h]=N,N=x[b],x[b]=x[h],x[h]=N);var A=w[b],E=x[b];for(h=0;h<d;h++){var D=w[h],M=x[h];if(h!==b){if(D[b]!==0){for(g=n(o(D[b]),A[b]),m=b;m<p;m++)D[m]=i(D[m],a(g,A[m]));for(m=0;m<p;m++)M[m]=i(M[m],a(g,E[m]))}}else{for(g=A[b],m=b;m<p;m++)D[m]=n(D[m],g);for(m=0;m<p;m++)M[m]=n(M[m],g)}}}return x}}}),_N="pinv",GZ=["typed","matrix","inv","deepEqual","equal","dotDivide","dot","ctranspose","divideScalar","multiply","add","Complex"],KZ=H(_N,GZ,t=>{var{typed:e,matrix:r,inv:n,deepEqual:i,equal:a,dotDivide:o,dot:s,ctranspose:u,divideScalar:l,multiply:c,add:f,Complex:d}=t;return e(_N,{"Array | Matrix":function(v){var w=We(v)?v.size():Ze(v);switch(w.length){case 1:return y(v)?u(v):w[0]===1?n(v):o(u(v),s(v,v));case 2:{if(y(v))return u(v);var x=w[0],b=w[1];if(x===b)try{return n(v)}catch(S){if(!(S instanceof Error&&S.message.match(/Cannot calculate inverse, determinant is zero/)))throw S}return We(v)?r(p(v.valueOf(),x,b),v.storage()):p(v,x,b)}default:throw new RangeError("Matrix must be two dimensional (size: "+pt(w)+")")}},any:function(v){return a(v,0)?et(v):l(1,v)}});function p(N,v,w){var{C:x,F:b}=m(N,v,w),S=c(n(c(u(x),x)),u(x)),C=c(u(b),n(c(b,u(b))));return c(C,S)}function h(N,v,w){for(var x=et(N),b=0,S=0;S<v;S++){if(w<=b)return x;for(var C=S;g(x[C][b]);)if(C++,v===C&&(C=S,b++,w===b))return x;[x[C],x[S]]=[x[S],x[C]];for(var A=x[S][b],E=0;E<w;E++)x[S][E]=o(x[S][E],A);for(var D=0;D<v;D++)if(D!==S){A=x[D][b];for(var M=0;M<w;M++)x[D][M]=f(x[D][M],c(-1,c(A,x[S][M])))}b++}return x}function m(N,v,w){var x=h(N,v,w),b=N.map((C,A)=>C.filter((E,D)=>D<v&&!g(s(x[D],x[D])))),S=x.filter((C,A)=>!g(s(x[A],x[A])));return{C:b,F:S}}function g(N){return a(f(N,d(1,1)),f(0,d(1,1)))}function y(N){return i(f(N,d(1,1)),f(c(N,0),d(1,1)))}});function JZ(t){var{addScalar:e,subtract:r,flatten:n,multiply:i,multiplyScalar:a,divideScalar:o,sqrt:s,abs:u,bignumber:l,diag:c,size:f,reshape:d,inv:p,qr:h,usolve:m,usolveAll:g,equal:y,complex:N,larger:v,smaller:w,matrixFromColumns:x,dot:b}=t;function S(te,Z,X,pe){var de=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,G=C(te,Z,X,pe,de);A(te,Z,X,pe,de,G);var{values:V,C:U}=E(te,Z,X,pe,de);if(de){var K=D(te,Z,U,G,V,X,pe);return{values:V,eigenvectors:K}}return{values:V}}function C(te,Z,X,pe,de){var G=pe==="BigNumber",V=pe==="Complex",U=G?l(0):0,K=G?l(1):V?N(1):1,ae=G?l(1):1,B=G?l(10):2,q=a(B,B),j;de&&(j=Array(Z).fill(K));for(var oe=!1;!oe;){oe=!0;for(var k=0;k<Z;k++){for(var z=U,Y=U,ne=0;ne<Z;ne++)k!==ne&&(z=e(z,u(te[ne][k])),Y=e(Y,u(te[k][ne])));if(!y(z,0)&&!y(Y,0)){for(var se=ae,ue=z,ve=o(Y,B),L=a(Y,B);w(ue,ve);)ue=a(ue,q),se=a(se,B);for(;v(ue,L);)ue=o(ue,q),se=o(se,B);var J=w(o(e(ue,Y),se),a(e(z,Y),.95));if(J){oe=!1;for(var re=o(1,se),fe=0;fe<Z;fe++)k!==fe&&(te[k][fe]=a(te[k][fe],re),te[fe][k]=a(te[fe][k],se));de&&(j[k]=a(j[k],re))}}}}return de?c(j):null}function A(te,Z,X,pe,de,G){var V=pe==="BigNumber",U=pe==="Complex",K=V?l(0):U?N(0):0;V&&(X=l(X));for(var ae=0;ae<Z-2;ae++){for(var B=0,q=K,j=ae+1;j<Z;j++){var oe=te[j][ae];w(u(q),u(oe))&&(q=oe,B=j)}if(!w(u(q),X)){if(B!==ae+1){var k=te[B];te[B]=te[ae+1],te[ae+1]=k;for(var z=0;z<Z;z++){var Y=te[z][B];te[z][B]=te[z][ae+1],te[z][ae+1]=Y}if(de){var ne=G[B];G[B]=G[ae+1],G[ae+1]=ne}}for(var se=ae+2;se<Z;se++){var ue=o(te[se][ae],q);if(ue!==0){for(var ve=0;ve<Z;ve++)te[se][ve]=r(te[se][ve],a(ue,te[ae+1][ve]));for(var L=0;L<Z;L++)te[L][ae+1]=e(te[L][ae+1],a(ue,te[L][se]));if(de)for(var J=0;J<Z;J++)G[se][J]=r(G[se][J],a(ue,G[ae+1][J]))}}}}return G}function E(te,Z,X,pe,de){var G=pe==="BigNumber",V=pe==="Complex",U=G?l(1):V?N(1):1;G&&(X=l(X));for(var K=et(te),ae=[],B=Z,q=[],j=de?c(Array(Z).fill(U)):void 0,oe=de?c(Array(B).fill(U)):void 0,k=0;k<=100;){k+=1;for(var z=K[B-1][B-1],Y=0;Y<B;Y++)K[Y][Y]=r(K[Y][Y],z);var{Q:ne,R:se}=h(K);K=i(se,ne);for(var ue=0;ue<B;ue++)K[ue][ue]=e(K[ue][ue],z);if(de&&(oe=i(oe,ne)),B===1||w(u(K[B-1][B-2]),X)){k=0,ae.push(K[B-1][B-1]),de&&(q.unshift([[1]]),I(oe,Z),j=i(j,oe),B>1&&(oe=c(Array(B-1).fill(U)))),B-=1,K.pop();for(var ve=0;ve<B;ve++)K[ve].pop()}else if(B===2||w(u(K[B-2][B-3]),X)){k=0;var L=M(K[B-2][B-2],K[B-2][B-1],K[B-1][B-2],K[B-1][B-1]);ae.push(...L),de&&(q.unshift(F(K[B-2][B-2],K[B-2][B-1],K[B-1][B-2],K[B-1][B-1],L[0],L[1],X,pe)),I(oe,Z),j=i(j,oe),B>2&&(oe=c(Array(B-2).fill(U)))),B-=2,K.pop(),K.pop();for(var J=0;J<B;J++)K[J].pop(),K[J].pop()}if(B===0)break}if(ae.sort((he,me)=>+r(u(he),u(me))),k>100){var re=Error("The eigenvalues failed to converge. Only found these eigenvalues: "+ae.join(", "));throw re.values=ae,re.vectors=[],re}var fe=de?i(j,P(q,Z)):void 0;return{values:ae,C:fe}}function D(te,Z,X,pe,de,G,V){var U=p(X),K=i(U,te,X),ae=V==="BigNumber",B=V==="Complex",q=ae?l(0):B?N(0):0,j=ae?l(1):B?N(1):1,oe=[],k=[];for(var z of de){var Y=T(oe,z,y);Y===-1?(oe.push(z),k.push(1)):k[Y]+=1}for(var ne=[],se=oe.length,ue=Array(Z).fill(q),ve=c(Array(Z).fill(j)),L=function(){var fe=oe[J],he=r(K,i(fe,ve)),me=g(he,ue);for(me.shift();me.length<k[J];){var Se=$(he,Z,me,G,V);if(Se===null)break;me.push(Se)}var xe=i(p(pe),X);me=me.map(Ee=>i(xe,Ee)),ne.push(...me.map(Ee=>({value:fe,vector:n(Ee)})))},J=0;J<se;J++)L();return ne}function M(te,Z,X,pe){var de=e(te,pe),G=r(a(te,pe),a(Z,X)),V=a(de,.5),U=a(s(r(a(de,de),a(4,G))),.5);return[e(V,U),r(V,U)]}function F(te,Z,X,pe,de,G,V,U){var K=U==="BigNumber",ae=U==="Complex",B=K?l(0):ae?N(0):0,q=K?l(1):ae?N(1):1;if(w(u(X),V))return[[q,B],[B,q]];if(v(u(r(de,G)),V))return[[r(de,pe),r(G,pe)],[X,X]];var j=r(te,de),oe=r(pe,de);return w(u(Z),V)&&w(u(oe),V)?[[j,q],[X,B]]:[[Z,B],[oe,q]]}function I(te,Z){for(var X=0;X<te.length;X++)te[X].push(...Array(Z-te[X].length).fill(0));for(var pe=te.length;pe<Z;pe++)te.push(Array(Z).fill(0)),te[pe][pe]=1;return te}function P(te,Z){for(var X=[],pe=0;pe<Z;pe++)X[pe]=Array(Z).fill(0);var de=0;for(var G of te){for(var V=G.length,U=0;U<V;U++)for(var K=0;K<V;K++)X[de+U][de+K]=G[U][K];de+=V}return X}function T(te,Z,X){for(var pe=0;pe<te.length;pe++)if(X(te[pe],Z))return pe;return-1}function $(te,Z,X,pe,de){for(var G=de==="BigNumber"?l(1e3):1e3,V,U=0;U<5;++U){V=O(Z,X,de);try{V=m(te,V)}catch{continue}if(v(R(V),G))break}if(U>=5)return null;for(U=0;;){var K=m(te,V);if(w(R(W(V,[K])),pe))break;if(++U>=10)return null;V=ie(K)}return V}function O(te,Z,X){var pe=X==="BigNumber",de=X==="Complex",G=Array(te).fill(0).map(V=>2*Math.random()-1);return pe&&(G=G.map(V=>l(V))),de&&(G=G.map(V=>N(V))),G=W(G,Z),ie(G,X)}function W(te,Z){var X=f(te);for(var pe of Z)pe=d(pe,X),te=r(te,i(o(b(pe,te),b(pe,pe)),pe));return te}function R(te){return u(s(b(te,te)))}function ie(te,Z){var X=Z==="BigNumber",pe=Z==="Complex",de=X?l(1):pe?N(1):1;return i(o(de,R(te)),te)}return S}function YZ(t){var{config:e,addScalar:r,subtract:n,abs:i,atan:a,cos:o,sin:s,multiplyScalar:u,inv:l,bignumber:c,multiply:f,add:d}=t;function p(A,E){var D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.relTol,M=arguments.length>3?arguments[3]:void 0,F=arguments.length>4?arguments[4]:void 0;if(M==="number")return h(A,D,F);if(M==="BigNumber")return m(A,D,F);throw TypeError("Unsupported data type: "+M)}function h(A,E,D){var M=A.length,F=Math.abs(E/M),I,P;if(D){P=new Array(M);for(var T=0;T<M;T++)P[T]=Array(M).fill(0),P[T][T]=1}for(var $=b(A);Math.abs($[1])>=Math.abs(F);){var O=$[0][0],W=$[0][1];I=g(A[O][O],A[W][W],A[O][W]),A=x(A,I,O,W),D&&(P=N(P,I,O,W)),$=b(A)}for(var R=Array(M).fill(0),ie=0;ie<M;ie++)R[ie]=A[ie][ie];return C(et(R),P,D)}function m(A,E,D){var M=A.length,F=i(E/M),I,P;if(D){P=new Array(M);for(var T=0;T<M;T++)P[T]=Array(M).fill(0),P[T][T]=1}for(var $=S(A);i($[1])>=i(F);){var O=$[0][0],W=$[0][1];I=y(A[O][O],A[W][W],A[O][W]),A=w(A,I,O,W),D&&(P=v(P,I,O,W)),$=S(A)}for(var R=Array(M).fill(0),ie=0;ie<M;ie++)R[ie]=A[ie][ie];return C(et(R),P,D)}function g(A,E,D){var M=E-A;return Math.abs(M)<=e.relTol?Math.PI/4:.5*Math.atan(2*D/(E-A))}function y(A,E,D){var M=n(E,A);return i(M)<=e.relTol?c(-1).acos().div(4):u(.5,a(f(2,D,l(M))))}function N(A,E,D,M){for(var F=A.length,I=Math.cos(E),P=Math.sin(E),T=Array(F).fill(0),$=Array(F).fill(0),O=0;O<F;O++)T[O]=I*A[O][D]-P*A[O][M],$[O]=P*A[O][D]+I*A[O][M];for(var W=0;W<F;W++)A[W][D]=T[W],A[W][M]=$[W];return A}function v(A,E,D,M){for(var F=A.length,I=o(E),P=s(E),T=Array(F).fill(c(0)),$=Array(F).fill(c(0)),O=0;O<F;O++)T[O]=n(u(I,A[O][D]),u(P,A[O][M])),$[O]=r(u(P,A[O][D]),u(I,A[O][M]));for(var W=0;W<F;W++)A[W][D]=T[W],A[W][M]=$[W];return A}function w(A,E,D,M){for(var F=A.length,I=c(o(E)),P=c(s(E)),T=u(I,I),$=u(P,P),O=Array(F).fill(c(0)),W=Array(F).fill(c(0)),R=f(c(2),I,P,A[D][M]),ie=r(n(u(T,A[D][D]),R),u($,A[M][M])),te=d(u($,A[D][D]),R,u(T,A[M][M])),Z=0;Z<F;Z++)O[Z]=n(u(I,A[D][Z]),u(P,A[M][Z])),W[Z]=r(u(P,A[D][Z]),u(I,A[M][Z]));A[D][D]=ie,A[M][M]=te,A[D][M]=c(0),A[M][D]=c(0);for(var X=0;X<F;X++)X!==D&&X!==M&&(A[D][X]=O[X],A[X][D]=O[X],A[M][X]=W[X],A[X][M]=W[X]);return A}function x(A,E,D,M){for(var F=A.length,I=Math.cos(E),P=Math.sin(E),T=I*I,$=P*P,O=Array(F).fill(0),W=Array(F).fill(0),R=T*A[D][D]-2*I*P*A[D][M]+$*A[M][M],ie=$*A[D][D]+2*I*P*A[D][M]+T*A[M][M],te=0;te<F;te++)O[te]=I*A[D][te]-P*A[M][te],W[te]=P*A[D][te]+I*A[M][te];A[D][D]=R,A[M][M]=ie,A[D][M]=0,A[M][D]=0;for(var Z=0;Z<F;Z++)Z!==D&&Z!==M&&(A[D][Z]=O[Z],A[Z][D]=O[Z],A[M][Z]=W[Z],A[Z][M]=W[Z]);return A}function b(A){for(var E=A.length,D=0,M=[0,1],F=0;F<E;F++)for(var I=F+1;I<E;I++)Math.abs(D)<Math.abs(A[F][I])&&(D=Math.abs(A[F][I]),M=[F,I]);return[M,D]}function S(A){for(var E=A.length,D=0,M=[0,1],F=0;F<E;F++)for(var I=F+1;I<E;I++)i(D)<i(A[F][I])&&(D=i(A[F][I]),M=[F,I]);return[M,D]}function C(A,E,D){var M=A.length,F=Array(M),I;if(D){I=Array(M);for(var P=0;P<M;P++)I[P]=Array(M)}for(var T=0;T<M;T++){for(var $=0,O=A[0],W=0;W<A.length;W++)i(A[W])<i(O)&&($=W,O=A[$]);if(F[T]=A.splice($,1)[0],D)for(var R=0;R<M;R++)I[T][R]=E[R][$],E[R].splice($,1)}if(!D)return{values:F};var ie=I.map((te,Z)=>({value:F[Z],vector:te}));return{values:F,eigenvectors:ie}}return p}var ZZ="eigs",XZ=["config","typed","matrix","addScalar","equal","subtract","abs","atan","cos","sin","multiplyScalar","divideScalar","inv","bignumber","multiply","add","larger","column","flatten","number","complex","sqrt","diag","size","reshape","qr","usolve","usolveAll","im","re","smaller","matrixFromColumns","dot"],QZ=H(ZZ,XZ,t=>{var{config:e,typed:r,matrix:n,addScalar:i,subtract:a,equal:o,abs:s,atan:u,cos:l,sin:c,multiplyScalar:f,divideScalar:d,inv:p,bignumber:h,multiply:m,add:g,larger:y,column:N,flatten:v,number:w,complex:x,sqrt:b,diag:S,size:C,reshape:A,qr:E,usolve:D,usolveAll:M,im:F,re:I,smaller:P,matrixFromColumns:T,dot:$}=t,O=YZ({config:e,addScalar:i,subtract:a,abs:s,atan:u,cos:l,sin:c,multiplyScalar:f,inv:p,bignumber:h,multiply:m,add:g}),W=JZ({addScalar:i,subtract:a,multiply:m,multiplyScalar:f,flatten:v,divideScalar:d,sqrt:b,abs:s,bignumber:h,diag:S,size:C,reshape:A,qr:E,inv:p,usolve:D,usolveAll:M,equal:o,complex:x,larger:y,smaller:P,matrixFromColumns:T,dot:$});return r("eigs",{Array:function(G){return R(n(G))},"Array, number|BigNumber":function(G,V){return R(n(G),{precision:V})},"Array, Object"(de,G){return R(n(de),G)},Matrix:function(G){return R(G,{matricize:!0})},"Matrix, number|BigNumber":function(G,V){return R(G,{precision:V,matricize:!0})},"Matrix, Object":function(G,V){var U={matricize:!0};return dr(U,V),R(G,U)}});function R(de){var G,V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},U="eigenvectors"in V?V.eigenvectors:!0,K=(G=V.precision)!==null&&G!==void 0?G:e.relTol,ae=ie(de,K,U);return V.matricize&&(ae.values=n(ae.values),U&&(ae.eigenvectors=ae.eigenvectors.map(B=>{var{value:q,vector:j}=B;return{value:q,vector:n(j)}}))),U&&Object.defineProperty(ae,"vectors",{enumerable:!1,get:()=>{throw new Error("eigs(M).vectors replaced with eigs(M).eigenvectors")}}),ae}function ie(de,G,V){var U=de.toArray(),K=de.size();if(K.length!==2||K[0]!==K[1])throw new RangeError("Matrix must be square (size: ".concat(pt(K),")"));var ae=K[0];if(Z(U,ae,G)&&(X(U,ae),te(U,ae,G))){var B=pe(de,U,ae);return O(U,ae,G,B,V)}var q=pe(de,U,ae);return W(U,ae,G,q,V)}function te(de,G,V){for(var U=0;U<G;U++)for(var K=U;K<G;K++)if(y(h(s(a(de[U][K],de[K][U]))),V))return!1;return!0}function Z(de,G,V){for(var U=0;U<G;U++)for(var K=0;K<G;K++)if(y(h(s(F(de[U][K]))),V))return!1;return!0}function X(de,G){for(var V=0;V<G;V++)for(var U=0;U<G;U++)de[V][U]=I(de[V][U])}function pe(de,G,V){var U=de.datatype();if(U==="number"||U==="BigNumber"||U==="Complex")return U;for(var K=!1,ae=!1,B=!1,q=0;q<V;q++)for(var j=0;j<V;j++){var oe=G[q][j];if(it(oe)||Il(oe))K=!0;else if(ot(oe))ae=!0;else if(ua(oe))B=!0;else throw TypeError("Unsupported type in Matrix: "+It(oe))}if(ae&&B&&console.warn("Complex BigNumbers not supported, this operation will lose precission."),B){for(var k=0;k<V;k++)for(var z=0;z<V;z++)G[k][z]=x(G[k][z]);return"Complex"}if(ae){for(var Y=0;Y<V;Y++)for(var ne=0;ne<V;ne++)G[Y][ne]=h(G[Y][ne]);return"BigNumber"}if(K){for(var se=0;se<V;se++)for(var ue=0;ue<V;ue++)G[se][ue]=w(G[se][ue]);return"number"}else throw TypeError("Matrix contains unsupported types only.")}}),ON="expm",eX=["typed","abs","add","identity","inv","multiply"],tX=H(ON,eX,t=>{var{typed:e,abs:r,add:n,identity:i,inv:a,multiply:o}=t;return e(ON,{Matrix:function(f){var d=f.size();if(d.length!==2||d[0]!==d[1])throw new RangeError("Matrix must be square (size: "+pt(d)+")");for(var p=d[0],h=1e-15,m=s(f),g=u(m,h),y=g.q,N=g.j,v=o(f,Math.pow(2,-N)),w=i(p),x=i(p),b=1,S=v,C=-1,A=1;A<=y;A++)A>1&&(S=o(S,v),C=-C),b=b*(y-A+1)/((2*y-A+1)*A),w=n(w,o(b,S)),x=n(x,o(b*C,S));for(var E=o(a(x),w),D=0;D<N;D++)E=o(E,E);return _o(f)?f.createSparseMatrix(E):E}});function s(c){for(var f=c.size()[0],d=0,p=0;p<f;p++){for(var h=0,m=0;m<f;m++)h+=r(c.get([p,m]));d=Math.max(h,d)}return d}function u(c,f){for(var d=30,p=0;p<d;p++)for(var h=0;h<=p;h++){var m=p-h;if(l(c,h,m)<f)return{q:h,j:m}}throw new Error("Could not find acceptable parameters to compute the matrix exponential (try increasing maxSearchSize in expm.js)")}function l(c,f,d){for(var p=1,h=2;h<=f;h++)p*=h;for(var m=p,g=f+1;g<=2*f;g++)m*=g;var y=m*(2*f+1);return 8*Math.pow(c/Math.pow(2,d),2*f)*p*p/(m*y)}}),FN="sqrtm",rX=["typed","abs","add","multiply","map","sqrt","subtract","inv","size","max","identity"],nX=H(FN,rX,t=>{var{typed:e,abs:r,add:n,multiply:i,map:a,sqrt:o,subtract:s,inv:u,size:l,max:c,identity:f}=t,d=1e3,p=1e-6;function h(m){var g,y=0,N=m,v=f(l(m));do{var w=N;if(N=i(.5,n(w,u(v))),v=i(.5,n(v,u(w))),g=c(r(s(N,w))),g>p&&++y>d)throw new Error("computing square root of matrix: iterative method could not converge")}while(g>p);return N}return e(FN,{"Array | Matrix":function(g){var y=We(g)?g.size():Ze(g);switch(y.length){case 1:if(y[0]===1)return a(g,o);throw new RangeError("Matrix must be square (size: "+pt(y)+")");case 2:{var N=y[0],v=y[1];if(N===v)return h(g);throw new RangeError("Matrix must be square (size: "+pt(y)+")")}default:throw new RangeError("Matrix must be at most two dimensional (size: "+pt(y)+")")}}})}),BN="sylvester",iX=["typed","schur","matrixFromColumns","matrix","multiply","range","concat","transpose","index","subset","add","subtract","identity","lusolve","abs"],aX=H(BN,iX,t=>{var{typed:e,schur:r,matrixFromColumns:n,matrix:i,multiply:a,range:o,concat:s,transpose:u,index:l,subset:c,add:f,subtract:d,identity:p,lusolve:h,abs:m}=t;return e(BN,{"Matrix, Matrix, Matrix":g,"Array, Matrix, Matrix":function(N,v,w){return g(i(N),v,w)},"Array, Array, Matrix":function(N,v,w){return g(i(N),i(v),w)},"Array, Matrix, Array":function(N,v,w){return g(i(N),v,i(w))},"Matrix, Array, Matrix":function(N,v,w){return g(N,i(v),w)},"Matrix, Array, Array":function(N,v,w){return g(N,i(v),i(w))},"Matrix, Matrix, Array":function(N,v,w){return g(N,v,i(w))},"Array, Array, Array":function(N,v,w){return g(i(N),i(v),i(w)).toArray()}});function g(y,N,v){for(var w=N.size()[0],x=y.size()[0],b=r(y),S=b.T,C=b.U,A=r(a(-1,N)),E=A.T,D=A.U,M=a(a(u(C),v),D),F=o(0,x),I=[],P=(B,q)=>s(B,q,1),T=(B,q)=>s(B,q,0),$=0;$<w;$++)if($<w-1&&m(c(E,l($+1,$)))>1e-5){for(var O=T(c(M,l(F,$)),c(M,l(F,$+1))),W=0;W<$;W++)O=f(O,T(a(I[W],c(E,l(W,$))),a(I[W],c(E,l(W,$+1)))));var R=a(p(x),a(-1,c(E,l($,$)))),ie=a(p(x),a(-1,c(E,l($+1,$)))),te=a(p(x),a(-1,c(E,l($,$+1)))),Z=a(p(x),a(-1,c(E,l($+1,$+1)))),X=T(P(f(S,R),ie),P(te,f(S,Z))),pe=h(X,O);I[$]=pe.subset(l(o(0,x),0)),I[$+1]=pe.subset(l(o(x,2*x),0)),$++}else{for(var de=c(M,l(F,$)),G=0;G<$;G++)de=f(de,a(I[G],c(E,l(G,$))));var V=c(E,l($,$)),U=d(S,a(V,p(x)));I[$]=h(U,de)}var K=i(n(...I)),ae=a(C,a(K,u(D)));return ae}}),kN="schur",oX=["typed","matrix","identity","multiply","qr","norm","subtract"],sX=H(kN,oX,t=>{var{typed:e,matrix:r,identity:n,multiply:i,qr:a,norm:o,subtract:s}=t;return e(kN,{Array:function(c){var f=u(r(c));return{U:f.U.valueOf(),T:f.T.valueOf()}},Matrix:function(c){return u(c)}});function u(l){var c=l.size()[0],f=l,d=n(c),p=0,h;do{h=f;var m=a(f),g=m.Q,y=m.R;if(f=i(y,g),d=i(d,g),p++>100)break}while(o(s(f,h))>1e-4);return{U:d,T:f}}}),IN="lyap",uX=["typed","matrix","sylvester","multiply","transpose"],lX=H(IN,uX,t=>{var{typed:e,matrix:r,sylvester:n,multiply:i,transpose:a}=t;return e(IN,{"Matrix, Matrix":function(s,u){return n(s,a(s),i(-1,u))},"Array, Matrix":function(s,u){return n(r(s),a(r(s)),i(-1,u))},"Matrix, Array":function(s,u){return n(s,a(r(s)),r(i(-1,u)))},"Array, Array":function(s,u){return n(r(s),a(r(s)),r(i(-1,u))).toArray()}})}),cX="divide",fX=["typed","matrix","multiply","equalScalar","divideScalar","inv"],dX=H(cX,fX,t=>{var{typed:e,matrix:r,multiply:n,equalScalar:i,divideScalar:a,inv:o}=t,s=Lr({typed:e,equalScalar:i}),u=hi({typed:e});return e("divide",w2({"Array | Matrix, Array | Matrix":function(c,f){return n(c,o(f))},"DenseMatrix, any":function(c,f){return u(c,f,a,!1)},"SparseMatrix, any":function(c,f){return s(c,f,a,!1)},"Array, any":function(c,f){return u(r(c),f,a,!1).valueOf()},"any, Array | Matrix":function(c,f){return n(c,o(f))}},a.signatures))}),RN="distance",pX=["typed","addScalar","subtractScalar","divideScalar","multiplyScalar","deepEqual","sqrt","abs"],hX=H(RN,pX,t=>{var{typed:e,addScalar:r,subtractScalar:n,multiplyScalar:i,divideScalar:a,deepEqual:o,sqrt:s,abs:u}=t;return e(RN,{"Array, Array, Array":function(x,b,S){if(x.length===2&&b.length===2&&S.length===2){if(!c(x))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!c(b))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!c(S))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(o(b,S))throw new TypeError("LinePoint1 should not be same with LinePoint2");var C=n(S[1],b[1]),A=n(b[0],S[0]),E=n(i(S[0],b[1]),i(b[0],S[1]));return g(x[0],x[1],C,A,E)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object, Object":function(x,b,S){if(Object.keys(x).length===2&&Object.keys(b).length===2&&Object.keys(S).length===2){if(!c(x))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!c(b))throw new TypeError("Values of lineOnePtX and lineOnePtY should be numbers or BigNumbers");if(!c(S))throw new TypeError("Values of lineTwoPtX and lineTwoPtY should be numbers or BigNumbers");if(o(h(b),h(S)))throw new TypeError("LinePoint1 should not be same with LinePoint2");if("pointX"in x&&"pointY"in x&&"lineOnePtX"in b&&"lineOnePtY"in b&&"lineTwoPtX"in S&&"lineTwoPtY"in S){var C=n(S.lineTwoPtY,b.lineOnePtY),A=n(b.lineOnePtX,S.lineTwoPtX),E=n(i(S.lineTwoPtX,b.lineOnePtY),i(b.lineOnePtX,S.lineTwoPtY));return g(x.pointX,x.pointY,C,A,E)}else throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},"Array, Array":function(x,b){if(x.length===2&&b.length===3){if(!c(x))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!f(b))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");return g(x[0],x[1],b[0],b[1],b[2])}else if(x.length===3&&b.length===6){if(!f(x))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!p(b))throw new TypeError("Array with 6 numbers or BigNumbers expected for second argument");return y(x[0],x[1],x[2],b[0],b[1],b[2],b[3],b[4],b[5])}else if(x.length===b.length&&x.length>0){if(!d(x))throw new TypeError("All values of an array should be numbers or BigNumbers");if(!d(b))throw new TypeError("All values of an array should be numbers or BigNumbers");return N(x,b)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object":function(x,b){if(Object.keys(x).length===2&&Object.keys(b).length===3){if(!c(x))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!f(b))throw new TypeError("Values of xCoeffLine, yCoeffLine and constant should be numbers or BigNumbers");if("pointX"in x&&"pointY"in x&&"xCoeffLine"in b&&"yCoeffLine"in b&&"constant"in b)return g(x.pointX,x.pointY,b.xCoeffLine,b.yCoeffLine,b.constant);throw new TypeError("Key names do not match")}else if(Object.keys(x).length===3&&Object.keys(b).length===6){if(!f(x))throw new TypeError("Values of pointX, pointY and pointZ should be numbers or BigNumbers");if(!p(b))throw new TypeError("Values of x0, y0, z0, a, b and c should be numbers or BigNumbers");if("pointX"in x&&"pointY"in x&&"x0"in b&&"y0"in b&&"z0"in b&&"a"in b&&"b"in b&&"c"in b)return y(x.pointX,x.pointY,x.pointZ,b.x0,b.y0,b.z0,b.a,b.b,b.c);throw new TypeError("Key names do not match")}else if(Object.keys(x).length===2&&Object.keys(b).length===2){if(!c(x))throw new TypeError("Values of pointOneX and pointOneY should be numbers or BigNumbers");if(!c(b))throw new TypeError("Values of pointTwoX and pointTwoY should be numbers or BigNumbers");if("pointOneX"in x&&"pointOneY"in x&&"pointTwoX"in b&&"pointTwoY"in b)return N([x.pointOneX,x.pointOneY],[b.pointTwoX,b.pointTwoY]);throw new TypeError("Key names do not match")}else if(Object.keys(x).length===3&&Object.keys(b).length===3){if(!f(x))throw new TypeError("Values of pointOneX, pointOneY and pointOneZ should be numbers or BigNumbers");if(!f(b))throw new TypeError("Values of pointTwoX, pointTwoY and pointTwoZ should be numbers or BigNumbers");if("pointOneX"in x&&"pointOneY"in x&&"pointOneZ"in x&&"pointTwoX"in b&&"pointTwoY"in b&&"pointTwoZ"in b)return N([x.pointOneX,x.pointOneY,x.pointOneZ],[b.pointTwoX,b.pointTwoY,b.pointTwoZ]);throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},Array:function(x){if(!m(x))throw new TypeError("Incorrect array format entered for pairwise distance calculation");return v(x)}});function l(w){return typeof w=="number"||ot(w)}function c(w){return w.constructor!==Array&&(w=h(w)),l(w[0])&&l(w[1])}function f(w){return w.constructor!==Array&&(w=h(w)),l(w[0])&&l(w[1])&&l(w[2])}function d(w){return Array.isArray(w)||(w=h(w)),w.every(l)}function p(w){return w.constructor!==Array&&(w=h(w)),l(w[0])&&l(w[1])&&l(w[2])&&l(w[3])&&l(w[4])&&l(w[5])}function h(w){for(var x=Object.keys(w),b=[],S=0;S<x.length;S++)b.push(w[x[S]]);return b}function m(w){if(w[0].length===2&&l(w[0][0])&&l(w[0][1])){if(w.some(x=>x.length!==2||!l(x[0])||!l(x[1])))return!1}else if(w[0].length===3&&l(w[0][0])&&l(w[0][1])&&l(w[0][2])){if(w.some(x=>x.length!==3||!l(x[0])||!l(x[1])||!l(x[2])))return!1}else return!1;return!0}function g(w,x,b,S,C){var A=u(r(r(i(b,w),i(S,x)),C)),E=s(r(i(b,b),i(S,S)));return a(A,E)}function y(w,x,b,S,C,A,E,D,M){var F=[n(i(n(C,x),M),i(n(A,b),D)),n(i(n(A,b),E),i(n(S,w),M)),n(i(n(S,w),D),i(n(C,x),E))];F=s(r(r(i(F[0],F[0]),i(F[1],F[1])),i(F[2],F[2])));var I=s(r(r(i(E,E),i(D,D)),i(M,M)));return a(F,I)}function N(w,x){for(var b=w.length,S=0,C=0,A=0;A<b;A++)C=n(w[A],x[A]),S=r(i(C,C),S);return s(S)}function v(w){for(var x=[],b=[],S=[],C=0;C<w.length-1;C++)for(var A=C+1;A<w.length;A++)w[0].length===2?(b=[w[C][0],w[C][1]],S=[w[A][0],w[A][1]]):w[0].length===3&&(b=[w[C][0],w[C][1],w[C][2]],S=[w[A][0],w[A][1],w[A][2]]),x.push(N(b,S));return x}}),mX="intersect",gX=["typed","config","abs","add","addScalar","matrix","multiply","multiplyScalar","divideScalar","subtract","smaller","equalScalar","flatten","isZero","isNumeric"],vX=H(mX,gX,t=>{var{typed:e,config:r,abs:n,add:i,addScalar:a,matrix:o,multiply:s,multiplyScalar:u,divideScalar:l,subtract:c,smaller:f,equalScalar:d,flatten:p,isZero:h,isNumeric:m}=t;return e("intersect",{"Array, Array, Array":g,"Array, Array, Array, Array":y,"Matrix, Matrix, Matrix":function(D,M,F){var I=g(D.valueOf(),M.valueOf(),F.valueOf());return I===null?null:o(I)},"Matrix, Matrix, Matrix, Matrix":function(D,M,F,I){var P=y(D.valueOf(),M.valueOf(),F.valueOf(),I.valueOf());return P===null?null:o(P)}});function g(E,D,M){if(E=N(E),D=N(D),M=N(M),!w(E))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!w(D))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!x(M))throw new TypeError("Array with 4 numbers expected as third argument");return A(E[0],E[1],E[2],D[0],D[1],D[2],M[0],M[1],M[2],M[3])}function y(E,D,M,F){if(E=N(E),D=N(D),M=N(M),F=N(F),E.length===2){if(!v(E))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!v(D))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!v(M))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(!v(F))throw new TypeError("Array with 2 numbers or BigNumbers expected for fourth argument");return b(E,D,M,F)}else if(E.length===3){if(!w(E))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!w(D))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!w(M))throw new TypeError("Array with 3 numbers or BigNumbers expected for third argument");if(!w(F))throw new TypeError("Array with 3 numbers or BigNumbers expected for fourth argument");return C(E[0],E[1],E[2],D[0],D[1],D[2],M[0],M[1],M[2],F[0],F[1],F[2])}else throw new TypeError("Arrays with two or thee dimensional points expected")}function N(E){return E.length===1?E[0]:E.length>1&&Array.isArray(E[0])&&E.every(D=>Array.isArray(D)&&D.length===1)?p(E):E}function v(E){return E.length===2&&m(E[0])&&m(E[1])}function w(E){return E.length===3&&m(E[0])&&m(E[1])&&m(E[2])}function x(E){return E.length===4&&m(E[0])&&m(E[1])&&m(E[2])&&m(E[3])}function b(E,D,M,F){var I=E,P=M,T=c(I,D),$=c(P,F),O=c(u(T[0],$[1]),u($[0],T[1]));if(h(O)||f(n(O),r.relTol))return null;var W=u($[0],I[1]),R=u($[1],I[0]),ie=u($[0],P[1]),te=u($[1],P[0]),Z=l(a(c(c(W,R),ie),te),O);return i(s(T,Z),I)}function S(E,D,M,F,I,P,T,$,O,W,R,ie){var te=u(c(E,D),c(M,F)),Z=u(c(I,P),c(T,$)),X=u(c(O,W),c(R,ie));return a(a(te,Z),X)}function C(E,D,M,F,I,P,T,$,O,W,R,ie){var te=S(E,T,W,T,D,$,R,$,M,O,ie,O),Z=S(W,T,F,E,R,$,I,D,ie,O,P,M),X=S(E,T,F,E,D,$,I,D,M,O,P,M),pe=S(W,T,W,T,R,$,R,$,ie,O,ie,O),de=S(F,E,F,E,I,D,I,D,P,M,P,M),G=c(u(te,Z),u(X,pe)),V=c(u(de,pe),u(Z,Z));if(h(V))return null;var U=l(G,V),K=l(a(te,u(U,Z)),pe),ae=a(E,u(U,c(F,E))),B=a(D,u(U,c(I,D))),q=a(M,u(U,c(P,M))),j=a(T,u(K,c(W,T))),oe=a($,u(K,c(R,$))),k=a(O,u(K,c(ie,O)));return d(ae,j)&&d(B,oe)&&d(q,k)?[ae,B,q]:null}function A(E,D,M,F,I,P,T,$,O,W){var R=u(E,T),ie=u(F,T),te=u(D,$),Z=u(I,$),X=u(M,O),pe=u(P,O),de=c(c(c(W,R),te),X),G=c(c(c(a(a(ie,Z),pe),R),te),X),V=l(de,G),U=a(E,u(V,c(F,E))),K=a(D,u(V,c(I,D))),ae=a(M,u(V,c(P,M)));return[U,K,ae]}}),PN="sum",yX=["typed","config","add","numeric"],dM=H(PN,yX,t=>{var{typed:e,config:r,add:n,numeric:i}=t;return e(PN,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":o,"...":function(u){if(tu(u))throw new TypeError("Scalar values expected in function sum");return a(u)}});function a(s){var u;return eo(s,function(l){try{u=u===void 0?l:n(u,l)}catch(c){throw pn(c,"sum",l)}}),u===void 0&&(u=i(0,r.number)),typeof u=="string"&&(u=i(u,io(u,r))),u}function o(s,u){try{var l=Np(s,u,n);return l}catch(c){throw pn(c,"sum")}}}),qc="cumsum",bX=["typed","add","unaryPlus"],pM=H(qc,bX,t=>{var{typed:e,add:r,unaryPlus:n}=t;return e(qc,{Array:i,Matrix:function(l){return l.create(i(l.valueOf(),l.datatype()))},"Array, number | BigNumber":o,"Matrix, number | BigNumber":function(l,c){return l.create(o(l.valueOf(),c),l.datatype())},"...":function(l){if(tu(l))throw new TypeError("All values expected to be scalar in function cumsum");return i(l)}});function i(u){try{return a(u)}catch(l){throw pn(l,qc)}}function a(u){if(u.length===0)return[];for(var l=[n(u[0])],c=1;c<u.length;++c)l.push(r(l[c-1],u[c]));return l}function o(u,l){var c=Ze(u);if(l<0||l>=c.length)throw new di(l,c.length);try{return s(u,l)}catch(f){throw pn(f,qc)}}function s(u,l){var c,f,d;if(l<=0){var p=u[0][0];if(Array.isArray(p)){for(d=J2(u),f=[],c=0;c<d.length;c++)f[c]=s(d[c],l-1);return f}else return a(u)}else{for(f=[],c=0;c<u.length;c++)f[c]=s(u[c],l-1);return f}}}),$N="mean",xX=["typed","add","divide"],hM=H($N,xX,t=>{var{typed:e,add:r,divide:n}=t;return e($N,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":i,"...":function(s){if(tu(s))throw new TypeError("Scalar values expected in function mean");return a(s)}});function i(o,s){try{var u=Np(o,s,r),l=Array.isArray(o)?Ze(o):o.size();return n(u,l[s])}catch(c){throw pn(c,"mean")}}function a(o){var s,u=0;if(eo(o,function(l){try{s=s===void 0?l:r(s,l),u++}catch(c){throw pn(c,"mean",l)}}),u===0)throw new Error("Cannot calculate the mean of an empty array");return n(s,u)}}),LN="median",wX=["typed","add","divide","compare","partitionSelect"],NX=H(LN,wX,t=>{var{typed:e,add:r,divide:n,compare:i,partitionSelect:a}=t;function o(l){try{l=Et(l.valueOf());var c=l.length;if(c===0)throw new Error("Cannot calculate median of an empty array");if(c%2===0){for(var f=c/2-1,d=a(l,f+1),p=l[f],h=0;h<f;++h)i(l[h],p)>0&&(p=l[h]);return u(p,d)}else{var m=a(l,(c-1)/2);return s(m)}}catch(g){throw pn(g,"median")}}var s=e({"number | BigNumber | Complex | Unit":function(c){return c}}),u=e({"number | BigNumber | Complex | Unit, number | BigNumber | Complex | Unit":function(c,f){return n(r(c,f),2)}});return e(LN,{"Array | Matrix":o,"Array | Matrix, number | BigNumber":function(c,f){throw new Error("median(A, dim) is not yet supported")},"...":function(c){if(tu(c))throw new TypeError("Scalar values expected in function median");return o(c)}})}),zN="mad",AX=["typed","abs","map","median","subtract"],SX=H(zN,AX,t=>{var{typed:e,abs:r,map:n,median:i,subtract:a}=t;return e(zN,{"Array | Matrix":o,"...":function(u){return o(u)}});function o(s){if(s=Et(s.valueOf()),s.length===0)throw new Error("Cannot calculate median absolute deviation (mad) of an empty array");try{var u=i(s);return i(n(s,function(l){return r(a(l,u))}))}catch(l){throw l instanceof TypeError&&l.message.includes("median")?new TypeError(l.message.replace("median","mad")):pn(l,"mad")}}}),jh="unbiased",qN="variance",DX=["typed","add","subtract","multiply","divide","mapSlices","isNaN"],mM=H(qN,DX,t=>{var{typed:e,add:r,subtract:n,multiply:i,divide:a,mapSlices:o,isNaN:s}=t;return e(qN,{"Array | Matrix":function(f){return u(f,jh)},"Array | Matrix, string":u,"Array | Matrix, number | BigNumber":function(f,d){return l(f,d,jh)},"Array | Matrix, number | BigNumber, string":l,"...":function(f){return u(f,jh)}});function u(c,f){var d,p=0;if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");if(eo(c,function(g){try{d=d===void 0?g:r(d,g),p++}catch(y){throw pn(y,"variance",g)}}),p===0)throw new Error("Cannot calculate variance of an empty array");var h=a(d,p);if(d=void 0,eo(c,function(g){var y=n(g,h);d=d===void 0?i(y,y):r(d,i(y,y))}),s(d))return d;switch(f){case"uncorrected":return a(d,p);case"biased":return a(d,p+1);case"unbiased":{var m=ot(d)?d.mul(0):0;return p===1?m:a(d,p-1)}default:throw new Error('Unknown normalization "'+f+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}function l(c,f,d){try{if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");return o(c,f,p=>u(p,d))}catch(p){throw pn(p,"variance")}}}),UN="quantileSeq",EX=["typed","?bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger","mapSlices"],gM=H(UN,EX,t=>{var{typed:e,bignumber:r,add:n,subtract:i,divide:a,multiply:o,partitionSelect:s,compare:u,isInteger:l,smaller:c,smallerEq:f,larger:d,mapSlices:p}=t;return e(UN,{"Array | Matrix, number | BigNumber":(N,v)=>m(N,v,!1),"Array | Matrix, number | BigNumber, number":(N,v,w)=>h(N,v,!1,w,m),"Array | Matrix, number | BigNumber, boolean":m,"Array | Matrix, number | BigNumber, boolean, number":(N,v,w,x)=>h(N,v,w,x,m),"Array | Matrix, Array | Matrix":(N,v)=>g(N,v,!1),"Array | Matrix, Array | Matrix, number":(N,v,w)=>h(N,v,!1,w,g),"Array | Matrix, Array | Matrix, boolean":g,"Array | Matrix, Array | Matrix, boolean, number":(N,v,w,x)=>h(N,v,w,x,g)});function h(N,v,w,x,b){return p(N,x,S=>b(S,v,w))}function m(N,v,w){var x,b=N.valueOf();if(c(v,0))throw new Error("N/prob must be non-negative");if(f(v,1))return it(v)?y(b,v,w):r(y(b,v,w));if(d(v,1)){if(!l(v))throw new Error("N must be a positive integer");if(d(v,4294967295))throw new Error("N must be less than or equal to 2^32-1, as that is the maximum length of an Array");var S=n(v,1);x=[];for(var C=0;c(C,v);C++){var A=a(C+1,S);x.push(y(b,A,w))}return it(v)?x:r(x)}}function g(N,v,w){for(var x=N.valueOf(),b=v.valueOf(),S=[],C=0;C<b.length;++C)S.push(y(x,b[C],w));return S}function y(N,v,w){var x=Et(N),b=x.length;if(b===0)throw new Error("Cannot calculate quantile of an empty sequence");var S=it(v)?v*(b-1):v.times(b-1),C=it(v)?Math.floor(S):S.floor().toNumber(),A=it(v)?S%1:S.minus(C);if(l(S))return w?x[S]:s(x,it(v)?S:S.valueOf());var E,D;if(w)E=x[C],D=x[C+1];else{D=s(x,C+1),E=x[C];for(var M=0;M<C;++M)u(x[M],E)>0&&(E=x[M])}return n(o(E,i(1,A)),o(D,A))}}),HN="std",CX=["typed","map","sqrt","variance"],vM=H(HN,CX,t=>{var{typed:e,map:r,sqrt:n,variance:i}=t;return e(HN,{"Array | Matrix":a,"Array | Matrix, string":a,"Array | Matrix, number | BigNumber":a,"Array | Matrix, number | BigNumber, string":a,"...":function(s){return a(s)}});function a(o,s){if(o.length===0)throw new SyntaxError("Function std requires one or more parameters (0 provided)");try{var u=i.apply(null,arguments);return Jn(u)?r(u,n):n(u)}catch(l){throw l instanceof TypeError&&l.message.includes(" variance")?new TypeError(l.message.replace(" variance"," std")):l}}}),VN="corr",MX=["typed","matrix","mean","sqrt","sum","add","subtract","multiply","pow","divide"],TX=H(VN,MX,t=>{var{typed:e,matrix:r,sqrt:n,sum:i,add:a,subtract:o,multiply:s,pow:u,divide:l}=t;return e(VN,{"Array, Array":function(p,h){return c(p,h)},"Matrix, Matrix":function(p,h){var m=c(p.toArray(),h.toArray());return Array.isArray(m)?r(m):m}});function c(d,p){var h=[];if(Array.isArray(d[0])&&Array.isArray(p[0])){if(d.length!==p.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same length.");for(var m=0;m<d.length;m++){if(d[m].length!==p[m].length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");h.push(f(d[m],p[m]))}return h}else{if(d.length!==p.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");return f(d,p)}}function f(d,p){var h=d.length,m=i(d),g=i(p),y=d.reduce((b,S,C)=>a(b,s(S,p[C])),0),N=i(d.map(b=>u(b,2))),v=i(p.map(b=>u(b,2))),w=o(s(h,y),s(m,g)),x=n(s(o(s(h,N),u(m,2)),o(s(h,v),u(g,2))));return l(w,x)}}),WN="combinations",_X=["typed"],OX=H(WN,_X,t=>{var{typed:e}=t;return e(WN,{"number, number":gC,"BigNumber, BigNumber":function(n,i){var a=n.constructor,o,s,u=n.minus(i),l=new a(1);if(!jN(n)||!jN(i))throw new TypeError("Positive integer value expected in function combinations");if(i.gt(n))throw new TypeError("k must be less than n in function combinations");if(o=l,i.lt(u))for(s=l;s.lte(u);s=s.plus(l))o=o.times(i.plus(s)).dividedBy(s);else for(s=l;s.lte(i);s=s.plus(l))o=o.times(u.plus(s)).dividedBy(s);return o}})});function jN(t){return t.isInteger()&&t.gte(0)}var GN="combinationsWithRep",FX=["typed"],BX=H(GN,FX,t=>{var{typed:e}=t;return e(GN,{"number, number":function(n,i){if(!$e(n)||n<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(!$e(i)||i<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(n<1)throw new TypeError("k must be less than or equal to n + k - 1");if(i<n-1){var a=na(n,n+i-1);return a/na(1,i)}var o=na(i+1,n+i-1);return o/na(1,n-1)},"BigNumber, BigNumber":function(n,i){var a=n.constructor,o,s,u=new a(1),l=n.minus(u);if(!KN(n)||!KN(i))throw new TypeError("Positive integer value expected in function combinationsWithRep");if(n.lt(u))throw new TypeError("k must be less than or equal to n + k - 1 in function combinationsWithRep");if(o=u,i.lt(l))for(s=u;s.lte(l);s=s.plus(u))o=o.times(i.plus(s)).dividedBy(s);else for(s=u;s.lte(i);s=s.plus(u))o=o.times(l.plus(s)).dividedBy(s);return o}})});function KN(t){return t.isInteger()&&t.gte(0)}var JN="gamma",kX=["typed","config","multiplyScalar","pow","BigNumber","Complex"],IX=H(JN,kX,t=>{var{typed:e,config:r,multiplyScalar:n,pow:i,BigNumber:a,Complex:o}=t;function s(l){if(l.im===0)return bd(l.re);if(l.re<.5){var c=new o(1-l.re,-l.im),f=new o(Math.PI*l.re,Math.PI*l.im);return new o(Math.PI).div(f.sin()).div(s(c))}l=new o(l.re-1,l.im);for(var d=new o(Is[0],0),p=1;p<Is.length;++p){var h=new o(Is[p],0);d=d.add(h.div(l.add(p)))}var m=new o(l.re+yC+.5,l.im),g=Math.sqrt(2*Math.PI),y=m.pow(l.add(.5)),N=m.neg().exp();return d.mul(g).mul(y).mul(N)}return e(JN,{number:bd,Complex:s,BigNumber:function(c){if(c.isInteger())return c.isNegative()||c.isZero()?new a(1/0):u(c.minus(1));if(!c.isFinite())return new a(c.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected")}});function u(l){if(l<8)return new a([1,1,2,6,24,120,720,5040][l]);var c=r.precision+(Math.log(l.toNumber())|0),f=a.clone({precision:c});if(l%2===1)return l.times(u(new a(l-1)));for(var d=l,p=new f(l),h=l.toNumber();d>2;)d-=2,h+=d,p=p.times(h);return new a(p.toPrecision(a.precision))}}),YN="lgamma",RX=["Complex","typed"],PX=H(YN,RX,t=>{var{Complex:e,typed:r}=t,n=7,i=7,a=[-.029550653594771242,.00641025641025641,-.0019175269175269176,.0008417508417508417,-.0005952380952380953,.0007936507936507937,-.002777777777777778,.08333333333333333];return r(YN,{number:xd,Complex:o,BigNumber:function(){throw new Error("mathjs doesn't yet provide an implementation of the algorithm lgamma for BigNumber")}});function o(l){var c=6.283185307179586,f=1.1447298858494002,d=.1;if(l.isNaN())return new e(NaN,NaN);if(l.im===0)return new e(xd(l.re),0);if(l.re>=n||Math.abs(l.im)>=i)return s(l);if(l.re<=d){var p=S8(c,l.im)*Math.floor(.5*l.re+.25),h=l.mul(Math.PI).sin().log(),m=o(new e(1-l.re,-l.im));return new e(f,p).sub(h).sub(m)}else return l.im>=0?u(l):u(l.conjugate()).conjugate()}function s(l){for(var c=l.sub(.5).mul(l.log()).sub(l).add(bC),f=new e(1,0).div(l),d=f.div(l),p=a[0],h=a[1],m=2*d.re,g=d.re*d.re+d.im*d.im,y=2;y<8;y++){var N=h;h=-g*p+a[y],p=m*p+N}var v=f.mul(d.mul(p).add(h));return c.add(v)}function u(l){var c=0,f=0,d=l;for(l=l.add(1);l.re<=n;){d=d.mul(l);var p=d.im<0?1:0;p!==0&&f===0&&c++,f=p,l=l.add(1)}return s(l).sub(d.log()).sub(new e(0,c*2*Math.PI*1))}}),ZN="factorial",$X=["typed","gamma"],LX=H(ZN,$X,t=>{var{typed:e,gamma:r}=t;return e(ZN,{number:function(i){if(i<0)throw new Error("Value must be non-negative");return r(i+1)},BigNumber:function(i){if(i.isNegative())throw new Error("Value must be non-negative");return r(i.plus(1))},"Array | Matrix":e.referToSelf(n=>i=>st(i,n))})}),XN="kldivergence",zX=["typed","matrix","divide","sum","multiply","map","dotDivide","log","isNumeric"],qX=H(XN,zX,t=>{var{typed:e,matrix:r,divide:n,sum:i,multiply:a,map:o,dotDivide:s,log:u,isNumeric:l}=t;return e(XN,{"Array, Array":function(d,p){return c(r(d),r(p))},"Matrix, Array":function(d,p){return c(d,r(p))},"Array, Matrix":function(d,p){return c(r(d),p)},"Matrix, Matrix":function(d,p){return c(d,p)}});function c(f,d){var p=d.size().length,h=f.size().length;if(p>1)throw new Error("first object must be one dimensional");if(h>1)throw new Error("second object must be one dimensional");if(p!==h)throw new Error("Length of two vectors must be equal");var m=i(f);if(m===0)throw new Error("Sum of elements in first object must be non zero");var g=i(d);if(g===0)throw new Error("Sum of elements in second object must be non zero");var y=n(f,i(f)),N=n(d,i(d)),v=i(a(y,o(s(y,N),w=>u(w))));return l(v)?v:Number.NaN}}),QN="multinomial",UX=["typed","add","divide","multiply","factorial","isInteger","isPositive"],HX=H(QN,UX,t=>{var{typed:e,add:r,divide:n,multiply:i,factorial:a,isInteger:o,isPositive:s}=t;return e(QN,{"Array | Matrix":function(l){var c=0,f=1;return eo(l,function(d){if(!o(d)||!s(d))throw new TypeError("Positive integer value expected in function multinomial");c=r(c,d),f=i(f,a(d))}),n(a(c),f)}})}),eA="permutations",VX=["typed","factorial"],WX=H(eA,VX,t=>{var{typed:e,factorial:r}=t;return e(eA,{"number | BigNumber":r,"number, number":function(i,a){if(!$e(i)||i<0)throw new TypeError("Positive integer value expected in function permutations");if(!$e(a)||a<0)throw new TypeError("Positive integer value expected in function permutations");if(a>i)throw new TypeError("second argument k must be less than or equal to first argument n");return na(i-a+1,i)},"BigNumber, BigNumber":function(i,a){var o,s;if(!tA(i)||!tA(a))throw new TypeError("Positive integer value expected in function permutations");if(a.gt(i))throw new TypeError("second argument k must be less than or equal to first argument n");var u=i.mul(0).add(1);for(o=u,s=i.minus(a).plus(1);s.lte(i);s=s.plus(1))o=o.times(s);return o}})});function tA(t){return t.isInteger()&&t.gte(0)}var af={exports:{}},jX=af.exports,rA;function GX(){return rA||(rA=1,function(t){(function(e,r,n){function i(u){var l=this,c=s();l.next=function(){var f=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=f-(l.c=f|0)},l.c=1,l.s0=c(" "),l.s1=c(" "),l.s2=c(" "),l.s0-=c(u),l.s0<0&&(l.s0+=1),l.s1-=c(u),l.s1<0&&(l.s1+=1),l.s2-=c(u),l.s2<0&&(l.s2+=1),c=null}function a(u,l){return l.c=u.c,l.s0=u.s0,l.s1=u.s1,l.s2=u.s2,l}function o(u,l){var c=new i(u),f=l&&l.state,d=c.next;return d.int32=function(){return c.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,f&&(typeof f=="object"&&a(f,c),d.state=function(){return a(c,{})}),d}function s(){var u=4022871197,l=function(c){c=String(c);for(var f=0;f<c.length;f++){u+=c.charCodeAt(f);var d=.02519603282416938*u;u=d>>>0,d-=u,d*=u,u=d>>>0,d-=u,u+=d*4294967296}return(u>>>0)*23283064365386963e-26};return l}r&&r.exports?r.exports=o:this.alea=o})(jX,t)}(af)),af.exports}var of={exports:{}},KX=of.exports,nA;function JX(){return nA||(nA=1,function(t){(function(e,r,n){function i(s){var u=this,l="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var f=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^f^f>>>8},s===(s|0)?u.x=s:l+=s;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,u.next()}function a(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u}function o(s,u){var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,p=(l.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&a(c,l),f.state=function(){return a(l,{})}),f}r&&r.exports?r.exports=o:this.xor128=o})(KX,t)}(of)),of.exports}var sf={exports:{}},YX=sf.exports,iA;function ZX(){return iA||(iA=1,function(t){(function(e,r,n){function i(s){var u=this,l="";u.next=function(){var f=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^(f^f<<1))|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,s===(s|0)?u.x=s:l+=s;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,c==l.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function a(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u.v=s.v,u.d=s.d,u}function o(s,u){var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,p=(l.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&a(c,l),f.state=function(){return a(l,{})}),f}r&&r.exports?r.exports=o:this.xorwow=o})(YX,t)}(sf)),sf.exports}var uf={exports:{}},XX=uf.exports,aA;function QX(){return aA||(aA=1,function(t){(function(e,r,n){function i(s){var u=this;u.next=function(){var c=u.x,f=u.i,d,p;return d=c[f],d^=d>>>7,p=d^d<<24,d=c[f+1&7],p^=d^d>>>10,d=c[f+3&7],p^=d^d>>>3,d=c[f+4&7],p^=d^d<<7,d=c[f+7&7],d=d^d<<13,p^=d^d<<9,c[f]=p,u.i=f+1&7,p};function l(c,f){var d,p=[];if(f===(f|0))p[0]=f;else for(f=""+f,d=0;d<f.length;++d)p[d&7]=p[d&7]<<15^f.charCodeAt(d)+p[d+1&7]<<13;for(;p.length<8;)p.push(0);for(d=0;d<8&&p[d]===0;++d);for(d==8?p[7]=-1:p[d],c.x=p,c.i=0,d=256;d>0;--d)c.next()}l(u,s)}function a(s,u){return u.x=s.x.slice(),u.i=s.i,u}function o(s,u){s==null&&(s=+new Date);var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,p=(l.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},f.int32=l.next,f.quick=f,c&&(c.x&&a(c,l),f.state=function(){return a(l,{})}),f}r&&r.exports?r.exports=o:this.xorshift7=o})(XX,t)}(uf)),uf.exports}var lf={exports:{}},eQ=lf.exports,oA;function tQ(){return oA||(oA=1,function(t){(function(e,r,n){function i(s){var u=this;u.next=function(){var c=u.w,f=u.X,d=u.i,p,h;return u.w=c=c+1640531527|0,h=f[d+34&127],p=f[d=d+1&127],h^=h<<13,p^=p<<17,h^=h>>>15,p^=p>>>12,h=f[d]=h^p,u.i=d,h+(c^c>>>16)|0};function l(c,f){var d,p,h,m,g,y=[],N=128;for(f===(f|0)?(p=f,f=null):(f=f+"\0",p=0,N=Math.max(N,f.length)),h=0,m=-32;m<N;++m)f&&(p^=f.charCodeAt((m+32)%f.length)),m===0&&(g=p),p^=p<<10,p^=p>>>15,p^=p<<4,p^=p>>>13,m>=0&&(g=g+1640531527|0,d=y[m&127]^=p+g,h=d==0?h+1:0);for(h>=128&&(y[(f&&f.length||0)&127]=-1),h=127,m=4*128;m>0;--m)p=y[h+34&127],d=y[h=h+1&127],p^=p<<13,d^=d<<17,p^=p>>>15,d^=d>>>12,y[h]=p^d;c.w=g,c.X=y,c.i=h}l(u,s)}function a(s,u){return u.i=s.i,u.w=s.w,u.X=s.X.slice(),u}function o(s,u){s==null&&(s=+new Date);var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,p=(l.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},f.int32=l.next,f.quick=f,c&&(c.X&&a(c,l),f.state=function(){return a(l,{})}),f}r&&r.exports?r.exports=o:this.xor4096=o})(eQ,t)}(lf)),lf.exports}var cf={exports:{}},rQ=cf.exports,sA;function nQ(){return sA||(sA=1,function(t){(function(e,r,n){function i(s){var u=this,l="";u.next=function(){var f=u.b,d=u.c,p=u.d,h=u.a;return f=f<<25^f>>>7^d,d=d-p|0,p=p<<24^p>>>8^h,h=h-f|0,u.b=f=f<<20^f>>>12^d,u.c=d=d-p|0,u.d=p<<16^d>>>16^h,u.a=h-f|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,s===Math.floor(s)?(u.a=s/4294967296|0,u.b=s|0):l+=s;for(var c=0;c<l.length+20;c++)u.b^=l.charCodeAt(c)|0,u.next()}function a(s,u){return u.a=s.a,u.b=s.b,u.c=s.c,u.d=s.d,u}function o(s,u){var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,p=(l.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&a(c,l),f.state=function(){return a(l,{})}),f}r&&r.exports?r.exports=o:this.tychei=o})(rQ,t)}(cf)),cf.exports}var ff={exports:{}};const iQ={},aQ=Object.freeze(Object.defineProperty({__proto__:null,default:iQ},Symbol.toStringTag,{value:"Module"})),oQ=UU(aQ);var sQ=ff.exports,uA;function uQ(){return uA||(uA=1,function(t){(function(e,r,n){var i=256,a=6,o=52,s="random",u=n.pow(i,a),l=n.pow(2,o),c=l*2,f=i-1,d;function p(w,x,b){var S=[];x=x==!0?{entropy:!0}:x||{};var C=y(g(x.entropy?[w,v(r)]:w??N(),3),S),A=new h(S),E=function(){for(var D=A.g(a),M=u,F=0;D<l;)D=(D+F)*i,M*=i,F=A.g(1);for(;D>=c;)D/=2,M/=2,F>>>=1;return(D+F)/M};return E.int32=function(){return A.g(4)|0},E.quick=function(){return A.g(4)/4294967296},E.double=E,y(v(A.S),r),(x.pass||b||function(D,M,F,I){return I&&(I.S&&m(I,A),D.state=function(){return m(A,{})}),F?(n[s]=D,M):D})(E,C,"global"in x?x.global:this==n,x.state)}function h(w){var x,b=w.length,S=this,C=0,A=S.i=S.j=0,E=S.S=[];for(b||(w=[b++]);C<i;)E[C]=C++;for(C=0;C<i;C++)E[C]=E[A=f&A+w[C%b]+(x=E[C])],E[A]=x;(S.g=function(D){for(var M,F=0,I=S.i,P=S.j,T=S.S;D--;)M=T[I=f&I+1],F=F*i+T[f&(T[I]=T[P=f&P+M])+(T[P]=M)];return S.i=I,S.j=P,F})(i)}function m(w,x){return x.i=w.i,x.j=w.j,x.S=w.S.slice(),x}function g(w,x){var b=[],S=typeof w,C;if(x&&S=="object")for(C in w)try{b.push(g(w[C],x-1))}catch{}return b.length?b:S=="string"?w:w+"\0"}function y(w,x){for(var b=w+"",S,C=0;C<b.length;)x[f&C]=f&(S^=x[f&C]*19)+b.charCodeAt(C++);return v(x)}function N(){try{var w;return d&&(w=d.randomBytes)?w=w(i):(w=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(w)),v(w)}catch{var x=e.navigator,b=x&&x.plugins;return[+new Date,e,b,e.screen,v(r)]}}function v(w){return String.fromCharCode.apply(0,w)}if(y(n.random(),r),t.exports){t.exports=p;try{d=oQ}catch{}}else n["seed"+s]=p})(typeof self<"u"?self:sQ,[],Math)}(ff)),ff.exports}var Gh,lA;function lQ(){if(lA)return Gh;lA=1;var t=GX(),e=JX(),r=ZX(),n=QX(),i=tQ(),a=nQ(),o=uQ();return o.alea=t,o.xor128=e,o.xorwow=r,o.xorshift7=n,o.xor4096=i,o.tychei=a,Gh=o,Gh}var cQ=lQ();const yM=Iv(cQ);var fQ=yM(Date.now());function Ys(t){var e;function r(i){e=i===null?fQ:yM(String(i))}r(t);function n(){return e()}return n}var cA="pickRandom",dQ=["typed","config","?on"],pQ=H(cA,dQ,t=>{var{typed:e,config:r,on:n}=t,i=Ys(r.randomSeed);return n&&n("config",function(o,s){o.randomSeed!==s.randomSeed&&(i=Ys(o.randomSeed))}),e(cA,{"Array | Matrix":function(s){return a(s,{})},"Array | Matrix, Object":function(s,u){return a(s,u)},"Array | Matrix, number":function(s,u){return a(s,{number:u})},"Array | Matrix, Array | Matrix":function(s,u){return a(s,{weights:u})},"Array | Matrix, Array | Matrix, number":function(s,u,l){return a(s,{number:l,weights:u})},"Array | Matrix, number, Array | Matrix":function(s,u,l){return a(s,{number:u,weights:l})}});function a(o,s){var{number:u,weights:l,elementWise:c=!0}=s,f=typeof u>"u";f&&(u=1);var d=We(o)?o.create:We(l)?l.create:null;o=o.valueOf(),l&&(l=l.valueOf()),c===!0&&(o=Et(o),l=Et(l));var p=0;if(typeof l<"u"){if(l.length!==o.length)throw new Error("Weights must have the same length as possibles");for(var h=0,m=l.length;h<m;h++){if(!it(l[h])||l[h]<0)throw new Error("Weights must be an array of positive numbers");p+=l[h]}}for(var g=o.length,y=[],N;y.length<u;){if(typeof l>"u")N=o[Math.floor(i()*g)];else for(var v=i()*p,w=0,x=o.length;w<x;w++)if(v-=l[w],v<0){N=o[w];break}y.push(N)}return f?y[0]:d?d(y):y}});function Pv(t,e){var r=[];if(t=t.slice(0),t.length>1)for(var n=0,i=t.shift();n<i;n++)r.push(Pv(t,e));else for(var a=0,o=t.shift();a<o;a++)r.push(e());return r}var fA="random",hQ=["typed","config","?on"],mQ=H(fA,hQ,t=>{var{typed:e,config:r,on:n}=t,i=Ys(r.randomSeed);return n&&n("config",function(s,u){s.randomSeed!==u.randomSeed&&(i=Ys(s.randomSeed))}),e(fA,{"":()=>o(0,1),number:s=>o(0,s),"number, number":(s,u)=>o(s,u),"Array | Matrix":s=>a(s,0,1),"Array | Matrix, number":(s,u)=>a(s,0,u),"Array | Matrix, number, number":(s,u,l)=>a(s,u,l)});function a(s,u,l){var c=Pv(s.valueOf(),()=>o(u,l));return We(s)?s.create(c,"number"):c}function o(s,u){return s+i()*(u-s)}}),dA="randomInt",gQ=["typed","config","log2","?on"],vQ=2n**30n,yQ=H(dA,gQ,t=>{var{typed:e,config:r,log2:n,on:i}=t,a=Ys(r.randomSeed);return i&&i("config",function(l,c){l.randomSeed!==c.randomSeed&&(a=Ys(l.randomSeed))}),e(dA,{"":()=>s(0,2),number:l=>s(0,l),"number, number":(l,c)=>s(l,c),bigint:l=>u(0n,l),"bigint, bigint":u,"Array | Matrix":l=>o(l,0,1),"Array | Matrix, number":(l,c)=>o(l,0,c),"Array | Matrix, number, number":(l,c,f)=>o(l,c,f)});function o(l,c,f){var d=Pv(l.valueOf(),()=>s(c,f));return We(l)?l.create(d,"number"):d}function s(l,c){return Math.floor(l+a()*(c-l))}function u(l,c){var f=c-l;if(f<=vQ)return l+BigInt(s(0,Number(f)));for(var d=n(f),p=f;p>=f;){p=0n;for(var h=0;h<d;++h)p=2n*p+(a()<.5?0n:1n)}return l+p}}),pA="stirlingS2",bQ=["typed","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","factorial","combinations","isNegative","isInteger","number","?bignumber","larger"],xQ=H(pA,bQ,t=>{var{typed:e,addScalar:r,subtractScalar:n,multiplyScalar:i,divideScalar:a,pow:o,factorial:s,combinations:u,isNegative:l,isInteger:c,number:f,bignumber:d,larger:p}=t,h=[],m=[];return e(pA,{"number | BigNumber, number | BigNumber":function(y,N){if(!c(y)||l(y)||!c(N)||l(N))throw new TypeError("Non-negative integer value expected in function stirlingS2");if(p(N,y))throw new TypeError("k must be less than or equal to n in function stirlingS2");var v=!(it(y)&&it(N)),w=v?m:h,x=v?d:f,b=f(y),S=f(N);if(w[b]&&w[b].length>S)return w[b][S];for(var C=0;C<=b;++C)if(w[C]||(w[C]=[x(C===0?1:0)]),C!==0)for(var A=w[C],E=w[C-1],D=A.length;D<=C&&D<=S;++D)D===C?A[D]=1:A[D]=r(i(x(D),E[D]),E[D-1]);return w[b][S]}})}),hA="bellNumbers",wQ=["typed","addScalar","isNegative","isInteger","stirlingS2"],NQ=H(hA,wQ,t=>{var{typed:e,addScalar:r,isNegative:n,isInteger:i,stirlingS2:a}=t;return e(hA,{"number | BigNumber":function(s){if(!i(s)||n(s))throw new TypeError("Non-negative integer value expected in function bellNumbers");for(var u=0,l=0;l<=s;l++)u=r(u,a(s,l));return u}})}),mA="catalan",AQ=["typed","addScalar","divideScalar","multiplyScalar","combinations","isNegative","isInteger"],SQ=H(mA,AQ,t=>{var{typed:e,addScalar:r,divideScalar:n,multiplyScalar:i,combinations:a,isNegative:o,isInteger:s}=t;return e(mA,{"number | BigNumber":function(l){if(!s(l)||o(l))throw new TypeError("Non-negative integer value expected in function catalan");return n(a(i(l,2),l),r(l,1))}})}),gA="composition",DQ=["typed","addScalar","combinations","isNegative","isPositive","isInteger","larger"],EQ=H(gA,DQ,t=>{var{typed:e,addScalar:r,combinations:n,isPositive:i,isNegative:a,isInteger:o,larger:s}=t;return e(gA,{"number | BigNumber, number | BigNumber":function(l,c){if(!o(l)||!i(l)||!o(c)||!i(c))throw new TypeError("Positive integer value expected in function composition");if(s(c,l))throw new TypeError("k must be less than or equal to n in function composition");return n(r(l,-1),r(c,-1))}})}),vA="leafCount",CQ=["parse","typed"],MQ=H(vA,CQ,t=>{var{parse:e,typed:r}=t;function n(i){var a=0;return i.forEach(o=>{a+=n(o)}),a||1}return r(vA,{Node:function(a){return n(a)}})});function yA(t){return wt(t)||ir(t)&&t.isUnary()&&wt(t.args[0])}function _d(t){return!!(wt(t)||(Za(t)||ir(t))&&t.args.every(_d)||da(t)&&_d(t.content))}function bA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Kh(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bA(Object(r),!0).forEach(function(n){cr(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var TQ="simplifyUtil",_Q=["FunctionNode","OperatorNode","SymbolNode"],$v=H(TQ,_Q,t=>{var{FunctionNode:e,OperatorNode:r,SymbolNode:n}=t,i=!0,a=!1,o="defaultF",s={add:{trivial:i,total:i,commutative:i,associative:i},unaryPlus:{trivial:i,total:i,commutative:i,associative:i},subtract:{trivial:a,total:i,commutative:a,associative:a},multiply:{trivial:i,total:i,commutative:i,associative:i},divide:{trivial:a,total:i,commutative:a,associative:a},paren:{trivial:i,total:i,commutative:i,associative:a},defaultF:{trivial:a,total:i,commutative:a,associative:a}},u={divide:{total:a},log:{total:a}},l={subtract:{total:a},abs:{trivial:i},log:{total:i}};function c(v,w){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:s,b=o;if(typeof v=="string"?b=v:ir(v)?b=v.fn.toString():Za(v)?b=v.name:da(v)&&(b="paren"),Ie(x,b)){var S=x[b];if(Ie(S,w))return S[w];if(Ie(s,b))return s[b][w]}if(Ie(x,o)){var C=x[o];return Ie(C,w)?C[w]:s[o][w]}if(Ie(s,b)){var A=s[b];if(Ie(A,w))return A[w]}return s[o][w]}function f(v){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s;return c(v,"commutative",w)}function d(v){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s;return c(v,"associative",w)}function p(v,w){var x=Kh({},v);for(var b in w)Ie(v,b)?x[b]=Kh(Kh({},w[b]),v[b]):x[b]=w[b];return x}function h(v,w){if(!v.args||v.args.length===0)return v;v.args=m(v,w);for(var x=0;x<v.args.length;x++)h(v.args[x],w)}function m(v,w){var x,b=[],S=function(A){for(var E=0;E<A.args.length;E++){var D=A.args[E];ir(D)&&x===D.op?S(D):b.push(D)}};return d(v,w)?(x=v.op,S(v),b):v.args}function g(v,w){if(!(!v.args||v.args.length===0)){for(var x=N(v),b=v.args.length,S=0;S<b;S++)g(v.args[S],w);if(b>2&&d(v,w)){for(var C=v.args.pop();v.args.length>0;)C=x([v.args.pop(),C]);v.args=C.args}}}function y(v,w){if(!(!v.args||v.args.length===0)){for(var x=N(v),b=v.args.length,S=0;S<b;S++)y(v.args[S],w);if(b>2&&d(v,w)){for(var C=v.args.shift();v.args.length>0;)C=x([C,v.args.shift()]);v.args=C.args}}}function N(v){return ir(v)?function(w){try{return new r(v.op,v.fn,w,v.implicit)}catch(x){return console.error(x),[]}}:function(w){return new e(new n(v.name),w)}}return{createMakeNodeFunction:N,hasProperty:c,isCommutative:f,isAssociative:d,mergeContext:p,flatten:h,allChildren:m,unflattenr:g,unflattenl:y,defaultContext:s,realContext:u,positiveContext:l}}),OQ="simplify",FQ=["typed","parse","equal","resolve","simplifyConstant","simplifyCore","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode","replacer"],BQ=H(OQ,FQ,t=>{var{typed:e,parse:r,equal:n,resolve:i,simplifyConstant:a,simplifyCore:o,AccessorNode:s,ArrayNode:u,ConstantNode:l,FunctionNode:c,IndexNode:f,ObjectNode:d,OperatorNode:p,ParenthesisNode:h,SymbolNode:m,replacer:g}=t,{hasProperty:y,isCommutative:N,isAssociative:v,mergeContext:w,flatten:x,unflattenr:b,unflattenl:S,createMakeNodeFunction:C,defaultContext:A,realContext:E,positiveContext:D}=$v({FunctionNode:c,OperatorNode:p,SymbolNode:m});e.addConversion({from:"Object",to:"Map",convert:Bs});var M=e("simplify",{Node:W,"Node, Map":(V,U)=>W(V,!1,U),"Node, Map, Object":(V,U,K)=>W(V,!1,U,K),"Node, Array":W,"Node, Array, Map":W,"Node, Array, Map, Object":W});e.removeConversion({from:"Object",to:"Map",convert:Bs}),M.defaultContext=A,M.realContext=E,M.positiveContext=D;function F(V){return V.transform(function(U){return da(U)?F(U.content):U})}var I={true:!0,false:!0,e:!0,i:!0,Infinity:!0,LN2:!0,LN10:!0,LOG2E:!0,LOG10E:!0,NaN:!0,phi:!0,pi:!0,SQRT1_2:!0,SQRT2:!0,tau:!0};M.rules=[o,{l:"log(e)",r:"1"},{s:"n-n1 -> n+-n1",assuming:{subtract:{total:!0}}},{s:"n-n -> 0",assuming:{subtract:{total:!1}}},{s:"-(cl*v) -> v * (-cl)",assuming:{multiply:{commutative:!0},subtract:{total:!0}}},{s:"-(cl*v) -> (-cl) * v",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{s:"-(v*cl) -> v * (-cl)",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{l:"-(n1/n2)",r:"-n1/n2"},{l:"-v",r:"v * (-1)"},{l:"(n1 + n2)*(-1)",r:"n1*(-1) + n2*(-1)",repeat:!0},{l:"n/n1^n2",r:"n*n1^-n2"},{l:"n/n1",r:"n*n1^-1"},{s:"(n1*n2)^n3 -> n1^n3 * n2^n3",assuming:{multiply:{commutative:!0}}},{s:"(n1*n2)^(-1) -> n2^(-1) * n1^(-1)",assuming:{multiply:{commutative:!1}}},{s:"(n ^ n1) ^ n2 -> n ^ (n1 * n2)",assuming:{divide:{total:!0}}},{l:" vd   * ( vd   * n1 + n2)",r:"vd^2       * n1 +  vd   * n2"},{s:" vd   * (vd^n4 * n1 + n2)   ->  vd^(1+n4)  * n1 +  vd   * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * ( vd   * n1 + n2)   ->  vd^(n3+1)  * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * (vd^n4 * n1 + n2)   ->  vd^(n3+n4) * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{l:"n*n",r:"n^2"},{s:"n * n^n1 -> n^(n1+1)",assuming:{divide:{total:!0}}},{s:"n^n1 * n^n2 -> n^(n1+n2)",assuming:{divide:{total:!0}}},a,{s:"n+n -> 2*n",assuming:{add:{total:!0}}},{l:"n+-n",r:"0"},{l:"vd*n + vd",r:"vd*(n+1)"},{l:"n3*n1 + n3*n2",r:"n3*(n1+n2)"},{l:"n3^(-n4)*n1 +   n3  * n2",r:"n3^(-n4)*(n1 + n3^(n4+1) *n2)"},{l:"n3^(-n4)*n1 + n3^n5 * n2",r:"n3^(-n4)*(n1 + n3^(n4+n5)*n2)"},{s:"n*vd + vd -> (n+1)*vd",assuming:{multiply:{commutative:!1}}},{s:"vd + n*vd -> (1+n)*vd",assuming:{multiply:{commutative:!1}}},{s:"n1*n3 + n2*n3 -> (n1+n2)*n3",assuming:{multiply:{commutative:!1}}},{s:"n^n1 * n -> n^(n1+1)",assuming:{divide:{total:!0},multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3    -> (n1 + n2*n3^(n4 +  1))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3^n5 -> (n1 + n2*n3^(n4 + n5))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{l:"n*cd + cd",r:"(n+1)*cd"},{s:"cd*n + cd -> cd*(n+1)",assuming:{multiply:{commutative:!1}}},{s:"cd + cd*n -> cd*(1+n)",assuming:{multiply:{commutative:!1}}},a,{s:"(-n)*n1 -> -(n*n1)",assuming:{subtract:{total:!0}}},{s:"n1*(-n) -> -(n1*n)",assuming:{subtract:{total:!0},multiply:{commutative:!1}}},{s:"ce+ve -> ve+ce",assuming:{add:{commutative:!0}},imposeContext:{add:{commutative:!1}}},{s:"vd*cd -> cd*vd",assuming:{multiply:{commutative:!0}},imposeContext:{multiply:{commutative:!1}}},{l:"n+-n1",r:"n-n1"},{l:"n+-(n1)",r:"n-(n1)"},{s:"n*(n1^-1) -> n/n1",assuming:{multiply:{commutative:!0}}},{s:"n*n1^-n2 -> n/n1^n2",assuming:{multiply:{commutative:!0}}},{s:"n^-1 -> 1/n",assuming:{multiply:{commutative:!0}}},{l:"n^1",r:"n"},{s:"n*(n1/n2) -> (n*n1)/n2",assuming:{multiply:{associative:!0}}},{s:"n-(n1+n2) -> n-n1-n2",assuming:{addition:{associative:!0,commutative:!0}}},{l:"1*n",r:"n",imposeContext:{multiply:{commutative:!0}}},{s:"n1/(n2/n3) -> (n1*n3)/n2",assuming:{multiply:{associative:!0}}},{l:"n1/(-n2)",r:"-n1/n2"}];function P(V,U){var K={};if(V.s){var ae=V.s.split("->");if(ae.length===2)K.l=ae[0],K.r=ae[1];else throw SyntaxError("Could not parse rule: "+V.s)}else K.l=V.l,K.r=V.r;K.l=F(r(K.l)),K.r=F(r(K.r));for(var B of["imposeContext","repeat","assuming"])B in V&&(K[B]=V[B]);if(V.evaluate&&(K.evaluate=r(V.evaluate)),v(K.l,U)){var q=!N(K.l,U),j;q&&(j=O());var oe=C(K.l),k=O();K.expanded={},K.expanded.l=oe([K.l,k]),x(K.expanded.l,U),b(K.expanded.l,U),K.expanded.r=oe([K.r,k]),q&&(K.expandedNC1={},K.expandedNC1.l=oe([j,K.l]),K.expandedNC1.r=oe([j,K.r]),K.expandedNC2={},K.expandedNC2.l=oe([j,K.expanded.l]),K.expandedNC2.r=oe([j,K.expanded.r]))}return K}function T(V,U){for(var K=[],ae=0;ae<V.length;ae++){var B=V[ae],q=void 0,j=typeof B;switch(j){case"string":B={s:B};case"object":q=P(B,U);break;case"function":q=B;break;default:throw TypeError("Unsupported type of rule: "+j)}K.push(q)}return K}var $=0;function O(){return new m("_p"+$++)}function W(V,U){var K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:wl(),ae=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},B=ae.consoleDebug;U=T(U||M.rules,ae.context);var q=i(V,K);q=F(q);for(var j={},oe=q.toString({parenthesis:"all"});!j[oe];){j[oe]=!0,$=0;var k=oe;B&&console.log("Working on: ",oe);for(var z=0;z<U.length;z++){var Y="";if(typeof U[z]=="function"?(q=U[z](q,ae),B&&(Y=U[z].name)):(x(q,ae.context),q=ie(q,U[z],ae.context),B&&(Y="".concat(U[z].l.toString()," -> ").concat(U[z].r.toString()))),B){var ne=q.toString({parenthesis:"all"});ne!==k&&(console.log("Applying",Y,"produced",ne),k=ne)}S(q,ae.context)}oe=q.toString({parenthesis:"all"})}return q}function R(V,U,K){var ae=V;if(V)for(var B=0;B<V.length;++B){var q=ie(V[B],U,K);q!==V[B]&&(ae===V&&(ae=V.slice()),ae[B]=q)}return ae}function ie(V,U,K){if(U.assuming){for(var ae in U.assuming)for(var B in U.assuming[ae])if(y(ae,B,K)!==U.assuming[ae][B])return V}var q=w(U.imposeContext,K),j=V;if(j instanceof p||j instanceof c){var oe=R(j.args,U,K);oe!==j.args&&(j=j.clone(),j.args=oe)}else if(j instanceof h){if(j.content){var k=ie(j.content,U,K);k!==j.content&&(j=new h(k))}}else if(j instanceof u){var z=R(j.items,U,K);z!==j.items&&(j=new u(z))}else if(j instanceof s){var Y=j.object;j.object&&(Y=ie(j.object,U,K));var ne=j.index;j.index&&(ne=ie(j.index,U,K)),(Y!==j.object||ne!==j.index)&&(j=new s(Y,ne))}else if(j instanceof f){var se=R(j.dimensions,U,K);se!==j.dimensions&&(j=new f(se))}else if(j instanceof d){var ue=!1,ve={};for(var L in j.properties)ve[L]=ie(j.properties[L],U,K),ve[L]!==j.properties[L]&&(ue=!0);ue&&(j=new d(ve))}var J=U.r,re=de(U.l,j,q)[0];if(!re&&U.expanded&&(J=U.expanded.r,re=de(U.expanded.l,j,q)[0]),!re&&U.expandedNC1&&(J=U.expandedNC1.r,re=de(U.expandedNC1.l,j,q)[0],re||(J=U.expandedNC2.r,re=de(U.expandedNC2.l,j,q)[0])),re){var fe=j.implicit;j=J.clone(),fe&&"implicit"in J&&(j.implicit=!0),j=j.transform(function(he){return he.isSymbolNode&&Ie(re.placeholders,he.name)?re.placeholders[he.name].clone():he})}return U.repeat&&j!==V&&(j=ie(j,U,K)),j}function te(V,U){var K=[],ae,B,q=C(V);if(N(V,U))for(var j=0;j<V.args.length;j++)B=V.args.slice(0),B.splice(j,1),ae=B.length===1?B[0]:q(B),K.push(q([V.args[j],ae]));else for(var oe=1;oe<V.args.length;oe++){var k=V.args[0];oe>1&&(k=q(V.args.slice(0,oe))),B=V.args.slice(oe),ae=B.length===1?B[0]:q(B),K.push(q([k,ae]))}return K}function Z(V,U){var K={placeholders:{}};if(!V.placeholders&&!U.placeholders)return K;if(V.placeholders){if(!U.placeholders)return V}else return U;for(var ae in V.placeholders)if(Ie(V.placeholders,ae)&&(K.placeholders[ae]=V.placeholders[ae],Ie(U.placeholders,ae)&&!G(V.placeholders[ae],U.placeholders[ae])))return null;for(var B in U.placeholders)Ie(U.placeholders,B)&&(K.placeholders[B]=U.placeholders[B]);return K}function X(V,U){var K=[];if(V.length===0||U.length===0)return K;for(var ae,B=0;B<V.length;B++)for(var q=0;q<U.length;q++)ae=Z(V[B],U[q]),ae&&K.push(ae);return K}function pe(V){if(V.length===0)return V;for(var U=V.reduce(X),K=[],ae={},B=0;B<U.length;B++){var q=JSON.stringify(U[B],g);ae[q]||(ae[q]=!0,K.push(U[B]))}return K}function de(V,U,K,ae){var B=[{placeholders:{}}];if(V instanceof p&&U instanceof p||V instanceof c&&U instanceof c){if(V instanceof p){if(V.op!==U.op||V.fn!==U.fn)return[]}else if(V instanceof c&&V.name!==U.name)return[];if(U.args.length===1&&V.args.length===1||!v(U,K)&&U.args.length===V.args.length||ae){for(var q=[],j=0;j<V.args.length;j++){var oe=de(V.args[j],U.args[j],K);if(oe.length===0)break;q.push(oe)}if(q.length!==V.args.length){if(!N(U,K)||V.args.length===1)return[];if(V.args.length>2)throw new Error("permuting >2 commutative non-associative rule arguments not yet implemented");var k=de(V.args[0],U.args[1],K);if(k.length===0)return[];var z=de(V.args[1],U.args[0],K);if(z.length===0)return[];q=[k,z]}B=pe(q)}else if(U.args.length>=2&&V.args.length===2){for(var Y=te(U,K),ne=[],se=0;se<Y.length;se++){var ue=de(V,Y[se],K,!0);ne=ne.concat(ue)}return ne}else{if(V.args.length>2)throw Error("Unexpected non-binary associative function: "+V.toString());return[]}}else if(V instanceof m){if(V.name.length===0)throw new Error("Symbol in rule has 0 length...!?");if(I[V.name]){if(V.name!==U.name)return[]}else switch(V.name[1]>="a"&&V.name[1]<="z"?V.name.substring(0,2):V.name[0]){case"n":case"_p":B[0].placeholders[V.name]=U;break;case"c":case"cl":if(wt(U))B[0].placeholders[V.name]=U;else return[];break;case"v":if(!wt(U))B[0].placeholders[V.name]=U;else return[];break;case"vl":if(xr(U))B[0].placeholders[V.name]=U;else return[];break;case"cd":if(yA(U))B[0].placeholders[V.name]=U;else return[];break;case"vd":if(!yA(U))B[0].placeholders[V.name]=U;else return[];break;case"ce":if(_d(U))B[0].placeholders[V.name]=U;else return[];break;case"ve":if(!_d(U))B[0].placeholders[V.name]=U;else return[];break;default:throw new Error("Invalid symbol in rule: "+V.name)}}else if(V instanceof l){if(!n(V.value,U.value))return[]}else return[];return B}function G(V,U){if(V instanceof l&&U instanceof l){if(!n(V.value,U.value))return!1}else if(V instanceof m&&U instanceof m){if(V.name!==U.name)return!1}else if(V instanceof p&&U instanceof p||V instanceof c&&U instanceof c){if(V instanceof p){if(V.op!==U.op||V.fn!==U.fn)return!1}else if(V instanceof c&&V.name!==U.name)return!1;if(V.args.length!==U.args.length)return!1;for(var K=0;K<V.args.length;K++)if(!G(V.args[K],U.args[K]))return!1}else return!1;return!0}return M}),kQ="simplifyConstant",IQ=["typed","config","mathWithTransform","matrix","?fraction","?bignumber","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode"],RQ=H(kQ,IQ,t=>{var{typed:e,config:r,mathWithTransform:n,matrix:i,fraction:a,bignumber:o,AccessorNode:s,ArrayNode:u,ConstantNode:l,FunctionNode:c,IndexNode:f,ObjectNode:d,OperatorNode:p,SymbolNode:h}=t,{isCommutative:m,isAssociative:g,allChildren:y,createMakeNodeFunction:N}=$v({FunctionNode:c,OperatorNode:p,SymbolNode:h}),v=e("simplifyConstant",{Node:P=>S(I(P,{})),"Node, Object":function(T,$){return S(I(T,$))}});function w(P){return Il(P)?P.valueOf():P instanceof Array?P.map(w):We(P)?i(w(P.valueOf())):P}function x(P,T,$){try{return n[P].apply(null,T)}catch{return T=T.map(w),A(n[P].apply(null,T),$)}}var b=e({Fraction:D,number:function(T){return T<0?E(new l(-T)):new l(T)},BigNumber:function(T){return T<0?E(new l(-T)):new l(T)},bigint:function(T){return T<0n?E(new l(-T)):new l(T)},Complex:function(T){throw new Error("Cannot convert Complex number to Node")},string:function(T){return new l(T)},Matrix:function(T){return new u(T.valueOf().map($=>b($)))}});function S(P){return Ot(P)?P:b(P)}function C(P,T){var $=T&&T.exactFractions!==!1;if($&&isFinite(P)&&a){var O=a(P),W=T&&typeof T.fractionsLimit=="number"?T.fractionsLimit:1/0;if(O.valueOf()===P&&O.n<W&&O.d<W)return O}return P}var A=e({"string, Object":function(T,$){var O=io(T,r);if(O==="BigNumber")return o===void 0&&Fv(),o(T);if(O==="bigint")return BigInt(T);if(O==="Fraction")return a===void 0&&ZC(),a(T);var W=parseFloat(T);return C(W,$)},"Fraction, Object":function(T,$){return T},"BigNumber, Object":function(T,$){return T},"number, Object":function(T,$){return C(T,$)},"bigint, Object":function(T,$){return T},"Complex, Object":function(T,$){return T.im!==0?T:C(T.re,$)},"Matrix, Object":function(T,$){return i(C(T.valueOf()))},"Array, Object":function(T,$){return T.map(C)}});function E(P){return new p("-","unaryMinus",[P])}function D(P){var T=W=>r.number==="BigNumber"&&o?o(W):Number(W),$=P.s*P.n,O=$<0n?new p("-","unaryMinus",[new l(-T($))]):new l(T($));return P.d===1n?O:new p("/","divide",[O,new l(T(P.d))])}function M(P,T,$){if(!eu(T))return new s(S(P),S(T));if(zn(P)||We(P)){for(var O=Array.from(T.dimensions);O.length>0;)if(wt(O[0])&&typeof O[0].value!="string"){var W=A(O.shift().value,$);zn(P)?P=P.items[W-1]:(P=P.valueOf()[W-1],P instanceof Array&&(P=i(P)))}else if(O.length>1&&wt(O[1])&&typeof O[1].value!="string"){var R=A(O[1].value,$),ie=[],te=zn(P)?P.items:P.valueOf();for(var Z of te)if(zn(Z))ie.push(Z.items[R-1]);else if(We(P))ie.push(Z[R-1]);else break;if(ie.length===te.length)zn(P)?P=new u(ie):P=i(ie),O.splice(1,1);else break}else break;return O.length===T.dimensions.length?new s(S(P),T):O.length>0?(T=new f(O),new s(S(P),T)):P}if(gp(P)&&T.dimensions.length===1&&wt(T.dimensions[0])){var X=T.dimensions[0].value;return X in P.properties?P.properties[X]:new l}return new s(S(P),T)}function F(P,T,$,O){var W=T.shift(),R=T.reduce((ie,te)=>{if(!Ot(te)){var Z=ie.pop();if(Ot(Z))return[Z,te];try{return ie.push(x(P,[Z,te],O)),ie}catch{ie.push(Z)}}ie.push(S(ie.pop()));var X=ie.length===1?ie[0]:$(ie);return[$([X,S(te)])]},[W]);return R.length===1?R[0]:$([R[0],b(R[1])])}function I(P,T){switch(P.type){case"SymbolNode":return P;case"ConstantNode":switch(typeof P.value){case"number":return A(P.value,T);case"bigint":return A(P.value,T);case"string":return P.value;default:if(!isNaN(P.value))return A(P.value,T)}return P;case"FunctionNode":if(n[P.name]&&n[P.name].rawArgs)return P;{var $=["add","multiply"];if(!$.includes(P.name)){var O=P.args.map(ae=>I(ae,T));if(!O.some(Ot))try{return x(P.name,O,T)}catch{}if(P.name==="size"&&O.length===1&&zn(O[0])){for(var W=[],R=O[0];zn(R);)W.push(R.items.length),R=R.items[0];return i(W)}return new c(P.name,O.map(S))}}case"OperatorNode":{var ie=P.fn.toString(),te,Z,X=N(P);if(ir(P)&&P.isUnary())te=[I(P.args[0],T)],Ot(te[0])?Z=X(te):Z=x(ie,te,T);else if(g(P,T.context))if(te=y(P,T.context),te=te.map(ae=>I(ae,T)),m(ie,T.context)){for(var pe=[],de=[],G=0;G<te.length;G++)Ot(te[G])?de.push(te[G]):pe.push(te[G]);pe.length>1?(Z=F(ie,pe,X,T),de.unshift(Z),Z=F(ie,de,X,T)):Z=F(ie,te,X,T)}else Z=F(ie,te,X,T);else te=P.args.map(ae=>I(ae,T)),Z=F(ie,te,X,T);return Z}case"ParenthesisNode":return I(P.content,T);case"AccessorNode":return M(I(P.object,T),I(P.index,T),T);case"ArrayNode":{var V=P.items.map(ae=>I(ae,T));return V.some(Ot)?new u(V.map(S)):i(V)}case"IndexNode":return new f(P.dimensions.map(ae=>v(ae,T)));case"ObjectNode":{var U={};for(var K in P.properties)U[K]=v(P.properties[K],T);return new d(U)}case"AssignmentNode":case"BlockNode":case"FunctionAssignmentNode":case"RangeNode":case"ConditionalNode":default:throw new Error("Unimplemented node type in simplifyConstant: ".concat(P.type))}}return v}),xA="simplifyCore",PQ=["typed","parse","equal","isZero","add","subtract","multiply","divide","pow","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode"],$Q=H(xA,PQ,t=>{var{typed:e,parse:r,equal:n,isZero:i,add:a,subtract:o,multiply:s,divide:u,pow:l,AccessorNode:c,ArrayNode:f,ConstantNode:d,FunctionNode:p,IndexNode:h,ObjectNode:m,OperatorNode:g,ParenthesisNode:y,SymbolNode:N}=t,v=new d(0),w=new d(1),x=new d(!0),b=new d(!1);function S(D){return ir(D)&&["and","not","or"].includes(D.op)}var{hasProperty:C,isCommutative:A}=$v({FunctionNode:p,OperatorNode:g,SymbolNode:N});function E(D){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},F=M?M.context:void 0;if(C(D,"trivial",F)){if(Za(D)&&D.args.length===1)return E(D.args[0],M);var I=!1,P=0;if(D.forEach(de=>{++P,P===1&&(I=E(de,M))}),P===1)return I}var T=D;if(Za(T)){var $=IW(T.name);if($){if(T.args.length>2&&C(T,"associative",F))for(;T.args.length>2;){var O=T.args.pop(),W=T.args.pop();T.args.push(new g($,T.name,[O,W]))}T=new g($,T.name,T.args)}else return new p(E(T.fn),T.args.map(de=>E(de,M)))}if(ir(T)&&T.isUnary()){var R=E(T.args[0],M);if(T.op==="~"&&ir(R)&&R.isUnary()&&R.op==="~"||T.op==="not"&&ir(R)&&R.isUnary()&&R.op==="not"&&S(R.args[0]))return R.args[0];var ie=!0;if(T.op==="-"&&ir(R)&&(R.isBinary()&&R.fn==="subtract"&&(T=new g("-","subtract",[R.args[1],R.args[0]]),ie=!1),R.isUnary()&&R.op==="-"))return R.args[0];if(ie)return new g(T.op,T.fn,[R])}if(ir(T)&&T.isBinary()){var te=E(T.args[0],M),Z=E(T.args[1],M);if(T.op==="+"){if(wt(te)&&i(te.value))return Z;if(wt(Z)&&i(Z.value))return te;ir(Z)&&Z.isUnary()&&Z.op==="-"&&(Z=Z.args[0],T=new g("-","subtract",[te,Z]))}if(T.op==="-")return ir(Z)&&Z.isUnary()&&Z.op==="-"?E(new g("+","add",[te,Z.args[0]]),M):wt(te)&&i(te.value)?E(new g("-","unaryMinus",[Z])):wt(Z)&&i(Z.value)?te:new g(T.op,T.fn,[te,Z]);if(T.op==="*"){if(wt(te)){if(i(te.value))return v;if(n(te.value,1))return Z}if(wt(Z)){if(i(Z.value))return v;if(n(Z.value,1))return te;if(A(T,F))return new g(T.op,T.fn,[Z,te],T.implicit)}return new g(T.op,T.fn,[te,Z],T.implicit)}if(T.op==="/")return wt(te)&&i(te.value)?v:wt(Z)&&n(Z.value,1)?te:new g(T.op,T.fn,[te,Z]);if(T.op==="^"&&wt(Z)){if(i(Z.value))return w;if(n(Z.value,1))return te}if(T.op==="and"){if(wt(te))if(te.value){if(S(Z))return Z;if(wt(Z))return Z.value?x:b}else return b;if(wt(Z))if(Z.value){if(S(te))return te}else return b}if(T.op==="or"){if(wt(te)){if(te.value)return x;if(S(Z))return Z}if(wt(Z)){if(Z.value)return x;if(S(te))return te}}return new g(T.op,T.fn,[te,Z])}if(ir(T))return new g(T.op,T.fn,T.args.map(de=>E(de,M)));if(zn(T))return new f(T.items.map(de=>E(de,M)));if(Wo(T))return new c(E(T.object,M),E(T.index,M));if(eu(T))return new h(T.dimensions.map(de=>E(de,M)));if(gp(T)){var X={};for(var pe in T.properties)X[pe]=E(T.properties[pe],M);return new m(X)}return T}return e(xA,{Node:E,"Node,Object":E})}),LQ="resolve",zQ=["typed","parse","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode"],qQ=H(LQ,zQ,t=>{var{typed:e,parse:r,ConstantNode:n,FunctionNode:i,OperatorNode:a,ParenthesisNode:o}=t;function s(u,l){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new Set;if(!l)return u;if(xr(u)){if(c.has(u.name)){var f=Array.from(c).join(", ");throw new ReferenceError("recursive loop of variable definitions among {".concat(f,"}"))}var d=l.get(u.name);if(Ot(d)){var p=new Set(c);return p.add(u.name),s(d,l,p)}else return typeof d=="number"?r(String(d)):d!==void 0?new n(d):u}else if(ir(u)){var h=u.args.map(function(g){return s(g,l,c)});return new a(u.op,u.fn,h,u.implicit)}else{if(da(u))return new o(s(u.content,l,c));if(Za(u)){var m=u.args.map(function(g){return s(g,l,c)});return new i(u.name,m)}}return u.map(g=>s(g,l,c))}return e("resolve",{Node:s,"Node, Map | null | undefined":s,"Node, Object":(u,l)=>s(u,Bs(l)),"Array | Matrix":e.referToSelf(u=>l=>l.map(c=>u(c))),"Array | Matrix, null | undefined":e.referToSelf(u=>l=>l.map(c=>u(c))),"Array, Object":e.referTo("Array,Map",u=>(l,c)=>u(l,Bs(c))),"Matrix, Object":e.referTo("Matrix,Map",u=>(l,c)=>u(l,Bs(c))),"Array | Matrix, Map":e.referToSelf(u=>(l,c)=>l.map(f=>u(f,c)))})}),wA="symbolicEqual",UQ=["parse","simplify","typed","OperatorNode"],HQ=H(wA,UQ,t=>{var{parse:e,simplify:r,typed:n,OperatorNode:i}=t;function a(o,s){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=new i("-","subtract",[o,s]),c=r(l,{},u);return wt(c)&&!c.value}return n(wA,{"Node, Node":a,"Node, Node, Object":a})}),NA="derivative",VQ=["typed","config","parse","simplify","equal","isZero","numeric","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode","SymbolNode"],WQ=H(NA,VQ,t=>{var{typed:e,config:r,parse:n,simplify:i,equal:a,isZero:o,numeric:s,ConstantNode:u,FunctionNode:l,OperatorNode:c,ParenthesisNode:f,SymbolNode:d}=t;function p(w,x){var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{simplify:!0},S=new Map,C=x.name;function A(D){var M=S.get(D);if(M!==void 0)return M;var F=y(A,D,C);return S.set(D,F),F}var E=N(w,A);return b.simplify?i(E):E}function h(w){var x=n(w);if(!x.isSymbolNode)throw new TypeError("Invalid variable. "+"Cannot parse ".concat(JSON.stringify(w)," into a variable in function derivative"));return x}var m=e(NA,{"Node, SymbolNode":p,"Node, SymbolNode, Object":p,"Node, string":(w,x)=>p(w,h(x)),"Node, string, Object":(w,x,b)=>p(w,h(x),b)});m._simplify=!0,m.toTex=function(w){return g.apply(null,w.args)};var g=e("_derivTex",{"Node, SymbolNode":function(x,b){return wt(x)&&It(x.value)==="string"?g(n(x.value).toString(),b.toString(),1):g(x.toTex(),b.toString(),1)},"Node, ConstantNode":function(x,b){if(It(b.value)==="string")return g(x,n(b.value));throw new Error("The second parameter to 'derivative' is a non-string constant")},"Node, SymbolNode, ConstantNode":function(x,b,S){return g(x.toString(),b.name,S.value)},"string, string, number":function(x,b,S){var C;return S===1?C="{d\\over d"+b+"}":C="{d^{"+S+"}\\over d"+b+"^{"+S+"}}",C+"\\left[".concat(x,"\\right]")}}),y=e("_isConst",{"function, ConstantNode, string":function(){return!0},"function, SymbolNode, string":function(x,b,S){return b.name!==S},"function, ParenthesisNode, string":function(x,b,S){return x(b.content,S)},"function, FunctionAssignmentNode, string":function(x,b,S){return b.params.includes(S)?x(b.expr,S):!0},"function, FunctionNode | OperatorNode, string":function(x,b,S){return b.args.every(C=>x(C,S))}}),N=e("_derivative",{"ConstantNode, function":function(){return v(0)},"SymbolNode, function":function(x,b){return b(x)?v(0):v(1)},"ParenthesisNode, function":function(x,b){return new f(N(x.content,b))},"FunctionAssignmentNode, function":function(x,b){return b(x)?v(0):N(x.expr,b)},"FunctionNode, function":function(x,b){if(b(x))return v(0);var S=x.args[0],C,A=!1,E=!1,D;switch(x.name){case"cbrt":A=!0,D=new c("*","multiply",[v(3),new c("^","pow",[S,new c("/","divide",[v(2),v(3)])])]);break;case"sqrt":case"nthRoot":if(x.args.length===1)A=!0,D=new c("*","multiply",[v(2),new l("sqrt",[S])]);else if(x.args.length===2)return C=new c("/","divide",[v(1),x.args[1]]),N(new c("^","pow",[S,C]),b);break;case"log10":C=v(10);case"log":if(!C&&x.args.length===1)D=S.clone(),A=!0;else if(x.args.length===1&&C||x.args.length===2&&b(x.args[1]))D=new c("*","multiply",[S.clone(),new l("log",[C||x.args[1]])]),A=!0;else if(x.args.length===2)return N(new c("/","divide",[new l("log",[S]),new l("log",[x.args[1]])]),b);break;case"pow":if(x.args.length===2)return N(new c("^","pow",[S,x.args[1]]),b);break;case"exp":D=new l("exp",[S.clone()]);break;case"sin":D=new l("cos",[S.clone()]);break;case"cos":D=new c("-","unaryMinus",[new l("sin",[S.clone()])]);break;case"tan":D=new c("^","pow",[new l("sec",[S.clone()]),v(2)]);break;case"sec":D=new c("*","multiply",[x,new l("tan",[S.clone()])]);break;case"csc":E=!0,D=new c("*","multiply",[x,new l("cot",[S.clone()])]);break;case"cot":E=!0,D=new c("^","pow",[new l("csc",[S.clone()]),v(2)]);break;case"asin":A=!0,D=new l("sqrt",[new c("-","subtract",[v(1),new c("^","pow",[S.clone(),v(2)])])]);break;case"acos":A=!0,E=!0,D=new l("sqrt",[new c("-","subtract",[v(1),new c("^","pow",[S.clone(),v(2)])])]);break;case"atan":A=!0,D=new c("+","add",[new c("^","pow",[S.clone(),v(2)]),v(1)]);break;case"asec":A=!0,D=new c("*","multiply",[new l("abs",[S.clone()]),new l("sqrt",[new c("-","subtract",[new c("^","pow",[S.clone(),v(2)]),v(1)])])]);break;case"acsc":A=!0,E=!0,D=new c("*","multiply",[new l("abs",[S.clone()]),new l("sqrt",[new c("-","subtract",[new c("^","pow",[S.clone(),v(2)]),v(1)])])]);break;case"acot":A=!0,E=!0,D=new c("+","add",[new c("^","pow",[S.clone(),v(2)]),v(1)]);break;case"sinh":D=new l("cosh",[S.clone()]);break;case"cosh":D=new l("sinh",[S.clone()]);break;case"tanh":D=new c("^","pow",[new l("sech",[S.clone()]),v(2)]);break;case"sech":E=!0,D=new c("*","multiply",[x,new l("tanh",[S.clone()])]);break;case"csch":E=!0,D=new c("*","multiply",[x,new l("coth",[S.clone()])]);break;case"coth":E=!0,D=new c("^","pow",[new l("csch",[S.clone()]),v(2)]);break;case"asinh":A=!0,D=new l("sqrt",[new c("+","add",[new c("^","pow",[S.clone(),v(2)]),v(1)])]);break;case"acosh":A=!0,D=new l("sqrt",[new c("-","subtract",[new c("^","pow",[S.clone(),v(2)]),v(1)])]);break;case"atanh":A=!0,D=new c("-","subtract",[v(1),new c("^","pow",[S.clone(),v(2)])]);break;case"asech":A=!0,E=!0,D=new c("*","multiply",[S.clone(),new l("sqrt",[new c("-","subtract",[v(1),new c("^","pow",[S.clone(),v(2)])])])]);break;case"acsch":A=!0,E=!0,D=new c("*","multiply",[new l("abs",[S.clone()]),new l("sqrt",[new c("+","add",[new c("^","pow",[S.clone(),v(2)]),v(1)])])]);break;case"acoth":A=!0,E=!0,D=new c("-","subtract",[v(1),new c("^","pow",[S.clone(),v(2)])]);break;case"abs":D=new c("/","divide",[new l(new d("abs"),[S.clone()]),S.clone()]);break;case"gamma":default:throw new Error('Cannot process function "'+x.name+'" in derivative: the function is not supported, undefined, or the number of arguments passed to it are not supported')}var M,F;A?(M="/",F="divide"):(M="*",F="multiply");var I=N(S,b);return E&&(I=new c("-","unaryMinus",[I])),new c(M,F,[I,D])},"OperatorNode, function":function(x,b){if(b(x))return v(0);if(x.op==="+")return new c(x.op,x.fn,x.args.map(function(T){return N(T,b)}));if(x.op==="-"){if(x.isUnary())return new c(x.op,x.fn,[N(x.args[0],b)]);if(x.isBinary())return new c(x.op,x.fn,[N(x.args[0],b),N(x.args[1],b)])}if(x.op==="*"){var S=x.args.filter(function(T){return b(T)});if(S.length>0){var C=x.args.filter(function(T){return!b(T)}),A=C.length===1?C[0]:new c("*","multiply",C),E=S.concat(N(A,b));return new c("*","multiply",E)}return new c("+","add",x.args.map(function(T){return new c("*","multiply",x.args.map(function($){return $===T?N($,b):$.clone()}))}))}if(x.op==="/"&&x.isBinary()){var D=x.args[0],M=x.args[1];return b(M)?new c("/","divide",[N(D,b),M]):b(D)?new c("*","multiply",[new c("-","unaryMinus",[D]),new c("/","divide",[N(M,b),new c("^","pow",[M.clone(),v(2)])])]):new c("/","divide",[new c("-","subtract",[new c("*","multiply",[N(D,b),M.clone()]),new c("*","multiply",[D.clone(),N(M,b)])]),new c("^","pow",[M.clone(),v(2)])])}if(x.op==="^"&&x.isBinary()){var F=x.args[0],I=x.args[1];if(b(F))return wt(F)&&(o(F.value)||a(F.value,1))?v(0):new c("*","multiply",[x,new c("*","multiply",[new l("log",[F.clone()]),N(I.clone(),b)])]);if(b(I)){if(wt(I)){if(o(I.value))return v(0);if(a(I.value,1))return N(F,b)}var P=new c("^","pow",[F.clone(),new c("-","subtract",[I,v(1)])]);return new c("*","multiply",[I.clone(),new c("*","multiply",[N(F,b),P])])}return new c("*","multiply",[new c("^","pow",[F.clone(),I.clone()]),new c("+","add",[new c("*","multiply",[N(F,b),new c("/","divide",[I.clone(),F.clone()])]),new c("*","multiply",[N(I,b),new l("log",[F.clone()])])])])}throw new Error('Cannot process operator "'+x.op+'" in derivative: the operator is not supported, undefined, or the number of arguments passed to it are not supported')}});function v(w,x){return new u(s(w,io(String(w),r)))}return m}),AA="rationalize",jQ=["config","typed","equal","isZero","add","subtract","multiply","divide","pow","parse","simplifyConstant","simplifyCore","simplify","?bignumber","?fraction","mathWithTransform","matrix","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode","ParenthesisNode"],GQ=H(AA,jQ,t=>{var{config:e,typed:r,equal:n,isZero:i,add:a,subtract:o,multiply:s,divide:u,pow:l,parse:c,simplifyConstant:f,simplifyCore:d,simplify:p,fraction:h,bignumber:m,mathWithTransform:g,matrix:y,AccessorNode:N,ArrayNode:v,ConstantNode:w,FunctionNode:x,IndexNode:b,ObjectNode:S,OperatorNode:C,SymbolNode:A,ParenthesisNode:E}=t;function D(T){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,W=F(),R=M(T,$,!0,W.firstRules),ie=R.variables.length,te={exactFractions:!1},Z={exactFractions:!0};if(T=R.expression,ie>=1){T=I(T);var X,pe,de=!0,G=!1;T=p(T,W.firstRules,{},te);for(var V;pe=de?W.distrDivRules:W.sucDivRules,T=p(T,pe,{},Z),de=!de,V=T.toString(),V!==X;)G=!0,X=V;G&&(T=p(T,W.firstRulesAgain,{},te)),T=p(T,W.finalRules,{},te)}var U=[],K={};return T.type==="OperatorNode"&&T.isBinary()&&T.op==="/"?(ie===1&&(T.args[0]=P(T.args[0],U),T.args[1]=P(T.args[1])),O&&(K.numerator=T.args[0],K.denominator=T.args[1])):(ie===1&&(T=P(T,U)),O&&(K.numerator=T,K.denominator=null)),O?(K.coefficients=U,K.variables=R.variables,K.expression=T,K):T}return r(AA,{Node:D,"Node, boolean":(T,$)=>D(T,{},$),"Node, Object":D,"Node, Object, boolean":D});function M(T,$,O,W){var R=[],ie=p(T,W,$,{exactFractions:!1});O=!!O;var te="+-*"+(O?"/":"");X(ie);var Z={};return Z.expression=ie,Z.variables=R,Z;function X(pe){var de=pe.type;if(de==="FunctionNode")throw new Error("There is an unsolved function call");if(de==="OperatorNode")if(pe.op==="^"){if(pe.args[1].type!=="ConstantNode"||!$e(parseFloat(pe.args[1].value)))throw new Error("There is a non-integer exponent");X(pe.args[0])}else{if(!te.includes(pe.op))throw new Error("Operator "+pe.op+" invalid in polynomial expression");for(var G=0;G<pe.args.length;G++)X(pe.args[G])}else if(de==="SymbolNode"){var V=pe.name,U=R.indexOf(V);U===-1&&R.push(V)}else if(de==="ParenthesisNode")X(pe.content);else if(de!=="ConstantNode")throw new Error("type "+de+" is not allowed in polynomial expression")}}function F(){var T=[d,{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},f,{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"1*n",r:"n"}],$=[{l:"(-n1)/(-n2)",r:"n1/n2"},{l:"(-n1)*(-n2)",r:"n1*n2"},{l:"n1--n2",r:"n1+n2"},{l:"n1-n2",r:"n1+(-n2)"},{l:"(n1+n2)*n3",r:"(n1*n3 + n2*n3)"},{l:"n1*(n2+n3)",r:"(n1*n2+n1*n3)"},{l:"c1*n + c2*n",r:"(c1+c2)*n"},{l:"c1*n + n",r:"(c1+1)*n"},{l:"c1*n - c2*n",r:"(c1-c2)*n"},{l:"c1*n - n",r:"(c1-1)*n"},{l:"v/c",r:"(1/c)*v"},{l:"v/-c",r:"-(1/c)*v"},{l:"-v*-c",r:"c*v"},{l:"-v*c",r:"-c*v"},{l:"v*-c",r:"-c*v"},{l:"v*c",r:"c*v"},{l:"-(-n1*n2)",r:"(n1*n2)"},{l:"-(n1*n2)",r:"(-n1*n2)"},{l:"-(-n1+n2)",r:"(n1-n2)"},{l:"-(n1+n2)",r:"(-n1-n2)"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"},{l:"-(-n1/n2)",r:"(n1/n2)"},{l:"-(n1/n2)",r:"(-n1/n2)"}],O=[{l:"(n1/n2 + n3/n4)",r:"((n1*n4 + n3*n2)/(n2*n4))"},{l:"(n1/n2 + n3)",r:"((n1 + n3*n2)/n2)"},{l:"(n1 + n2/n3)",r:"((n1*n3 + n2)/n3)"}],W=[{l:"(n1/(n2/n3))",r:"((n1*n3)/n2)"},{l:"(n1/n2/n3)",r:"(n1/(n2*n3))"}],R={};return R.firstRules=T.concat($,W),R.distrDivRules=O,R.sucDivRules=W,R.firstRulesAgain=T.concat($),R.finalRules=[d,{l:"n*-n",r:"-n^2"},{l:"n*n",r:"n^2"},f,{l:"n*-n^n1",r:"-n^(n1+1)"},{l:"n*n^n1",r:"n^(n1+1)"},{l:"n^n1*-n^n2",r:"-n^(n1+n2)"},{l:"n^n1*n^n2",r:"n^(n1+n2)"},{l:"n^n1*-n",r:"-n^(n1+1)"},{l:"n^n1*n",r:"n^(n1+1)"},{l:"n^n1/-n",r:"-n^(n1-1)"},{l:"n^n1/n",r:"n^(n1-1)"},{l:"n/-n^n1",r:"-n^(1-n1)"},{l:"n/n^n1",r:"n^(1-n1)"},{l:"n^n1/-n^n2",r:"n^(n1-n2)"},{l:"n^n1/n^n2",r:"n^(n1-n2)"},{l:"n1+(-n2*n3)",r:"n1-n2*n3"},{l:"v*(-c)",r:"-c*v"},{l:"n1+-n2",r:"n1-n2"},{l:"v*c",r:"c*v"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"}],R}function I(T,$,O){var W=T.type,R=arguments.length>1;if(W==="OperatorNode"&&T.isBinary()){var ie=!1,te;if(T.op==="^"&&(T.args[0].type==="ParenthesisNode"||T.args[0].type==="OperatorNode")&&T.args[1].type==="ConstantNode"&&(te=parseFloat(T.args[1].value),ie=te>=2&&$e(te)),ie){if(te>2){var Z=T.args[0],X=new C("^","pow",[T.args[0].cloneDeep(),new w(te-1)]);T=new C("*","multiply",[Z,X])}else T=new C("*","multiply",[T.args[0],T.args[0].cloneDeep()]);R&&(O==="content"?$.content=T:$.args[O]=T)}}if(W==="ParenthesisNode")I(T.content,T,"content");else if(W!=="ConstantNode"&&W!=="SymbolNode")for(var pe=0;pe<T.args.length;pe++)I(T.args[pe],T,pe);if(!R)return T}function P(T,$){$===void 0&&($=[]),$[0]=0;var O={};O.cte=1,O.oper="+",O.fire="";var W=0,R="";V(T,null,O),W=$.length-1;for(var ie=!0,te,Z=W;Z>=0;Z--)if($[Z]!==0){var X=new w(ie?$[Z]:Math.abs($[Z])),pe=$[Z]<0?"-":"+";if(Z>0){var de=new A(R);if(Z>1){var G=new w(Z);de=new C("^","pow",[de,G])}$[Z]===-1&&ie?X=new C("-","unaryMinus",[de]):Math.abs($[Z])===1?X=de:X=new C("*","multiply",[X,de])}ie?te=X:pe==="+"?te=new C("+","add",[te,X]):te=new C("-","subtract",[te,X]),ie=!1}if(ie)return new w(0);return te;function V(U,K,ae){var B=U.type;if(B==="FunctionNode")throw new Error("There is an unsolved function call");if(B==="OperatorNode"){if(!"+-*^".includes(U.op))throw new Error("Operator "+U.op+" invalid");if(K!==null){if((U.fn==="unaryMinus"||U.fn==="pow")&&K.fn!=="add"&&K.fn!=="subtract"&&K.fn!=="multiply")throw new Error("Invalid "+U.op+" placing");if((U.fn==="subtract"||U.fn==="add"||U.fn==="multiply")&&K.fn!=="add"&&K.fn!=="subtract")throw new Error("Invalid "+U.op+" placing");if((U.fn==="subtract"||U.fn==="add"||U.fn==="unaryMinus")&&ae.noFil!==0)throw new Error("Invalid "+U.op+" placing")}(U.op==="^"||U.op==="*")&&(ae.fire=U.op);for(var q=0;q<U.args.length;q++)U.fn==="unaryMinus"&&(ae.oper="-"),(U.op==="+"||U.fn==="subtract")&&(ae.fire="",ae.cte=1,ae.oper=q===0?"+":U.op),ae.noFil=q,V(U.args[q],U,ae)}else if(B==="SymbolNode"){if(U.name!==R&&R!=="")throw new Error("There is more than one variable");if(R=U.name,K===null){$[1]=1;return}if(K.op==="^"&&ae.noFil!==0)throw new Error("In power the variable should be the first parameter");if(K.op==="*"&&ae.noFil!==1)throw new Error("In multiply the variable should be the second parameter");(ae.fire===""||ae.fire==="*")&&(W<1&&($[1]=0),$[1]+=ae.cte*(ae.oper==="+"?1:-1),W=Math.max(1,W))}else if(B==="ConstantNode"){var j=parseFloat(U.value);if(K===null){$[0]=j;return}if(K.op==="^"){if(ae.noFil!==1)throw new Error("Constant cannot be powered");if(!$e(j)||j<=0)throw new Error("Non-integer exponent is not allowed");for(var oe=W+1;oe<j;oe++)$[oe]=0;j>W&&($[j]=0),$[j]+=ae.cte*(ae.oper==="+"?1:-1),W=Math.max(j,W);return}ae.cte=j,ae.fire===""&&($[0]+=ae.cte*(ae.oper==="+"?1:-1))}else throw new Error("Type "+B+" is not allowed")}}}),SA="zpk2tf",KQ=["typed","add","multiply","Complex","number"],JQ=H(SA,KQ,t=>{var{typed:e,add:r,multiply:n,Complex:i,number:a}=t;return e(SA,{"Array,Array,number":function(l,c,f){return o(l,c,f)},"Array,Array":function(l,c){return o(l,c,1)},"Matrix,Matrix,number":function(l,c,f){return o(l.valueOf(),c.valueOf(),f)},"Matrix,Matrix":function(l,c){return o(l.valueOf(),c.valueOf(),1)}});function o(u,l,c){u.some(N=>N.type==="BigNumber")&&(u=u.map(N=>a(N))),l.some(N=>N.type==="BigNumber")&&(l=l.map(N=>a(N)));for(var f=[i(1,0)],d=[i(1,0)],p=0;p<u.length;p++){var h=u[p];typeof h=="number"&&(h=i(h,0)),f=s(f,[i(1,0),i(-h.re,-h.im)])}for(var m=0;m<l.length;m++){var g=l[m];typeof g=="number"&&(g=i(g,0)),d=s(d,[i(1,0),i(-g.re,-g.im)])}for(var y=0;y<f.length;y++)f[y]=n(f[y],c);return[f,d]}function s(u,l){for(var c=[],f=0;f<u.length+l.length-1;f++){c[f]=i(0,0);for(var d=0;d<u.length;d++)f-d>=0&&f-d<l.length&&(c[f]=r(c[f],n(u[d],l[f-d])))}return c}}),DA="freqz",YQ=["typed","add","multiply","Complex","divide","matrix"],ZQ=H(DA,YQ,t=>{var{typed:e,add:r,multiply:n,Complex:i,divide:a,matrix:o}=t;return e(DA,{"Array, Array":function(c,f){var d=u(512);return s(c,f,d)},"Array, Array, Array":function(c,f,d){return s(c,f,d)},"Array, Array, number":function(c,f,d){if(d<0)throw new Error("w must be a positive number");var p=u(d);return s(c,f,p)},"Matrix, Matrix":function(c,f){var d=u(512),{w:p,h}=s(c.valueOf(),f.valueOf(),d);return{w:o(p),h:o(h)}},"Matrix, Matrix, Matrix":function(c,f,d){var{h:p}=s(c.valueOf(),f.valueOf(),d.valueOf());return{h:o(p),w:o(d)}},"Matrix, Matrix, number":function(c,f,d){if(d<0)throw new Error("w must be a positive number");var p=u(d),{h}=s(c.valueOf(),f.valueOf(),p);return{h:o(h),w:o(p)}}});function s(l,c,f){for(var d=[],p=[],h=0;h<f.length;h++){for(var m=i(0,0),g=i(0,0),y=0;y<l.length;y++)m=r(m,n(l[y],i(Math.cos(-y*f[h]),Math.sin(-y*f[h]))));for(var N=0;N<c.length;N++)g=r(g,n(c[N],i(Math.cos(-N*f[h]),Math.sin(-N*f[h]))));d.push(m),p.push(g)}for(var v=[],w=0;w<d.length;w++)v.push(a(d[w],p[w]));return{h:v,w:f}}function u(l){for(var c=[],f=0;f<l;f++)c.push(f/l*Math.PI);return c}}),XQ="reviver",QQ=["classes"],eee=H(XQ,QQ,t=>{var{classes:e}=t;return function(n,i){var a=e[i&&i.mathjs];return a&&typeof a.fromJSON=="function"?a.fromJSON(i):i}}),tee="replacer",ree=[],nee=H(tee,ree,()=>function(e,r){return typeof r=="number"&&(!isFinite(r)||isNaN(r))?{mathjs:"number",value:String(r)}:typeof r=="bigint"?{mathjs:"bigint",value:String(r)}:r}),iee="14.5.0",aee=H("true",[],()=>!0),oee=H("false",[],()=>!1),see=H("null",[],()=>null),uee=_n("Infinity",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?new r(1/0):1/0}),lee=_n("NaN",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?new r(NaN):NaN}),cee=_n("pi",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?Rv(r):dL}),fee=_n("tau",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?LH(r):pL}),dee=_n("e",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?PH(r):hL}),pee=_n("phi",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?$H(r):mL}),hee=_n("LN2",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?new r(2).ln():Math.LN2}),mee=_n("LN10",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?new r(10).ln():Math.LN10}),gee=_n("LOG2E",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?new r(1).div(new r(2).ln()):Math.LOG2E}),vee=_n("LOG10E",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?new r(1).div(new r(10).ln()):Math.LOG10E}),yee=_n("SQRT1_2",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?new r("0.5").sqrt():Math.SQRT1_2}),bee=_n("SQRT2",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?new r(2).sqrt():Math.SQRT2}),xee=_n("i",["Complex"],t=>{var{Complex:e}=t;return e.I}),wee=H("version",[],()=>iee);function _n(t,e,r){return H(t,e,r,{recreateOnConfigChange:!0})}var Nee=rt("speedOfLight","299792458","m s^-1"),Aee=rt("gravitationConstant","6.67430e-11","m^3 kg^-1 s^-2"),See=rt("planckConstant","6.62607015e-34","J s"),Dee=rt("reducedPlanckConstant","1.0545718176461565e-34","J s"),Eee=rt("magneticConstant","1.25663706212e-6","N A^-2"),Cee=rt("electricConstant","8.8541878128e-12","F m^-1"),Mee=rt("vacuumImpedance","376.730313667","ohm"),Tee=rt("coulomb","8.987551792261171e9","N m^2 C^-2"),_ee=rt("elementaryCharge","1.602176634e-19","C"),Oee=rt("bohrMagneton","9.2740100783e-24","J T^-1"),Fee=rt("conductanceQuantum","7.748091729863649e-5","S"),Bee=rt("inverseConductanceQuantum","12906.403729652257","ohm"),kee=rt("magneticFluxQuantum","2.0678338484619295e-15","Wb"),Iee=rt("nuclearMagneton","5.0507837461e-27","J T^-1"),Ree=rt("klitzing","25812.807459304513","ohm"),Pee=rt("bohrRadius","5.29177210903e-11","m"),$ee=rt("classicalElectronRadius","2.8179403262e-15","m"),Lee=rt("electronMass","9.1093837015e-31","kg"),zee=rt("fermiCoupling","1.1663787e-5","GeV^-2"),qee=Ep("fineStructure",.0072973525693),Uee=rt("hartreeEnergy","4.3597447222071e-18","J"),Hee=rt("protonMass","1.67262192369e-27","kg"),Vee=rt("deuteronMass","3.3435830926e-27","kg"),Wee=rt("neutronMass","1.6749271613e-27","kg"),jee=rt("quantumOfCirculation","3.6369475516e-4","m^2 s^-1"),Gee=rt("rydberg","10973731.568160","m^-1"),Kee=rt("thomsonCrossSection","6.6524587321e-29","m^2"),Jee=Ep("weakMixingAngle",.2229),Yee=Ep("efimovFactor",22.7),Zee=rt("atomicMass","1.66053906660e-27","kg"),Xee=rt("avogadro","6.02214076e23","mol^-1"),Qee=rt("boltzmann","1.380649e-23","J K^-1"),ete=rt("faraday","96485.33212331001","C mol^-1"),tte=rt("firstRadiation","3.7417718521927573e-16","W m^2"),rte=rt("loschmidt","2.686780111798444e25","m^-3"),nte=rt("gasConstant","8.31446261815324","J K^-1 mol^-1"),ite=rt("molarPlanckConstant","3.990312712893431e-10","J s mol^-1"),ate=rt("molarVolume","0.022413969545014137","m^3 mol^-1"),ote=Ep("sackurTetrode",-1.16487052358),ste=rt("secondRadiation","0.014387768775039337","m K"),ute=rt("stefanBoltzmann","5.67037441918443e-8","W m^-2 K^-4"),lte=rt("wienDisplacement","2.897771955e-3","m K"),cte=rt("molarMass","0.99999999965e-3","kg mol^-1"),fte=rt("molarMassC12","11.9999999958e-3","kg mol^-1"),dte=rt("gravity","9.80665","m s^-2"),pte=rt("planckLength","1.616255e-35","m"),hte=rt("planckMass","2.176435e-8","kg"),mte=rt("planckTime","5.391245e-44","s"),gte=rt("planckCharge","1.87554603778e-18","C"),vte=rt("planckTemperature","1.416785e+32","K");function rt(t,e,r){var n=["config","Unit","BigNumber"];return H(t,n,i=>{var{config:a,Unit:o,BigNumber:s}=i,u=a.number==="BigNumber"?new s(e):parseFloat(e),l=new o(u,r);return l.fixPrefix=!0,l})}function Ep(t,e){var r=["config","BigNumber"];return H(t,r,n=>{var{config:i,BigNumber:a}=n;return i.number==="BigNumber"?new a(e):e})}function EA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function yte(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?EA(Object(r),!0).forEach(function(n){cr(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):EA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var bte="mapSlices",xte=["typed","isInteger"],wte=H(bte,xte,t=>{var{typed:e,isInteger:r}=t,n=ug({typed:e,isInteger:r});return e("mapSlices",{"...any":function(a){var o=a[1];it(o)?a[1]=o-1:ot(o)&&(a[1]=o.minus(1));try{return n.apply(null,a)}catch(s){throw mn(s)}}})},yte({isTransformFunction:!0},ug.meta)),Nte="column",Ate=["typed","Index","matrix","range"],Ste=H(Nte,Ate,t=>{var{typed:e,Index:r,matrix:n,range:i}=t,a=jC({typed:e,Index:r,matrix:n,range:i});return e("column",{"...any":function(s){var u=s.length-1,l=s[u];it(l)&&(s[u]=l-1);try{return a.apply(null,s)}catch(c){throw mn(c)}}})},{isTransformFunction:!0});function Lv(t,e,r){var n=t.filter(function(u){return xr(u)&&!(u.name in e)&&!r.has(u.name)})[0];if(!n)throw new Error('No undefined variable found in inline expression "'+t+'"');var i=n.name,a=new Map,o=new g2(r,a,new Set([i])),s=t.compile();return function(l){return a.set(i,l),s.evaluate(o)}}var Dte="transformCallback",Ete=["typed"],zv=H(Dte,Ete,t=>{var{typed:e}=t;return function(n,i){return e.isTypedFunction(n)?r(n,i):CA(n,n.length,i)};function r(n,i){var a=Object.fromEntries(Object.entries(n.signatures).map(o=>{var[s,u]=o,l=s.split(",").length;return e.isTypedFunction(u)?[s,r(u,i)]:[s,CA(u,l,i)]}));return typeof n.name=="string"?e(n.name,a):e(a)}});function CA(t,e,r){return e===r?t:e===r+1?function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];var o=i.slice(0,r),s=MA(i[r]);return t(...o,s)}:e>r+1?function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];var o=i.slice(0,r),s=MA(i[r]),u=i.slice(r+1);return t(...o,s,...u)}:t}function MA(t){return t.map(e=>e+1)}var Cte="filter",Mte=["typed"],Tte=H(Cte,Mte,t=>{var{typed:e}=t;function r(i,a,o){var s=GC({typed:e}),u=zv({typed:e});if(i.length===0)return s();var l=i[0];if(i.length===1)return s(l);var c=i.length-1,f=i[c];return l&&(l=n(l,o)),f&&(xr(f)||Rl(f)?f=n(f,o):f=Lv(f,a,o)),s(l,u(f,c))}r.rawArgs=!0;function n(i,a){return i.compile().evaluate(a)}return r},{isTransformFunction:!0}),_te="forEach",Ote=["typed"],Fte=H(_te,Ote,t=>{var{typed:e}=t,r=KC({typed:e}),n=zv({typed:e});function i(o,s,u){if(o.length===0)return r();var l=o[0];if(o.length===1)return r(l);var c=o.length-1,f=o[c];return l&&(l=a(l,u)),f&&(xr(f)||Rl(f)?f=a(f,u):f=Lv(f,s,u)),r(l,n(f,c))}i.rawArgs=!0;function a(o,s){return o.compile().evaluate(s)}return i},{isTransformFunction:!0}),Bte="index",kte=["Index","getMatrixDataType"],Ite=H(Bte,kte,t=>{var{Index:e,getMatrixDataType:r}=t;return function(){for(var i=[],a=0,o=arguments.length;a<o;a++){var s=arguments[a];if(xv(s))s.start--,s.end-=s.step>0?0:2;else if(s&&s.isSet===!0)s=s.map(function(l){return l-1});else if(Bt(s)||We(s))r(s)!=="boolean"&&(s=s.map(function(l){return l-1}));else if(it(s)||Qu(s))s--;else if(ot(s))s=s.toNumber()-1;else if(typeof s!="string")throw new TypeError("Dimension must be an Array, Matrix, number, bigint, string, or Range");i[a]=s}var u=new e;return e.apply(u,i),u}},{isTransformFunction:!0}),Rte="map",Pte=["typed"],$te=H(Rte,Pte,t=>{var{typed:e}=t,r=JC({typed:e}),n=zv({typed:e});function i(a,o,s){if(a.length===0)return r();if(a.length===1)return r(a[0]);var u=a.length-1,l=a.slice(0,u),c=a[u];return l=l.map(d=>f(d,s)),c&&(xr(c)||Rl(c)?c=f(c,s):c=Lv(c,o,s)),r(...l,n(c,u));function f(d,p){return d.compile().evaluate(p)}}return i.rawArgs=!0,i},{isTransformFunction:!0});function Lte(t){return it(t)?t-1:ot(t)?t.minus(1):t}function zte(t){return it(t)||ot(t)}function so(t){if(t.length===2&&Jn(t[0])){t=t.slice();var e=t[1];zte(e)&&(t[1]=Lte(e))}return t}var qte="max",Ute=["typed","config","numeric","larger","isNaN"],Hte=H(qte,Ute,t=>{var{typed:e,config:r,numeric:n,larger:i,isNaN:a}=t,o=aM({typed:e,config:r,numeric:n,larger:i,isNaN:a});return e("max",{"...any":function(u){u=so(u);try{return o.apply(null,u)}catch(l){throw mn(l)}}})},{isTransformFunction:!0}),Vte="mean",Wte=["typed","add","divide"],jte=H(Vte,Wte,t=>{var{typed:e,add:r,divide:n}=t,i=hM({typed:e,add:r,divide:n});return e("mean",{"...any":function(o){o=so(o);try{return i.apply(null,o)}catch(s){throw mn(s)}}})},{isTransformFunction:!0}),Gte="min",Kte=["typed","config","numeric","smaller","isNaN"],Jte=H(Gte,Kte,t=>{var{typed:e,config:r,numeric:n,smaller:i,isNaN:a}=t,o=oM({typed:e,config:r,numeric:n,smaller:i,isNaN:a});return e("min",{"...any":function(u){u=so(u);try{return o.apply(null,u)}catch(l){throw mn(l)}}})},{isTransformFunction:!0}),Yte="range",Zte=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq","add","isPositive"],Xte=H(Yte,Zte,t=>{var{typed:e,config:r,matrix:n,bignumber:i,smaller:a,smallerEq:o,larger:s,largerEq:u,add:l,isPositive:c}=t,f=QC({typed:e,config:r,matrix:n,bignumber:i,smaller:a,smallerEq:o,larger:s,largerEq:u,add:l,isPositive:c});return e("range",{"...any":function(p){var h=p.length-1,m=p[h];return typeof m!="boolean"&&p.push(!0),f.apply(null,p)}})},{isTransformFunction:!0}),Qte="row",ere=["typed","Index","matrix","range"],tre=H(Qte,ere,t=>{var{typed:e,Index:r,matrix:n,range:i}=t,a=eM({typed:e,Index:r,matrix:n,range:i});return e("row",{"...any":function(s){var u=s.length-1,l=s[u];it(l)&&(s[u]=l-1);try{return a.apply(null,s)}catch(c){throw mn(c)}}})},{isTransformFunction:!0}),rre="subset",nre=["typed","matrix","zeros","add"],ire=H(rre,nre,t=>{var{typed:e,matrix:r,zeros:n,add:i}=t,a=tM({typed:e,matrix:r,zeros:n,add:i});return e("subset",{"...any":function(s){try{return a.apply(null,s)}catch(u){throw mn(u)}}})},{isTransformFunction:!0}),are="concat",ore=["typed","matrix","isInteger"],sre=H(are,ore,t=>{var{typed:e,matrix:r,isInteger:n}=t,i=WC({typed:e,matrix:r,isInteger:n});return e("concat",{"...any":function(o){var s=o.length-1,u=o[s];it(u)?o[s]=u-1:ot(u)&&(o[s]=u.minus(1));try{return i.apply(null,o)}catch(l){throw mn(l)}}})},{isTransformFunction:!0}),TA="diff",ure=["typed","matrix","subtract","number","bignumber"],lre=H(TA,ure,t=>{var{typed:e,matrix:r,subtract:n,number:i,bignumber:a}=t,o=YC({typed:e,matrix:r,subtract:n,number:i,bignumber:a});return e(TA,{"...any":function(u){u=so(u);try{return o.apply(null,u)}catch(l){throw mn(l)}}})},{isTransformFunction:!0}),cre="std",fre=["typed","map","sqrt","variance"],dre=H(cre,fre,t=>{var{typed:e,map:r,sqrt:n,variance:i}=t,a=vM({typed:e,map:r,sqrt:n,variance:i});return e("std",{"...any":function(s){s=so(s);try{return a.apply(null,s)}catch(u){throw mn(u)}}})},{isTransformFunction:!0}),_A="sum",pre=["typed","config","add","numeric"],hre=H(_A,pre,t=>{var{typed:e,config:r,add:n,numeric:i}=t,a=dM({typed:e,config:r,add:n,numeric:i});return e(_A,{"...any":function(s){s=so(s);try{return a.apply(null,s)}catch(u){throw mn(u)}}})},{isTransformFunction:!0}),mre="quantileSeq",gre=["typed","bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger","mapSlices"],vre=H(mre,gre,t=>{var{typed:e,bignumber:r,add:n,subtract:i,divide:a,multiply:o,partitionSelect:s,compare:u,isInteger:l,smaller:c,smallerEq:f,larger:d,mapSlices:p}=t,h=gM({typed:e,bignumber:r,add:n,subtract:i,divide:a,multiply:o,partitionSelect:s,compare:u,isInteger:l,smaller:c,smallerEq:f,larger:d,mapSlices:p});return e("quantileSeq",{"Array | Matrix, number | BigNumber":h,"Array | Matrix, number | BigNumber, number":(g,y,N)=>h(g,y,m(N)),"Array | Matrix, number | BigNumber, boolean":h,"Array | Matrix, number | BigNumber, boolean, number":(g,y,N,v)=>h(g,y,N,m(v)),"Array | Matrix, Array | Matrix":h,"Array | Matrix, Array | Matrix, number":(g,y,N)=>h(g,y,m(N)),"Array | Matrix, Array | Matrix, boolean":h,"Array | Matrix, Array | Matrix, boolean, number":(g,y,N,v)=>h(g,y,N,m(v))});function m(g){return so([[],g])[1]}},{isTransformFunction:!0}),OA="cumsum",yre=["typed","add","unaryPlus"],bre=H(OA,yre,t=>{var{typed:e,add:r,unaryPlus:n}=t,i=pM({typed:e,add:r,unaryPlus:n});return e(OA,{"...any":function(o){if(o.length===2&&Jn(o[0])){var s=o[1];it(s)?o[1]=s-1:ot(s)&&(o[1]=s.minus(1))}try{return i.apply(null,o)}catch(u){throw mn(u)}}})},{isTransformFunction:!0}),FA="variance",xre=["typed","add","subtract","multiply","divide","mapSlices","isNaN"],wre=H(FA,xre,t=>{var{typed:e,add:r,subtract:n,multiply:i,divide:a,mapSlices:o,isNaN:s}=t,u=mM({typed:e,add:r,subtract:n,multiply:i,divide:a,mapSlices:o,isNaN:s});return e(FA,{"...any":function(c){c=so(c);try{return u.apply(null,c)}catch(f){throw mn(f)}}})},{isTransformFunction:!0}),BA="print",Nre=["typed","matrix","zeros","add"],Are=H(BA,Nre,t=>{var{typed:e,matrix:r,zeros:n,add:i}=t,a=nM({typed:e,matrix:r,zeros:n,add:i});return e(BA,{"string, Object | Array":function(u,l){return a(o(u),l)},"string, Object | Array, number | Object":function(u,l,c){return a(o(u),l,c)}});function o(s){return s.replace(rM,u=>{var l=u.slice(1).split("."),c=l.map(function(f){return!isNaN(f)&&f.length>0?parseInt(f)-1:f});return"$"+c.join(".")})}},{isTransformFunction:!0}),Sre="and",Dre=["typed","matrix","zeros","add","equalScalar","not","concat"],Ere=H(Sre,Dre,t=>{var{typed:e,matrix:r,equalScalar:n,zeros:i,not:a,concat:o}=t,s=iM({typed:e,matrix:r,equalScalar:n,zeros:i,not:a,concat:o});function u(l,c,f){var d=l[0].compile().evaluate(f);if(!Jn(d)&&!s(d,!0))return!1;var p=l[1].compile().evaluate(f);return s(d,p)}return u.rawArgs=!0,u},{isTransformFunction:!0}),Cre="or",Mre=["typed","matrix","equalScalar","DenseMatrix","concat"],Tre=H(Cre,Mre,t=>{var{typed:e,matrix:r,equalScalar:n,DenseMatrix:i,concat:a}=t,o=VC({typed:e,matrix:r,equalScalar:n,DenseMatrix:i,concat:a});function s(u,l,c){var f=u[0].compile().evaluate(c);if(!Jn(f)&&o(f,!1))return!0;var d=u[1].compile().evaluate(c);return o(f,d)}return s.rawArgs=!0,s},{isTransformFunction:!0}),_re="bitAnd",Ore=["typed","matrix","zeros","add","equalScalar","not","concat"],Fre=H(_re,Ore,t=>{var{typed:e,matrix:r,equalScalar:n,zeros:i,not:a,concat:o}=t,s=UC({typed:e,matrix:r,equalScalar:n,zeros:i,not:a,concat:o});function u(l,c,f){var d=l[0].compile().evaluate(f);if(!Jn(d)){if(isNaN(d))return NaN;if(d===0||d===!1)return 0}var p=l[1].compile().evaluate(f);return s(d,p)}return u.rawArgs=!0,u},{isTransformFunction:!0}),Bre="bitOr",kre=["typed","matrix","equalScalar","DenseMatrix","concat"],Ire=H(Bre,kre,t=>{var{typed:e,matrix:r,equalScalar:n,DenseMatrix:i,concat:a}=t,o=HC({typed:e,matrix:r,equalScalar:n,DenseMatrix:i,concat:a});function s(u,l,c){var f=u[0].compile().evaluate(c);if(!Jn(f)){if(isNaN(f))return NaN;if(f===-1)return-1;if(f===!0)return 1}var d=u[1].compile().evaluate(c);return o(f,d)}return s.rawArgs=!0,s},{isTransformFunction:!0}),Te=E6({config:be}),Rt=O6({}),kA=dee({BigNumber:Te,config:be}),Rre=oee({}),Pre=qee({BigNumber:Te,config:be}),Qo=$6({}),bM=xee({Complex:Rt}),$re=uee({BigNumber:Te,config:be}),Lre=mee({BigNumber:Te,config:be}),zre=vee({BigNumber:Te,config:be}),Cp=V6({}),qre=lee({BigNumber:Te,config:be}),Ure=see({}),Hre=pee({BigNumber:Te,config:be}),Vre=q6({}),xM=_8({}),Wre=yee({BigNumber:Te,config:be}),jre=ote({BigNumber:Te,config:be}),wM=fee({BigNumber:Te,config:be}),Gre=aee({}),Kre=wee({}),ft=oL({Matrix:Cp}),Jre=Yee({BigNumber:Te,config:be}),Yre=hee({BigNumber:Te,config:be}),gg=cee({BigNumber:Te,config:be}),NM=nee({}),Zre=bee({BigNumber:Te,config:be}),Q=E8({BigNumber:Te,Complex:Rt,DenseMatrix:ft,Fraction:Qo}),Xre=Jee({BigNumber:Te,config:be}),gn=wz({typed:Q}),Qre=YH({Complex:Rt,config:be,typed:Q}),ene=eV({BigNumber:Te,typed:Q}),tne=iV({BigNumber:Te,Complex:Rt,config:be,typed:Q}),hr=Dz({typed:Q}),rne=p7({typed:Q}),nne=cV({BigNumber:Te,Complex:Rt,config:be,typed:Q}),ine=mV({typed:Q}),AM=yV({typed:Q}),ane=NV({Complex:Rt,config:be,typed:Q}),one=jL({typed:Q}),sne=o7({typed:Q}),une=YL({typed:Q}),lne=uL({typed:Q}),Mp=OX({typed:Q}),Tp=rz({Complex:Rt,typed:Q}),es=m7({typed:Q}),qv=SV({typed:Q}),cne=MV({BigNumber:Te,typed:Q}),fne=FV({BigNumber:Te,typed:Q}),dne=qz({typed:Q}),mt=IL({config:be,typed:Q}),pne=Bq({typed:Q}),SM=Hz({typed:Q}),hne=Wz({Complex:Rt,typed:Q}),mne=GC({typed:Q}),zl=R7({typed:Q}),gne=KC({typed:Q}),ql=Vq({typed:Q}),Uv=z7({typed:Q}),vne=Yq({format:ql,typed:Q}),Hv=v7({typed:Q}),Nn=cL({typed:Q}),uo=xL({config:be,typed:Q}),ts=EL({config:be,typed:Q}),Pi=ML({equalScalar:mt,typed:Q}),yne=gee({BigNumber:Te,config:be}),bne=PX({Complex:Rt,typed:Q}),xne=E9({Complex:Rt,config:be,typed:Q}),Vv=M9({Complex:Rt,config:be,typed:Q}),rs=JC({typed:Q}),rr=O9({typed:Q}),Od=w7({typed:Q}),ma=HL({typed:Q}),wne=Kq({format:ql,typed:Q}),Nne=pQ({config:be,typed:Q}),Ane=nM({typed:Q}),Sne=mQ({config:be,typed:Q}),Wv=b7({typed:Q}),Dne=RV({BigNumber:Te,typed:Q}),DM=P9({BigNumber:Te,Fraction:Qo,complex:Tp,typed:Q}),_p=zV({typed:Q}),mr=$L({Matrix:Cp,equalScalar:mt,typed:Q}),Ene=mz({typed:Q}),Cne=U9({typed:Q}),Mne=KL({typed:Q}),Zn=Cz({typed:Q}),Tne=VV({typed:Q}),jv=FL({typed:Q}),_ne=XH({Complex:Rt,config:be,typed:Q}),One=oV({BigNumber:Te,typed:Q}),Fne=uV({BigNumber:Te,Complex:Rt,config:be,typed:Q}),An=QL({BigNumber:Te,typed:Q}),Bne=BX({typed:Q}),kne=EV({typed:Q}),Ine=kV({BigNumber:Te,typed:Q}),la=_L({typed:Q}),Rne=tU({typed:Q}),El=ug({isInteger:Nn,typed:Q}),Ce=sz({DenseMatrix:ft,Matrix:Cp,SparseMatrix:mr,typed:Q}),Pne=lz({isZero:Pi,matrix:Ce,typed:Q}),$ne=J7({BigNumber:Te,config:be,matrix:Ce,typed:Q}),Lne=yQ({config:be,log2:Vv,typed:Q}),EM=X7({isInteger:Nn,matrix:Ce,typed:Q}),zne=$V({BigNumber:Te,typed:Q}),qne=UV({typed:Q}),Une=jH({SparseMatrix:mr,typed:Q}),gi=z9({Complex:Rt,config:be,typed:Q}),Hne=cq({typed:Q}),Vne=GV({typed:Q}),Ul=gq({matrix:Ce,typed:Q}),CM=j9({BigNumber:Te,config:be,matrix:Ce,typed:Q}),Ir=xq({BigNumber:Te,config:be,matrix:Ce,typed:Q}),Wne=rV({BigNumber:Te,Complex:Rt,config:be,typed:Q}),jne=dV({Complex:Rt,config:be,typed:Q}),Gne=jq({format:ql,typed:Q}),At=WC({isInteger:Nn,matrix:Ce,typed:Q}),Kne=_V({BigNumber:Te,typed:Q}),Gv=yq({conj:es,transpose:Ul,typed:Q}),MM=F7({DenseMatrix:ft,SparseMatrix:mr,matrix:Ce,typed:Q}),Jne=X9({concat:At,equalScalar:mt,matrix:Ce,multiplyScalar:rr,typed:Q}),Xn=ZU({DenseMatrix:ft,SparseMatrix:mr,concat:At,equalScalar:mt,matrix:Ce,typed:Q}),Hl=az({Fraction:Qo,typed:Q}),lo=U7({BigNumber:Te,DenseMatrix:ft,SparseMatrix:mr,config:be,matrix:Ce,typed:Q}),ns=NL({typed:Q}),Yne=V7({matrix:Ce,multiplyScalar:rr,typed:Q}),Op=fH({DenseMatrix:ft,SparseMatrix:mr,concat:At,config:be,matrix:Ce,typed:Q}),Zne=BU({DenseMatrix:ft,concat:At,equalScalar:mt,matrix:Ce,typed:Q,zeros:Ir}),Xne=zq({isNaN:la,isNumeric:ns,typed:Q}),Qne=I9({BigNumber:Te,concat:At,equalScalar:mt,matrix:Ce,typed:Q}),jn=iU({bignumber:An,fraction:Hl,number:ma}),TM=Uq({config:be,multiplyScalar:rr,numeric:jn,typed:Q}),eie=tq({config:be,matrix:Ce}),tie=IU({DenseMatrix:ft,concat:At,equalScalar:mt,matrix:Ce,typed:Q,zeros:Ir}),ou=cU({BigNumber:Te,DenseMatrix:ft,config:be,equalScalar:mt,matrix:Ce,typed:Q,zeros:Ir}),zr=uq({matrix:Ce,config:be,typed:Q}),on=rH({DenseMatrix:ft,SparseMatrix:mr,bignumber:An,concat:At,config:be,matrix:Ce,typed:Q}),rie=Qq({concat:At,matrix:Ce,typed:Q}),$i=vz({typed:Q}),nie=gH({DenseMatrix:ft,SparseMatrix:mr,concat:At,config:be,equalScalar:mt,matrix:Ce,typed:Q}),iie=S7({DenseMatrix:ft,SparseMatrix:mr,concat:At,matrix:Ce,typed:Q}),bt=mW({DenseMatrix:ft,SparseMatrix:mr,addScalar:hr,concat:At,equalScalar:mt,matrix:Ce,typed:Q}),aie=xV({BigNumber:Te,DenseMatrix:ft,concat:At,equalScalar:mt,matrix:Ce,typed:Q}),oie=UC({concat:At,equalScalar:mt,matrix:Ce,typed:Q}),sie=HC({DenseMatrix:ft,concat:At,equalScalar:mt,matrix:Ce,typed:Q}),uie=f7({DenseMatrix:ft,SparseMatrix:mr,concat:At,matrix:Ce,typed:Q}),_M=Tz({BigNumber:Te,Complex:Rt,Fraction:Qo,config:be,isNegative:uo,matrix:Ce,typed:Q,unaryMinus:$i}),is=zU({BigNumber:Te,DenseMatrix:ft,Fraction:Qo,concat:At,config:be,equalScalar:mt,matrix:Ce,typed:Q}),OM=JU({concat:At,matrix:Ce,typed:Q}),lie=M7({prod:TM,size:zr,typed:Q}),Kv=hH({equal:Xn,typed:Q}),Jt=oU({numeric:jn,typed:Q}),Vl=wU({DenseMatrix:ft,SparseMatrix:mr,concat:At,divideScalar:Jt,equalScalar:mt,matrix:Ce,typed:Q}),cie=eH({compareText:OM,isZero:Pi,typed:Q}),FM=LC({DenseMatrix:ft,config:be,equalScalar:mt,matrix:Ce,round:ou,typed:Q,zeros:Ir}),fie=b9({BigNumber:Te,DenseMatrix:ft,concat:At,config:be,equalScalar:mt,matrix:Ce,round:ou,typed:Q,zeros:Ir}),die=SL({isNumeric:ns,typed:Q}),pie=vW({abs:gn,addScalar:hr,divideScalar:Jt,isPositive:ts,multiplyScalar:rr,smaller:on,sqrt:gi,typed:Q}),BM=EH({DenseMatrix:ft,smaller:on}),Kr=TH({ImmutableDenseMatrix:BM,getMatrixDataType:Uv}),sn=uH({DenseMatrix:ft,SparseMatrix:mr,bignumber:An,concat:At,config:be,matrix:Ce,typed:Q}),Jv=pU({Complex:Rt,config:be,divideScalar:Jt,typeOf:jv,typed:Q}),kM=AU({DenseMatrix:ft,divideScalar:Jt,equalScalar:mt,matrix:Ce,multiplyScalar:rr,subtractScalar:Zn,typed:Q}),Yv=pz({flatten:zl,matrix:Ce,size:zr,typed:Q}),Zv=aM({config:be,isNaN:la,larger:sn,numeric:jn,typed:Q}),hie=oM({config:be,isNaN:la,numeric:jn,smaller:on,typed:Q}),IM=zC({DenseMatrix:ft,concat:At,config:be,equalScalar:mt,matrix:Ce,round:ou,typed:Q,zeros:Ir}),mie=vU({Complex:Rt,config:be,divideScalar:Jt,typed:Q}),gie=VC({DenseMatrix:ft,concat:At,equalScalar:mt,matrix:Ce,typed:Q}),Fp=bH({compare:is,isNaN:la,isNumeric:ns,typed:Q}),Xv=Cj({addScalar:hr,complex:Tp,conj:es,divideScalar:Jt,equal:Xn,identity:lo,isZero:Pi,matrix:Ce,multiplyScalar:rr,sign:DM,sqrt:gi,subtractScalar:Zn,typed:Q,unaryMinus:$i,zeros:Ir}),vie=PU({DenseMatrix:ft,concat:At,equalScalar:mt,matrix:Ce,typed:Q,zeros:Ir}),Zs=aH({DenseMatrix:ft,SparseMatrix:mr,concat:At,config:be,matrix:Ce,typed:Q}),On=tM({add:bt,matrix:Ce,typed:Q,zeros:Ir}),or=V9({DenseMatrix:ft,concat:At,equalScalar:mt,matrix:Ce,subtractScalar:Zn,typed:Q,unaryMinus:$i}),yie=SW({add:bt,matrix:Ce,typed:Q}),Qv=DU({DenseMatrix:ft,divideScalar:Jt,equalScalar:mt,matrix:Ce,multiplyScalar:rr,subtractScalar:Zn,typed:Q}),bie=SQ({addScalar:hr,combinations:Mp,divideScalar:Jt,isInteger:Nn,isNegative:uo,multiplyScalar:rr,typed:Q}),Li=jU({compare:is,typed:Q}),xie=EQ({addScalar:hr,combinations:Mp,isInteger:Nn,isNegative:uo,isPositive:ts,larger:sn,typed:Q}),wie=YC({matrix:Ce,number:ma,subtract:or,typed:Q}),Nie=hX({abs:gn,addScalar:hr,deepEqual:Kv,divideScalar:Jt,multiplyScalar:rr,sqrt:gi,subtractScalar:Zn,typed:Q}),Bp=wW({addScalar:hr,conj:es,multiplyScalar:rr,size:zr,typed:Q}),RM=FH({larger:sn,smaller:on}),PM=EW({Index:Kr,typed:Q}),Aie=K9({BigNumber:Te,add:bt,config:be,equal:Xn,isInteger:Nn,mod:IM,smaller:on,typed:Q,xgcd:CM}),Sie=A9({concat:At,equalScalar:mt,matrix:Ce,typed:Q}),Die=mU({Complex:Rt,config:be,divideScalar:Jt,log:Jv,typed:Q}),Eie=CU({DenseMatrix:ft,divideScalar:Jt,equalScalar:mt,matrix:Ce,multiplyScalar:rr,subtractScalar:Zn,typed:Q}),Cie=fz({flatten:zl,matrix:Ce,size:zr,typed:Q}),Mt=B9({addScalar:hr,dot:Bp,equalScalar:mt,matrix:Ce,multiplyScalar:rr,typed:Q}),Xs=QC({bignumber:An,matrix:Ce,add:bt,config:be,isPositive:ts,larger:sn,largerEq:Op,smaller:on,smallerEq:Zs,typed:Q}),Mie=eM({Index:Kr,matrix:Ce,range:Xs,typed:Q}),Tie=JV({DenseMatrix:ft,Index:Kr,compareNatural:Li,size:zr,subset:On,typed:Q}),_ie=QV({DenseMatrix:ft,Index:Kr,compareNatural:Li,size:zr,subset:On,typed:Q}),Oie=nW({Index:Kr,compareNatural:Li,size:zr,subset:On,typed:Q}),Fie=sW({Index:Kr,compareNatural:Li,size:zr,subset:On,typed:Q}),$M=Zj({SparseMatrix:mr,abs:gn,add:bt,divideScalar:Jt,larger:sn,largerEq:Op,multiply:Mt,subtract:or,transpose:Ul,typed:Q}),Bie=wH({compare:is,compareNatural:Li,matrix:Ce,typed:Q}),e0=bz({config:be,numeric:jn,typed:Q}),LM=TU({DenseMatrix:ft,divideScalar:Jt,equalScalar:mt,matrix:Ce,multiplyScalar:rr,subtractScalar:Zn,typed:Q}),kie=JQ({Complex:Rt,add:bt,multiply:Mt,number:ma,typed:Q}),Iie=iM({concat:At,equalScalar:mt,matrix:Ce,not:Od,typed:Q,zeros:Ir}),t0=Lz({DenseMatrix:ft,config:be,equalScalar:mt,matrix:Ce,round:ou,typed:Q,zeros:Ir}),zM=jC({Index:Kr,matrix:Ce,range:Xs,typed:Q}),Rie=_7({matrix:Ce,multiply:Mt,subtract:or,typed:Q}),qM=VZ({divideScalar:Jt,isZero:Pi,matrix:Ce,multiply:Mt,subtractScalar:Zn,typed:Q,unaryMinus:$i}),UM=Kz({Complex:Rt,DenseMatrix:ft,ceil:t0,equalScalar:mt,floor:FM,matrix:Ce,typed:Q,zeros:Ir}),as=jZ({abs:gn,addScalar:hr,det:qM,divideScalar:Jt,identity:lo,matrix:Ce,multiply:Mt,typed:Q,unaryMinus:$i}),Pie=KZ({Complex:Rt,add:bt,ctranspose:Gv,deepEqual:Kv,divideScalar:Jt,dot:Bp,dotDivide:Vl,equal:Xn,inv:as,matrix:Ce,multiply:Mt,typed:Q}),vi=uU({Complex:Rt,config:be,fraction:Hl,identity:lo,inv:as,matrix:Ce,multiply:Mt,number:ma,typed:Q}),HM=ZV({DenseMatrix:ft,Index:Kr,compareNatural:Li,size:zr,subset:On,typed:Q}),$ie=aW({Index:Kr,compareNatural:Li,size:zr,subset:On,typed:Q}),VM=fW({Index:Kr,concat:At,setDifference:HM,size:zr,subset:On,typed:Q}),WM=IH({FibonacciHeap:RM,addScalar:hr,equalScalar:mt}),Lie=nX({abs:gn,add:bt,identity:lo,inv:as,map:rs,max:Zv,multiply:Mt,size:zr,sqrt:gi,subtract:or,typed:Q}),r0=dM({add:bt,config:be,numeric:jn,typed:Q}),Je=UH({BigNumber:Te,Complex:Rt,Fraction:Qo,abs:gn,addScalar:hr,config:be,divideScalar:Jt,equal:Xn,fix:UM,format:ql,isNumeric:ns,multiplyScalar:rr,number:ma,pow:vi,round:ou,subtractScalar:Zn}),zie=Mee({BigNumber:Te,Unit:Je,config:be}),qie=lte({BigNumber:Te,Unit:Je,config:be}),Uie=Zee({BigNumber:Te,Unit:Je,config:be}),Hie=Oee({BigNumber:Te,Unit:Je,config:be}),Vie=Qee({BigNumber:Te,Unit:Je,config:be}),Wie=Fee({BigNumber:Te,Unit:Je,config:be}),jie=Tee({BigNumber:Te,Unit:Je,config:be}),Gie=pM({add:bt,typed:Q,unaryPlus:e0}),Kie=Vee({BigNumber:Te,Unit:Je,config:be}),Jie=bU({DenseMatrix:ft,SparseMatrix:mr,concat:At,equalScalar:mt,matrix:Ce,pow:vi,typed:Q}),Yie=Cee({BigNumber:Te,Unit:Je,config:be}),Zie=_ee({BigNumber:Te,Unit:Je,config:be}),Xie=tX({abs:gn,add:bt,identity:lo,inv:as,multiply:Mt,typed:Q}),Qie=ete({BigNumber:Te,Unit:Je,config:be}),jM=Nq({addScalar:hr,ceil:t0,conj:es,divideScalar:Jt,dotDivide:Vl,exp:SM,i:bM,log2:Vv,matrix:Ce,multiplyScalar:rr,pow:vi,tau:wM,typed:Q}),n0=IX({BigNumber:Te,Complex:Rt,config:be,multiplyScalar:rr,pow:vi,typed:Q}),eae=Aee({BigNumber:Te,Unit:Je,config:be}),tae=Uee({BigNumber:Te,Unit:Je,config:be}),rae=Sq({conj:es,dotDivide:Vl,fft:jM,typed:Q}),nae=Bee({BigNumber:Te,Unit:Je,config:be}),iae=Ree({BigNumber:Te,Unit:Je,config:be}),aae=rte({BigNumber:Te,Unit:Je,config:be}),oae=Eee({BigNumber:Te,Unit:Je,config:be}),sae=cte({BigNumber:Te,Unit:Je,config:be}),uae=ite({BigNumber:Te,Unit:Je,config:be}),lae=Wee({BigNumber:Te,Unit:Je,config:be}),cae=Iee({BigNumber:Te,Unit:Je,config:be}),fae=gte({BigNumber:Te,Unit:Je,config:be}),dae=pte({BigNumber:Te,Unit:Je,config:be}),pae=vte({BigNumber:Te,Unit:Je,config:be}),hae=Hee({BigNumber:Te,Unit:Je,config:be}),mae=jee({BigNumber:Te,Unit:Je,config:be}),gae=Dee({BigNumber:Te,Unit:Je,config:be}),vae=Gee({BigNumber:Te,Unit:Je,config:be}),yae=ste({BigNumber:Te,Unit:Je,config:be}),bae=lW({compareNatural:Li,typed:Q}),xae=Nee({BigNumber:Te,Unit:Je,config:be}),wae=ute({BigNumber:Te,Unit:Je,config:be}),Nae=Kee({BigNumber:Te,Unit:Je,config:be}),Aae=Xee({BigNumber:Te,Unit:Je,config:be}),Sae=Pee({BigNumber:Te,Unit:Je,config:be}),Dae=KH({Unit:Je,typed:Q}),Rr=dX({divideScalar:Jt,equalScalar:mt,inv:as,matrix:Ce,multiply:Mt,typed:Q}),Eae=Lee({BigNumber:Te,Unit:Je,config:be}),Wl=LX({gamma:n0,typed:Q}),Cae=tte({BigNumber:Te,Unit:Je,config:be}),Mae=dte({BigNumber:Te,Unit:Je,config:be}),Tae=vX({abs:gn,add:bt,addScalar:hr,config:be,divideScalar:Jt,equalScalar:mt,flatten:zl,isNumeric:ns,isZero:Pi,matrix:Ce,multiply:Mt,multiplyScalar:rr,smaller:on,subtract:or,typed:Q}),GM=Dj({DenseMatrix:ft,Spa:WM,SparseMatrix:mr,abs:gn,addScalar:hr,divideScalar:Jt,equalScalar:mt,larger:sn,matrix:Ce,multiplyScalar:rr,subtractScalar:Zn,typed:Q,unaryMinus:$i}),_ae=kee({BigNumber:Te,Unit:Je,config:be}),Oae=fte({BigNumber:Te,Unit:Je,config:be}),Fae=HX({add:bt,divide:Rr,factorial:Wl,isInteger:Nn,isPositive:ts,multiply:Mt,typed:Q}),Bae=WX({factorial:Wl,typed:Q}),kae=hte({BigNumber:Te,Unit:Je,config:be}),Iae=tG({add:bt,cbrt:_M,divide:Rr,equalScalar:mt,im:Hv,isZero:Pi,multiply:Mt,re:Wv,sqrt:gi,subtract:or,typeOf:jv,typed:Q,unaryMinus:$i}),KM=tW({DenseMatrix:ft,Index:Kr,compareNatural:Li,size:zr,subset:On,typed:Q}),Rae=_q({abs:gn,add:bt,bignumber:An,divide:Rr,isNegative:uo,isPositive:ts,larger:sn,map:rs,matrix:Ce,max:Zv,multiply:Mt,smaller:on,subtract:or,typed:Q,unaryMinus:$i}),JM=xQ({bignumber:An,addScalar:hr,combinations:Mp,divideScalar:Jt,factorial:Wl,isInteger:Nn,isNegative:uo,larger:sn,multiplyScalar:rr,number:ma,pow:vi,subtractScalar:Zn,typed:Q}),Pae=VH({Unit:Je,typed:Q}),$ae=NQ({addScalar:hr,isInteger:Nn,isNegative:uo,stirlingS2:JM,typed:Q}),YM=QZ({abs:gn,add:bt,addScalar:hr,atan:AM,bignumber:An,column:zM,complex:Tp,config:be,cos:qv,diag:MM,divideScalar:Jt,dot:Bp,equal:Xn,flatten:zl,im:Hv,inv:as,larger:sn,matrix:Ce,matrixFromColumns:Yv,multiply:Mt,multiplyScalar:rr,number:ma,qr:Xv,re:Wv,reshape:EM,sin:_p,size:zr,smaller:on,sqrt:gi,subtract:or,typed:Q,usolve:Qv,usolveAll:LM}),Lae=zee({BigNumber:Te,Unit:Je,config:be}),zae=nte({BigNumber:Te,Unit:Je,config:be}),qae=qX({divide:Rr,dotDivide:Vl,isNumeric:ns,log:Jv,map:rs,matrix:Ce,multiply:Mt,sum:r0,typed:Q}),ZM=Qj({DenseMatrix:ft,lsolve:kM,lup:GM,matrix:Ce,slu:$M,typed:Q,usolve:Qv}),XM=hM({add:bt,divide:Rr,typed:Q}),Uae=ate({BigNumber:Te,Unit:Je,config:be}),Hae=See({BigNumber:Te,Unit:Je,config:be}),Vae=gM({bignumber:An,add:bt,compare:is,divide:Rr,isInteger:Nn,larger:sn,mapSlices:El,multiply:Mt,partitionSelect:Fp,smaller:on,smallerEq:Zs,subtract:or,typed:Q}),Wae=pW({Index:Kr,concat:At,setIntersect:KM,setSymDifference:VM,size:zr,subset:On,typed:Q}),i0=mM({add:bt,divide:Rr,isNaN:la,mapSlices:El,multiply:Mt,subtract:or,typed:Q}),jae=$ee({BigNumber:Te,Unit:Je,config:be}),QM=NX({add:bt,compare:is,divide:Rr,partitionSelect:Fp,typed:Q}),Gae=TX({add:bt,divide:Rr,matrix:Ce,mean:XM,multiply:Mt,pow:vi,sqrt:gi,subtract:or,sum:r0,typed:Q}),Kae=ZQ({Complex:Rt,add:bt,divide:Rr,matrix:Ce,multiply:Mt,typed:Q}),Jae=SX({abs:gn,map:rs,median:QM,subtract:or,typed:Q}),Yae=vM({map:rs,sqrt:gi,typed:Q,variance:i0}),Zae=$q({BigNumber:Te,Complex:Rt,add:bt,config:be,divide:Rr,equal:Xn,factorial:Wl,gamma:n0,isNegative:uo,multiply:Mt,pi:gg,pow:vi,sin:_p,smallerEq:Zs,subtract:or,typed:Q}),a0=bW({abs:gn,add:bt,conj:es,ctranspose:Gv,eigs:YM,equalScalar:mt,larger:sn,matrix:Ce,multiply:Mt,pow:vi,smaller:on,sqrt:gi,typed:Q}),eT=aq({BigNumber:Te,DenseMatrix:ft,SparseMatrix:mr,addScalar:hr,config:be,cos:qv,matrix:Ce,multiplyScalar:rr,norm:a0,sin:_p,typed:Q,unaryMinus:$i}),Xae=mte({BigNumber:Te,Unit:Je,config:be}),tT=sX({identity:lo,matrix:Ce,multiply:Mt,norm:a0,qr:Xv,subtract:or,typed:Q}),Qae=nq({multiply:Mt,rotationMatrix:eT,typed:Q}),rT=aX({abs:gn,add:bt,concat:At,identity:lo,index:PM,lusolve:ZM,matrix:Ce,matrixFromColumns:Yv,multiply:Mt,range:Xs,schur:tT,subset:On,subtract:or,transpose:Ul,typed:Q}),eoe=lX({matrix:Ce,multiply:Mt,sylvester:rT,transpose:Ul,typed:Q}),su={},jl={},nT={},Xr=TW({mathWithTransform:jl}),uu=QW({Node:Xr}),ga=tj({Node:Xr}),ss=nj({Node:Xr}),iT=sj({Node:Xr}),lu=BW({Node:Xr}),aT=LW({Node:Xr,ResultSet:xM}),oT=qW({Node:Xr}),co=GW({Node:Xr}),sT=aj({Node:Xr}),toe=eee({classes:nT}),o0=sG({math:su,typed:Q}),uT=JW({Node:Xr,typed:Q}),roe=UZ({Chain:o0,typed:Q}),cu=OW({Node:Xr,subset:On}),lT=PW({matrix:Ce,Node:Xr,subset:On}),fu=ZW({Node:Xr,size:zr}),fo=cj({Unit:Je,Node:Xr,math:su}),po=dj({Node:Xr,SymbolNode:fo,math:su}),yi=hj({AccessorNode:cu,ArrayNode:lu,AssignmentNode:lT,BlockNode:aT,ConditionalNode:oT,ConstantNode:co,FunctionAssignmentNode:uT,FunctionNode:po,IndexNode:fu,ObjectNode:uu,OperatorNode:ga,ParenthesisNode:ss,RangeNode:sT,RelationalNode:iT,SymbolNode:fo,config:be,numeric:jn,typed:Q}),cT=qQ({ConstantNode:co,FunctionNode:po,OperatorNode:ga,ParenthesisNode:ss,parse:yi,typed:Q}),s0=RQ({bignumber:An,fraction:Hl,AccessorNode:cu,ArrayNode:lu,ConstantNode:co,FunctionNode:po,IndexNode:fu,ObjectNode:uu,OperatorNode:ga,SymbolNode:fo,config:be,mathWithTransform:jl,matrix:Ce,typed:Q}),noe=gj({parse:yi,typed:Q}),u0=$Q({AccessorNode:cu,ArrayNode:lu,ConstantNode:co,FunctionNode:po,IndexNode:fu,ObjectNode:uu,OperatorNode:ga,ParenthesisNode:ss,SymbolNode:fo,add:bt,divide:Rr,equal:Xn,isZero:Pi,multiply:Mt,parse:yi,pow:vi,subtract:or,typed:Q}),kp=yj({parse:yi,typed:Q}),fT=iG({evaluate:kp}),dT=wj({evaluate:kp,parse:yi}),Ip=BQ({AccessorNode:cu,ArrayNode:lu,ConstantNode:co,FunctionNode:po,IndexNode:fu,ObjectNode:uu,OperatorNode:ga,ParenthesisNode:ss,SymbolNode:fo,equal:Xn,parse:yi,replacer:NM,resolve:cT,simplifyConstant:s0,simplifyCore:u0,typed:Q}),ioe=HQ({OperatorNode:ga,parse:yi,simplify:Ip,typed:Q}),aoe=MQ({parse:yi,typed:Q}),ooe=Aj({Parser:dT,typed:Q}),soe=GQ({bignumber:An,fraction:Hl,AccessorNode:cu,ArrayNode:lu,ConstantNode:co,FunctionNode:po,IndexNode:fu,ObjectNode:uu,OperatorNode:ga,ParenthesisNode:ss,SymbolNode:fo,add:bt,config:be,divide:Rr,equal:Xn,isZero:Pi,mathWithTransform:jl,matrix:Ce,multiply:Mt,parse:yi,pow:vi,simplify:Ip,simplifyConstant:s0,simplifyCore:u0,subtract:or,typed:Q}),uoe=WQ({ConstantNode:co,FunctionNode:po,OperatorNode:ga,ParenthesisNode:ss,SymbolNode:fo,config:be,equal:Xn,isZero:Pi,numeric:jn,parse:yi,simplify:Ip,typed:Q}),loe=zZ({Help:fT,mathWithTransform:jl,typed:Q});dr(su,{e:kA,false:Rre,fineStructure:Pre,i:bM,Infinity:$re,LN10:Lre,LOG10E:zre,NaN:qre,null:Ure,phi:Hre,SQRT1_2:Wre,sackurTetrode:jre,tau:wM,true:Gre,E:kA,version:Kre,efimovFactor:Jre,LN2:Yre,pi:gg,replacer:NM,reviver:toe,SQRT2:Zre,typed:Q,PI:gg,weakMixingAngle:Xre,abs:gn,acos:Qre,acot:ene,acsc:tne,addScalar:hr,arg:rne,asech:nne,asinh:ine,atan:AM,atanh:ane,bigint:one,bitNot:sne,boolean:une,clone:lne,combinations:Mp,complex:Tp,conj:es,cos:qv,cot:cne,csc:fne,cube:dne,equalScalar:mt,erf:pne,exp:SM,expm1:hne,filter:mne,flatten:zl,forEach:gne,format:ql,getMatrixDataType:Uv,hex:vne,im:Hv,isInteger:Nn,isNegative:uo,isPositive:ts,isZero:Pi,LOG2E:yne,lgamma:bne,log10:xne,log2:Vv,map:rs,multiplyScalar:rr,not:Od,number:ma,oct:wne,pickRandom:Nne,print:Ane,random:Sne,re:Wv,sec:Dne,sign:DM,sin:_p,splitUnit:Ene,square:Cne,string:Mne,subtractScalar:Zn,tan:Tne,typeOf:jv,acosh:_ne,acsch:One,asec:Fne,bignumber:An,chain:roe,combinationsWithRep:Bne,cosh:kne,csch:Ine,isNaN:la,isPrime:Rne,mapSlices:El,matrix:Ce,matrixFromFunction:Pne,ones:$ne,randomInt:Lne,reshape:EM,sech:zne,sinh:qne,sparse:Une,sqrt:gi,squeeze:Hne,tanh:Vne,transpose:Ul,xgcd:CM,zeros:Ir,acoth:Wne,asin:jne,bin:Gne,concat:At,coth:Kne,ctranspose:Gv,diag:MM,dotMultiply:Jne,equal:Xn,fraction:Hl,identity:lo,isNumeric:ns,kron:Yne,largerEq:Op,leftShift:Zne,mode:Xne,nthRoot:Qne,numeric:jn,prod:TM,resize:eie,rightArithShift:tie,round:ou,size:zr,smaller:on,to:rie,unaryMinus:$i,unequal:nie,xor:iie,add:bt,atan2:aie,bitAnd:oie,bitOr:sie,bitXor:uie,cbrt:_M,compare:is,compareText:OM,count:lie,deepEqual:Kv,divideScalar:Jt,dotDivide:Vl,equalText:cie,floor:FM,gcd:fie,hasNumericValue:die,hypot:pie,larger:sn,log:Jv,lsolve:kM,matrixFromColumns:Yv,max:Zv,min:hie,mod:IM,nthRoots:mie,or:gie,partitionSelect:Fp,qr:Xv,rightLogShift:vie,smallerEq:Zs,subset:On,subtract:or,trace:yie,usolve:Qv,catalan:bie,compareNatural:Li,composition:xie,diff:wie,distance:Nie,dot:Bp,index:PM,invmod:Aie,lcm:Sie,log1p:Die,lsolveAll:Eie,matrixFromRows:Cie,multiply:Mt,range:Xs,row:Mie,setCartesian:Tie,setDistinct:_ie,setIsSubset:Oie,setPowerset:Fie,slu:$M,sort:Bie,unaryPlus:e0,usolveAll:LM,zpk2tf:kie,and:Iie,ceil:t0,column:zM,cross:Rie,det:qM,fix:UM,inv:as,pinv:Pie,pow:vi,setDifference:HM,setMultiplicity:$ie,setSymDifference:VM,sqrtm:Lie,sum:r0,vacuumImpedance:zie,wienDisplacement:qie,atomicMass:Uie,bohrMagneton:Hie,boltzmann:Vie,conductanceQuantum:Wie,coulomb:jie,cumsum:Gie,deuteronMass:Kie,dotPow:Jie,electricConstant:Yie,elementaryCharge:Zie,expm:Xie,faraday:Qie,fft:jM,gamma:n0,gravitationConstant:eae,hartreeEnergy:tae,ifft:rae,inverseConductanceQuantum:nae,klitzing:iae,loschmidt:aae,magneticConstant:oae,molarMass:sae,molarPlanckConstant:uae,neutronMass:lae,nuclearMagneton:cae,planckCharge:fae,planckLength:dae,planckTemperature:pae,protonMass:hae,quantumOfCirculation:mae,reducedPlanckConstant:gae,rydberg:vae,secondRadiation:yae,setSize:bae,speedOfLight:xae,stefanBoltzmann:wae,thomsonCrossSection:Nae,avogadro:Aae,bohrRadius:Sae,createUnit:Dae,divide:Rr,electronMass:Eae,factorial:Wl,firstRadiation:Cae,gravity:Mae,intersect:Tae,lup:GM,magneticFluxQuantum:_ae,molarMassC12:Oae,multinomial:Fae,parse:yi,permutations:Bae,planckMass:kae,polynomialRoot:Iae,resolve:cT,setIntersect:KM,simplifyConstant:s0,solveODE:Rae,stirlingS2:JM,unit:Pae,bellNumbers:$ae,compile:noe,eigs:YM,fermiCoupling:Lae,gasConstant:zae,kldivergence:qae,lusolve:ZM,mean:XM,molarVolume:Uae,planckConstant:Hae,quantileSeq:Vae,setUnion:Wae,simplifyCore:u0,variance:i0,classicalElectronRadius:jae,evaluate:kp,median:QM,simplify:Ip,symbolicEqual:ioe,corr:Gae,freqz:Kae,leafCount:aoe,mad:Jae,parser:ooe,rationalize:soe,std:Yae,zeta:Zae,derivative:uoe,norm:a0,rotationMatrix:eT,help:loe,planckTime:Xae,schur:tT,rotate:Qae,sylvester:rT,lyap:eoe,config:be});dr(jl,su,{mapSlices:wte({isInteger:Nn,typed:Q}),filter:Tte({typed:Q}),forEach:Fte({typed:Q}),map:$te({typed:Q}),or:Tre({DenseMatrix:ft,concat:At,equalScalar:mt,matrix:Ce,typed:Q}),and:Ere({add:bt,concat:At,equalScalar:mt,matrix:Ce,not:Od,typed:Q,zeros:Ir}),concat:sre({isInteger:Nn,matrix:Ce,typed:Q}),index:Ite({Index:Kr,getMatrixDataType:Uv}),print:Are({add:bt,matrix:Ce,typed:Q,zeros:Ir}),sum:hre({add:bt,config:be,numeric:jn,typed:Q}),bitAnd:Fre({add:bt,concat:At,equalScalar:mt,matrix:Ce,not:Od,typed:Q,zeros:Ir}),min:Jte({config:be,isNaN:la,numeric:jn,smaller:on,typed:Q}),subset:ire({add:bt,matrix:Ce,typed:Q,zeros:Ir}),bitOr:Ire({DenseMatrix:ft,concat:At,equalScalar:mt,matrix:Ce,typed:Q}),cumsum:bre({add:bt,typed:Q,unaryPlus:e0}),diff:lre({bignumber:An,matrix:Ce,number:ma,subtract:or,typed:Q}),max:Hte({config:be,isNaN:la,larger:sn,numeric:jn,typed:Q}),range:Xte({bignumber:An,matrix:Ce,add:bt,config:be,isPositive:ts,larger:sn,largerEq:Op,smaller:on,smallerEq:Zs,typed:Q}),row:tre({Index:Kr,matrix:Ce,range:Xs,typed:Q}),column:Ste({Index:Kr,matrix:Ce,range:Xs,typed:Q}),mean:jte({add:bt,divide:Rr,typed:Q}),quantileSeq:vre({add:bt,bignumber:An,compare:is,divide:Rr,isInteger:Nn,larger:sn,mapSlices:El,multiply:Mt,partitionSelect:Fp,smaller:on,smallerEq:Zs,subtract:or,typed:Q}),variance:wre({add:bt,divide:Rr,isNaN:la,mapSlices:El,multiply:Mt,subtract:or,typed:Q}),std:dre({map:rs,sqrt:gi,typed:Q,variance:i0})});dr(nT,{BigNumber:Te,Complex:Rt,Fraction:Qo,Matrix:Cp,Node:Xr,ObjectNode:uu,OperatorNode:ga,ParenthesisNode:ss,Range:Vre,RelationalNode:iT,ResultSet:xM,ArrayNode:lu,BlockNode:aT,ConditionalNode:oT,ConstantNode:co,DenseMatrix:ft,RangeNode:sT,Chain:o0,FunctionAssignmentNode:uT,SparseMatrix:mr,ImmutableDenseMatrix:BM,Index:Kr,AccessorNode:cu,AssignmentNode:lT,FibonacciHeap:RM,IndexNode:fu,Spa:WM,Unit:Je,SymbolNode:fo,FunctionNode:po,Help:fT,Parser:dT});o0.createProxy(su);const coe={class:"fixed w-full z-50",style:{bottom:"env(safe-area-inset-bottom)"}},foe={class:"absolute left-2 right-2 bottom-0 flex flex-row gap-1 justify-between items-center bg-[var(--bg2)] border-t-1 border-[var(--text)] text-[var(--text)]"},doe={class:"gap-1 flex flex-row"},poe={key:0,class:"absolute boottom-0"},hoe=Er({__name:"RichMarkdownEditor",props:{id:{}},setup(t){const e=t,r=ut(),n=ut(""),i=ut(""),a=ut(!0),o=async()=>{var x,b;try{const S=((x=r.value)==null?void 0:x.state.doc.textBetween(r.value.state.selection.from,r.value.state.selection.to," "))||"";if(S)await navigator.clipboard.writeText(S),console.log("Texte slectionn copi:",S);else{const C=await navigator.clipboard.readText();await((b=r.value)==null?void 0:b.chain().focus().insertContent(C).run()),i.value=C,console.log("Texte coll:",C),i.value=""}}catch(S){console.error("Erreur lors du copier/coller",S)}},s=()=>{var x;return(x=r.value)==null?void 0:x.chain().focus().toggleBold().run()},u=()=>{var x;return(x=r.value)==null?void 0:x.chain().focus().toggleItalic().run()},l=()=>{var x;return(x=r.value)==null?void 0:x.chain().focus().toggleStrike().run()},c=()=>{var x;return(x=r.value)==null?void 0:x.chain().focus().toggleUnderline().run()},f=x=>{var b;return(b=r.value)==null?void 0:b.chain().focus().toggleHeading({level:x}).run()},d=Wr(()=>{var x;return((x=r.value)==null?void 0:x.isActive("bold"))||!1}),p=Wr(()=>{var x;return((x=r.value)==null?void 0:x.isActive("italic"))||!1}),h=Wr(()=>{var x;return((x=r.value)==null?void 0:x.isActive("strike"))||!1}),m=Wr(()=>{var x;return((x=r.value)==null?void 0:x.isActive("underline"))||!1}),g=()=>{r.value&&!r.value.isFocused&&r.value.commands.focus()},y=async()=>{try{const x=await Dt.getNote(e.id);n.value=(x==null?void 0:x.content)||"",console.log(x)}catch(x){console.error("Erreur lors du chargement de la note:",x),n.value="Erreur de chargement."}};function N(){if(!r.value)return;const x=/(\d+(?:\s*[\+\-\*\/]\s*\d+)+)\s*=(?!\d)/g;r.value.state.doc.descendants((b,S)=>{var E;if(!b.isText)return!0;const C=b.text??"";let A;for(;(A=x.exec(C))!==null;){const D=A[1].trim(),M=A[0];try{const F=kp(D),I=`${D}=${F}`;if(C.includes(I))continue;const P=S+A.index,T=P+M.length;(E=r.value)==null||E.commands.command(({tr:$})=>($.insertText(I,P,T),!0))}catch(F){console.warn(`chec de lvaluation "${D}"`,F)}}return!0})}const v=()=>{r.value&&Dt.saveContent(r.value.getHTML(),e.id)},w=Pr.create({name:"mathEvalShortcut",addKeyboardShortcuts(){return{"Mod-Enter":()=>(N(),!0)}}});return er(async()=>{setTimeout(async()=>{await y(),r.value=new dP({extensions:[p$,$$.configure({openOnClick:!1,autolink:!0,linkOnPaste:!0}),h$,m$.configure({placeholder:"Commencez  crire ici..."}),w],content:n.value,onUpdate:()=>{v(),N()}})},500)}),Vd(()=>{var x;(x=r.value)==null||x.destroy()}),(x,b)=>(Pe(),Ve(jt,null,[ce("div",{class:"editor-container",onClick:g},[Nt(Oe(pP),{editor:r.value??void 0,class:"prose h-full"},null,8,["editor"])]),ce("div",coe,[ce("div",foe,[ce("ul",null,[ce("button",{onClick:b[0]||(b[0]=S=>f(1))},"H1"),ce("button",{onClick:b[1]||(b[1]=S=>f(2))},"H2"),ce("button",{onClick:b[2]||(b[2]=S=>f(3))},"H3"),ce("button",{onClick:b[3]||(b[3]=S=>f(4))},"H4")]),ce("ul",doe,[ce("li",null,[ce("button",{onClick:b[4]||(b[4]=S=>a.value=!a.value),class:"color-svg"})]),ce("li",null,[ce("button",{onClick:o,class:"copy-svg"})])]),ce("ul",null,[ce("button",{onClick:s,class:lt({active:d.value})},b[5]||(b[5]=[ce("strong",null,"B",-1)]),2),ce("button",{onClick:u,class:lt({active:p.value})},b[6]||(b[6]=[ce("i",null,"i",-1)]),2),ce("button",{onClick:l,class:lt({active:h.value})},b[7]||(b[7]=[ce("s",null,"S",-1)]),2),ce("button",{onClick:c,class:lt({active:m.value})},b[8]||(b[8]=[ce("u",null,"U",-1)]),2)])])]),Nt(Ig,null,{default:qd(()=>[a.value?(Pe(),Ve("section",poe,b[9]||(b[9]=[ce("div",null,null,-1)]))):Qt("",!0)]),_:1})],64))}}),moe={class:"flex flex-row relative",style:{"padding-top":"calc(1rem + env(safe-area-inset-top)/2)"}},goe={class:"flex flex-row gap-4 absolute right-4"},voe={class:"flex flex-col justify-center items-center h-full lg:mr-[20%] lg:ml-[20%] 2xl:mr-[30%] 2xl:ml-[30%] mt-12 overflow-x-hidden"},yoe=Er({__name:"Edit",setup(t){er(()=>{Lg()});let e;er(async()=>{e=await Jo()});const r=Ko(),n=tF(),i=ut(n.query.pinned=="true"),a=ut(n.query.simply_edit=="true"),o=ut({title:"",content:"",pinned:!1,simply_edit:!1,date:"",id:-1,tags:[]}),s=ut(null),u=()=>{o.value.title&&Dt.saveTitle(o.value.title,Number(n.query.id))};er(async()=>{if(setTimeout(()=>{var f;(f=s.value)==null||f.focus()},200),n.query.id=="new"){console.log("Cration d'une nouvelle note");const f=await Dt.create({id:-1,pinned:!1,simply_edit:!1,title:o.value.title,content:o.value.content,date:Lt.date(),tags:[]});console.log(f.id),o.value.id=f.id||-1,r.push({query:{...n.query,id:f.id}})}const c=await Dt.getNote(Number(n.query.id));c&&(o.value=c)}),_l(async()=>{o.value.title==""&&(console.log("Sauvegarde de la note vide"),Dt.saveTitle("Note sans titre",o.value.id))});const l=()=>{i.value=!i.value,Dt.togle_pinned(Number(n.query.id)),r.push({query:{...n.query,pinned:i.value?"true":"false"}}),Dt.togle_pinned(Number(n.query.id))};return(c,f)=>(Pe(),Ve(jt,null,[ce("header",moe,[ce("div",{class:lt(["left-arrow absolute left-4 cursor-pointer",Oe(e)?"bg-red-600":""]),onClick:f[0]||(f[0]=d=>Oe(r).push("/"))},null,2),ce("div",goe,[ce("div",{class:lt(["pin",Oe(e)?"bg-red-600":""]),style:ia({backgroundImage:i.value?`url(${Oe(vD)})`:`url(${Oe(yD)})`}),onClick:l},null,6)])]),ce("section",voe,[Rs(ce("input",{class:lt(["text-3xl mb-3 font-bold",Oe(e)?"bg-indigo-600":""]),type:"text",placeholder:"Titre...",ref_key:"title",ref:s,"onUpdate:modelValue":f[1]||(f[1]=d=>o.value.title=d),onInput:u},null,34),[[sl,o.value.title]]),Nt(hoe,{class:lt(Oe(e)?"bg-blue-600":""),simplify_text:a.value,id:o.value.id},null,8,["class","simplify_text","id"])])],64))}}),boe=Ii(yoe,[["__scopeId","data-v-cf64d370"]]),pT="0.0.0",xoe={class:"flex flex-row relative",style:{"padding-top":"calc(1rem + env(safe-area-inset-top)/2)"}},woe={class:"flex flex-col justify-start relative items-start min-h-[80VH] ml-4 mr-4 mt-12 overflow-x-hidden"},Noe={key:0,style:{"font-family":"'Montserrat'"},class:"text-2xl mb-1 font-bold"},Aoe=["for"],Soe={class:"switch flex flex-row"},Doe=["id","onUpdate:modelValue"],Eoe={key:2,class:"mb-2 mt-4 opacity-25"},Coe={class:"flex flex-col w-full gap-4"},Moe=Er({__name:"Settings",setup(t){er(()=>{Lg()});let e;er(async()=>{e=await Jo()});const r=ut(!1),n=new $g(qF),i=Ko(),a=Ml({gnraux:[],avanc:[],dev_mode:[]}),o=f=>f=="dev_mode",s=()=>{const f=a.avanc;if(!f)return!1;const d=f.find(p=>p.name==="Mode dveloppeur");return d!=null&&d.active&&a.dev_mode.map(p=>p.active==!1),(d==null?void 0:d.active)??!1},u=async()=>{const f=await Dt.getAll("tags"),d=await Dt.getAll("notes"),h={userAgent:navigator.userAgent,version:pT,with:"blob"},m={tags_lenght:f.length,notes_lenght:d.length},g={tags:f,notes:d,sender_info:h,data_info:m,hash:{tags:await Lt.hash(f),notes:await Lt.hash(d),sender_info:await Lt.hash(h),data_info:await Lt.hash(m)}},y=new Blob([JSON.stringify(g)],{type:"application/json"}),N=URL.createObjectURL(y),v=document.createElement("a");v.href=N,v.download="mes_data_silvernote.snote",document.body.appendChild(v),v.click(),document.body.removeChild(v),URL.revokeObjectURL(N)},l=async f=>{const d=f.target;if(d.files){const p=d.files[0],h=new FileReader;h.onload=async m=>{var y;const g=(y=m.target)==null?void 0:y.result;if(typeof g=="string"){try{const N=JSON.parse(g),v=await Lt.hash(N.tags)===N.hash.tags,w=await Lt.hash(N.notes)===N.hash.notes,x=await Lt.hash(N.sender_info)===N.hash.sender_info,b=await Lt.hash(N.data_info)===N.hash.data_info;if(v?console.log("Hash tags ok !"):console.warn("Hash tags incorect !"),w?console.log("Hash notes ok !"):console.warn("Hash notes incorect !"),x?console.log("Hash sender_info ok !"):console.warn("Hash sender_info incorect !"),b?console.log("Hash data_info ok !"):console.warn("Hash data_info incorect !"),v&&w&&x&&b){console.log("All hash ok !"),console.log("Starting eating data...");try{await Dt.add_notes(N.notes)}catch{throw new Error("Erreur lors de la sync des notes.")}try{await Dt.add_tags(N.tags)}catch{throw new Error("Erreur lors de la sync des tags.")}}else throw new Error(`Hash not valid.

 Hashes:
  Tags: ${await Lt.hash(N.tags)} || ${N.hash.tags}
  Notes: ${await Lt.hash(N.notes)} || ${N.hash.notes}
  Sender Info: ${await Lt.hash(N.sender_info)} || ${N.hash.sender_info}
  Data Info: ${await Lt.hash(N.data_info)} || ${N.hash.data_info}

Validation:
  Tags OK: ${await Lt.hash(N.tags)===N.hash.tags}
  Notes OK: ${await Lt.hash(N.notes)===N.hash.notes}
  Sender Info OK: ${await Lt.hash(N.sender_info)===N.hash.sender_info}
  Data Info OK: ${await Lt.hash(N.data_info)===N.hash.data_info}`)}catch(N){return console.error("Une erreur est survenue, step : parse data / eating data / verify hash :",N)}console.log("Database eat end !")}},h.readAsText(p)}},c=async f=>{f==2?(r.value=!1,await Dt.reset()):r.value=!0};return er(async()=>{Object.assign(a,await n.get())}),Ti(a,async()=>{await n.save(JSON.parse(JSON.stringify(a))),console.log("Parametre modifier : ",Object.values(a))},{deep:!0}),(f,d)=>(Pe(),Ve(jt,null,[ce("header",xoe,[ce("div",{class:lt(["left-arrow absolute left-4",Oe(e)?"bg-red-600":""]),onClick:d[0]||(d[0]=p=>Oe(i).push("/"))},null,2),ce("div",{class:lt(["legal absolute right-4",Oe(e)?"bg-red-600":""]),onClick:d[1]||(d[1]=p=>Oe(i).push("/legale"))},null,2)]),ce("div",woe,[(Pe(!0),Ve(jt,null,aa(Object.values(a),(p,h)=>(Pe(),Ve("section",{class:"flex flex-col w-full gap-4",key:h},[!o(Object.keys(a)[h])||s()?(Pe(),Ve("h1",Noe," Paramtres "+ar(Object.keys(a)[h]),1)):Qt("",!0),!o(Object.keys(a)[h])||s()?(Pe(!0),Ve(jt,{key:1},aa(p,(m,g)=>(Pe(),Ve("label",{class:lt(["cursor-pointer w-full flex justify-between items-center",Oe(e)?"bg-red-600":""]),for:`switch-${h}-${g}`,key:g},[ce("span",null,ar(m.name),1),ce("div",Soe,[ce("div",null,[Rs(ce("input",{id:`switch-${h}-${g}`,type:"checkbox","onUpdate:modelValue":y=>m.active=y},null,8,Doe),[[zO,m.active]]),d[6]||(d[6]=ce("span",{class:"slider"},null,-1))])])],10,Aoe))),128)):Qt("",!0),!o(Object.keys(a)[h])||s()?(Pe(),Ve("hr",Eoe)):Qt("",!0)]))),128)),ce("section",Coe,[d[13]||(d[13]=ce("h1",{style:{"font-family":"'Montserrat'"},class:"text-2xl mb-1 font-bold"}," Paramtres base de donnes ",-1)),ce("label",{class:lt(["cursor-pointer w-full flex justify-between items-center",Oe(e)?"bg-red-600":""])},[d[8]||(d[8]=ce("span",null,"Tlcharger la base de donne",-1)),ce("div",{onClick:u},d[7]||(d[7]=[ce("div",{class:"button","data-tooltip":"Size: 20Mb"},[ce("div",{class:"button-wrapper"},[ce("div",{class:"text"},"Tlcharger"),ce("span",{class:"icon"},[ce("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",role:"img",width:"2em",height:"2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},[ce("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15V3m0 12l-4-4m4 4l4-4M2 17l.621 2.485A2 2 0 0 0 4.561 21h14.878a2 2 0 0 0 1.94-1.515L22 17"})])])])],-1)]))],2),ce("label",{class:lt(["cursor-pointer w-full flex justify-between items-center",Oe(e)?"bg-red-600":""])},[d[10]||(d[10]=ce("span",null,"Tlverser une base de donne",-1)),ce("div",null,[d[9]||(d[9]=ce("span",{class:"border-1 border-[var(--btn)] p-1 rounded"},"Tlversez le fichier",-1)),ce("input",{onChange:d[2]||(d[2]=p=>l(p)),accept:".snote,.json",class:"w-0",type:"file"},null,32)])],2),ce("label",{class:lt(["cursor-pointer w-full flex justify-between items-center",Oe(e)?"bg-red-600":""])},[d[12]||(d[12]=ce("span",null,"Rinitialiser les donnes",-1)),ce("div",{onClick:d[3]||(d[3]=p=>c(1))},d[11]||(d[11]=[qS('<div class="button danger" data-tooltip="Size: 20Mb" data-v-fbfa95eb><div class="button-wrapper" data-v-fbfa95eb><div class="text" data-v-fbfa95eb>Rinitialiser</div><span class="icon" data-v-fbfa95eb><div class="bin-svg" data-v-fbfa95eb></div></span></div></div>',1)]))],2)])]),Nt(gD,{visible:r.value,title:"Confirmation",message:"Voulez-vous vraiment rinitialiser vos dones ?",onConfirm:d[4]||(d[4]=p=>c(2)),onCancel:d[5]||(d[5]=p=>r.value=!1)},null,8,["visible"])],64))}}),Toe=Ii(Moe,[["__scopeId","data-v-fbfa95eb"]]),_oe={class:"flex flex-row relative",style:{"padding-top":"calc(1rem + env(safe-area-inset-top)/2)"}},Ooe=Er({__name:"Account",setup(t){let e;er(async()=>{e=await Jo()});const r=Ko();return(n,i)=>(Pe(),Ve("header",_oe,[ce("div",{class:lt(["left-arrow absolute left-4",Oe(e)?"bg-red-600":""]),onClick:i[0]||(i[0]=a=>Oe(r).push("/"))},null,2)]))}}),Foe={class:"flex flex-row relative",style:{"padding-top":"calc(1rem + env(safe-area-inset-top)/2)"}},Boe={class:"flex justify-start items-center mt-12 ml-4 mr-4"},koe={class:"ml-1"},Ioe={class:"ml-1"},Roe=Er({__name:"Dev",setup(t){let e;er(async()=>{e=await Jo()});const r=Ko(),n=navigator.userAgent,i=navigator.platform,a=navigator.language,o=navigator.onLine;return(s,u)=>(Pe(),Ve(jt,null,[ce("header",Foe,[ce("div",{class:lt(["left-arrow absolute left-4",Oe(e)?"bg-red-600":""]),onClick:u[0]||(u[0]=l=>Oe(r).push("/"))},null,2)]),ce("div",Boe,[ce("section",null,[u[1]||(u[1]=ce("h1",{style:{"font-family":"'Montserrat'"},class:"text-2xl mb-1 font-bold"},"Informations systeme",-1)),ce("ul",koe,[ce("li",null,"Platform = "+ar(Oe(i)),1),ce("li",null,"Lang = "+ar(Oe(a)),1),ce("li",null,"isOnline ? = "+ar(Oe(o)),1),ce("li",null,"userAgent = "+ar(Oe(n)),1)]),u[2]||(u[2]=ce("h1",{style:{"font-family":"'Montserrat'"},class:"text-2xl mb-1 font-bold mt-5"},"Informations app",-1)),ce("ul",Ioe,[ce("li",null,"Version = "+ar(Oe(pT)),1)])])])],64))}}),Poe=[{path:"/",name:"Home",component:dk,props:{},meta:{title:"SilverNote - Home"}},{path:"/edit",name:"Edit",component:boe,props:{},meta:{title:"SilverNote - Edit"}},{path:"/settings",name:"Settings",component:Toe,props:{},meta:{title:"SilverNote - Settings"}},{path:"/account",name:"Account",component:Ooe,props:{},meta:{title:"SilverNote - Account"}},{path:"/dev",name:"dev",component:Roe,props:{},meta:{title:"SilverNote - dev access"}}],$oe=window.location.protocol==="file:",hT=Q3({history:$oe?M3("./"):nD("./"),routes:Poe});hT.beforeEach((t,e,r)=>{const n=t.meta.title;if(n){document.title=n;const i=document.querySelector('meta[property="og:title"]');if(i)i.setAttribute("content",n);else{const a=document.createElement("meta");a.setAttribute("property","og:title"),a.setAttribute("content",n),document.head.appendChild(a)}}r()});const mT=jO(ZO);mT.use(hT);mT.mount("#app");
